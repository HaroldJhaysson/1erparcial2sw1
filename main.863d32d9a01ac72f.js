(self.webpackChunkproject_ParcialSW1=self.webpackChunkproject_ParcialSW1||[]).push([[179],{398:(Yt,D,ft)=>{"use strict";var yt={};function St(s){return"function"==typeof s}ft.r(yt),ft.d(yt,{Manager:()=>P2,Socket:()=>A2,default:()=>OD,io:()=>wC});let Mt=!1;const q={Promise:void 0,set useDeprecatedSynchronousErrorHandling(s){if(s){const i=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+i.stack)}else Mt&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Mt=s},get useDeprecatedSynchronousErrorHandling(){return Mt}};function xt(s){setTimeout(()=>{throw s},0)}const gt={closed:!0,next(s){},error(s){if(q.useDeprecatedSynchronousErrorHandling)throw s;xt(s)},complete(){}},ut=Array.isArray||(s=>s&&"number"==typeof s.length);function J(s){return null!==s&&"object"==typeof s}const L=(()=>{function s(i){return Error.call(this),this.message=i?`${i.length} errors occurred during unsubscription:\n${i.map((r,l)=>`${l+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=i,this}return s.prototype=Object.create(Error.prototype),s})();class G{constructor(i){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,i&&(this._ctorUnsubscribe=!0,this._unsubscribe=i)}unsubscribe(){let i;if(this.closed)return;let{_parentOrParents:r,_ctorUnsubscribe:l,_unsubscribe:c,_subscriptions:d}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof G)r.remove(this);else if(null!==r)for(let m=0;m<r.length;++m)r[m].remove(this);if(St(c)){l&&(this._unsubscribe=void 0);try{c.call(this)}catch(m){i=m instanceof L?st(m.errors):[m]}}if(ut(d)){let m=-1,w=d.length;for(;++m<w;){const C=d[m];if(J(C))try{C.unsubscribe()}catch(E){i=i||[],E instanceof L?i=i.concat(st(E.errors)):i.push(E)}}}if(i)throw new L(i)}add(i){let r=i;if(!i)return G.EMPTY;switch(typeof i){case"function":r=new G(i);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof G)){const d=r;r=new G,r._subscriptions=[d]}break;default:throw new Error("unrecognized teardown "+i+" added to Subscription.")}let{_parentOrParents:l}=r;if(null===l)r._parentOrParents=this;else if(l instanceof G){if(l===this)return r;r._parentOrParents=[l,this]}else{if(-1!==l.indexOf(this))return r;l.push(this)}const c=this._subscriptions;return null===c?this._subscriptions=[r]:c.push(r),r}remove(i){const r=this._subscriptions;if(r){const l=r.indexOf(i);-1!==l&&r.splice(l,1)}}}var s;function st(s){return s.reduce((i,r)=>i.concat(r instanceof L?r.errors:r),[])}G.EMPTY=((s=new G).closed=!0,s);const U="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class kt extends G{constructor(i,r,l){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=gt;break;case 1:if(!i){this.destination=gt;break}if("object"==typeof i){i instanceof kt?(this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)):(this.syncErrorThrowable=!0,this.destination=new he(this,i));break}default:this.syncErrorThrowable=!0,this.destination=new he(this,i,r,l)}}[U](){return this}static create(i,r,l){const c=new kt(i,r,l);return c.syncErrorThrowable=!1,c}next(i){this.isStopped||this._next(i)}error(i){this.isStopped||(this.isStopped=!0,this._error(i))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(i){this.destination.next(i)}_error(i){this.destination.error(i),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:i}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=i,this}}class he extends kt{constructor(i,r,l,c){super(),this._parentSubscriber=i;let d,m=this;St(r)?d=r:r&&(d=r.next,l=r.error,c=r.complete,r!==gt&&(m=Object.create(r),St(m.unsubscribe)&&this.add(m.unsubscribe.bind(m)),m.unsubscribe=this.unsubscribe.bind(this))),this._context=m,this._next=d,this._error=l,this._complete=c}next(i){if(!this.isStopped&&this._next){const{_parentSubscriber:r}=this;q.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,i)&&this.unsubscribe():this.__tryOrUnsub(this._next,i)}}error(i){if(!this.isStopped){const{_parentSubscriber:r}=this,{useDeprecatedSynchronousErrorHandling:l}=q;if(this._error)l&&r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,i),this.unsubscribe()):(this.__tryOrUnsub(this._error,i),this.unsubscribe());else if(r.syncErrorThrowable)l?(r.syncErrorValue=i,r.syncErrorThrown=!0):xt(i),this.unsubscribe();else{if(this.unsubscribe(),l)throw i;xt(i)}}}complete(){if(!this.isStopped){const{_parentSubscriber:i}=this;if(this._complete){const r=()=>this._complete.call(this._context);q.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable?(this.__tryOrSetError(i,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(i,r){try{i.call(this._context,r)}catch(l){if(this.unsubscribe(),q.useDeprecatedSynchronousErrorHandling)throw l;xt(l)}}__tryOrSetError(i,r,l){if(!q.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,l)}catch(c){return q.useDeprecatedSynchronousErrorHandling?(i.syncErrorValue=c,i.syncErrorThrown=!0,!0):(xt(c),!0)}return!1}_unsubscribe(){const{_parentSubscriber:i}=this;this._context=null,this._parentSubscriber=null,i.unsubscribe()}}const Ft="function"==typeof Symbol&&Symbol.observable||"@@observable";function qt(s){return s}let $t=(()=>{class s{constructor(r){this._isScalar=!1,r&&(this._subscribe=r)}lift(r){const l=new s;return l.source=this,l.operator=r,l}subscribe(r,l,c){const{operator:d}=this,m=function W(s,i,r){if(s){if(s instanceof kt)return s;if(s[U])return s[U]()}return s||i||r?new kt(s,i,r):new kt(gt)}(r,l,c);if(m.add(d?d.call(m,this.source):this.source||q.useDeprecatedSynchronousErrorHandling&&!m.syncErrorThrowable?this._subscribe(m):this._trySubscribe(m)),q.useDeprecatedSynchronousErrorHandling&&m.syncErrorThrowable&&(m.syncErrorThrowable=!1,m.syncErrorThrown))throw m.syncErrorValue;return m}_trySubscribe(r){try{return this._subscribe(r)}catch(l){q.useDeprecatedSynchronousErrorHandling&&(r.syncErrorThrown=!0,r.syncErrorValue=l),function Ke(s){for(;s;){const{closed:i,destination:r,isStopped:l}=s;if(i||l)return!1;s=r&&r instanceof kt?r:null}return!0}(r)?r.error(l):console.warn(l)}}forEach(r,l){return new(l=Dn(l))((c,d)=>{let m;m=this.subscribe(w=>{try{r(w)}catch(C){d(C),m&&m.unsubscribe()}},d,c)})}_subscribe(r){const{source:l}=this;return l&&l.subscribe(r)}[Ft](){return this}pipe(...r){return 0===r.length?this:function Nl(s){return 0===s.length?qt:1===s.length?s[0]:function(r){return s.reduce((l,c)=>c(l),r)}}(r)(this)}toPromise(r){return new(r=Dn(r))((l,c)=>{let d;this.subscribe(m=>d=m,m=>c(m),()=>l(d))})}}return s.create=i=>new s(i),s})();function Dn(s){if(s||(s=q.Promise||Promise),!s)throw new Error("no Promise impl found");return s}const Po=(()=>{function s(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return s.prototype=Object.create(Error.prototype),s})();class Al extends G{constructor(i,r){super(),this.subject=i,this.subscriber=r,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const i=this.subject,r=i.observers;if(this.subject=null,!r||0===r.length||i.isStopped||i.closed)return;const l=r.indexOf(this.subscriber);-1!==l&&r.splice(l,1)}}class ye extends kt{constructor(i){super(i),this.destination=i}}let Jt=(()=>{class s extends $t{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[U](){return new ye(this)}lift(r){const l=new Va(this,this);return l.operator=r,l}next(r){if(this.closed)throw new Po;if(!this.isStopped){const{observers:l}=this,c=l.length,d=l.slice();for(let m=0;m<c;m++)d[m].next(r)}}error(r){if(this.closed)throw new Po;this.hasError=!0,this.thrownError=r,this.isStopped=!0;const{observers:l}=this,c=l.length,d=l.slice();for(let m=0;m<c;m++)d[m].error(r);this.observers.length=0}complete(){if(this.closed)throw new Po;this.isStopped=!0;const{observers:r}=this,l=r.length,c=r.slice();for(let d=0;d<l;d++)c[d].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(r){if(this.closed)throw new Po;return super._trySubscribe(r)}_subscribe(r){if(this.closed)throw new Po;return this.hasError?(r.error(this.thrownError),G.EMPTY):this.isStopped?(r.complete(),G.EMPTY):(this.observers.push(r),new Al(this,r))}asObservable(){const r=new $t;return r.source=this,r}}return s.create=(i,r)=>new Va(i,r),s})();class Va extends Jt{constructor(i,r){super(),this.destination=i,this.source=r}next(i){const{destination:r}=this;r&&r.next&&r.next(i)}error(i){const{destination:r}=this;r&&r.error&&this.destination.error(i)}complete(){const{destination:i}=this;i&&i.complete&&this.destination.complete()}_subscribe(i){const{source:r}=this;return r?this.source.subscribe(i):G.EMPTY}}function Pr(s){return s&&"function"==typeof s.schedule}function dn(s,i){return function(l){if("function"!=typeof s)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return l.lift(new qo(s,i))}}class qo{constructor(i,r){this.project=i,this.thisArg=r}call(i,r){return r.subscribe(new eg(i,this.project,this.thisArg))}}class eg extends kt{constructor(i,r,l){super(i),this.project=r,this.count=0,this.thisArg=l||this}_next(i){let r;try{r=this.project.call(this.thisArg,i,this.count++)}catch(l){return void this.destination.error(l)}this.destination.next(r)}}const de=s=>i=>{for(let r=0,l=s.length;r<l&&!i.closed;r++)i.next(s[r]);i.complete()},Ua=function lh(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),ng=s=>s&&"number"==typeof s.length&&"function"!=typeof s;function ig(s){return!!s&&"function"!=typeof s.subscribe&&"function"==typeof s.then}const it=s=>{if(s&&"function"==typeof s[Ft])return(s=>i=>{const r=s[Ft]();if("function"!=typeof r.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(i)})(s);if(ng(s))return de(s);if(ig(s))return(s=>i=>(s.then(r=>{i.closed||(i.next(r),i.complete())},r=>i.error(r)).then(null,xt),i))(s);if(s&&"function"==typeof s[Ua])return(s=>i=>{const r=s[Ua]();for(;;){let l;try{l=r.next()}catch(c){return i.error(c),i}if(l.done){i.complete();break}if(i.next(l.value),i.closed)break}return"function"==typeof r.return&&i.add(()=>{r.return&&r.return()}),i})(s);{const r=`You provided ${J(s)?"an invalid object":`'${s}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(r)}};function Ki(s,i){return new $t(r=>{const l=new G;let c=0;return l.add(i.schedule(function(){c!==s.length?(r.next(s[c++]),r.closed||l.add(this.schedule())):r.complete()})),l})}function ke(s,i){return i?function zn(s,i){if(null!=s){if(function Mi(s){return s&&"function"==typeof s[Ft]}(s))return function Qs(s,i){return new $t(r=>{const l=new G;return l.add(i.schedule(()=>{const c=s[Ft]();l.add(c.subscribe({next(d){l.add(i.schedule(()=>r.next(d)))},error(d){l.add(i.schedule(()=>r.error(d)))},complete(){l.add(i.schedule(()=>r.complete()))}}))})),l})}(s,i);if(ig(s))return function rg(s,i){return new $t(r=>{const l=new G;return l.add(i.schedule(()=>s.then(c=>{l.add(i.schedule(()=>{r.next(c),l.add(i.schedule(()=>r.complete()))}))},c=>{l.add(i.schedule(()=>r.error(c)))}))),l})}(s,i);if(ng(s))return Ki(s,i);if(function mo(s){return s&&"function"==typeof s[Ua]}(s)||"string"==typeof s)return function og(s,i){if(!s)throw new Error("Iterable cannot be null");return new $t(r=>{const l=new G;let c;return l.add(()=>{c&&"function"==typeof c.return&&c.return()}),l.add(i.schedule(()=>{c=s[Ua](),l.add(i.schedule(function(){if(r.closed)return;let d,m;try{const w=c.next();d=w.value,m=w.done}catch(w){return void r.error(w)}m?r.complete():(r.next(d),this.schedule())}))})),l})}(s,i)}throw new TypeError((null!==s&&typeof s||s)+" is not observable")}(s,i):s instanceof $t?s:new $t(it(s))}class ri extends kt{constructor(i){super(),this.parent=i}_next(i){this.parent.notifyNext(i)}_error(i){this.parent.notifyError(i),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class oi extends kt{notifyNext(i){this.destination.next(i)}notifyError(i){this.destination.error(i)}notifyComplete(){this.destination.complete()}}function wn(s,i){if(i.closed)return;if(s instanceof $t)return s.subscribe(i);let r;try{r=it(s)(i)}catch(l){i.error(l)}return r}function pi(s,i,r=Number.POSITIVE_INFINITY){return"function"==typeof i?l=>l.pipe(pi((c,d)=>ke(s(c,d)).pipe(dn((m,w)=>i(c,m,d,w))),r)):("number"==typeof i&&(r=i),l=>l.lift(new En(s,r)))}class En{constructor(i,r=Number.POSITIVE_INFINITY){this.project=i,this.concurrent=r}call(i,r){return r.subscribe(new Ha(i,this.project,this.concurrent))}}class Ha extends oi{constructor(i,r,l=Number.POSITIVE_INFINITY){super(i),this.project=r,this.concurrent=l,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(i){this.active<this.concurrent?this._tryNext(i):this.buffer.push(i)}_tryNext(i){let r;const l=this.index++;try{r=this.project(i,l)}catch(c){return void this.destination.error(c)}this.active++,this._innerSub(r)}_innerSub(i){const r=new ri(this),l=this.destination;l.add(r);const c=wn(i,r);c!==r&&l.add(c)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(i){this.destination.next(i)}notifyComplete(){const i=this.buffer;this.active--,i.length>0?this._next(i.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Ie(s=Number.POSITIVE_INFINITY){return pi(qt,s)}function si(s,i){return i?Ki(s,i):new $t(de(s))}function ai(){return function(i){return i.lift(new Et(i))}}class Et{constructor(i){this.connectable=i}call(i,r){const{connectable:l}=this;l._refCount++;const c=new A(i,l),d=r.subscribe(c);return c.closed||(c.connection=l.connect()),d}}class A extends kt{constructor(i,r){super(i),this.connectable=r}_unsubscribe(){const{connectable:i}=this;if(!i)return void(this.connection=null);this.connectable=null;const r=i._refCount;if(r<=0)return void(this.connection=null);if(i._refCount=r-1,r>1)return void(this.connection=null);const{connection:l}=this,c=i._connection;this.connection=null,c&&(!l||c===l)&&c.unsubscribe()}}class $y extends $t{constructor(i,r){super(),this.source=i,this.subjectFactory=r,this._refCount=0,this._isComplete=!1}_subscribe(i){return this.getSubject().subscribe(i)}getSubject(){const i=this._subject;return(!i||i.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let i=this._connection;return i||(this._isComplete=!1,i=this._connection=new G,i.add(this.source.subscribe(new Rw(this.getSubject(),this))),i.closed&&(this._connection=null,i=G.EMPTY)),i}refCount(){return ai()(this)}}const Fw=(()=>{const s=$y.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:s._subscribe},_isComplete:{value:s._isComplete,writable:!0},getSubject:{value:s.getSubject},connect:{value:s.connect},refCount:{value:s.refCount}}})();class Rw extends ye{constructor(i,r){super(i),this.connectable=r}_error(i){this._unsubscribe(),super._error(i)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const i=this.connectable;if(i){this.connectable=null;const r=i._connection;i._refCount=0,i._subject=null,i._connection=null,r&&r.unsubscribe()}}}class Yy{constructor(i,r){this.subjectFactory=i,this.selector=r}call(i,r){const{selector:l}=this,c=this.subjectFactory(),d=l(c).subscribe(i);return d.add(r.subscribe(c)),d}}function Ga(){return new Jt}function Wy(){return s=>ai()(function qs(s,i){return function(l){let c;if(c="function"==typeof s?s:function(){return s},"function"==typeof i)return l.lift(new Yy(c,i));const d=Object.create(l,Fw);return d.source=l,d.subjectFactory=c,d}}(Ga)(s))}function Vn(s){for(let i in s)if(s[i]===Vn)return i;throw Error("Could not find renamed property on target object.")}function fn(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fn).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const i=s.toString();if(null==i)return""+i;const r=i.indexOf("\n");return-1===r?i:i.substring(0,r)}function Jf(s,i){return null==s||""===s?null===i?"":i:null==i||""===i?s:s+" "+i}const Nt=Vn({__forward_ref__:Vn});function xn(s){return s.__forward_ref__=xn,s.toString=function(){return fn(this())},s}function Ae(s){return function ag(s){return"function"==typeof s&&s.hasOwnProperty(Nt)&&s.__forward_ref__===xn}(s)?s():s}class en extends Error{constructor(i,r){super(function lg(s,i){return`NG0${Math.abs(s)}${i?": "+i:""}`}(i,r)),this.code=i}}function Ce(s){return"string"==typeof s?s:null==s?"":String(s)}function qr(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ce(s)}function Ao(s,i){const r=i?` in ${i}`:"";throw new en(-201,`No provider for ${qr(s)} found${r}`)}function Io(s,i){null==s&&function Zn(s,i,r,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${r} ${l} ${i} <=Actual]`))}(i,s,null,"!=")}function at(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ue(s){return{providers:s.providers||[],imports:s.imports||[]}}function es(s){return uh(s,kl)||uh(s,ns)}function uh(s,i){return s.hasOwnProperty(i)?s[i]:null}function Ac(s){return s&&(s.hasOwnProperty(Il)||s.hasOwnProperty(kc))?s[Il]:null}const kl=Vn({\u0275prov:Vn}),Il=Vn({\u0275inj:Vn}),ns=Vn({ngInjectableDef:Vn}),kc=Vn({ngInjectorDef:Vn});var pe=(()=>((pe=pe||{})[pe.Default=0]="Default",pe[pe.Host=1]="Host",pe[pe.Self=2]="Self",pe[pe.SkipSelf=4]="SkipSelf",pe[pe.Optional=8]="Optional",pe))();let mu;function $a(s){const i=mu;return mu=s,i}function hg(s,i,r){const l=es(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:r&pe.Optional?null:void 0!==i?i:void Ao(fn(s),"Injector")}function Ya(s){return{toString:s}.toString()}var is=(()=>((is=is||{})[is.OnPush=0]="OnPush",is[is.Default=1]="Default",is))(),rs=(()=>(function(s){s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom"}(rs||(rs={})),rs))();const Jy="undefined"!=typeof globalThis&&globalThis,Qy="undefined"!=typeof window&&window,qy="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Fn=Jy||"undefined"!=typeof global&&global||Qy||qy,hh={},Be=[],lr=Vn({\u0275cmp:Vn}),Li=Vn({\u0275dir:Vn}),Ar=Vn({\u0275pipe:Vn}),cg=Vn({\u0275mod:Vn}),ta=Vn({\u0275fac:Vn}),Fi=Vn({__NG_ELEMENT_ID__:Vn});let tv=0;function Ds(s){return Ya(()=>{const r={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===is.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||Be,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||rs.Emulated,id:"c",styles:s.styles||Be,_:null,setInput:null,schemas:s.schemas||null,tView:null},c=s.directives,d=s.features,m=s.pipes;return l.id+=tv++,l.inputs=nv(s.inputs,r),l.outputs=nv(s.outputs),d&&d.forEach(w=>w(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(Ht):null,l.pipeDefs=m?()=>("function"==typeof m?m():m).map(ev):null,l})}function Ht(s){return Gr(s)||function Wa(s){return s[Li]||null}(s)}function ev(s){return function Xa(s){return s[Ar]||null}(s)}const R={};function It(s){return Ya(()=>{const i={type:s.type,bootstrap:s.bootstrap||Be,declarations:s.declarations||Be,imports:s.imports||Be,exports:s.exports||Be,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(R[s.id]=s.type),i})}function nv(s,i){if(null==s)return hh;const r={};for(const l in s)if(s.hasOwnProperty(l)){let c=s[l],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),r[c]=l,i&&(i[c]=d)}return r}const se=Ds;function Gr(s){return s[lr]||null}function os(s,i){const r=s[cg]||null;if(!r&&!0===i)throw new Error(`Type ${fn(s)} does not have '\u0275mod' property.`);return r}function ea(s){return Array.isArray(s)&&"object"==typeof s[1]}function to(s){return Array.isArray(s)&&!0===s[1]}function ch(s){return 0!=(8&s.flags)}function fg(s){return 2==(2&s.flags)}function id(s){return 1==(1&s.flags)}function eo(s){return null!==s.template}function rd(s){return 0!=(512&s[2])}function _n(s,i){return s.hasOwnProperty(ta)?s[ta]:null}class ov{constructor(i,r,l){this.previousValue=i,this.currentValue=r,this.firstChange=l}isFirstChange(){return this.firstChange}}function sv(s){return s.type.prototype.ngOnChanges&&(s.setInput=Zi),Kw}function Kw(){const s=av(this),i=null==s?void 0:s.current;if(i){const r=s.previous;if(r===hh)s.previous=i;else for(let l in i)r[l]=i[l];s.current=null,this.ngOnChanges(i)}}function Zi(s,i,r,l){const c=av(s)||function Zw(s,i){return s[sd]=i}(s,{previous:hh,current:null}),d=c.current||(c.current={}),m=c.previous,w=this.declaredInputs[r],C=m[w];d[w]=new ov(C&&C.currentValue,i,m===hh),s[l]=i}const sd="__ngSimpleChanges__";function av(s){return s[sd]||null}let mi;function xu(){return void 0!==mi?mi:"undefined"!=typeof document?document:void 0}function Rn(s){return!!s.listen}const ss={createRenderer:(s,i)=>xu()};function jn(s){for(;Array.isArray(s);)s=s[0];return s}function pg(s,i){return jn(i[s])}function bo(s,i){return jn(i[s.index])}function gg(s,i){return s.data[i]}function br(s,i){const r=i[s];return ea(r)?r:r[0]}function fh(s){return 128==(128&s[2])}function ae(s,i){return null==i?null:s[i]}function qw(s){s[18]=0}function yg(s,i){s[5]+=i;let r=s,l=s[3];for(;null!==l&&(1===i&&1===r[5]||-1===i&&0===r[5]);)l[5]+=i,r=l,l=l[3]}const we={lFrame:gv(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function wg(){return we.bindingsEnabled}function Tt(){return we.lFrame.lView}function Ze(){return we.lFrame.tView}function ud(s){return we.lFrame.contextLView=s,s[8]}function yi(){let s=xg();for(;null!==s&&64===s.type;)s=s.parent;return s}function xg(){return we.lFrame.currentTNode}function Yn(s,i){const r=we.lFrame;r.currentTNode=s,r.isParent=i}function ia(){return we.lFrame.isParent}function Cg(){we.lFrame.isParent=!1}function Mg(){return we.isInCheckNoChangesMode}function Sg(s){we.isInCheckNoChangesMode=s}function bl(){return we.lFrame.bindingIndex++}function Ka(s){const i=we.lFrame,r=i.bindingIndex;return i.bindingIndex=i.bindingIndex+s,r}function Eg(s,i){const r=we.lFrame;r.bindingIndex=r.bindingRootIndex=s,Tg(i)}function Tg(s){we.lFrame.currentDirectiveIndex=s}function ti(s){const i=we.lFrame.currentDirectiveIndex;return-1===i?null:s[i]}function fd(s){we.lFrame.currentQueryIndex=s}function Rc(s){const i=s[1];return 2===i.type?i.declTNode:1===i.type?s[6]:null}function dv(s,i,r){if(r&pe.SkipSelf){let c=i,d=s;for(;!(c=c.parent,null!==c||r&pe.Host||(c=Rc(d),null===c||(d=d[15],10&c.type))););if(null===c)return!1;i=c,s=d}const l=we.lFrame=pv();return l.currentTNode=i,l.lView=s,!0}function dd(s){const i=pv(),r=s[1];we.lFrame=i,i.currentTNode=r.firstChild,i.lView=s,i.tView=r,i.contextLView=s,i.bindingIndex=r.bindingStartIndex,i.inI18n=!1}function pv(){const s=we.lFrame,i=null===s?null:s.child;return null===i?gv(s):i}function gv(s){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=i),i}function mv(){const s=we.lFrame;return we.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const as=mv;function _g(){const s=mv();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function no(){return we.lFrame.selectedIndex}function Nn(s){we.lFrame.selectedIndex=s}function Wn(){const s=we.lFrame;return gg(s.tView,s.selectedIndex)}function Pg(s,i){for(let r=i.directiveStart,l=i.directiveEnd;r<l;r++){const d=s.data[r].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:E,ngOnDestroy:_}=d;m&&(s.contentHooks||(s.contentHooks=[])).push(-r,m),w&&((s.contentHooks||(s.contentHooks=[])).push(r,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(r,w)),C&&(s.viewHooks||(s.viewHooks=[])).push(-r,C),E&&((s.viewHooks||(s.viewHooks=[])).push(r,E),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(r,E)),null!=_&&(s.destroyHooks||(s.destroyHooks=[])).push(r,_)}}function Cu(s,i,r){wv(s,i,3,r)}function dh(s,i,r,l){(3&s[2])===r&&wv(s,i,r,l)}function pd(s,i){let r=s[2];(3&r)===i&&(r&=2047,r+=1,s[2]=r)}function wv(s,i,r,l){const d=null!=l?l:-1,m=i.length-1;let w=0;for(let C=void 0!==l?65535&s[18]:0;C<m;C++)if("number"==typeof i[C+1]){if(w=i[C],null!=l&&w>=l)break}else i[C]<0&&(s[18]+=65536),(w<d||-1==d)&&(ax(s,r,i,C),s[18]=(4294901760&s[18])+C+2),C++}function ax(s,i,r,l){const c=r[l]<0,d=r[l+1],w=s[c?-r[l]:r[l]];if(c){if(s[2]>>11<s[18]>>16&&(3&s[2])===i){s[2]+=2048;try{d.call(w)}finally{}}}else try{d.call(w)}finally{}}class jc{constructor(i,r,l){this.factory=i,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=l}}function ls(s,i,r){const l=Rn(s);let c=0;for(;c<r.length;){const d=r[c];if("number"==typeof d){if(0!==d)break;c++;const m=r[c++],w=r[c++],C=r[c++];l?s.setAttribute(i,w,C,m):i.setAttributeNS(m,w,C)}else{const m=d,w=r[++c];Ag(m)?l&&s.setProperty(i,m,w):l?s.setAttribute(i,m,w):i.setAttribute(m,w),c++}}return c}function ph(s){return 3===s||4===s||6===s}function Ag(s){return 64===s.charCodeAt(0)}function md(s,i){if(null!==i&&0!==i.length)if(null===s||0===s.length)s=i.slice();else{let r=-1;for(let l=0;l<i.length;l++){const c=i[l];"number"==typeof c?r=c:0===r||yd(s,r,c,null,-1===r||2===r?i[++l]:null)}}return s}function yd(s,i,r,l,c){let d=0,m=s.length;if(-1===i)m=-1;else for(;d<s.length;){const w=s[d++];if("number"==typeof w){if(w===i){m=-1;break}if(w>i){m=d-1;break}}}for(;d<s.length;){const w=s[d];if("number"==typeof w)break;if(w===r){if(null===l)return void(null!==c&&(s[d+1]=c));if(l===s[d+1])return void(s[d+2]=c)}d++,null!==l&&d++,null!==c&&d++}-1!==m&&(s.splice(m,0,i),d=m+1),s.splice(d++,0,r),null!==l&&s.splice(d++,0,l),null!==c&&s.splice(d++,0,c)}function vo(s){return-1!==s}function _s(s){return 32767&s}function Bc(s,i){let r=function ux(s){return s>>16}(s),l=i;for(;r>0;)l=l[15],r--;return l}let Su=!0;function Ns(s){const i=Su;return Su=s,i}let Ig=0;function Ll(s,i){const r=oa(s,i);if(-1!==r)return r;const l=i[1];l.firstCreatePass&&(s.injectorIndex=i.length,ra(l.data,s),ra(i,null),ra(l.blueprint,null));const c=Du(s,i),d=s.injectorIndex;if(vo(c)){const m=_s(c),w=Bc(c,i),C=w[1].data;for(let E=0;E<8;E++)i[d+E]=w[m+E]|C[m+E]}return i[d+8]=c,d}function ra(s,i){s.push(0,0,0,0,0,0,0,0,i)}function oa(s,i){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===i[s.injectorIndex+8]?-1:s.injectorIndex}function Du(s,i){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let r=0,l=null,c=i;for(;null!==c;){const d=c[1],m=d.type;if(l=2===m?d.declTNode:1===m?c[6]:null,null===l)return-1;if(r++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|r<<16}return-1}function vd(s,i,r){!function Cv(s,i,r){let l;"string"==typeof r?l=r.charCodeAt(0)||0:r.hasOwnProperty(Fi)&&(l=r[Fi]),null==l&&(l=r[Fi]=Ig++);const c=255&l;i.data[s+(c>>5)]|=1<<c}(s,i,r)}function Og(s,i,r){if(r&pe.Optional)return s;Ao(i,"NodeInjector")}function sa(s,i,r,l){if(r&pe.Optional&&void 0===l&&(l=null),0==(r&(pe.Self|pe.Host))){const c=s[9],d=$a(void 0);try{return c?c.get(i,l,r&pe.Optional):hg(i,l,r&pe.Optional)}finally{$a(d)}}return Og(l,i,r)}function bg(s,i,r,l=pe.Default,c){if(null!==s){const d=function Dv(s){if("string"==typeof s)return s.charCodeAt(0)||0;const i=s.hasOwnProperty(Fi)?s[Fi]:void 0;return"number"==typeof i?i>=0?255&i:Sv:i}(r);if("function"==typeof d){if(!dv(i,s,l))return l&pe.Host?Og(c,r,l):sa(i,r,l,c);try{const m=d(l);if(null!=m||l&pe.Optional)return m;Ao(r)}finally{as()}}else if("number"==typeof d){let m=null,w=oa(s,i),C=-1,E=l&pe.Host?i[16][6]:null;for((-1===w||l&pe.SkipSelf)&&(C=-1===w?Du(s,i):i[w+8],-1!==C&&aa(l,!1)?(m=i[1],w=_s(C),i=Bc(C,i)):w=-1);-1!==w;){const _=i[1];if(Ev(d,w,_.data)){const k=Fg(w,i,r,m,l,E);if(k!==Lg)return k}C=i[w+8],-1!==C&&aa(l,i[1].data[w+8]===E)&&Ev(d,w,i)?(m=_,w=_s(C),i=Bc(C,i)):w=-1}}}return sa(i,r,l,c)}const Lg={};function Sv(){return new gh(yi(),Tt())}function Fg(s,i,r,l,c,d){const m=i[1],w=m.data[s+8],_=function Eu(s,i,r,l,c){const d=s.providerIndexes,m=i.data,w=1048575&d,C=s.directiveStart,_=d>>20,F=c?w+_:s.directiveEnd;for(let j=l?w:w+_;j<F;j++){const H=m[j];if(j<C&&r===H||j>=C&&H.type===r)return j}if(c){const j=m[C];if(j&&eo(j)&&j.type===r)return C}return null}(w,m,r,null==l?fg(w)&&Su:l!=m&&0!=(3&w.type),c&pe.Host&&d===w);return null!==_?Vc(i,m,_,w):Lg}function Vc(s,i,r,l){let c=s[r];const d=i.data;if(function lx(s){return s instanceof jc}(c)){const m=c;m.resolving&&function jw(s,i){const r=i?`. Dependency path: ${i.join(" > ")} > ${s}`:"";throw new en(-200,`Circular dependency in DI detected for ${s}${r}`)}(qr(d[r]));const w=Ns(m.canSeeViewProviders);m.resolving=!0;const C=m.injectImpl?$a(m.injectImpl):null;dv(s,l,pe.Default);try{c=s[r]=m.factory(void 0,d,s,l),i.firstCreatePass&&r>=l.directiveStart&&function sx(s,i,r){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:d}=i.type.prototype;if(l){const m=sv(i);(r.preOrderHooks||(r.preOrderHooks=[])).push(s,m),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(s,m)}c&&(r.preOrderHooks||(r.preOrderHooks=[])).push(0-s,c),d&&((r.preOrderHooks||(r.preOrderHooks=[])).push(s,d),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(s,d))}(r,d[r],i)}finally{null!==C&&$a(C),Ns(w),m.resolving=!1,as()}}return c}function Ev(s,i,r){return!!(r[i+(s>>5)]&1<<s)}function aa(s,i){return!(s&pe.Self||s&pe.Host&&i)}class gh{constructor(i,r){this._tNode=i,this._lView=r}get(i,r,l){return bg(this._tNode,this._lView,i,l,r)}}const _u="__parameters__";function yh(s,i,r){return Ya(()=>{const l=function jg(s){return function(...r){if(s){const l=s(...r);for(const c in l)this[c]=l[c]}}}(i);function c(...d){if(this instanceof c)return l.apply(this,d),this;const m=new c(...d);return w.annotation=m,w;function w(C,E,_){const k=C.hasOwnProperty(_u)?C[_u]:Object.defineProperty(C,_u,{value:[]})[_u];for(;k.length<=_;)k.push(null);return(k[_]=k[_]||[]).push(m),C}}return r&&(c.prototype=Object.create(r.prototype)),c.prototype.ngMetadataName=s,c.annotationCls=c,c})}class Se{constructor(i,r){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=at({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}toString(){return`InjectionToken ${this._desc}`}}const cx=new Se("AnalyzeForEntryComponents");function wo(s,i){s.forEach(r=>Array.isArray(r)?wo(r,i):i(r))}function Cd(s,i,r){i>=s.length?s.push(r):s.splice(i,0,r)}function vh(s,i){return i>=s.length-1?s.pop():s.splice(i,1)[0]}function qi(s,i,r){let l=Pu(s,i);return l>=0?s[1|l]=r:(l=~l,function mx(s,i,r,l){let c=s.length;if(c==i)s.push(r,l);else if(1===c)s.push(l,s[0]),s[0]=r;else{for(c--,s.push(s[c-1],s[c]);c>i;)s[c]=s[c-2],c--;s[i]=r,s[i+1]=l}}(s,l,i,r)),l}function Md(s,i){const r=Pu(s,i);if(r>=0)return s[1|r]}function Pu(s,i){return function vx(s,i,r){let l=0,c=s.length>>r;for(;c!==l;){const d=l+(c-l>>1),m=s[d<<r];if(i===m)return d<<r;m>i?c=d:l=d+1}return~(c<<r)}(s,i,1)}const zc={},Rl="__NG_DI_FLAG__",wh="ngTempTokenPath",Qa=/\n/gm,$c="__source",xh=Vn({provide:String,useValue:Vn});let ne;function Au(s){const i=ne;return ne=s,i}function Pv(s,i=pe.Default){if(void 0===ne)throw new en(203,"");return null===ne?hg(s,void 0,i):ne.get(s,i&pe.Optional?null:void 0,i)}function Z(s,i=pe.Default){return(function Ic(){return mu}()||Pv)(Ae(s),i)}function xo(s){const i=[];for(let r=0;r<s.length;r++){const l=Ae(s[r]);if(Array.isArray(l)){if(0===l.length)throw new en(900,"");let c,d=pe.Default;for(let m=0;m<l.length;m++){const w=l[m],C=ei(w);"number"==typeof C?-1===C?c=w.token:d|=C:c=w}i.push(Z(c,d))}else i.push(Z(l))}return i}function Yr(s,i){return s[Rl]=i,s.prototype[Rl]=i,s}function ei(s){return s[Rl]}const jl=Yr(yh("Inject",s=>({token:s})),-1),Ro=Yr(yh("Optional"),8),vi=Yr(yh("SkipSelf"),4);let us,er;function Ri(s){var i;return(null===(i=function tr(){if(void 0===us&&(us=null,Fn.trustedTypes))try{us=Fn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return us}())||void 0===i?void 0:i.createHTML(s))||s}function la(s){var i;return(null===(i=function $g(){if(void 0===er&&(er=null,Fn.trustedTypes))try{er=Fn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return er}())||void 0===i?void 0:i.createHTML(s))||s}class tl{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Vl extends tl{getTypeName(){return"HTML"}}class Jc extends tl{getTypeName(){return"Style"}}class ua extends tl{getTypeName(){return"Script"}}class Ch extends tl{getTypeName(){return"URL"}}class Td extends tl{getTypeName(){return"ResourceURL"}}function Bo(s){return s instanceof tl?s.changingThisBreaksApplicationSecurity:s}function gr(s,i){const r=Is(s);if(null!=r&&r!==i){if("ResourceURL"===r&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${r} (see https://g.co/ng/security#xss)`)}return r===i}function Is(s){return s instanceof tl&&s.getTypeName()||null}class Dx{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const r=(new window.DOMParser).parseFromString(Ri(i),"text/html").body;return null===r?this.inertDocumentHelper.getInertBodyElement(i):(r.removeChild(r.firstChild),r)}catch(r){return null}}}class Ex{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const r=this.inertDocument.createElement("html");this.inertDocument.appendChild(r);const l=this.inertDocument.createElement("body");r.appendChild(l)}}getInertBodyElement(i){const r=this.inertDocument.createElement("template");if("content"in r)return r.innerHTML=Ri(i),r;const l=this.inertDocument.createElement("body");return l.innerHTML=Ri(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(i){const r=i.attributes;for(let c=r.length-1;0<c;c--){const m=r.item(c).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&i.removeAttribute(m)}let l=i.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Qc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ha=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Mh(s){return(s=String(s)).match(Qc)||s.match(ha)?s:"unsafe:"+s}function Yg(s){return(s=String(s)).split(",").map(i=>Mh(i.trim())).join(", ")}function Os(s){const i={};for(const r of s.split(","))i[r]=!0;return i}function Sh(...s){const i={};for(const r of s)for(const l in r)r.hasOwnProperty(l)&&(i[l]=!0);return i}const Ov=Os("area,br,col,hr,img,wbr"),Fu=Os("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Wg=Os("rp,rt"),Ad=Sh(Ov,Sh(Fu,Os("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Sh(Wg,Os("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Sh(Wg,Fu)),oe=Os("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),nr=Os("srcset"),Dh=Sh(oe,nr,Os("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Os("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),nl=Os("script,style,template");class fa{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let r=i.firstChild,l=!0;for(;r;)if(r.nodeType===Node.ELEMENT_NODE?l=this.startElement(r):r.nodeType===Node.TEXT_NODE?this.chars(r.nodeValue):this.sanitizedSomething=!0,l&&r.firstChild)r=r.firstChild;else for(;r;){r.nodeType===Node.ELEMENT_NODE&&this.endElement(r);let c=this.checkClobberedElement(r,r.nextSibling);if(c){r=c;break}r=this.checkClobberedElement(r,r.parentNode)}return this.buf.join("")}startElement(i){const r=i.nodeName.toLowerCase();if(!Ad.hasOwnProperty(r))return this.sanitizedSomething=!0,!nl.hasOwnProperty(r);this.buf.push("<"),this.buf.push(r);const l=i.attributes;for(let c=0;c<l.length;c++){const d=l.item(c),m=d.name,w=m.toLowerCase();if(!Dh.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let C=d.value;oe[w]&&(C=Mh(C)),nr[w]&&(C=Yg(C)),this.buf.push(" ",m,'="',Eh(C),'"')}return this.buf.push(">"),!0}endElement(i){const r=i.nodeName.toLowerCase();Ad.hasOwnProperty(r)&&!Ov.hasOwnProperty(r)&&(this.buf.push("</"),this.buf.push(r),this.buf.push(">"))}chars(i){this.buf.push(Eh(i))}checkClobberedElement(i,r){if(r&&(i.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return r}}const mr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qc=/([^\#-~ |!])/g;function Eh(s){return s.replace(/&/g,"&amp;").replace(mr,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(qc,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let kd;function Bn(s,i){let r=null;try{kd=kd||function Xt(s){const i=new Ex(s);return function Iv(){try{return!!(new window.DOMParser).parseFromString(Ri(""),"text/html")}catch(s){return!1}}()?new Dx(i):i}(s);let l=i?String(i):"";r=kd.getInertBodyElement(l);let c=5,d=l;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,l=d,d=r.innerHTML,r=kd.getInertBodyElement(l)}while(l!==d);return Ri((new fa).sanitizeChildren(tf(r)||r))}finally{if(r){const l=tf(r)||r;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function tf(s){return"content"in s&&function Xg(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var An=(()=>((An=An||{})[An.NONE=0]="NONE",An[An.HTML=1]="HTML",An[An.STYLE=2]="STYLE",An[An.SCRIPT=3]="SCRIPT",An[An.URL=4]="URL",An[An.RESOURCE_URL=5]="RESOURCE_URL",An))();function ef(s){const i=function X(){const s=Tt();return s&&s[12]}();return i?la(i.sanitize(An.HTML,s)||""):gr(s,"HTML")?la(Bo(s)):Bn(xu(),Ce(s))}const em="__ngContext__";function Jn(s,i){s[em]=i}function nm(s){const i=function bs(s){return s[em]||null}(s);return i?Array.isArray(i)?i:i.lView:null}function sm(s){return s.ngOriginalError}function IM(s,...i){s.error(...i)}class Ru{constructor(){this._console=console}handleError(i){const r=this._findOriginalError(i),l=function Ax(s){return s&&s.ngErrorLogger||IM}(i);l(this._console,"ERROR",i),r&&l(this._console,"ORIGINAL ERROR",r)}_findOriginalError(i){let r=i&&sm(i);for(;r&&sm(r);)r=sm(r);return r||null}}const Th=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Fn))();function Bd(s){return s.ownerDocument}function da(s){return s instanceof Function?s():s}var Uo=(()=>((Uo=Uo||{})[Uo.Important=1]="Important",Uo[Uo.DashCase=2]="DashCase",Uo))();function Vd(s,i){return undefined(s,i)}function ju(s){const i=s[3];return to(i)?i[3]:i}function of(s){return um(s[13])}function sf(s){return um(s[4])}function um(s){for(;null!==s&&!to(s);)s=s[4];return s}function Nh(s,i,r,l,c){if(null!=l){let d,m=!1;to(l)?d=l:ea(l)&&(m=!0,l=l[0]);const w=jn(l);0===s&&null!==r?null==c?Ph(i,r,w):Bu(i,r,w,c||null,!0):1===s&&null!==r?Bu(i,r,w,c||null,!0):2===s?function Bi(s,i,r){const l=zd(s,i);l&&function RM(s,i,r,l){Rn(s)?s.removeChild(i,r,l):i.removeChild(r)}(s,l,i,r)}(i,w,m):3===s&&i.destroyNode(w),null!=d&&function Lx(s,i,r,l,c){const d=r[7];d!==jn(r)&&Nh(i,s,l,d,c);for(let w=10;w<r.length;w++){const C=r[w];Ih(C[1],C,s,i,l,d)}}(i,s,d,r,c)}}function Ud(s,i,r){if(Rn(s))return s.createElement(i,r);{const l=null!==r?function uv(s){const i=s.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(r):null;return null===l?s.createElement(i):s.createElementNS(l,i)}}function af(s,i){const r=s[9],l=r.indexOf(i),c=i[3];1024&i[2]&&(i[2]&=-1025,yg(c,-1)),r.splice(l,1)}function dm(s,i){if(s.length<=10)return;const r=10+i,l=s[r];if(l){const c=l[17];null!==c&&c!==s&&af(c,l),i>0&&(s[r-1][4]=l[4]);const d=vh(s,10+i);!function LM(s,i){Ih(s,i,i[11],2,null,null),i[0]=null,i[6]=null}(l[1],l);const m=d[19];null!==m&&m.detachView(d[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function _i(s,i){if(!(256&i[2])){const r=i[11];Rn(r)&&r.destroyNode&&Ih(s,i,r,3,null,null),function Ox(s){let i=s[13];if(!i)return lf(s[1],s);for(;i;){let r=null;if(ea(i))r=i[13];else{const l=i[10];l&&(r=l)}if(!r){for(;i&&!i[4]&&i!==s;)ea(i)&&lf(i[1],i),i=i[3];null===i&&(i=s),ea(i)&&lf(i[1],i),r=i&&i[4]}i=r}}(i)}}function lf(s,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function Ho(s,i){let r;if(null!=s&&null!=(r=s.destroyHooks))for(let l=0;l<r.length;l+=2){const c=i[r[l]];if(!(c instanceof jc)){const d=r[l+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const w=c[d[m]],C=d[m+1];try{C.call(w)}finally{}}else try{d.call(c)}finally{}}}}(s,i),function pm(s,i){const r=s.cleanup,l=i[7];let c=-1;if(null!==r)for(let d=0;d<r.length-1;d+=2)if("string"==typeof r[d]){const m=r[d+1],w="function"==typeof m?m(i):jn(i[m]),C=l[c=r[d+2]],E=r[d+3];"boolean"==typeof E?w.removeEventListener(r[d],C,E):E>=0?l[c=E]():l[c=-E].unsubscribe(),d+=2}else{const m=l[c=r[d+1]];r[d].call(m)}if(null!==l){for(let d=c+1;d<l.length;d++)l[d]();i[7]=null}}(s,i),1===i[1].type&&Rn(i[11])&&i[11].destroy();const r=i[17];if(null!==r&&to(i[3])){r!==i[3]&&af(r,i);const l=i[19];null!==l&&l.detachView(s)}}}function Hd(s,i,r){return function $v(s,i,r){let l=i;for(;null!==l&&40&l.type;)l=(i=l).parent;if(null===l)return r[0];if(2&l.flags){const c=s.data[l.directiveStart].encapsulation;if(c===rs.None||c===rs.Emulated)return null}return bo(l,r)}(s,i.parent,r)}function Bu(s,i,r,l,c){Rn(s)?s.insertBefore(i,r,l,c):i.insertBefore(r,l,c)}function Ph(s,i,r){Rn(s)?s.appendChild(i,r):i.appendChild(r)}function Gd(s,i,r,l,c){null!==l?Bu(s,i,r,l,c):Ph(s,i,r)}function zd(s,i){return Rn(s)?s.parentNode(i):i.parentNode}let Ah=function gm(s,i,r){return 40&s.type?bo(s,r):null};function kh(s,i,r,l){const c=Hd(s,l,i),d=i[11],w=function Yv(s,i,r){return Ah(s,i,r)}(l.parent||i[6],l,i);if(null!=c)if(Array.isArray(r))for(let C=0;C<r.length;C++)Gd(d,c,r[C],w,!1);else Gd(d,c,r,w,!1)}function mm(s,i){if(null!==i){const r=i.type;if(3&r)return bo(i,s);if(4&r)return uf(-1,s[i.index]);if(8&r){const l=i.child;if(null!==l)return mm(s,l);{const c=s[i.index];return to(c)?uf(-1,c):jn(c)}}if(32&r)return Vd(i,s)()||jn(s[i.index]);{const l=Xv(s,i);return null!==l?Array.isArray(l)?l[0]:mm(ju(s[16]),l):mm(s,i.next)}}return null}function Xv(s,i){return null!==i?s[16][6].projection[i.projection]:null}function uf(s,i){const r=10+s+1;if(r<i.length){const l=i[r],c=l[1].firstChild;if(null!==c)return mm(l,c)}return i[7]}function wt(s,i,r,l,c,d,m){for(;null!=r;){const w=l[r.index],C=r.type;if(m&&0===i&&(w&&Jn(jn(w),l),r.flags|=4),64!=(64&r.flags))if(8&C)wt(s,i,r.child,l,c,d,!1),Nh(i,s,c,w,d);else if(32&C){const E=Vd(r,l);let _;for(;_=E();)Nh(i,s,c,_,d);Nh(i,s,c,w,d)}else 16&C?$d(s,i,l,r,c,d):Nh(i,s,c,w,d);r=m?r.projectionNext:r.next}}function Ih(s,i,r,l,c,d){wt(r,l,s.firstChild,i,c,d,!1)}function $d(s,i,r,l,c,d){const m=r[16],C=m[6].projection[l.projection];if(Array.isArray(C))for(let E=0;E<C.length;E++)Nh(i,s,c,C[E],d);else wt(s,i,C,m[3],c,d,!0)}function Kv(s,i,r){Rn(s)?s.setAttribute(i,"style",r):i.style.cssText=r}function ym(s,i,r){Rn(s)?""===r?s.removeAttribute(i,"class"):s.setAttribute(i,"class",r):i.className=r}function Zv(s,i,r){let l=s.length;for(;;){const c=s.indexOf(i,r);if(-1===c)return c;if(0===c||s.charCodeAt(c-1)<=32){const d=i.length;if(c+d===l||s.charCodeAt(c+d)<=32)return c}r=c+1}}const Jv="ng-template";function Qv(s,i,r){let l=0;for(;l<s.length;){let c=s[l++];if(r&&"class"===c){if(c=s[l],-1!==Zv(c.toLowerCase(),i,0))return!0}else if(1===c){for(;l<s.length&&"string"==typeof(c=s[l++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function ma(s){return 4===s.type&&s.value!==Jv}function qv(s,i,r){return i===(4!==s.type||r?s.value:Jv)}function t0(s,i,r){let l=4;const c=s.attrs||[],d=function e0(s){for(let i=0;i<s.length;i++)if(ph(s[i]))return i;return s.length}(c);let m=!1;for(let w=0;w<i.length;w++){const C=i[w];if("number"!=typeof C){if(!m)if(4&l){if(l=2|1&l,""!==C&&!qv(s,C,r)||""===C&&1===i.length){if(yr(l))return!1;m=!0}}else{const E=8&l?C:i[++w];if(8&l&&null!==s.attrs){if(!Qv(s.attrs,E,r)){if(yr(l))return!1;m=!0}continue}const k=vm(8&l?"class":C,c,ma(s),r);if(-1===k){if(yr(l))return!1;m=!0;continue}if(""!==E){let F;F=k>d?"":c[k+1].toLowerCase();const j=8&l?F:null;if(j&&-1!==Zv(j,E,0)||2&l&&E!==F){if(yr(l))return!1;m=!0}}}}else{if(!m&&!yr(l)&&!yr(C))return!1;if(m&&yr(C))continue;m=!1,l=C|1&l}}return yr(l)||m}function yr(s){return 0==(1&s)}function vm(s,i,r,l){if(null===i)return-1;let c=0;if(l||!r){let d=!1;for(;c<i.length;){const m=i[c];if(m===s)return c;if(3===m||6===m)d=!0;else{if(1===m||2===m){let w=i[++c];for(;"string"==typeof w;)w=i[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=d?1:2}return-1}return function Rx(s,i){let r=s.indexOf(4);if(r>-1)for(r++;r<s.length;){const l=s[r];if("number"==typeof l)return-1;if(l===i)return r;r++}return-1}(i,s)}function wm(s,i,r=!1){for(let l=0;l<i.length;l++)if(t0(s,i[l],r))return!0;return!1}function n0(s,i){return s?":not("+i.trim()+")":i}function Gt(s){let i=s[0],r=1,l=2,c="",d=!1;for(;r<s.length;){let m=s[r];if("string"==typeof m)if(2&l){const w=s[++r];c+="["+m+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?c+="."+m:4&l&&(c+=" "+m);else""!==c&&!yr(m)&&(i+=n0(d,c),c=""),l=m,d=d||!yr(l);r++}return""!==c&&(i+=n0(d,c)),i}const Ee={};function ir(s){r0(Ze(),Tt(),no()+s,Mg())}function r0(s,i,r,l){if(!l)if(3==(3&i[2])){const d=s.preOrderCheckHooks;null!==d&&Cu(i,d,r)}else{const d=s.preOrderHooks;null!==d&&dh(i,d,0,r)}Nn(r)}function Yd(s,i){return s<<17|i<<2}function Go(s){return s>>17&32767}function xm(s){return 2|s}function il(s){return(131068&s)>>2}function Kd(s,i){return-131069&s|i<<2}function Cm(s){return 1|s}function np(s,i){const r=s.contentQueries;if(null!==r)for(let l=0;l<r.length;l+=2){const c=r[l],d=r[l+1];if(-1!==d){const m=s.data[d];fd(c),m.contentQueries(2,i[d],d)}}}function Gl(s,i,r,l,c,d,m,w,C,E){const _=i.blueprint.slice();return _[0]=c,_[2]=140|l,qw(_),_[3]=_[15]=s,_[8]=r,_[10]=m||s&&s[10],_[11]=w||s&&s[11],_[12]=C||s&&s[12]||null,_[9]=E||s&&s[9]||null,_[6]=d,_[16]=2==i.type?s[16]:_,_}function ol(s,i,r,l,c){let d=s.data[i];if(null===d)d=function rp(s,i,r,l,c){const d=xg(),m=ia(),C=s.data[i]=function $x(s,i,r,l,c,d){return{type:r,index:l,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,r,i,l,c);return null===s.firstChild&&(s.firstChild=C),null!==d&&(m?null==d.child&&null!==C.parent&&(d.child=C):null===d.next&&(d.next=C)),C}(s,i,r,l,c),function Dg(){return we.lFrame.inI18n}()&&(d.flags|=64);else if(64&d.type){d.type=r,d.value=l,d.attrs=c;const m=function na(){const s=we.lFrame,i=s.currentTNode;return s.isParent?i:i.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return Yn(d,!0),d}function zl(s,i,r,l){if(0===r)return-1;const c=i.length;for(let d=0;d<r;d++)i.push(l),s.blueprint.push(l),s.data.push(null);return c}function $l(s,i,r){dd(i);try{const l=s.viewQuery;null!==l&&Zt(1,l,r);const c=s.template;null!==c&&h0(s,i,c,1,r),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&np(s,i),s.staticViewQueries&&Zt(2,s.viewQuery,r);const d=s.components;null!==d&&function ip(s,i){for(let r=0;r<i.length;r++)Hn(s,i[r])}(i,d)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{i[2]&=-5,_g()}}function sl(s,i,r,l){const c=i[2];if(256==(256&c))return;dd(i);const d=Mg();try{qw(i),function fv(s){return we.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==r&&h0(s,i,r,2,l);const m=3==(3&c);if(!d)if(m){const E=s.preOrderCheckHooks;null!==E&&Cu(i,E,null)}else{const E=s.preOrderHooks;null!==E&&dh(i,E,0,null),pd(i,0)}if(function on(s){for(let i=of(s);null!==i;i=sf(i)){if(!i[2])continue;const r=i[9];for(let l=0;l<r.length;l++){const c=r[l],d=c[3];0==(1024&c[2])&&yg(d,1),c[2]|=1024}}}(i),function x0(s){for(let i=of(s);null!==i;i=sf(i))for(let r=10;r<i.length;r++){const l=i[r],c=l[1];fh(l)&&sl(c,l,c.template,l[8])}}(i),null!==s.contentQueries&&np(s,i),!d)if(m){const E=s.contentCheckHooks;null!==E&&Cu(i,E)}else{const E=s.contentHooks;null!==E&&dh(i,E,1),pd(i,1)}!function ep(s,i){const r=s.hostBindingOpCodes;if(null!==r)try{for(let l=0;l<r.length;l++){const c=r[l];if(c<0)Nn(~c);else{const d=c,m=r[++l],w=r[++l];Eg(m,d),w(2,i[d])}}}finally{Nn(-1)}}(s,i);const w=s.components;null!==w&&function Dm(s,i){for(let r=0;r<i.length;r++)C0(s,i[r])}(i,w);const C=s.viewQuery;if(null!==C&&Zt(2,C,l),!d)if(m){const E=s.viewCheckHooks;null!==E&&Cu(i,E)}else{const E=s.viewHooks;null!==E&&dh(i,E,2),pd(i,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),d||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,yg(i[3],-1))}finally{_g()}}function Em(s,i,r,l){const c=i[10],d=!Mg(),m=function mg(s){return 4==(4&s[2])}(i);try{d&&!m&&c.begin&&c.begin(),m&&$l(s,i,l),sl(s,i,r,l)}finally{d&&!m&&c.end&&c.end()}}function h0(s,i,r,l,c){const d=no(),m=2&l;try{Nn(-1),m&&i.length>20&&r0(s,i,20,Mg()),r(l,c)}finally{Nn(d)}}function c0(s,i,r){if(ch(i)){const c=i.directiveEnd;for(let d=i.directiveStart;d<c;d++){const m=s.data[d];m.contentQueries&&m.contentQueries(1,r[d],d)}}}function jh(s,i,r){!wg()||(function Tm(s,i,r,l){const c=r.directiveStart,d=r.directiveEnd;s.firstCreatePass||Ll(r,i),Jn(l,i);const m=r.initialInputs;for(let w=c;w<d;w++){const C=s.data[w],E=eo(C);E&&Zx(i,r,C);const _=Vc(i,s,w,r);Jn(_,i),null!==m&&Jx(0,w-c,_,C,0,m),E&&(br(r.index,i)[8]=_)}}(s,i,r,bo(r,i)),128==(128&r.flags)&&function Wx(s,i,r){const l=r.directiveStart,c=r.directiveEnd,m=r.index,w=function ix(){return we.lFrame.currentDirectiveIndex}();try{Nn(m);for(let C=l;C<c;C++){const E=s.data[C],_=i[C];Tg(C),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&up(E,_)}}finally{Nn(-1),Tg(w)}}(s,i,r))}function gf(s,i,r=bo){const l=i.localNames;if(null!==l){let c=i.index+1;for(let d=0;d<l.length;d+=2){const m=l[d+1],w=-1===m?r(i,s):s[m];s[c++]=w}}}function mf(s){const i=s.tView;return null===i||i.incompleteFirstPass?s.tView=Yl(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):i}function Yl(s,i,r,l,c,d,m,w,C,E){const _=20+l,k=_+c,F=function Bh(s,i){const r=[];for(let l=0;l<i;l++)r.push(l<s?null:Ee);return r}(_,k),j="function"==typeof E?E():E;return F[1]={type:s,blueprint:F,template:r,queries:null,viewQuery:w,declTNode:i,data:F.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:C,consts:j,incompleteFirstPass:!1}}function d0(s,i,r){for(let l in s)if(s.hasOwnProperty(l)){const c=s[l];(r=null===r?{}:r).hasOwnProperty(l)?r[l].push(i,c):r[l]=[i,c]}return r}function Fr(s,i,r,l,c,d,m,w){const C=bo(i,r);let _,E=i.inputs;!w&&null!=E&&(_=E[l])?(pp(s,r,_,l,c),fg(i)&&function p0(s,i){const r=br(i,s);16&r[2]||(r[2]|=64)}(r,i.index)):3&i.type&&(l=function Vh(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),c=null!=m?m(c,i.value||"",l):c,Rn(d)?d.setProperty(C,l,c):Ag(l)||(C.setProperty?C.setProperty(l,c):C[l]=c))}function Wt(s,i,r,l){let c=!1;if(wg()){const d=function hp(s,i,r){const l=s.directiveRegistry;let c=null;if(l)for(let d=0;d<l.length;d++){const m=l[d];wm(r,m.selectors,!1)&&(c||(c=[]),vd(Ll(r,i),s,m.type),eo(m)?(y0(s,r),c.unshift(m)):c.push(m))}return c}(s,i,r),m=null===l?null:{"":-1};if(null!==d){c=!0,Uh(r,s.data.length,d.length);for(let _=0;_<d.length;_++){const k=d[_];k.providersResolver&&k.providersResolver(k)}let w=!1,C=!1,E=zl(s,i,d.length,null);for(let _=0;_<d.length;_++){const k=d[_];r.mergedAttrs=md(r.mergedAttrs,k.hostAttrs),v0(s,r,i,E,k),Kx(E,k,m),null!==k.contentQueries&&(r.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(r.flags|=128);const F=k.type.prototype;!w&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(r.index),w=!0),!C&&(F.ngOnChanges||F.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(r.index),C=!0),E++}!function al(s,i){const l=i.directiveEnd,c=s.data,d=i.attrs,m=[];let w=null,C=null;for(let E=i.directiveStart;E<l;E++){const _=c[E],k=_.inputs,F=null===d||ma(i)?null:w0(k,d);m.push(F),w=d0(k,E,w),C=d0(_.outputs,E,C)}null!==w&&(w.hasOwnProperty("class")&&(i.flags|=16),w.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=m,i.inputs=w,i.outputs=C}(s,r)}m&&function Xx(s,i,r){if(i){const l=s.localNames=[];for(let c=0;c<i.length;c+=2){const d=r[i[c+1]];if(null==d)throw new en(-301,!1);l.push(i[c],d)}}}(r,l,m)}return r.mergedAttrs=md(r.mergedAttrs,r.attrs),c}function ll(s,i,r,l,c,d){const m=d.hostBindings;if(m){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const C=~i.index;(function lp(s){let i=s.length;for(;i>0;){const r=s[--i];if("number"==typeof r&&r<0)return r}return 0})(w)!=C&&w.push(C),w.push(l,c,m)}}function up(s,i){null!==s.hostBindings&&s.hostBindings(1,i)}function y0(s,i){i.flags|=2,(s.components||(s.components=[])).push(i.index)}function Kx(s,i,r){if(r){if(i.exportAs)for(let l=0;l<i.exportAs.length;l++)r[i.exportAs[l]]=s;eo(i)&&(r[""]=s)}}function Uh(s,i,r){s.flags|=1,s.directiveStart=i,s.directiveEnd=i+r,s.providerIndexes=i}function v0(s,i,r,l,c){s.data[l]=c;const d=c.factory||(c.factory=_n(c.type)),m=new jc(d,eo(c),null);s.blueprint[l]=m,r[l]=m,ll(s,i,0,l,zl(s,r,c.hostVars,Ee),c)}function Zx(s,i,r){const l=bo(i,s),c=mf(r),d=s[10],m=Hh(s,Gl(s,c,null,r.onPush?64:16,l,i,d,d.createRenderer(l,r),null,null));s[i.index]=m}function ul(s,i,r,l,c,d){const m=bo(s,i);!function re(s,i,r,l,c,d,m){if(null==d)Rn(s)?s.removeAttribute(i,c,r):i.removeAttribute(c);else{const w=null==m?Ce(d):m(d,l||"",c);Rn(s)?s.setAttribute(i,c,w,r):r?i.setAttributeNS(r,c,w):i.setAttribute(c,w)}}(i[11],m,d,s.value,r,l,c)}function Jx(s,i,r,l,c,d){const m=d[i];if(null!==m){const w=l.setInput;for(let C=0;C<m.length;){const E=m[C++],_=m[C++],k=m[C++];null!==w?l.setInput(r,k,E,_):r[_]=k}}}function w0(s,i){let r=null,l=0;for(;l<i.length;){const c=i[l];if(0!==c)if(5!==c){if("number"==typeof c)break;s.hasOwnProperty(c)&&(null===r&&(r=[]),r.push(c,s[c],i[l+1])),l+=2}else l+=2;else l+=4}return r}function qx(s,i,r,l){return new Array(s,!0,!1,i,null,0,l,r,null,null)}function C0(s,i){const r=br(i,s);if(fh(r)){const l=r[1];80&r[2]?sl(l,r,l.template,r[8]):r[5]>0&&Xn(r)}}function Xn(s){for(let l=of(s);null!==l;l=sf(l))for(let c=10;c<l.length;c++){const d=l[c];if(1024&d[2]){const m=d[1];sl(m,d,m.template,d[8])}else d[5]>0&&Xn(d)}const r=s[1].components;if(null!==r)for(let l=0;l<r.length;l++){const c=br(r[l],s);fh(c)&&c[5]>0&&Xn(c)}}function Hn(s,i){const r=br(i,s),l=r[1];(function t1(s,i){for(let r=i.length;r<s.blueprint.length;r++)i.push(s.blueprint[r])})(l,r),$l(l,r,r[8])}function Hh(s,i){return s[13]?s[14][4]=i:s[13]=i,s[14]=i,i}function Gh(s){for(;s;){s[2]|=64;const i=ju(s);if(rd(s)&&!i)return s;s=i}return null}function cp(s,i,r){const l=i[10];l.begin&&l.begin();try{sl(s,i,s.template,r)}catch(c){throw km(i,c),c}finally{l.end&&l.end()}}function fp(s){!function ao(s){for(let i=0;i<s.components.length;i++){const r=s.components[i],l=nm(r),c=l[1];Em(c,l,c.template,r)}}(s[8])}function Zt(s,i,r){fd(0),i(s,r)}const e1=(()=>Promise.resolve(null))();function Pm(s){return s[7]||(s[7]=[])}function M0(s){return s.cleanup||(s.cleanup=[])}function km(s,i){const r=s[9],l=r?r.get(Ru,null):null;l&&l.handleError(i)}function pp(s,i,r,l,c){for(let d=0;d<r.length;){const m=r[d++],w=r[d++],C=i[m],E=s.data[m];null!==E.setInput?E.setInput(C,c,l,w):C[w]=c}}function hl(s,i,r){const l=pg(i,s);!function Hv(s,i,r){Rn(s)?s.setValue(i,r):i.textContent=r}(s[11],l,r)}function gp(s,i,r){let l=r?s.styles:null,c=r?s.classes:null,d=0;if(null!==i)for(let m=0;m<i.length;m++){const w=i[m];"number"==typeof w?d=w:1==d?c=Jf(c,w):2==d&&(l=Jf(l,w+": "+i[++m]+";"))}r?s.styles=l:s.stylesWithoutHost=l,r?s.classes=c:s.classesWithoutHost=c}const mp=new Se("INJECTOR",-1);class S0{get(i,r=zc){if(r===zc){const l=new Error(`NullInjectorError: No provider for ${fn(i)}!`);throw l.name="NullInjectorError",l}return r}}const wr=new Se("Set Injector scope."),Hu={},dt={};let Gu;function Im(){return void 0===Gu&&(Gu=new S0),Gu}function D0(s,i=null,r=null,l){const c=zh(s,i,r,l);return c._resolveInjectorDefTypes(),c}function zh(s,i=null,r=null,l){return new zu(s,r,i||Im(),l)}class zu{constructor(i,r,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];r&&wo(r,w=>this.processProvider(w,i,r)),wo([i],w=>this.processInjectorType(w,[],d)),this.records.set(mp,Wl(void 0,this));const m=this.records.get(wr);this.scope=null!=m?m.value:null,this.source=c||("object"==typeof i?null:fn(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,r=zc,l=pe.Default){this.assertNotDestroyed();const c=Au(this),d=$a(void 0);try{if(!(l&pe.SkipSelf)){let w=this.records.get(i);if(void 0===w){const C=function zo(s){return"function"==typeof s||"object"==typeof s&&s instanceof Se}(i)&&es(i);w=C&&this.injectableDefInScope(C)?Wl(Om(i),Hu):null,this.records.set(i,w)}if(null!=w)return this.hydrate(i,w)}return(l&pe.Self?Im():this.parent).get(i,r=l&pe.Optional&&r===zc?null:r)}catch(m){if("NullInjectorError"===m.name){if((m[wh]=m[wh]||[]).unshift(fn(i)),c)throw m;return function li(s,i,r,l){const c=s[wh];throw i[$c]&&c.unshift(i[$c]),s.message=function Dd(s,i,r,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let c=fn(i);if(Array.isArray(i))c=i.map(fn).join(" -> ");else if("object"==typeof i){let d=[];for(let m in i)if(i.hasOwnProperty(m)){let w=i[m];d.push(m+":"+("string"==typeof w?JSON.stringify(w):fn(w)))}c=`{${d.join(", ")}}`}return`${r}${l?"("+l+")":""}[${c}]: ${s.replace(Qa,"\n  ")}`}("\n"+s.message,c,r,l),s.ngTokenPath=c,s[wh]=null,s}(m,i,"R3InjectorError",this.source)}throw m}finally{$a(d),Au(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((l,c)=>i.push(fn(c))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new en(205,!1)}processInjectorType(i,r,l){if(!(i=Ae(i)))return!1;let c=Ac(i);const d=null==c&&i.ngModule||void 0,m=void 0===d?i:d,w=-1!==l.indexOf(m);if(void 0!==d&&(c=Ac(d)),null==c)return!1;if(null!=c.imports&&!w){let _;l.push(m);try{wo(c.imports,k=>{this.processInjectorType(k,r,l)&&(void 0===_&&(_=[]),_.push(k))})}finally{}if(void 0!==_)for(let k=0;k<_.length;k++){const{ngModule:F,providers:j}=_[k];wo(j,H=>this.processProvider(H,F,j||Be))}}this.injectorDefTypes.add(m);const C=_n(m)||(()=>new m);this.records.set(m,Wl(C,Hu));const E=c.providers;if(null!=E&&!w){const _=i;wo(E,k=>this.processProvider(k,_,E))}return void 0!==d&&void 0!==i.providers}processProvider(i,r,l){let c=We(i=Ae(i))?i:Ae(i&&i.provide);const d=function bm(s,i,r){return wi(s)?Wl(void 0,s.useValue):Wl(function lo(s,i,r){let l;if(We(s)){const c=Ae(s);return _n(c)||Om(c)}if(wi(s))l=()=>Ae(s.useValue);else if(function Pi(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...xo(s.deps||[]));else if(function r1(s){return!(!s||!s.useExisting)}(s))l=()=>Z(Ae(s.useExisting));else{const c=Ae(s&&(s.useClass||s.provide));if(!function o1(s){return!!s.deps}(s))return _n(c)||Om(c);l=()=>new c(...xo(s.deps))}return l}(s),Hu)}(i);if(We(i)||!0!==i.multi)this.records.get(c);else{let m=this.records.get(c);m||(m=Wl(void 0,Hu,!0),m.factory=()=>xo(m.multi),this.records.set(c,m)),c=i,m.multi.push(i)}this.records.set(c,d)}hydrate(i,r){return r.value===Hu&&(r.value=dt,r.value=r.factory()),"object"==typeof r.value&&r.value&&function s1(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(r.value)&&this.onDestroy.add(r.value),r.value}injectableDefInScope(i){if(!i.providedIn)return!1;const r=Ae(i.providedIn);return"string"==typeof r?"any"===r||r===this.scope:this.injectorDefTypes.has(r)}}function Om(s){const i=es(s),r=null!==i?i.factory:_n(s);if(null!==r)return r;if(s instanceof Se)throw new en(204,!1);if(s instanceof Function)return function i1(s){const i=s.length;if(i>0)throw function Uc(s,i){const r=[];for(let l=0;l<s;l++)r.push(i);return r}(i,"?"),new en(204,!1);const r=function qf(s){const i=s&&(s[kl]||s[ns]);if(i){const r=function ie(s){if(s.hasOwnProperty("name"))return s.name;const i=(""+s).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${r}" class.`),i}return null}(s);return null!==r?()=>r.factory(s):()=>new s}(s);throw new en(204,!1)}function Wl(s,i,r=!1){return{factory:s,value:i,multi:r?[]:void 0}}function wi(s){return null!==s&&"object"==typeof s&&xh in s}function We(s){return"function"==typeof s}let mn=(()=>{class s{static create(r,l){var c;if(Array.isArray(r))return D0({name:""},l,r,"");{const d=null!==(c=r.name)&&void 0!==c?c:"";return D0({name:d},r.parent,r.providers,d)}}}return s.THROW_IF_NOT_FOUND=zc,s.NULL=new S0,s.\u0275prov=at({token:s,providedIn:"any",factory:()=>Z(mp)}),s.__NG_ELEMENT_ID__=-1,s})();function xp(s,i){Pg(nm(s)[1],yi())}let Rr=null;function $o(){if(!Rr){const s=Fn.Symbol;if(s&&s.iterator)Rr=s.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let r=0;r<i.length;++r){const l=i[r];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Rr=l)}}}return Rr}function xr(s){return!!fl(s)&&(Array.isArray(s)||!(s instanceof Map)&&$o()in s)}function fl(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Cr(s,i,r){return!Object.is(s[i],r)&&(s[i]=r,!0)}function Xr(s,i,r,l){const c=Tt();return Cr(c,bl(),i)&&(Ze(),ul(Wn(),c,s,i,r,l)),Xr}function Mr(s,i,r,l,c,d,m,w){const C=Tt(),E=Ze(),_=s+20,k=E.firstCreatePass?function Zh(s,i,r,l,c,d,m,w,C){const E=i.consts,_=ol(i,s,4,m||null,ae(E,w));Wt(i,r,_,ae(E,C)),Pg(i,_);const k=_.tViews=Yl(2,_,l,c,d,i.directiveRegistry,i.pipeRegistry,null,i.schemas,E);return null!==i.queries&&(i.queries.template(i,_),k.queries=i.queries.embeddedTView(_)),_}(_,E,C,i,r,l,c,d,m):E.data[_];Yn(k,!1);const F=C[11].createComment("");kh(E,C,F,k),Jn(F,C),Hh(C,C[_]=qx(F,C,F,k)),id(k)&&jh(E,C,k),null!=m&&gf(C,k,w)}function Dt(s,i=pe.Default){const r=Tt();return null===r?Z(s,i):bg(yi(),r,Ae(s),i)}function Tp(){throw new Error("invalid")}function Sr(s,i,r){const l=Tt();return Cr(l,bl(),i)&&Fr(Ze(),Wn(),l,s,i,l[11],r,!1),Sr}function wa(s,i,r,l,c){const m=c?"class":"style";pp(s,r,i.inputs[m],m,l)}function Ui(s,i,r,l){const c=Tt(),d=Ze(),m=20+s,w=c[11],C=c[m]=Ud(w,i,function vv(){return we.lFrame.currentNamespace}()),E=d.firstCreatePass?function Cf(s,i,r,l,c,d,m){const w=i.consts,E=ol(i,s,2,c,ae(w,d));return Wt(i,r,E,ae(w,m)),null!==E.attrs&&gp(E,E.attrs,!1),null!==E.mergedAttrs&&gp(E,E.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,E),E}(m,d,c,0,i,r,l):d.data[m];Yn(E,!0);const _=E.mergedAttrs;null!==_&&ls(w,C,_);const k=E.classes;null!==k&&ym(w,C,k);const F=E.styles;null!==F&&Kv(w,C,F),64!=(64&E.flags)&&kh(d,c,C,E),0===function cv(){return we.lFrame.elementDepthCount}()&&Jn(C,c),function vg(){we.lFrame.elementDepthCount++}(),id(E)&&(jh(d,c,E),c0(d,E,c)),null!==l&&gf(c,E)}function Hi(){let s=yi();ia()?Cg():(s=s.parent,Yn(s,!1));const i=s;!function yM(){we.lFrame.elementDepthCount--}();const r=Ze();r.firstCreatePass&&(Pg(r,s),ch(s)&&r.queries.elementEnd(s)),null!=i.classesWithoutHost&&function xv(s){return 0!=(16&s.flags)}(i)&&wa(r,i,Tt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function wM(s){return 0!=(32&s.flags)}(i)&&wa(r,i,Tt(),i.stylesWithoutHost,!1)}function bt(s,i,r,l){Ui(s,i,r,l),Hi()}function Mf(s,i,r){const l=Tt(),c=Ze(),d=s+20,m=c.firstCreatePass?function D1(s,i,r,l,c){const d=i.consts,m=ae(d,l),w=ol(i,s,8,"ng-container",m);return null!==m&&gp(w,m,!0),Wt(i,r,w,ae(d,c)),null!==i.queries&&i.queries.elementStart(i,w),w}(d,c,l,i,r):c.data[d];Yn(m,!0);const w=l[d]=l[11].createComment("");kh(c,l,w,m),Jn(w,l),id(m)&&(jh(c,l,m),c0(c,m,l)),null!=r&&gf(l,m)}function _p(){let s=yi();const i=Ze();ia()?Cg():(s=s.parent,Yn(s,!1)),i.firstCreatePass&&(Pg(i,s),ch(s)&&i.queries.elementEnd(s))}function F0(){return Tt()}function Sf(s){return!!s&&"function"==typeof s.then}const xa=function R0(s){return!!s&&"function"==typeof s.subscribe};function ki(s,i,r,l){const c=Tt(),d=Ze(),m=yi();return function j0(s,i,r,l,c,d,m,w){const C=id(l),_=s.firstCreatePass&&M0(s),k=i[8],F=Pm(i);let j=!0;if(3&l.type||w){const pt=bo(l,i),vt=w?w(pt):pt,ct=F.length,Ot=w?Ut=>w(jn(Ut[l.index])):l.index;if(Rn(r)){let Ut=null;if(!w&&C&&(Ut=function T1(s,i,r,l){const c=s.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const m=c[d];if(m===r&&c[d+1]===l){const w=i[7],C=c[d+2];return w.length>C?w[C]:null}"string"==typeof m&&(d+=2)}return null}(s,i,c,l.index)),null!==Ut)(Ut.__ngLastListenerFn__||Ut).__ngNextListenerFn__=d,Ut.__ngLastListenerFn__=d,j=!1;else{d=Ca(l,i,k,d,!1);const je=r.listen(vt,c,d);F.push(d,je),_&&_.push(c,Ot,ct,ct+1)}}else d=Ca(l,i,k,d,!0),vt.addEventListener(c,d,m),F.push(d),_&&_.push(c,Ot,ct,m)}else d=Ca(l,i,k,d,!1);const H=l.outputs;let et;if(j&&null!==H&&(et=H[c])){const pt=et.length;if(pt)for(let vt=0;vt<pt;vt+=2){const Oi=i[et[vt]][et[vt+1]].subscribe(d),Wi=F.length;F.push(d,Oi),_&&_.push(c,l.index,Wi,-(Wi+1))}}}(d,c,c[11],m,s,i,!!r,l),ki}function B0(s,i,r,l){try{return!1!==r(l)}catch(c){return km(s,c),!1}}function Ca(s,i,r,l,c){return function d(m){if(m===Function)return l;const w=2&s.flags?br(s.index,i):i;0==(32&i[2])&&Gh(w);let C=B0(i,0,l,m),E=d.__ngNextListenerFn__;for(;E;)C=B0(i,0,E,m)&&C,E=E.__ngNextListenerFn__;return c&&!1===C&&(m.preventDefault(),m.returnValue=!1),C}}function ho(s=1){return function rx(s){return(we.lFrame.contextLView=function yv(s,i){for(;s>0;)i=i[15],s--;return i}(s,we.lFrame.contextLView))[8]}(s)}function fs(s,i,r,l,c){const d=s[r+1],m=null===i;let w=l?Go(d):il(d),C=!1;for(;0!==w&&(!1===C||m);){const _=s[w+1];Qh(s[w],i)&&(C=!0,s[w+1]=l?Cm(_):xm(_)),w=l?Go(_):il(_)}C&&(s[r+1]=l?xm(d):Cm(d))}function Qh(s,i){return null===s||null==i||(Array.isArray(s)?s[1]:s)===i||!(!Array.isArray(s)||"string"!=typeof i)&&Pu(s,i)>=0}const ui={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Df(s){return s.substring(ui.key,ui.keyEnd)}function qh(s,i){const r=ui.textEnd;return r===i?-1:(i=ui.keyEnd=function js(s,i,r){for(;i<r&&s.charCodeAt(i)>32;)i++;return i}(s,ui.key=i,r),Do(s,i,r))}function Do(s,i,r){for(;i<r&&s.charCodeAt(i)<=32;)i++;return i}function Wu(s,i,r){return function ms(s,i,r,l){const c=Tt(),d=Ze(),m=Ka(2);d.firstUpdatePass&&Xu(d,s,m,l),i!==Ee&&Cr(c,m,i)&&u(d,d.data[no()],c,c[11],s,c[m+1]=function p(s,i){return null==s||("string"==typeof i?s+=i:"object"==typeof s&&(s=fn(Bo(s)))),s}(i,r),l,m)}(s,i,r,!1),Wu}function Ma(s){!function ys(s,i,r,l){const c=Ze(),d=Ka(2);c.firstUpdatePass&&Xu(c,null,d,l);const m=Tt();if(r!==Ee&&Cr(m,d,r)){const w=c.data[no()];if(g(w,l)&&!Op(c,d)){let C=l?w.classesWithoutHost:w.stylesWithoutHost;null!==C&&(r=Jf(C,r||"")),wa(c,w,m,r,l)}else!function a(s,i,r,l,c,d,m,w){c===Ee&&(c=Be);let C=0,E=0,_=0<c.length?c[0]:null,k=0<d.length?d[0]:null;for(;null!==_||null!==k;){const F=C<c.length?c[C+1]:void 0,j=E<d.length?d[E+1]:void 0;let et,H=null;_===k?(C+=2,E+=2,F!==j&&(H=k,et=j)):null===k||null!==_&&_<k?(C+=2,H=_):(E+=2,H=k,et=j),null!==H&&u(s,i,r,l,H,et,m,w),_=C<c.length?c[C]:null,k=E<d.length?d[E]:null}}(c,w,m,m[11],m[d+1],m[d+1]=function n(s,i,r){if(null==r||""===r)return Be;const l=[],c=Bo(r);if(Array.isArray(c))for(let d=0;d<c.length;d++)s(l,c[d],!0);else if("object"==typeof c)for(const d in c)c.hasOwnProperty(d)&&s(l,d,c[d]);else"string"==typeof c&&i(l,c);return l}(s,i,r),l,d)}}(qi,gs,s,!0)}function gs(s,i){for(let r=function Ip(s){return function ps(s){ui.key=0,ui.keyEnd=0,ui.value=0,ui.valueEnd=0,ui.textEnd=s.length}(s),qh(s,Do(s,0,ui.textEnd))}(i);r>=0;r=qh(i,r))qi(s,Df(i),!0)}function Op(s,i){return i>=s.expandoStartIndex}function Xu(s,i,r,l){const c=s.data;if(null===c[r+1]){const d=c[no()],m=Op(s,r);g(d,l)&&null===i&&!m&&(i=!1),i=function fo(s,i,r,l){const c=ti(s);let d=l?i.residualClasses:i.residualStyles;if(null===c)0===(l?i.classBindings:i.styleBindings)&&(r=e(r=t(null,s,i,r,l),i.attrs,l),d=null);else{const m=i.directiveStylingLast;if(-1===m||s[m]!==c)if(r=t(c,s,i,r,l),null===d){let C=function _f(s,i,r){const l=r?i.classBindings:i.styleBindings;if(0!==il(l))return s[Go(l)]}(s,i,l);void 0!==C&&Array.isArray(C)&&(C=t(null,s,i,C[1],l),C=e(C,i.attrs,l),function oy(s,i,r,l){s[Go(r?i.classBindings:i.styleBindings)]=l}(s,i,l,C))}else d=function sy(s,i,r){let l;const c=i.directiveEnd;for(let d=1+i.directiveStylingLast;d<c;d++)l=e(l,s[d].hostAttrs,r);return e(l,i.attrs,r)}(s,i,l)}return void 0!==d&&(l?i.residualClasses=d:i.residualStyles=d),r}(c,d,i,l),function ml(s,i,r,l,c,d){let m=d?i.classBindings:i.styleBindings,w=Go(m),C=il(m);s[l]=r;let _,E=!1;if(Array.isArray(r)){const k=r;_=k[1],(null===_||Pu(k,_)>0)&&(E=!0)}else _=r;if(c)if(0!==C){const F=Go(s[w+1]);s[l+1]=Yd(F,w),0!==F&&(s[F+1]=Kd(s[F+1],l)),s[w+1]=function Xd(s,i){return 131071&s|i<<17}(s[w+1],l)}else s[l+1]=Yd(w,0),0!==w&&(s[w+1]=Kd(s[w+1],l)),w=l;else s[l+1]=Yd(C,0),0===w?w=l:s[C+1]=Kd(s[C+1],l),C=l;E&&(s[l+1]=xm(s[l+1])),fs(s,_,l,!0),fs(s,_,l,!1),function ny(s,i,r,l,c){const d=c?s.residualClasses:s.residualStyles;null!=d&&"string"==typeof i&&Pu(d,i)>=0&&(r[l+1]=Cm(r[l+1]))}(i,_,s,l,d),m=Yd(w,C),d?i.classBindings=m:i.styleBindings=m}(c,d,i,r,m,l)}}function t(s,i,r,l,c){let d=null;const m=r.directiveEnd;let w=r.directiveStylingLast;for(-1===w?w=r.directiveStart:w++;w<m&&(d=i[w],l=e(l,d.hostAttrs,c),d!==s);)w++;return null!==s&&(r.directiveStylingLast=w),l}function e(s,i,r){const l=r?1:2;let c=-1;if(null!==i)for(let d=0;d<i.length;d++){const m=i[d];"number"==typeof m?c=m:c===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),qi(s,m,!!r||i[++d]))}return void 0===s?null:s}function u(s,i,r,l,c,d,m,w){if(!(3&i.type))return;const C=s.data,E=C[w+1];f(function o0(s){return 1==(1&s)}(E)?h(C,i,r,c,il(E),m):void 0)||(f(d)||function Wd(s){return 2==(2&s)}(E)&&(d=h(C,null,r,c,w,m)),function Oh(s,i,r,l,c){const d=Rn(s);if(i)c?d?s.addClass(r,l):r.classList.add(l):d?s.removeClass(r,l):r.classList.remove(l);else{let m=-1===l.indexOf("-")?void 0:Uo.DashCase;if(null==c)d?s.removeStyle(r,l,m):r.style.removeProperty(l);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),m|=Uo.Important),d?s.setStyle(r,l,c,m):r.style.setProperty(l,c,w?"important":"")}}}(l,m,pg(no(),r),c,d))}function h(s,i,r,l,c,d){const m=null===i;let w;for(;c>0;){const C=s[c],E=Array.isArray(C),_=E?C[1]:C,k=null===_;let F=r[c+1];F===Ee&&(F=k?Be:void 0);let j=k?Md(F,l):_===l?F:void 0;if(E&&!f(j)&&(j=Md(C,l)),f(j)&&(w=j,m))return w;const H=s[c+1];c=m?Go(H):il(H)}if(null!==i){let C=d?i.residualClasses:i.residualStyles;null!=C&&(w=Md(C,l))}return w}function f(s){return void 0!==s}function g(s,i){return 0!=(s.flags&(i?16:32))}function y(s,i=""){const r=Tt(),l=Ze(),c=s+20,d=l.firstCreatePass?ol(l,c,1,i,null):l.data[c],m=r[c]=function hm(s,i){return Rn(s)?s.createText(i):s.createTextNode(i)}(r[11],i);kh(l,r,m,d),Yn(d,!1)}function x(s,i,r){const l=Tt(),c=function pl(s,i,r,l){return Cr(s,bl(),r)?i+Ce(r)+l:Ee}(l,s,i,r);return c!==Ee&&hl(l,no(),c),x}function rc(s,i,r){const l=Tt();if(Cr(l,bl(),i)){const d=Ze(),m=Wn();Fr(d,m,l,s,i,function Am(s,i,r){return(null===s||eo(s))&&(r=function Oo(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(r[i.index])),r[11]}(ti(d.data),m,l),r,!0)}return rc}const vl=void 0;var Xo=["en",[["a","p"],["AM","PM"],vl],[["AM","PM"],vl,vl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vl,"{1} 'at' {0}",vl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function oc(s){const r=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===r&&0===l?1:5}];let ci={};function ay(s){return s in ci||(ci[s]=Fn.ng&&Fn.ng.common&&Fn.ng.common.locales&&Fn.ng.common.locales[s]),ci[s]}var jt=(()=>((jt=jt||{})[jt.LocaleId=0]="LocaleId",jt[jt.DayPeriodsFormat=1]="DayPeriodsFormat",jt[jt.DayPeriodsStandalone=2]="DayPeriodsStandalone",jt[jt.DaysFormat=3]="DaysFormat",jt[jt.DaysStandalone=4]="DaysStandalone",jt[jt.MonthsFormat=5]="MonthsFormat",jt[jt.MonthsStandalone=6]="MonthsStandalone",jt[jt.Eras=7]="Eras",jt[jt.FirstDayOfWeek=8]="FirstDayOfWeek",jt[jt.WeekendRange=9]="WeekendRange",jt[jt.DateFormat=10]="DateFormat",jt[jt.TimeFormat=11]="TimeFormat",jt[jt.DateTimeFormat=12]="DateTimeFormat",jt[jt.NumberSymbols=13]="NumberSymbols",jt[jt.NumberFormats=14]="NumberFormats",jt[jt.CurrencyCode=15]="CurrencyCode",jt[jt.CurrencySymbol=16]="CurrencySymbol",jt[jt.CurrencyName=17]="CurrencyName",jt[jt.Currencies=18]="Currencies",jt[jt.Directionality=19]="Directionality",jt[jt.PluralCase=20]="PluralCase",jt[jt.ExtraData=21]="ExtraData",jt))();const Ko="en-US";let Us=Ko;class lT{}class Fk{resolveComponentFactory(i){throw function Lk(s){const i=Error(`No component factory found for ${fn(s)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=s,i}(i)}}let If=(()=>{class s{}return s.NULL=new Fk,s})();function Rk(){return Cy(yi(),Tt())}function Cy(s,i){return new Xs(bo(s,i))}let Xs=(()=>{class s{constructor(r){this.nativeElement=r}}return s.__NG_ELEMENT_ID__=Rk,s})();class K0{}let Uk=(()=>{class s{}return s.\u0275prov=at({token:s,providedIn:"root",factory:()=>null}),s})();class Z0{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Hk=new Z0("13.2.2"),cS={};function P1(s,i,r,l,c=!1){for(;null!==r;){const d=i[r.index];if(null!==d&&l.push(jn(d)),to(d))for(let w=10;w<d.length;w++){const C=d[w],E=C[1].firstChild;null!==E&&P1(C[1],C,E,l)}const m=r.type;if(8&m)P1(s,i,r.child,l);else if(32&m){const w=Vd(r,i);let C;for(;C=w();)l.push(C)}else if(16&m){const w=Xv(i,r);if(Array.isArray(w))l.push(...w);else{const C=ju(i[16]);P1(C[1],C,w,l,!0)}}r=c?r.projectionNext:r.next}return l}class J0{constructor(i,r){this._lView=i,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,r=i[1];return P1(r,i,r.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(to(i)){const r=i[8],l=r?r.indexOf(this):-1;l>-1&&(dm(i,l),vh(r,l))}this._attachedToViewContainer=!1}_i(this._lView[1],this._lView)}onDestroy(i){!function sp(s,i,r,l){const c=Pm(i);null===r?c.push(l):(c.push(r),s.firstCreatePass&&M0(s).push(l,c.length-1))}(this._lView[1],this._lView,null,i)}markForCheck(){Gh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){cp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function dp(s,i,r){Sg(!0);try{cp(s,i,r)}finally{Sg(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new en(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Gv(s,i){Ih(s,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new en(902,"");this._appRef=i}}class Gk extends J0{constructor(i){super(i),this._view=i}detectChanges(){fp(this._view)}checkNoChanges(){!function Nm(s){Sg(!0);try{fp(s)}finally{Sg(!1)}}(this._view)}get context(){return null}}class hT extends If{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const r=Gr(i);return new fS(r,this.ngModule)}}function cT(s){const i=[];for(let r in s)s.hasOwnProperty(r)&&i.push({propName:s[r],templateName:r});return i}const $k=new Se("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Th});class fS extends lT{constructor(i,r){super(),this.componentDef=i,this.ngModule=r,this.componentType=i.type,this.selector=function VM(s){return s.map(Gt).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!r}get inputs(){return cT(this.componentDef.inputs)}get outputs(){return cT(this.componentDef.outputs)}create(i,r,l,c){const d=(c=c||this.ngModule)?function Yk(s,i){return{get:(r,l,c)=>{const d=s.get(r,cS,c);return d!==cS||l===cS?d:i.get(r,l,c)}}}(i,c.injector):i,m=d.get(K0,ss),w=d.get(Uk,null),C=m.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",_=l?function op(s,i,r){if(Rn(s))return s.selectRootElement(i,r===rs.ShadowDom);let l="string"==typeof i?s.querySelector(i):i;return l.textContent="",l}(C,l,this.componentDef.encapsulation):Ud(m.createRenderer(null,this.componentDef),E,function zk(s){const i=s.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(E)),k=this.componentDef.onPush?576:528,F=function Te(s,i){return{components:[],scheduler:s||Th,clean:e1,playerHandler:i||null,flags:0}}(),j=Yl(0,null,null,1,0,null,null,null,null,null),H=Gl(null,j,F,k,null,null,m,C,w,d);let et,pt;dd(H);try{const vt=function wp(s,i,r,l,c,d){const m=r[1];r[20]=s;const C=ol(m,20,2,"#host",null),E=C.mergedAttrs=i.hostAttrs;null!==E&&(gp(C,E,!0),null!==s&&(ls(c,s,E),null!==C.classes&&ym(c,s,C.classes),null!==C.styles&&Kv(c,s,C.styles)));const _=l.createRenderer(s,i),k=Gl(r,mf(i),null,i.onPush?64:16,r[20],C,l,_,d||null,null);return m.firstCreatePass&&(vd(Ll(C,r),m,i.type),y0(m,C),Uh(C,r.length,1)),Hh(r,k),r[20]=k}(_,this.componentDef,H,m,C);if(_)if(l)ls(C,_,["ng-version",Hk.full]);else{const{attrs:ct,classes:Ot}=function ot(s){const i=[],r=[];let l=1,c=2;for(;l<s.length;){let d=s[l];if("string"==typeof d)2===c?""!==d&&i.push(d,s[++l]):8===c&&r.push(d);else{if(!yr(c))break;c=d}l++}return{attrs:i,classes:r}}(this.componentDef.selectors[0]);ct&&ls(C,_,ct),Ot&&Ot.length>0&&ym(C,_,Ot.join(" "))}if(pt=gg(j,20),void 0!==r){const ct=pt.projection=[];for(let Ot=0;Ot<this.ngContentSelectors.length;Ot++){const Ut=r[Ot];ct.push(null!=Ut?Array.from(Ut):null)}}et=function xi(s,i,r,l,c){const d=r[1],m=function ap(s,i,r){const l=yi();s.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),v0(s,l,i,zl(s,i,1,null),r));const c=Vc(i,s,l.directiveStart,l);Jn(c,i);const d=bo(l,i);return d&&Jn(d,i),c}(d,r,i);if(l.components.push(m),s[8]=m,c&&c.forEach(C=>C(m,i)),i.contentQueries){const C=yi();i.contentQueries(1,m,C.directiveStart)}const w=yi();return!d.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Nn(w.index),ll(r[1],w,0,w.directiveStart,w.directiveEnd,i),up(i,m)),m}(vt,this.componentDef,H,F,[xp]),$l(j,H,null)}finally{_g()}return new Xk(this.componentType,et,Cy(pt,H),H,pt)}}class Xk extends class bk{}{constructor(i,r,l,c,d){super(),this.location=l,this._rootLView=c,this._tNode=d,this.instance=r,this.hostView=this.changeDetectorRef=new Gk(c),this.componentType=i}get injector(){return new gh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class vc{}class fT{}const My=new Map;class gT extends vc{constructor(i,r){super(),this._parent=r,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new hT(this);const l=os(i);this._bootstrapComponents=da(l.bootstrap),this._r3Injector=zh(i,r,[{provide:vc,useValue:this},{provide:If,useValue:this.componentFactoryResolver}],fn(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,r=mn.THROW_IF_NOT_FOUND,l=pe.Default){return i===mn||i===vc||i===mp?this:this._r3Injector.get(i,r,l)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class dS extends fT{constructor(i){super(),this.moduleType=i,null!==os(i)&&function Zk(s){const i=new Set;!function r(l){const c=os(l,!0),d=c.id;null!==d&&(function dT(s,i,r){if(i&&i!==r)throw new Error(`Duplicate module registered for ${s} - ${fn(i)} vs ${fn(i.name)}`)}(d,My.get(d),l),My.set(d,l));const m=da(c.imports);for(const w of m)i.has(w)||(i.add(w),r(w))}(s)}(i)}create(i){return new gT(this.moduleType,i)}}function pS(s){return i=>{setTimeout(s,void 0,i)}}const Ci=class pI extends Jt{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,r,l){var c,d,m;let w=i,C=r||(()=>null),E=l;if(i&&"object"==typeof i){const k=i;w=null===(c=k.next)||void 0===c?void 0:c.bind(k),C=null===(d=k.error)||void 0===d?void 0:d.bind(k),E=null===(m=k.complete)||void 0===m?void 0:m.bind(k)}this.__isAsync&&(C=pS(C),w&&(w=pS(w)),E&&(E=pS(E)));const _=super.subscribe({next:w,error:C,complete:E});return i instanceof G&&i.add(_),_}};Symbol;let wc=(()=>{class s{}return s.__NG_ELEMENT_ID__=vI,s})();const mI=wc,yI=class extends mI{constructor(i,r,l){super(),this._declarationLView=i,this._declarationTContainer=r,this.elementRef=l}createEmbeddedView(i){const r=this._declarationTContainer.tViews,l=Gl(this._declarationLView,r,i,16,null,r.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(l[19]=d.createEmbeddedView(r)),$l(r,l,i),new J0(l)}};function vI(){return function A1(s,i){return 4&s.type?new yI(i,s,Cy(s,i)):null}(yi(),Tt())}let uu=(()=>{class s{}return s.__NG_ELEMENT_ID__=wI,s})();function wI(){return function ST(s,i){let r;const l=i[s.index];if(to(l))r=l;else{let c;if(8&s.type)c=jn(l);else{const d=i[11];c=d.createComment("");const m=bo(s,i);Bu(d,zd(d,m),c,function bx(s,i){return Rn(s)?s.nextSibling(i):i.nextSibling}(d,m),!1)}i[s.index]=r=qx(l,i,c,s),Hh(i,r)}return new CT(r,s,i)}(yi(),Tt())}const xI=uu,CT=class extends xI{constructor(i,r,l){super(),this._lContainer=i,this._hostTNode=r,this._hostLView=l}get element(){return Cy(this._hostTNode,this._hostLView)}get injector(){return new gh(this._hostTNode,this._hostLView)}get parentInjector(){const i=Du(this._hostTNode,this._hostLView);if(vo(i)){const r=Bc(i,this._hostLView),l=_s(i);return new gh(r[1].data[l+8],r)}return new gh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const r=MT(this._lContainer);return null!==r&&r[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,r,l){const c=i.createEmbeddedView(r||{});return this.insert(c,l),c}createComponent(i,r,l,c,d){const m=i&&!function dr(s){return"function"==typeof s}(i);let w;if(m)w=r;else{const k=r||{};w=k.index,l=k.injector,c=k.projectableNodes,d=k.ngModuleRef}const C=m?i:new fS(Gr(i)),E=l||this.parentInjector;if(!d&&null==C.ngModule&&E){const k=E.get(vc,null);k&&(d=k)}const _=C.create(E,c,void 0,d);return this.insert(_.hostView,w),_}insert(i,r){const l=i._lView,c=l[1];if(function ad(s){return to(s[3])}(l)){const _=this.indexOf(i);if(-1!==_)this.detach(_);else{const k=l[3],F=new CT(k,k[6],k[3]);F.detach(F.indexOf(i))}}const d=this._adjustIndex(r),m=this._lContainer;!function fm(s,i,r,l){const c=10+l,d=r.length;l>0&&(r[c-1][4]=i),l<d-10?(i[4]=r[c],Cd(r,10+l,i)):(r.push(i),i[4]=null),i[3]=r;const m=i[17];null!==m&&r!==m&&function zv(s,i){const r=s[9];i[16]!==i[3][3][16]&&(s[2]=!0),null===r?s[9]=[i]:r.push(i)}(m,i);const w=i[19];null!==w&&w.insertView(s),i[2]|=128}(c,l,m,d);const w=uf(d,m),C=l[11],E=zd(C,m[7]);return null!==E&&function FM(s,i,r,l,c,d){l[0]=c,l[6]=i,Ih(s,l,r,1,c,d)}(c,m[6],C,l,E,w),i.attachToViewContainerRef(),Cd(mS(m),d,i),i}move(i,r){return this.insert(i,r)}indexOf(i){const r=MT(this._lContainer);return null!==r?r.indexOf(i):-1}remove(i){const r=this._adjustIndex(i,-1),l=dm(this._lContainer,r);l&&(vh(mS(this._lContainer),r),_i(l[1],l))}detach(i){const r=this._adjustIndex(i,-1),l=dm(this._lContainer,r);return l&&null!=vh(mS(this._lContainer),r)?new J0(l):null}_adjustIndex(i,r=0){return null==i?this.length+r:i}};function MT(s){return s[8]}function mS(s){return s[8]||(s[8]=[])}function b1(...s){}const L1=new Se("Application Initializer");let Ty=(()=>{class s{constructor(r){this.appInits=r,this.resolve=b1,this.reject=b1,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const r=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const d=this.appInits[c]();if(Sf(d))r.push(d);else if(xa(d)){const m=new Promise((w,C)=>{d.subscribe({complete:w,error:C})});r.push(m)}}Promise.all(r).then(()=>{l()}).catch(c=>{this.reject(c)}),0===r.length&&l(),this.initialized=!0}}return s.\u0275fac=function(r){return new(r||s)(Z(L1,8))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();const ew=new Se("AppId"),WI={provide:ew,useFactory:function YI(){return`${NS()}${NS()}${NS()}`},deps:[]};function NS(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $T=new Se("Platform Initializer"),F1=new Se("Platform ID"),YT=new Se("appBootstrapListener");let WT=(()=>{class s{log(r){console.log(r)}warn(r){console.warn(r)}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();const Of=new Se("LocaleId"),XT=new Se("DefaultCurrencyCode");class XI{constructor(i,r){this.ngModuleFactory=i,this.componentFactories=r}}let R1=(()=>{class s{compileModuleSync(r){return new dS(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const l=this.compileModuleSync(r),d=da(os(r).declarations).reduce((m,w)=>{const C=Gr(w);return C&&m.push(new fS(C)),m},[]);return new XI(l,d)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();const ZI=(()=>Promise.resolve(0))();function PS(s){"undefined"==typeof Zone?ZI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ii{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ci(!1),this.onMicrotaskEmpty=new Ci(!1),this.onStable=new Ci(!1),this.onError=new Ci(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&r,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function JI(){let s=Fn.requestAnimationFrame,i=Fn.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&i){const r=s[Zone.__symbol__("OriginalDelegate")];r&&(s=r);const l=i[Zone.__symbol__("OriginalDelegate")];l&&(i=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function tO(s){const i=()=>{!function qI(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Fn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,kS(s),s.isCheckStableRunning=!0,AS(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),kS(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,l,c,d,m,w)=>{try{return KT(s),r.invokeTask(c,d,m,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||s.shouldCoalesceRunChangeDetection)&&i(),ZT(s)}},onInvoke:(r,l,c,d,m,w,C)=>{try{return KT(s),r.invoke(c,d,m,w,C)}finally{s.shouldCoalesceRunChangeDetection&&i(),ZT(s)}},onHasTask:(r,l,c,d)=>{r.hasTask(c,d),l===c&&("microTask"==d.change?(s._hasPendingMicrotasks=d.microTask,kS(s),AS(s)):"macroTask"==d.change&&(s.hasPendingMacrotasks=d.macroTask))},onHandleError:(r,l,c,d)=>(r.handleError(c,d),s.runOutsideAngular(()=>s.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ii.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ii.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,r,l){return this._inner.run(i,r,l)}runTask(i,r,l,c){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+c,i,QI,b1,b1);try{return d.runTask(m,r,l)}finally{d.cancelTask(m)}}runGuarded(i,r,l){return this._inner.runGuarded(i,r,l)}runOutsideAngular(i){return this._outer.run(i)}}const QI={};function AS(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function kS(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function KT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function ZT(s){s._nesting--,AS(s)}class eO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ci,this.onMicrotaskEmpty=new Ci,this.onStable=new Ci,this.onError=new Ci}run(i,r,l){return i.apply(r,l)}runGuarded(i,r,l){return i.apply(r,l)}runOutsideAngular(i){return i()}runTask(i,r,l,c){return i.apply(r,l)}}let IS=(()=>{class s{constructor(r){this._ngZone=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ii.assertNotInAngularZone(),PS(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())PS(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(r)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,l,c){let d=-1;l&&l>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),r(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:r,timeoutId:d,updateCb:c})}whenStable(r,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(r,l,c){return[]}}return s.\u0275fac=function(r){return new(r||s)(Z(ii))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})(),JT=(()=>{class s{constructor(){this._applications=new Map,OS.addToWindow(this)}registerApplication(r,l){this._applications.set(r,l)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,l=!0){return OS.findTestabilityInTree(this,r,l)}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();class nO{addToWindow(i){}findTestabilityInTree(i,r,l){return null}}let hu,OS=new nO;const QT=new Se("AllowMultipleToken");class qT{constructor(i,r){this.name=i,this.token=r}}function t_(s,i,r=[]){const l=`Platform: ${i}`,c=new Se(l);return(d=[])=>{let m=e_();if(!m||m.injector.get(QT,!1))if(s)s(r.concat(d).concat({provide:c,useValue:!0}));else{const w=r.concat(d).concat({provide:c,useValue:!0},{provide:wr,useValue:"platform"});!function sO(s){if(hu&&!hu.destroyed&&!hu.injector.get(QT,!1))throw new en(400,"");hu=s.get(n_);const i=s.get($T,null);i&&i.forEach(r=>r())}(mn.create({providers:w,name:l}))}return function aO(s){const i=e_();if(!i)throw new en(401,"");return i}()}}function e_(){return hu&&!hu.destroyed?hu:null}let n_=(()=>{class s{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,l){const w=function lO(s,i){let r;return r="noop"===s?new eO:("zone.js"===s?void 0:s)||new ii({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),r}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:ii,useValue:w}];return w.run(()=>{const E=mn.create({providers:C,parent:this.injector,name:r.moduleType.name}),_=r.create(E),k=_.injector.get(Ru,null);if(!k)throw new en(402,"");return w.runOutsideAngular(()=>{const F=w.onError.subscribe({next:j=>{k.handleError(j)}});_.onDestroy(()=>{bS(this._modules,_),F.unsubscribe()})}),function uO(s,i,r){try{const l=r();return Sf(l)?l.catch(c=>{throw i.runOutsideAngular(()=>s.handleError(c)),c}):l}catch(l){throw i.runOutsideAngular(()=>s.handleError(l)),l}}(k,w,()=>{const F=_.injector.get(Ty);return F.runInitializers(),F.donePromise.then(()=>(function ru(s){Io(s,"Expected localeId to be defined"),"string"==typeof s&&(Us=s.toLowerCase().replace(/_/g,"-"))}(_.injector.get(Of,Ko)||Ko),this._moduleDoBootstrap(_),_))})})}bootstrapModule(r,l=[]){const c=i_({},l);return function rO(s,i,r){const l=new dS(r);return Promise.resolve(l)}(0,0,r).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(r){const l=r.injector.get(bf);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!r.instance.ngDoBootstrap)throw new en(403,"");r.instance.ngDoBootstrap(l)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new en(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(r){return new(r||s)(Z(mn))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();function i_(s,i){return Array.isArray(i)?i.reduce(i_,s):Object.assign(Object.assign({},s),i)}let bf=(()=>{class s{constructor(r,l,c,d,m){this._zone=r,this._injector=l,this._exceptionHandler=c,this._componentFactoryResolver=d,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new $t(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),C=new $t(E=>{let _;this._zone.runOutsideAngular(()=>{_=this._zone.onStable.subscribe(()=>{ii.assertNotInAngularZone(),PS(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{ii.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{_.unsubscribe(),k.unsubscribe()}});this.isStable=function Zf(...s){let i=Number.POSITIVE_INFINITY,r=null,l=s[s.length-1];return Pr(l)?(r=s.pop(),s.length>1&&"number"==typeof s[s.length-1]&&(i=s.pop())):"number"==typeof l&&(i=s.pop()),null===r&&1===s.length&&s[0]instanceof $t?s[0]:Ie(i)(si(s,r))}(w,C.pipe(Wy()))}bootstrap(r,l){if(!this._initStatus.done)throw new en(405,"");let c;c=r instanceof lT?r:this._componentFactoryResolver.resolveComponentFactory(r),this.componentTypes.push(c.componentType);const d=function oO(s){return s.isBoundToModule}(c)?void 0:this._injector.get(vc),w=c.create(mn.NULL,[],l||c.selector,d),C=w.location.nativeElement,E=w.injector.get(IS,null),_=E&&w.injector.get(JT);return E&&_&&_.registerApplication(C,E),w.onDestroy(()=>{this.detachView(w.hostView),bS(this.components,w),_&&_.unregisterApplication(C)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new en(101,"");try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(r))}finally{this._runningTick=!1}}attachView(r){const l=r;this._views.push(l),l.attachToAppRef(this)}detachView(r){const l=r;bS(this._views,l),l.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(YT,[]).concat(this._bootstrapListeners).forEach(c=>c(r))}ngOnDestroy(){this._views.slice().forEach(r=>r.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(r){return new(r||s)(Z(ii),Z(mn),Z(Ru),Z(If),Z(Ty))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();function bS(s,i){const r=s.indexOf(i);r>-1&&s.splice(r,1)}let o_=!0,j1=(()=>{class s{}return s.__NG_ELEMENT_ID__=fO,s})();function fO(s){return function dO(s,i,r){if(fg(s)&&!r){const l=br(s.index,i);return new J0(l,l)}return 47&s.type?new J0(i[16],i):null}(yi(),Tt(),16==(16&s))}class h_{constructor(){}supports(i){return xr(i)}create(i){return new wO(i)}}const vO=(s,i)=>i;class wO{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||vO}forEachItem(i){let r;for(r=this._itHead;null!==r;r=r._next)i(r)}forEachOperation(i){let r=this._itHead,l=this._removalsHead,c=0,d=null;for(;r||l;){const m=!l||r&&r.currentIndex<f_(l,c,d)?r:l,w=f_(m,c,d),C=m.currentIndex;if(m===l)c--,l=l._nextRemoved;else if(r=r._next,null==m.previousIndex)c++;else{d||(d=[]);const E=w-c,_=C-c;if(E!=_){for(let F=0;F<E;F++){const j=F<d.length?d[F]:d[F]=0,H=j+F;_<=H&&H<E&&(d[F]=j+1)}d[m.previousIndex]=_-E}}w!==C&&i(m,w,C)}}forEachPreviousItem(i){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)i(r)}forEachAddedItem(i){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)i(r)}forEachMovedItem(i){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)i(r)}forEachRemovedItem(i){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)i(r)}forEachIdentityChange(i){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)i(r)}diff(i){if(null==i&&(i=[]),!xr(i))throw new en(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,d,m,r=this._itHead,l=!1;if(Array.isArray(i)){this.length=i.length;for(let w=0;w<this.length;w++)d=i[w],m=this._trackByFn(w,d),null!==r&&Object.is(r.trackById,m)?(l&&(r=this._verifyReinsertion(r,d,m,w)),Object.is(r.item,d)||this._addIdentityChange(r,d)):(r=this._mismatch(r,d,m,w),l=!0),r=r._next}else c=0,function Kl(s,i){if(Array.isArray(s))for(let r=0;r<s.length;r++)i(s[r]);else{const r=s[$o()]();let l;for(;!(l=r.next()).done;)i(l.value)}}(i,w=>{m=this._trackByFn(c,w),null!==r&&Object.is(r.trackById,m)?(l&&(r=this._verifyReinsertion(r,w,m,c)),Object.is(r.item,w)||this._addIdentityChange(r,w)):(r=this._mismatch(r,w,m,c),l=!0),r=r._next,c++}),this.length=c;return this._truncate(r),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,r,l,c){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(i.item,r)||this._addIdentityChange(i,r),this._reinsertAfter(i,d,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(i.item,r)||this._addIdentityChange(i,r),this._moveAfter(i,d,c)):i=this._addAfter(new xO(r,l),d,c),i}_verifyReinsertion(i,r,l,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==d?i=this._reinsertAfter(d,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const r=i._next;this._addToRemovals(this._unlink(i)),i=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,r,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,d=i._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(i,r,l),this._addToMoves(i,l),i}_moveAfter(i,r,l){return this._unlink(i),this._insertAfter(i,r,l),this._addToMoves(i,l),i}_addAfter(i,r,l){return this._insertAfter(i,r,l),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,r,l){const c=null===r?this._itHead:r._next;return i._next=c,i._prev=r,null===c?this._itTail=i:c._prev=i,null===r?this._itHead=i:r._next=i,null===this._linkedRecords&&(this._linkedRecords=new c_),this._linkedRecords.put(i),i.currentIndex=l,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const r=i._prev,l=i._next;return null===r?this._itHead=l:r._next=l,null===l?this._itTail=r:l._prev=r,i}_addToMoves(i,r){return i.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new c_),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,r){return i.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class xO{constructor(i,r){this.item=i,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class CO{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,r){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===r||r<=l.currentIndex)&&Object.is(l.trackById,i))return l;return null}remove(i){const r=i._prevDup,l=i._nextDup;return null===r?this._head=l:r._nextDup=l,null===l?this._tail=r:l._prevDup=r,null===this._head}}class c_{constructor(){this.map=new Map}put(i){const r=i.trackById;let l=this.map.get(r);l||(l=new CO,this.map.set(r,l)),l.add(i)}get(i,r){const c=this.map.get(i);return c?c.get(i,r):null}remove(i){const r=i.trackById;return this.map.get(r).remove(i)&&this.map.delete(r),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function f_(s,i,r){const l=s.previousIndex;if(null===l)return l;let c=0;return r&&l<r.length&&(c=r[l]),l+i+c}class d_{constructor(){}supports(i){return i instanceof Map||fl(i)}create(){return new MO}}class MO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let r;for(r=this._mapHead;null!==r;r=r._next)i(r)}forEachPreviousItem(i){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)i(r)}forEachChangedItem(i){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)i(r)}forEachAddedItem(i){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)i(r)}forEachRemovedItem(i){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)i(r)}diff(i){if(i){if(!(i instanceof Map||fl(i)))throw new en(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(i,(l,c)=>{if(r&&r.key===c)this._maybeAddToChanges(r,l),this._appendAfter=r,r=r._next;else{const d=this._getOrCreateRecordForKey(c,l);r=this._insertBeforeOrAppend(r,d)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let l=r;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,r){if(i){const l=i._prev;return r._next=i,r._prev=l,i._prev=r,l&&(l._next=r),i===this._mapHead&&(this._mapHead=r),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(i,r){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,r);const d=c._prev,m=c._next;return d&&(d._next=m),m&&(m._prev=d),c._next=null,c._prev=null,c}const l=new SO(i);return this._records.set(i,l),l.currentValue=r,this._addToAdditions(l),l}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,r){Object.is(r,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=r,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,r){i instanceof Map?i.forEach(r):Object.keys(i).forEach(l=>r(i[l],l))}}class SO{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function p_(){return new nw([new h_])}let nw=(()=>{class s{constructor(r){this.factories=r}static create(r,l){if(null!=l){const c=l.factories.slice();r=r.concat(c)}return new s(r)}static extend(r){return{provide:s,useFactory:l=>s.create(r,l||p_()),deps:[[s,new vi,new Ro]]}}find(r){const l=this.factories.find(c=>c.supports(r));if(null!=l)return l;throw new en(901,"")}}return s.\u0275prov=at({token:s,providedIn:"root",factory:p_}),s})();function g_(){return new _y([new d_])}let _y=(()=>{class s{constructor(r){this.factories=r}static create(r,l){if(l){const c=l.factories.slice();r=r.concat(c)}return new s(r)}static extend(r){return{provide:s,useFactory:l=>s.create(r,l||g_()),deps:[[s,new vi,new Ro]]}}find(r){const l=this.factories.find(d=>d.supports(r));if(l)return l;throw new en(901,"")}}return s.\u0275prov=at({token:s,providedIn:"root",factory:g_}),s})();const DO=[new d_],TO=new nw([new h_]),_O=new _y(DO),NO=t_(null,"core",[{provide:F1,useValue:"unknown"},{provide:n_,deps:[mn]},{provide:JT,deps:[]},{provide:WT,deps:[]}]),OO=[{provide:bf,useClass:bf,deps:[ii,mn,Ru,If,Ty]},{provide:$k,deps:[ii],useFactory:function bO(s){let i=[];return s.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(r){i.push(r)}}},{provide:Ty,useClass:Ty,deps:[[new Ro,L1]]},{provide:R1,useClass:R1,deps:[]},WI,{provide:nw,useFactory:function PO(){return TO},deps:[]},{provide:_y,useFactory:function AO(){return _O},deps:[]},{provide:Of,useFactory:function kO(s){return s||function IO(){return"undefined"!=typeof $localize&&$localize.locale||Ko}()},deps:[[new jl(Of),new Ro,new vi]]},{provide:XT,useValue:"USD"}];let LO=(()=>{class s{constructor(r){}}return s.\u0275fac=function(r){return new(r||s)(Z(bf))},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({providers:OO}),s})(),U1=null;function th(){return U1}const _r=new Se("DocumentToken");let Vp=(()=>{class s{historyGo(r){throw new Error("Not implemented")}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=at({token:s,factory:function(){return function BO(){return Z(m_)}()},providedIn:"platform"}),s})();const VO=new Se("Location Initialized");let m_=(()=>{class s extends Vp{constructor(r){super(),this._doc=r,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return th().getBaseHref(this._doc)}onPopState(r){const l=th().getGlobalEventTarget(this._doc,"window");return l.addEventListener("popstate",r,!1),()=>l.removeEventListener("popstate",r)}onHashChange(r){const l=th().getGlobalEventTarget(this._doc,"window");return l.addEventListener("hashchange",r,!1),()=>l.removeEventListener("hashchange",r)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(r){this.location.pathname=r}pushState(r,l,c){y_()?this._history.pushState(r,l,c):this.location.hash=c}replaceState(r,l,c){y_()?this._history.replaceState(r,l,c):this.location.hash=c}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return s.\u0275fac=function(r){return new(r||s)(Z(_r))},s.\u0275prov=at({token:s,factory:function(){return function UO(){return new m_(Z(_r))}()},providedIn:"platform"}),s})();function y_(){return!!window.history.pushState}function BS(s,i){if(0==s.length)return i;if(0==i.length)return s;let r=0;return s.endsWith("/")&&r++,i.startsWith("/")&&r++,2==r?s+i.substring(1):1==r?s+i:s+"/"+i}function v_(s){const i=s.match(/#|\?|$/),r=i&&i.index||s.length;return s.slice(0,r-("/"===s[r-1]?1:0))+s.slice(r)}function xc(s){return s&&"?"!==s[0]?"?"+s:s}let Ny=(()=>{class s{historyGo(r){throw new Error("Not implemented")}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=at({token:s,factory:function(){return function HO(s){const i=Z(_r).location;return new w_(Z(Vp),i&&i.origin||"")}()},providedIn:"root"}),s})();const VS=new Se("appBaseHref");let w_=(()=>{class s extends Ny{constructor(r,l){if(super(),this._platformLocation=r,this._removeListenerFns=[],null==l&&(l=this._platformLocation.getBaseHrefFromDOM()),null==l)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=l}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return BS(this._baseHref,r)}path(r=!1){const l=this._platformLocation.pathname+xc(this._platformLocation.search),c=this._platformLocation.hash;return c&&r?`${l}${c}`:l}pushState(r,l,c,d){const m=this.prepareExternalUrl(c+xc(d));this._platformLocation.pushState(r,l,m)}replaceState(r,l,c,d){const m=this.prepareExternalUrl(c+xc(d));this._platformLocation.replaceState(r,l,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var l,c;null===(c=(l=this._platformLocation).historyGo)||void 0===c||c.call(l,r)}}return s.\u0275fac=function(r){return new(r||s)(Z(Vp),Z(VS,8))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})(),GO=(()=>{class s extends Ny{constructor(r,l){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=l&&(this._baseHref=l)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let l=this._platformLocation.hash;return null==l&&(l="#"),l.length>0?l.substring(1):l}prepareExternalUrl(r){const l=BS(this._baseHref,r);return l.length>0?"#"+l:l}pushState(r,l,c,d){let m=this.prepareExternalUrl(c+xc(d));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.pushState(r,l,m)}replaceState(r,l,c,d){let m=this.prepareExternalUrl(c+xc(d));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.replaceState(r,l,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var l,c;null===(c=(l=this._platformLocation).historyGo)||void 0===c||c.call(l,r)}}return s.\u0275fac=function(r){return new(r||s)(Z(Vp),Z(VS,8))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})(),US=(()=>{class s{constructor(r,l){this._subject=new Ci,this._urlChangeListeners=[],this._platformStrategy=r;const c=this._platformStrategy.getBaseHref();this._platformLocation=l,this._baseHref=v_(x_(c)),this._platformStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}path(r=!1){return this.normalize(this._platformStrategy.path(r))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(r,l=""){return this.path()==this.normalize(r+xc(l))}normalize(r){return s.stripTrailingSlash(function $O(s,i){return s&&i.startsWith(s)?i.substring(s.length):i}(this._baseHref,x_(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}go(r,l="",c=null){this._platformStrategy.pushState(c,"",r,l),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+xc(l)),c)}replaceState(r,l="",c=null){this._platformStrategy.replaceState(c,"",r,l),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+xc(l)),c)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(r=0){var l,c;null===(c=(l=this._platformStrategy).historyGo)||void 0===c||c.call(l,r)}onUrlChange(r){this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(l=>{this._notifyUrlChangeListeners(l.url,l.state)}))}_notifyUrlChangeListeners(r="",l){this._urlChangeListeners.forEach(c=>c(r,l))}subscribe(r,l,c){return this._subject.subscribe({next:r,error:l,complete:c})}}return s.normalizeQueryParams=xc,s.joinWithSlash=BS,s.stripTrailingSlash=v_,s.\u0275fac=function(r){return new(r||s)(Z(Ny),Z(Vp))},s.\u0275prov=at({token:s,factory:function(){return function zO(){return new US(Z(Ny),Z(Vp))}()},providedIn:"root"}),s})();function x_(s){return s.replace(/\/index.html$/,"")}var Vr=(()=>((Vr=Vr||{})[Vr.Zero=0]="Zero",Vr[Vr.One=1]="One",Vr[Vr.Two=2]="Two",Vr[Vr.Few=3]="Few",Vr[Vr.Many=4]="Many",Vr[Vr.Other=5]="Other",Vr))();const QO=function ac(s){return function vn(s){const i=function lc(s){return s.toLowerCase().replace(/_/g,"-")}(s);let r=ay(i);if(r)return r;const l=i.split("-")[0];if(r=ay(l),r)return r;if("en"===l)return Xo;throw new Error(`Missing locale data for the locale "${s}".`)}(s)[jt.PluralCase]};class J1{}let _b=(()=>{class s extends J1{constructor(r){super(),this.locale=r}getPluralCategory(r,l){switch(QO(l||this.locale)(r)){case Vr.Zero:return"zero";case Vr.One:return"one";case Vr.Two:return"two";case Vr.Few:return"few";case Vr.Many:return"many";default:return"other"}}}return s.\u0275fac=function(r){return new(r||s)(Z(Of))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();function P_(s,i){i=encodeURIComponent(i);for(const r of s.split(";")){const l=r.indexOf("="),[c,d]=-1==l?[r,""]:[r.slice(0,l),r.slice(l+1)];if(c.trim()===i)return decodeURIComponent(d)}return null}let ZS=(()=>{class s{constructor(r,l){this._viewContainer=r,this._context=new Ib,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=l}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){k_("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){k_("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,l){return!0}}return s.\u0275fac=function(r){return new(r||s)(Dt(uu),Dt(wc))},s.\u0275dir=se({type:s,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),s})();class Ib{constructor(){this.$implicit=null,this.ngIf=null}}function k_(s,i){if(i&&!i.createEmbeddedView)throw new Error(`${s} must be a TemplateRef, but received '${fn(i)}'.`)}let ow=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({providers:[{provide:J1,useClass:_b}]}),s})();let lL=(()=>{class s{}return s.\u0275prov=at({token:s,providedIn:"root",factory:()=>new uL(Z(_r),window)}),s})();class uL{constructor(i,r){this.document=i,this.window=r,this.offset=()=>[0,0]}setOffset(i){this.offset=Array.isArray(i)?()=>i:i}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(i){this.supportsScrolling()&&this.window.scrollTo(i[0],i[1])}scrollToAnchor(i){if(!this.supportsScrolling())return;const r=function hL(s,i){const r=s.getElementById(i)||s.getElementsByName(i)[0];if(r)return r;if("function"==typeof s.createTreeWalker&&s.body&&(s.body.createShadowRoot||s.body.attachShadow)){const l=s.createTreeWalker(s.body,NodeFilter.SHOW_ELEMENT);let c=l.currentNode;for(;c;){const d=c.shadowRoot;if(d){const m=d.getElementById(i)||d.querySelector(`[name="${i}"]`);if(m)return m}c=l.nextNode()}}return null}(this.document,i);r&&(this.scrollToElement(r),r.focus())}setHistoryScrollRestoration(i){if(this.supportScrollRestoration()){const r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=i)}}scrollToElement(i){const r=i.getBoundingClientRect(),l=r.left+this.window.pageXOffset,c=r.top+this.window.pageYOffset,d=this.offset();this.window.scrollTo(l-d[0],c-d[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const i=L_(this.window.history)||L_(Object.getPrototypeOf(this.window.history));return!(!i||!i.writable&&!i.set)}catch(i){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(i){return!1}}}function L_(s){return Object.getOwnPropertyDescriptor(s,"scrollRestoration")}class F_{}class eD extends class cL extends class jO{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function RO(s){U1||(U1=s)}(new eD)}onAndCancel(i,r,l){return i.addEventListener(r,l,!1),()=>{i.removeEventListener(r,l,!1)}}dispatchEvent(i,r){i.dispatchEvent(r)}remove(i){i.parentNode&&i.parentNode.removeChild(i)}createElement(i,r){return(r=r||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,r){return"window"===r?window:"document"===r?i:"body"===r?i.body:null}getBaseHref(i){const r=function fL(){return sw=sw||document.querySelector("base"),sw?sw.getAttribute("href"):null}();return null==r?null:function dL(s){Q1=Q1||document.createElement("a"),Q1.setAttribute("href",s);const i=Q1.pathname;return"/"===i.charAt(0)?i:`/${i}`}(r)}resetBaseElement(){sw=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return P_(document.cookie,i)}}let Q1,sw=null;const R_=new Se("TRANSITION_ID"),gL=[{provide:L1,useFactory:function pL(s,i,r){return()=>{r.get(Ty).donePromise.then(()=>{const l=th(),c=i.querySelectorAll(`style[ng-transition="${s}"]`);for(let d=0;d<c.length;d++)l.remove(c[d])})}},deps:[R_,_r,mn],multi:!0}];class nD{static init(){!function iO(s){OS=s}(new nD)}addToWindow(i){Fn.getAngularTestability=(l,c=!0)=>{const d=i.findTestabilityInTree(l,c);if(null==d)throw new Error("Could not find testability for element.");return d},Fn.getAllAngularTestabilities=()=>i.getAllTestabilities(),Fn.getAllAngularRootElements=()=>i.getAllRootElements(),Fn.frameworkStabilizers||(Fn.frameworkStabilizers=[]),Fn.frameworkStabilizers.push(l=>{const c=Fn.getAllAngularTestabilities();let d=c.length,m=!1;const w=function(C){m=m||C,d--,0==d&&l(m)};c.forEach(function(C){C.whenStable(w)})})}findTestabilityInTree(i,r,l){if(null==r)return null;const c=i.getTestability(r);return null!=c?c:l?th().isShadowRoot(r)?this.findTestabilityInTree(i,r.host,!0):this.findTestabilityInTree(i,r.parentElement,!0):null}}let mL=(()=>{class s{build(){return new XMLHttpRequest}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();const q1=new Se("EventManagerPlugins");let tC=(()=>{class s{constructor(r,l){this._zone=l,this._eventNameToPlugin=new Map,r.forEach(c=>c.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,l,c){return this._findPluginFor(l).addEventListener(r,l,c)}addGlobalEventListener(r,l,c){return this._findPluginFor(l).addGlobalEventListener(r,l,c)}getZone(){return this._zone}_findPluginFor(r){const l=this._eventNameToPlugin.get(r);if(l)return l;const c=this._plugins;for(let d=0;d<c.length;d++){const m=c[d];if(m.supports(r))return this._eventNameToPlugin.set(r,m),m}throw new Error(`No event manager plugin found for event ${r}`)}}return s.\u0275fac=function(r){return new(r||s)(Z(q1),Z(ii))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();class j_{constructor(i){this._doc=i}addGlobalEventListener(i,r,l){const c=th().getGlobalEventTarget(this._doc,i);if(!c)throw new Error(`Unsupported event target ${c} for event ${r}`);return this.addEventListener(c,r,l)}}let B_=(()=>{class s{constructor(){this._stylesSet=new Set}addStyles(r){const l=new Set;r.forEach(c=>{this._stylesSet.has(c)||(this._stylesSet.add(c),l.add(c))}),this.onStylesAdded(l)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})(),aw=(()=>{class s extends B_{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,l,c){r.forEach(d=>{const m=this._doc.createElement("style");m.textContent=d,c.push(l.appendChild(m))})}addHost(r){const l=[];this._addStylesToHost(this._stylesSet,r,l),this._hostNodes.set(r,l)}removeHost(r){const l=this._hostNodes.get(r);l&&l.forEach(V_),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((l,c)=>{this._addStylesToHost(r,c,l)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(V_))}}return s.\u0275fac=function(r){return new(r||s)(Z(_r))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();function V_(s){th().remove(s)}const iD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rD=/%COMP%/g;function eC(s,i,r){for(let l=0;l<i.length;l++){let c=i[l];Array.isArray(c)?eC(s,c,r):(c=c.replace(rD,s),r.push(c))}return r}function G_(s){return i=>{if("__ngUnwrap__"===i)return s;!1===s(i)&&(i.preventDefault(),i.returnValue=!1)}}let nC=(()=>{class s{constructor(r,l,c){this.eventManager=r,this.sharedStylesHost=l,this.appId=c,this.rendererByCompId=new Map,this.defaultRenderer=new oD(r)}createRenderer(r,l){if(!r||!l)return this.defaultRenderer;switch(l.encapsulation){case rs.Emulated:{let c=this.rendererByCompId.get(l.id);return c||(c=new ML(this.eventManager,this.sharedStylesHost,l,this.appId),this.rendererByCompId.set(l.id,c)),c.applyToHost(r),c}case 1:case rs.ShadowDom:return new SL(this.eventManager,this.sharedStylesHost,r,l);default:if(!this.rendererByCompId.has(l.id)){const c=eC(l.id,l.styles,[]);this.sharedStylesHost.addStyles(c),this.rendererByCompId.set(l.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return s.\u0275fac=function(r){return new(r||s)(Z(tC),Z(aw),Z(ew))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();class oD{constructor(i){this.eventManager=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(i,r){return r?document.createElementNS(iD[r]||r,i):document.createElement(i)}createComment(i){return document.createComment(i)}createText(i){return document.createTextNode(i)}appendChild(i,r){i.appendChild(r)}insertBefore(i,r,l){i&&i.insertBefore(r,l)}removeChild(i,r){i&&i.removeChild(r)}selectRootElement(i,r){let l="string"==typeof i?document.querySelector(i):i;if(!l)throw new Error(`The selector "${i}" did not match any elements`);return r||(l.textContent=""),l}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,r,l,c){if(c){r=c+":"+r;const d=iD[c];d?i.setAttributeNS(d,r,l):i.setAttribute(r,l)}else i.setAttribute(r,l)}removeAttribute(i,r,l){if(l){const c=iD[l];c?i.removeAttributeNS(c,r):i.removeAttribute(`${l}:${r}`)}else i.removeAttribute(r)}addClass(i,r){i.classList.add(r)}removeClass(i,r){i.classList.remove(r)}setStyle(i,r,l,c){c&(Uo.DashCase|Uo.Important)?i.style.setProperty(r,l,c&Uo.Important?"important":""):i.style[r]=l}removeStyle(i,r,l){l&Uo.DashCase?i.style.removeProperty(r):i.style[r]=""}setProperty(i,r,l){i[r]=l}setValue(i,r){i.nodeValue=r}listen(i,r,l){return"string"==typeof i?this.eventManager.addGlobalEventListener(i,r,G_(l)):this.eventManager.addEventListener(i,r,G_(l))}}class ML extends oD{constructor(i,r,l,c){super(i),this.component=l;const d=eC(c+"-"+l.id,l.styles,[]);r.addStyles(d),this.contentAttr=function wL(s){return"_ngcontent-%COMP%".replace(rD,s)}(c+"-"+l.id),this.hostAttr=function xL(s){return"_nghost-%COMP%".replace(rD,s)}(c+"-"+l.id)}applyToHost(i){super.setAttribute(i,this.hostAttr,"")}createElement(i,r){const l=super.createElement(i,r);return super.setAttribute(l,this.contentAttr,""),l}}class SL extends oD{constructor(i,r,l,c){super(i),this.sharedStylesHost=r,this.hostEl=l,this.shadowRoot=l.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=eC(c.id,c.styles,[]);for(let m=0;m<d.length;m++){const w=document.createElement("style");w.textContent=d[m],this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(i,r){return super.appendChild(this.nodeOrShadowRoot(i),r)}insertBefore(i,r,l){return super.insertBefore(this.nodeOrShadowRoot(i),r,l)}removeChild(i,r){return super.removeChild(this.nodeOrShadowRoot(i),r)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}}let DL=(()=>{class s extends j_{constructor(r){super(r)}supports(r){return!0}addEventListener(r,l,c){return r.addEventListener(l,c,!1),()=>this.removeEventListener(r,l,c)}removeEventListener(r,l,c){return r.removeEventListener(l,c)}}return s.\u0275fac=function(r){return new(r||s)(Z(_r))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();const $_=["alt","control","meta","shift"],TL={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Y_={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},_L={alt:s=>s.altKey,control:s=>s.ctrlKey,meta:s=>s.metaKey,shift:s=>s.shiftKey};let NL=(()=>{class s extends j_{constructor(r){super(r)}supports(r){return null!=s.parseEventName(r)}addEventListener(r,l,c){const d=s.parseEventName(l),m=s.eventCallback(d.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>th().onAndCancel(r,d.domEventName,m))}static parseEventName(r){const l=r.toLowerCase().split("."),c=l.shift();if(0===l.length||"keydown"!==c&&"keyup"!==c)return null;const d=s._normalizeKey(l.pop());let m="";if($_.forEach(C=>{const E=l.indexOf(C);E>-1&&(l.splice(E,1),m+=C+".")}),m+=d,0!=l.length||0===d.length)return null;const w={};return w.domEventName=c,w.fullKey=m,w}static getEventFullKey(r){let l="",c=function PL(s){let i=s.key;if(null==i){if(i=s.keyIdentifier,null==i)return"Unidentified";i.startsWith("U+")&&(i=String.fromCharCode(parseInt(i.substring(2),16)),3===s.location&&Y_.hasOwnProperty(i)&&(i=Y_[i]))}return TL[i]||i}(r);return c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),$_.forEach(d=>{d!=c&&_L[d](r)&&(l+=d+".")}),l+=c,l}static eventCallback(r,l,c){return d=>{s.getEventFullKey(d)===r&&c.runGuarded(()=>l(d))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return s.\u0275fac=function(r){return new(r||s)(Z(_r))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();const OL=t_(NO,"browser",[{provide:F1,useValue:"browser"},{provide:$T,useValue:function AL(){eD.makeCurrent(),nD.init()},multi:!0},{provide:_r,useFactory:function IL(){return function zr(s){mi=s}(document),document},deps:[]}]),bL=[{provide:wr,useValue:"root"},{provide:Ru,useFactory:function kL(){return new Ru},deps:[]},{provide:q1,useClass:DL,multi:!0,deps:[_r,ii,F1]},{provide:q1,useClass:NL,multi:!0,deps:[_r]},{provide:nC,useClass:nC,deps:[tC,aw,ew]},{provide:K0,useExisting:nC},{provide:B_,useExisting:aw},{provide:aw,useClass:aw,deps:[_r]},{provide:IS,useClass:IS,deps:[ii]},{provide:tC,useClass:tC,deps:[q1,ii]},{provide:F_,useClass:mL,deps:[]}];let W_=(()=>{class s{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:s,providers:[{provide:ew,useValue:r.appId},{provide:R_,useExisting:ew},gL]}}}return s.\u0275fac=function(r){return new(r||s)(Z(s,12))},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({providers:bL,imports:[ow,LO]}),s})();"undefined"!=typeof window&&window;let aD=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=at({token:s,factory:function(r){let l=null;return l=r?new(r||s):Z(Z_),l},providedIn:"root"}),s})(),Z_=(()=>{class s extends aD{constructor(r){super(),this._doc=r}sanitize(r,l){if(null==l)return null;switch(r){case An.NONE:return l;case An.HTML:return gr(l,"HTML")?Bo(l):Bn(this._doc,String(l)).toString();case An.STYLE:return gr(l,"Style")?Bo(l):l;case An.SCRIPT:if(gr(l,"Script"))return Bo(l);throw new Error("unsafe value used in a script context");case An.URL:return Is(l),gr(l,"URL")?Bo(l):Mh(String(l));case An.RESOURCE_URL:if(gr(l,"ResourceURL"))return Bo(l);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${r} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(r){return function el(s){return new Vl(s)}(r)}bypassSecurityTrustStyle(r){return function ro(s){return new Jc(s)}(r)}bypassSecurityTrustScript(r){return function Lu(s){return new ua(s)}(r)}bypassSecurityTrustUrl(r){return function NM(s){return new Ch(s)}(r)}bypassSecurityTrustResourceUrl(r){return function _d(s){return new Td(s)}(r)}}return s.\u0275fac=function(r){return new(r||s)(Z(_r))},s.\u0275prov=at({token:s,factory:function(r){let l=null;return l=r?new r:function zL(s){return new Z_(s.get(_r))}(Z(mn)),l},providedIn:"root"}),s})();function Ge(...s){let i=s[s.length-1];return Pr(i)?(s.pop(),Ki(s,i)):si(s)}class du extends Jt{constructor(i){super(),this._value=i}get value(){return this.getValue()}_subscribe(i){const r=super._subscribe(i);return r&&!r.closed&&i.next(this._value),r}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Po;return this._value}next(i){super.next(this._value=i)}}class $L extends kt{notifyNext(i,r,l,c,d){this.destination.next(r)}notifyError(i,r){this.destination.error(i)}notifyComplete(i){this.destination.complete()}}class YL extends kt{constructor(i,r,l){super(),this.parent=i,this.outerValue=r,this.outerIndex=l,this.index=0}_next(i){this.parent.notifyNext(this.outerValue,i,this.outerIndex,this.index++,this)}_error(i){this.parent.notifyError(i,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function WL(s,i,r,l,c=new YL(s,r,l)){if(!c.closed)return i instanceof $t?i.subscribe(c):it(i)(c)}const J_={};class KL{constructor(i){this.resultSelector=i}call(i,r){return r.subscribe(new ZL(i,this.resultSelector))}}class ZL extends $L{constructor(i,r){super(i),this.resultSelector=r,this.active=0,this.values=[],this.observables=[]}_next(i){this.values.push(J_),this.observables.push(i)}_complete(){const i=this.observables,r=i.length;if(0===r)this.destination.complete();else{this.active=r,this.toRespond=r;for(let l=0;l<r;l++)this.add(WL(this,i[l],void 0,l))}}notifyComplete(i){0==(this.active-=1)&&this.destination.complete()}notifyNext(i,r,l){const c=this.values,m=this.toRespond?c[l]===J_?--this.toRespond:this.toRespond:0;c[l]=r,0===m&&(this.resultSelector?this._tryResultSelector(c):this.destination.next(c.slice()))}_tryResultSelector(i){let r;try{r=this.resultSelector.apply(this,i)}catch(l){return void this.destination.error(l)}this.destination.next(r)}}const iC=(()=>{function s(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return s.prototype=Object.create(Error.prototype),s})();function lD(...s){return function JL(){return Ie(1)}()(Ge(...s))}const Py=new $t(s=>s.complete());function uD(s){return s?function QL(s){return new $t(i=>s.schedule(()=>i.complete()))}(s):Py}function Q_(s){return new $t(i=>{let r;try{r=s()}catch(c){return void i.error(c)}return(r?ke(r):uD()).subscribe(i)})}function Ff(s,i){return"function"==typeof i?r=>r.pipe(Ff((l,c)=>ke(s(l,c)).pipe(dn((d,m)=>i(l,d,c,m))))):r=>r.lift(new qL(s))}class qL{constructor(i){this.project=i}call(i,r){return r.subscribe(new tF(i,this.project))}}class tF extends oi{constructor(i,r){super(i),this.project=r,this.index=0}_next(i){let r;const l=this.index++;try{r=this.project(i,l)}catch(c){return void this.destination.error(c)}this._innerSub(r)}_innerSub(i){const r=this.innerSubscription;r&&r.unsubscribe();const l=new ri(this),c=this.destination;c.add(l),this.innerSubscription=wn(i,l),this.innerSubscription!==l&&c.add(this.innerSubscription)}_complete(){const{innerSubscription:i}=this;(!i||i.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(i){this.destination.next(i)}}const q_=(()=>{function s(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return s.prototype=Object.create(Error.prototype),s})();function hD(s){return i=>0===s?uD():i.lift(new eF(s))}class eF{constructor(i){if(this.total=i,this.total<0)throw new q_}call(i,r){return r.subscribe(new nF(i,this.total))}}class nF extends kt{constructor(i,r){super(i),this.total=r,this.count=0}_next(i){const r=this.total,l=++this.count;l<=r&&(this.destination.next(i),l===r&&(this.destination.complete(),this.unsubscribe()))}}function tN(s,i){let r=!1;return arguments.length>=2&&(r=!0),function(c){return c.lift(new rF(s,i,r))}}class rF{constructor(i,r,l=!1){this.accumulator=i,this.seed=r,this.hasSeed=l}call(i,r){return r.subscribe(new oF(i,this.accumulator,this.seed,this.hasSeed))}}class oF extends kt{constructor(i,r,l,c){super(i),this.accumulator=r,this._seed=l,this.hasSeed=c,this.index=0}get seed(){return this._seed}set seed(i){this.hasSeed=!0,this._seed=i}_next(i){if(this.hasSeed)return this._tryNext(i);this.seed=i,this.destination.next(i)}_tryNext(i){const r=this.index++;let l;try{l=this.accumulator(this.seed,i,r)}catch(c){this.destination.error(c)}this.seed=l,this.destination.next(l)}}function Up(s,i){return function(l){return l.lift(new sF(s,i))}}class sF{constructor(i,r){this.predicate=i,this.thisArg=r}call(i,r){return r.subscribe(new aF(i,this.predicate,this.thisArg))}}class aF extends kt{constructor(i,r,l){super(i),this.predicate=r,this.thisArg=l,this.count=0}_next(i){let r;try{r=this.predicate.call(this.thisArg,i,this.count++)}catch(l){return void this.destination.error(l)}r&&this.destination.next(i)}}function Hp(s){return function(r){const l=new lF(s),c=r.lift(l);return l.caught=c}}class lF{constructor(i){this.selector=i}call(i,r){return r.subscribe(new uF(i,this.selector,this.caught))}}class uF extends oi{constructor(i,r,l){super(i),this.selector=r,this.caught=l}error(i){if(!this.isStopped){let r;try{r=this.selector(i,this.caught)}catch(d){return void super.error(d)}this._unsubscribeAndRecycle();const l=new ri(this);this.add(l);const c=wn(r,l);c!==l&&this.add(c)}}}function Ay(s,i){return pi(s,i,1)}function cD(s){return function(r){return 0===s?uD():r.lift(new hF(s))}}class hF{constructor(i){if(this.total=i,this.total<0)throw new q_}call(i,r){return r.subscribe(new cF(i,this.total))}}class cF extends kt{constructor(i,r){super(i),this.total=r,this.ring=new Array,this.count=0}_next(i){const r=this.ring,l=this.total,c=this.count++;r.length<l?r.push(i):r[c%l]=i}_complete(){const i=this.destination;let r=this.count;if(r>0){const l=this.count>=this.total?this.total:this.count,c=this.ring;for(let d=0;d<l;d++){const m=r++%l;i.next(c[m])}}i.complete()}}function eN(s=pF){return i=>i.lift(new fF(s))}class fF{constructor(i){this.errorFactory=i}call(i,r){return r.subscribe(new dF(i,this.errorFactory))}}class dF extends kt{constructor(i,r){super(i),this.errorFactory=r,this.hasValue=!1}_next(i){this.hasValue=!0,this.destination.next(i)}_complete(){if(this.hasValue)return this.destination.complete();{let i;try{i=this.errorFactory()}catch(r){i=r}this.destination.error(i)}}}function pF(){return new iC}function nN(s=null){return i=>i.lift(new gF(s))}class gF{constructor(i){this.defaultValue=i}call(i,r){return r.subscribe(new mF(i,this.defaultValue))}}class mF extends kt{constructor(i,r){super(i),this.defaultValue=r,this.isEmpty=!0}_next(i){this.isEmpty=!1,this.destination.next(i)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function ky(s,i){const r=arguments.length>=2;return l=>l.pipe(s?Up((c,d)=>s(c,d,l)):qt,hD(1),r?nN(i):eN(()=>new iC))}function Rf(){}function Ia(s,i,r){return function(c){return c.lift(new vF(s,i,r))}}class vF{constructor(i,r,l){this.nextOrObserver=i,this.error=r,this.complete=l}call(i,r){return r.subscribe(new wF(i,this.nextOrObserver,this.error,this.complete))}}class wF extends kt{constructor(i,r,l,c){super(i),this._tapNext=Rf,this._tapError=Rf,this._tapComplete=Rf,this._tapError=l||Rf,this._tapComplete=c||Rf,St(r)?(this._context=this,this._tapNext=r):r&&(this._context=r,this._tapNext=r.next||Rf,this._tapError=r.error||Rf,this._tapComplete=r.complete||Rf)}_next(i){try{this._tapNext.call(this._context,i)}catch(r){return void this.destination.error(r)}this.destination.next(i)}_error(i){try{this._tapError.call(this._context,i)}catch(r){return void this.destination.error(r)}this.destination.error(i)}_complete(){try{this._tapComplete.call(this._context)}catch(i){return void this.destination.error(i)}return this.destination.complete()}}class CF{constructor(i){this.callback=i}call(i,r){return r.subscribe(new MF(i,this.callback))}}class MF extends kt{constructor(i,r){super(i),this.add(new G(r))}}class Mc{constructor(i,r){this.id=i,this.url=r}}class fD extends Mc{constructor(i,r,l="imperative",c=null){super(i,r),this.navigationTrigger=l,this.restoredState=c}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lw extends Mc{constructor(i,r,l){super(i,r),this.urlAfterRedirects=l}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class iN extends Mc{constructor(i,r,l){super(i,r),this.reason=l}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class SF extends Mc{constructor(i,r,l){super(i,r),this.error=l}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class DF extends Mc{constructor(i,r,l,c){super(i,r),this.urlAfterRedirects=l,this.state=c}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EF extends Mc{constructor(i,r,l,c){super(i,r),this.urlAfterRedirects=l,this.state=c}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TF extends Mc{constructor(i,r,l,c,d){super(i,r),this.urlAfterRedirects=l,this.state=c,this.shouldActivate=d}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _F extends Mc{constructor(i,r,l,c){super(i,r),this.urlAfterRedirects=l,this.state=c}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NF extends Mc{constructor(i,r,l,c){super(i,r),this.urlAfterRedirects=l,this.state=c}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rN{constructor(i){this.route=i}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oN{constructor(i){this.route=i}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class PF{constructor(i){this.snapshot=i}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AF{constructor(i){this.snapshot=i}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kF{constructor(i){this.snapshot=i}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IF{constructor(i){this.snapshot=i}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sN{constructor(i,r,l){this.routerEvent=i,this.position=r,this.anchor=l}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const tn="primary";class OF{constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){const r=this.params[i];return Array.isArray(r)?r[0]:r}return null}getAll(i){if(this.has(i)){const r=this.params[i];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function Iy(s){return new OF(s)}const aN="ngNavigationCancelingError";function dD(s){const i=Error("NavigationCancelingError: "+s);return i[aN]=!0,i}function LF(s,i,r){const l=r.path.split("/");if(l.length>s.length||"full"===r.pathMatch&&(i.hasChildren()||l.length<s.length))return null;const c={};for(let d=0;d<l.length;d++){const m=l[d],w=s[d];if(m.startsWith(":"))c[m.substring(1)]=w;else if(m!==w.path)return null}return{consumed:s.slice(0,l.length),posParams:c}}function eh(s,i){const r=s?Object.keys(s):void 0,l=i?Object.keys(i):void 0;if(!r||!l||r.length!=l.length)return!1;let c;for(let d=0;d<r.length;d++)if(c=r[d],!lN(s[c],i[c]))return!1;return!0}function lN(s,i){if(Array.isArray(s)&&Array.isArray(i)){if(s.length!==i.length)return!1;const r=[...s].sort(),l=[...i].sort();return r.every((c,d)=>l[d]===c)}return s===i}function uN(s){return Array.prototype.concat.apply([],s)}function hN(s){return s.length>0?s[s.length-1]:null}function No(s,i){for(const r in s)s.hasOwnProperty(r)&&i(s[r],r)}function nh(s){return xa(s)?s:Sf(s)?ke(Promise.resolve(s)):Ge(s)}const jF={exact:function dN(s,i,r){if(!zp(s.segments,i.segments)||!rC(s.segments,i.segments,r)||s.numberOfChildren!==i.numberOfChildren)return!1;for(const l in i.children)if(!s.children[l]||!dN(s.children[l],i.children[l],r))return!1;return!0},subset:pN},cN={exact:function BF(s,i){return eh(s,i)},subset:function VF(s,i){return Object.keys(i).length<=Object.keys(s).length&&Object.keys(i).every(r=>lN(s[r],i[r]))},ignored:()=>!0};function fN(s,i,r){return jF[r.paths](s.root,i.root,r.matrixParams)&&cN[r.queryParams](s.queryParams,i.queryParams)&&!("exact"===r.fragment&&s.fragment!==i.fragment)}function pN(s,i,r){return gN(s,i,i.segments,r)}function gN(s,i,r,l){if(s.segments.length>r.length){const c=s.segments.slice(0,r.length);return!(!zp(c,r)||i.hasChildren()||!rC(c,r,l))}if(s.segments.length===r.length){if(!zp(s.segments,r)||!rC(s.segments,r,l))return!1;for(const c in i.children)if(!s.children[c]||!pN(s.children[c],i.children[c],l))return!1;return!0}{const c=r.slice(0,s.segments.length),d=r.slice(s.segments.length);return!!(zp(s.segments,c)&&rC(s.segments,c,l)&&s.children[tn])&&gN(s.children[tn],i,d,l)}}function rC(s,i,r){return i.every((l,c)=>cN[r](s[c].parameters,l.parameters))}class Gp{constructor(i,r,l){this.root=i,this.queryParams=r,this.fragment=l}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Iy(this.queryParams)),this._queryParamMap}toString(){return GF.serialize(this)}}class cn{constructor(i,r){this.segments=i,this.children=r,this.parent=null,No(r,(l,c)=>l.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return oC(this)}}class uw{constructor(i,r){this.path=i,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=Iy(this.parameters)),this._parameterMap}toString(){return xN(this)}}function zp(s,i){return s.length===i.length&&s.every((r,l)=>r.path===i[l].path)}class mN{}class yN{parse(i){const r=new QF(i);return new Gp(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(i){const r=`/${hw(i.root,!0)}`,l=function YF(s){const i=Object.keys(s).map(r=>{const l=s[r];return Array.isArray(l)?l.map(c=>`${sC(r)}=${sC(c)}`).join("&"):`${sC(r)}=${sC(l)}`}).filter(r=>!!r);return i.length?`?${i.join("&")}`:""}(i.queryParams),c="string"==typeof i.fragment?`#${function zF(s){return encodeURI(s)}(i.fragment)}`:"";return`${r}${l}${c}`}}const GF=new yN;function oC(s){return s.segments.map(i=>xN(i)).join("/")}function hw(s,i){if(!s.hasChildren())return oC(s);if(i){const r=s.children[tn]?hw(s.children[tn],!1):"",l=[];return No(s.children,(c,d)=>{d!==tn&&l.push(`${d}:${hw(c,!1)}`)}),l.length>0?`${r}(${l.join("//")})`:r}{const r=function HF(s,i){let r=[];return No(s.children,(l,c)=>{c===tn&&(r=r.concat(i(l,c)))}),No(s.children,(l,c)=>{c!==tn&&(r=r.concat(i(l,c)))}),r}(s,(l,c)=>c===tn?[hw(s.children[tn],!1)]:[`${c}:${hw(l,!1)}`]);return 1===Object.keys(s.children).length&&null!=s.children[tn]?`${oC(s)}/${r[0]}`:`${oC(s)}/(${r.join("//")})`}}function vN(s){return encodeURIComponent(s).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sC(s){return vN(s).replace(/%3B/gi,";")}function pD(s){return vN(s).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function aC(s){return decodeURIComponent(s)}function wN(s){return aC(s.replace(/\+/g,"%20"))}function xN(s){return`${pD(s.path)}${function $F(s){return Object.keys(s).map(i=>`;${pD(i)}=${pD(s[i])}`).join("")}(s.parameters)}`}const WF=/^[^\/()?;=#]+/;function lC(s){const i=s.match(WF);return i?i[0]:""}const XF=/^[^=?&#]+/,ZF=/^[^&#]+/;class QF{constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new cn([],{}):new cn([],this.parseChildren())}parseQueryParams(){const i={};if(this.consumeOptional("?"))do{this.parseQueryParam(i)}while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let l={};return this.peekStartsWith("(")&&(l=this.parseParens(!1)),(i.length>0||Object.keys(r).length>0)&&(l[tn]=new cn(i,r)),l}parseSegment(){const i=lC(this.remaining);if(""===i&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(i),new uw(aC(i),this.parseMatrixParams())}parseMatrixParams(){const i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){const r=lC(this.remaining);if(!r)return;this.capture(r);let l="";if(this.consumeOptional("=")){const c=lC(this.remaining);c&&(l=c,this.capture(l))}i[aC(r)]=aC(l)}parseQueryParam(i){const r=function KF(s){const i=s.match(XF);return i?i[0]:""}(this.remaining);if(!r)return;this.capture(r);let l="";if(this.consumeOptional("=")){const m=function JF(s){const i=s.match(ZF);return i?i[0]:""}(this.remaining);m&&(l=m,this.capture(l))}const c=wN(r),d=wN(l);if(i.hasOwnProperty(c)){let m=i[c];Array.isArray(m)||(m=[m],i[c]=m),m.push(d)}else i[c]=d}parseParens(i){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const l=lC(this.remaining),c=this.remaining[l.length];if("/"!==c&&")"!==c&&";"!==c)throw new Error(`Cannot parse url '${this.url}'`);let d;l.indexOf(":")>-1?(d=l.substr(0,l.indexOf(":")),this.capture(d),this.capture(":")):i&&(d=tn);const m=this.parseChildren();r[d]=1===Object.keys(m).length?m[tn]:new cn([],m),this.consumeOptional("//")}return r}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return!!this.peekStartsWith(i)&&(this.remaining=this.remaining.substring(i.length),!0)}capture(i){if(!this.consumeOptional(i))throw new Error(`Expected "${i}".`)}}class CN{constructor(i){this._root=i}get root(){return this._root.value}parent(i){const r=this.pathFromRoot(i);return r.length>1?r[r.length-2]:null}children(i){const r=gD(i,this._root);return r?r.children.map(l=>l.value):[]}firstChild(i){const r=gD(i,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(i){const r=mD(i,this._root);return r.length<2?[]:r[r.length-2].children.map(c=>c.value).filter(c=>c!==i)}pathFromRoot(i){return mD(i,this._root).map(r=>r.value)}}function gD(s,i){if(s===i.value)return i;for(const r of i.children){const l=gD(s,r);if(l)return l}return null}function mD(s,i){if(s===i.value)return[i];for(const r of i.children){const l=mD(s,r);if(l.length)return l.unshift(i),l}return[]}class Sc{constructor(i,r){this.value=i,this.children=r}toString(){return`TreeNode(${this.value})`}}function Oy(s){const i={};return s&&s.children.forEach(r=>i[r.value.outlet]=r),i}class MN extends CN{constructor(i,r){super(i),this.snapshot=r,yD(this,i)}toString(){return this.snapshot.toString()}}function SN(s,i){const r=function qF(s,i){const m=new uC([],{},{},"",{},tn,i,null,s.root,-1,{});return new EN("",new Sc(m,[]))}(s,i),l=new du([new uw("",{})]),c=new du({}),d=new du({}),m=new du({}),w=new du(""),C=new by(l,c,m,w,d,tn,i,r.root);return C.snapshot=r.root,new MN(new Sc(C,[]),r)}class by{constructor(i,r,l,c,d,m,w,C){this.url=i,this.params=r,this.queryParams=l,this.fragment=c,this.data=d,this.outlet=m,this.component=w,this._futureSnapshot=C}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(dn(i=>Iy(i)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(dn(i=>Iy(i)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function DN(s,i="emptyOnly"){const r=s.pathFromRoot;let l=0;if("always"!==i)for(l=r.length-1;l>=1;){const c=r[l],d=r[l-1];if(c.routeConfig&&""===c.routeConfig.path)l--;else{if(d.component)break;l--}}return function tR(s){return s.reduce((i,r)=>({params:Object.assign(Object.assign({},i.params),r.params),data:Object.assign(Object.assign({},i.data),r.data),resolve:Object.assign(Object.assign({},i.resolve),r._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(l))}class uC{constructor(i,r,l,c,d,m,w,C,E,_,k){this.url=i,this.params=r,this.queryParams=l,this.fragment=c,this.data=d,this.outlet=m,this.component=w,this.routeConfig=C,this._urlSegment=E,this._lastPathIndex=_,this._resolve=k}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Iy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Iy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(l=>l.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class EN extends CN{constructor(i,r){super(r),this.url=i,yD(this,r)}toString(){return TN(this._root)}}function yD(s,i){i.value._routerState=s,i.children.forEach(r=>yD(s,r))}function TN(s){const i=s.children.length>0?` { ${s.children.map(TN).join(", ")} } `:"";return`${s.value}${i}`}function vD(s){if(s.snapshot){const i=s.snapshot,r=s._futureSnapshot;s.snapshot=r,eh(i.queryParams,r.queryParams)||s.queryParams.next(r.queryParams),i.fragment!==r.fragment&&s.fragment.next(r.fragment),eh(i.params,r.params)||s.params.next(r.params),function FF(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(!eh(s[r],i[r]))return!1;return!0}(i.url,r.url)||s.url.next(r.url),eh(i.data,r.data)||s.data.next(r.data)}else s.snapshot=s._futureSnapshot,s.data.next(s._futureSnapshot.data)}function wD(s,i){const r=eh(s.params,i.params)&&function UF(s,i){return zp(s,i)&&s.every((r,l)=>eh(r.parameters,i[l].parameters))}(s.url,i.url);return r&&!(!s.parent!=!i.parent)&&(!s.parent||wD(s.parent,i.parent))}function cw(s,i,r){if(r&&s.shouldReuseRoute(i.value,r.value.snapshot)){const l=r.value;l._futureSnapshot=i.value;const c=function nR(s,i,r){return i.children.map(l=>{for(const c of r.children)if(s.shouldReuseRoute(l.value,c.value.snapshot))return cw(s,l,c);return cw(s,l)})}(s,i,r);return new Sc(l,c)}{if(s.shouldAttach(i.value)){const d=s.retrieve(i.value);if(null!==d){const m=d.route;return m.value._futureSnapshot=i.value,m.children=i.children.map(w=>cw(s,w)),m}}const l=function iR(s){return new by(new du(s.url),new du(s.params),new du(s.queryParams),new du(s.fragment),new du(s.data),s.outlet,s.component,s)}(i.value),c=i.children.map(d=>cw(s,d));return new Sc(l,c)}}function hC(s){return"object"==typeof s&&null!=s&&!s.outlets&&!s.segmentPath}function fw(s){return"object"==typeof s&&null!=s&&s.outlets}function xD(s,i,r,l,c){let d={};return l&&No(l,(m,w)=>{d[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),new Gp(r.root===s?i:_N(r.root,s,i),d,c)}function _N(s,i,r){const l={};return No(s.children,(c,d)=>{l[d]=c===i?r:_N(c,i,r)}),new cn(s.segments,l)}class NN{constructor(i,r,l){if(this.isAbsolute=i,this.numberOfDoubleDots=r,this.commands=l,i&&l.length>0&&hC(l[0]))throw new Error("Root segment cannot have matrix parameters");const c=l.find(fw);if(c&&c!==hN(l))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class CD{constructor(i,r,l){this.segmentGroup=i,this.processChildren=r,this.index=l}}function PN(s,i,r){if(s||(s=new cn([],{})),0===s.segments.length&&s.hasChildren())return cC(s,i,r);const l=function uR(s,i,r){let l=0,c=i;const d={match:!1,pathIndex:0,commandIndex:0};for(;c<s.segments.length;){if(l>=r.length)return d;const m=s.segments[c],w=r[l];if(fw(w))break;const C=`${w}`,E=l<r.length-1?r[l+1]:null;if(c>0&&void 0===C)break;if(C&&E&&"object"==typeof E&&void 0===E.outlets){if(!kN(C,E,m))return d;l+=2}else{if(!kN(C,{},m))return d;l++}c++}return{match:!0,pathIndex:c,commandIndex:l}}(s,i,r),c=r.slice(l.commandIndex);if(l.match&&l.pathIndex<s.segments.length){const d=new cn(s.segments.slice(0,l.pathIndex),{});return d.children[tn]=new cn(s.segments.slice(l.pathIndex),s.children),cC(d,0,c)}return l.match&&0===c.length?new cn(s.segments,{}):l.match&&!s.hasChildren()?MD(s,i,r):l.match?cC(s,0,c):MD(s,i,r)}function cC(s,i,r){if(0===r.length)return new cn(s.segments,{});{const l=function lR(s){return fw(s[0])?s[0].outlets:{[tn]:s}}(r),c={};return No(l,(d,m)=>{"string"==typeof d&&(d=[d]),null!==d&&(c[m]=PN(s.children[m],i,d))}),No(s.children,(d,m)=>{void 0===l[m]&&(c[m]=d)}),new cn(s.segments,c)}}function MD(s,i,r){const l=s.segments.slice(0,i);let c=0;for(;c<r.length;){const d=r[c];if(fw(d)){const C=hR(d.outlets);return new cn(l,C)}if(0===c&&hC(r[0])){l.push(new uw(s.segments[i].path,AN(r[0]))),c++;continue}const m=fw(d)?d.outlets[tn]:`${d}`,w=c<r.length-1?r[c+1]:null;m&&w&&hC(w)?(l.push(new uw(m,AN(w))),c+=2):(l.push(new uw(m,{})),c++)}return new cn(l,{})}function hR(s){const i={};return No(s,(r,l)=>{"string"==typeof r&&(r=[r]),null!==r&&(i[l]=MD(new cn([],{}),0,r))}),i}function AN(s){const i={};return No(s,(r,l)=>i[l]=`${r}`),i}function kN(s,i,r){return s==r.path&&eh(i,r.parameters)}class fR{constructor(i,r,l,c){this.routeReuseStrategy=i,this.futureState=r,this.currState=l,this.forwardEvent=c}activate(i){const r=this.futureState._root,l=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,l,i),vD(this.futureState.root),this.activateChildRoutes(r,l,i)}deactivateChildRoutes(i,r,l){const c=Oy(r);i.children.forEach(d=>{const m=d.value.outlet;this.deactivateRoutes(d,c[m],l),delete c[m]}),No(c,(d,m)=>{this.deactivateRouteAndItsChildren(d,l)})}deactivateRoutes(i,r,l){const c=i.value,d=r?r.value:null;if(c===d)if(c.component){const m=l.getContext(c.outlet);m&&this.deactivateChildRoutes(i,r,m.children)}else this.deactivateChildRoutes(i,r,l);else d&&this.deactivateRouteAndItsChildren(r,l)}deactivateRouteAndItsChildren(i,r){i.value.component&&this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,r):this.deactivateRouteAndOutlet(i,r)}detachAndStoreRouteSubtree(i,r){const l=r.getContext(i.value.outlet),c=l&&i.value.component?l.children:r,d=Oy(i);for(const m of Object.keys(d))this.deactivateRouteAndItsChildren(d[m],c);if(l&&l.outlet){const m=l.outlet.detach(),w=l.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:m,route:i,contexts:w})}}deactivateRouteAndOutlet(i,r){const l=r.getContext(i.value.outlet),c=l&&i.value.component?l.children:r,d=Oy(i);for(const m of Object.keys(d))this.deactivateRouteAndItsChildren(d[m],c);l&&l.outlet&&(l.outlet.deactivate(),l.children.onOutletDeactivated(),l.attachRef=null,l.resolver=null,l.route=null)}activateChildRoutes(i,r,l){const c=Oy(r);i.children.forEach(d=>{this.activateRoutes(d,c[d.value.outlet],l),this.forwardEvent(new IF(d.value.snapshot))}),i.children.length&&this.forwardEvent(new AF(i.value.snapshot))}activateRoutes(i,r,l){const c=i.value,d=r?r.value:null;if(vD(c),c===d)if(c.component){const m=l.getOrCreateContext(c.outlet);this.activateChildRoutes(i,r,m.children)}else this.activateChildRoutes(i,r,l);else if(c.component){const m=l.getOrCreateContext(c.outlet);if(this.routeReuseStrategy.shouldAttach(c.snapshot)){const w=this.routeReuseStrategy.retrieve(c.snapshot);this.routeReuseStrategy.store(c.snapshot,null),m.children.onOutletReAttached(w.contexts),m.attachRef=w.componentRef,m.route=w.route.value,m.outlet&&m.outlet.attach(w.componentRef,w.route.value),vD(w.route.value),this.activateChildRoutes(i,null,m.children)}else{const w=function dR(s){for(let i=s.parent;i;i=i.parent){const r=i.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;if(r&&r.component)return null}return null}(c.snapshot),C=w?w.module.componentFactoryResolver:null;m.attachRef=null,m.route=c,m.resolver=C,m.outlet&&m.outlet.activateWith(c,C),this.activateChildRoutes(i,null,m.children)}}else this.activateChildRoutes(i,null,l)}}class SD{constructor(i,r){this.routes=i,this.module=r}}function jf(s){return"function"==typeof s}function $p(s){return s instanceof Gp}const dw=Symbol("INITIAL_VALUE");function pw(){return Ff(s=>function XL(...s){let i,r;return Pr(s[s.length-1])&&(r=s.pop()),"function"==typeof s[s.length-1]&&(i=s.pop()),1===s.length&&ut(s[0])&&(s=s[0]),si(s,r).lift(new KL(i))}(s.map(i=>i.pipe(hD(1),function iF(...s){const i=s[s.length-1];return Pr(i)?(s.pop(),r=>lD(s,r,i)):r=>lD(s,r)}(dw)))).pipe(tN((i,r)=>{let l=!1;return r.reduce((c,d,m)=>c!==dw?c:(d===dw&&(l=!0),l||!1!==d&&m!==r.length-1&&!$p(d)?c:d),i)},dw),Up(i=>i!==dw),dn(i=>$p(i)?i:!0===i),hD(1)))}class wR{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new gw,this.attachRef=null}}class gw{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){const l=this.getOrCreateContext(i);l.outlet=r,this.contexts.set(i,l)}onChildOutletDestroyed(i){const r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new wR,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}}let DD=(()=>{class s{constructor(r,l,c,d,m){this.parentContexts=r,this.location=l,this.resolver=c,this.changeDetector=m,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ci,this.deactivateEvents=new Ci,this.attachEvents=new Ci,this.detachEvents=new Ci,this.name=d||tn,r.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,l){this.activated=r,this._activatedRoute=l,this.location.insert(r.hostView),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,l){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;const m=(l=l||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),w=this.parentContexts.getOrCreateContext(this.name).children,C=new xR(r,w,this.location.injector);this.activated=this.location.createComponent(m,this.location.length,C),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return s.\u0275fac=function(r){return new(r||s)(Dt(gw),Dt(uu),Dt(If),function mh(s){return function Mv(s,i){if("class"===i)return s.classes;if("style"===i)return s.styles;const r=s.attrs;if(r){const l=r.length;let c=0;for(;c<l;){const d=r[c];if(ph(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<l&&"string"==typeof r[c];)c++;else{if(d===i)return r[c+1];c+=2}}}return null}(yi(),s)}("name"),Dt(j1))},s.\u0275dir=se({type:s,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),s})();class xR{constructor(i,r,l){this.route=i,this.childContexts=r,this.parent=l}get(i,r){return i===by?this.route:i===gw?this.childContexts:this.parent.get(i,r)}}let IN=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275cmp=Ds({type:s,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,l){1&r&&bt(0,"router-outlet")},directives:[DD],encapsulation:2}),s})();function ON(s,i=""){for(let r=0;r<s.length;r++){const l=s[r];CR(l,MR(i,l))}}function CR(s,i){s.children&&ON(s.children,i)}function MR(s,i){return i?s||i.path?s&&!i.path?`${s}/`:!s&&i.path?i.path:`${s}/${i.path}`:"":s}function ED(s){const i=s.children&&s.children.map(ED),r=i?Object.assign(Object.assign({},s),{children:i}):Object.assign({},s);return!r.component&&(i||r.loadChildren)&&r.outlet&&r.outlet!==tn&&(r.component=IN),r}function El(s){return s.outlet||tn}function bN(s,i){const r=s.filter(l=>El(l)===i);return r.push(...s.filter(l=>El(l)!==i)),r}const LN={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function fC(s,i,r){var l;if(""===i.path)return"full"===i.pathMatch&&(s.hasChildren()||r.length>0)?Object.assign({},LN):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const d=(i.matcher||LF)(r,s,i);if(!d)return Object.assign({},LN);const m={};No(d.posParams,(C,E)=>{m[E]=C.path});const w=d.consumed.length>0?Object.assign(Object.assign({},m),d.consumed[d.consumed.length-1].parameters):m;return{matched:!0,consumedSegments:d.consumed,lastChild:d.consumed.length,parameters:w,positionalParamSegments:null!==(l=d.posParams)&&void 0!==l?l:{}}}function dC(s,i,r,l,c="corrected"){if(r.length>0&&function ER(s,i,r){return r.some(l=>pC(s,i,l)&&El(l)!==tn)}(s,r,l)){const m=new cn(i,function DR(s,i,r,l){const c={};c[tn]=l,l._sourceSegment=s,l._segmentIndexShift=i.length;for(const d of r)if(""===d.path&&El(d)!==tn){const m=new cn([],{});m._sourceSegment=s,m._segmentIndexShift=i.length,c[El(d)]=m}return c}(s,i,l,new cn(r,s.children)));return m._sourceSegment=s,m._segmentIndexShift=i.length,{segmentGroup:m,slicedSegments:[]}}if(0===r.length&&function TR(s,i,r){return r.some(l=>pC(s,i,l))}(s,r,l)){const m=new cn(s.segments,function SR(s,i,r,l,c,d){const m={};for(const w of l)if(pC(s,r,w)&&!c[El(w)]){const C=new cn([],{});C._sourceSegment=s,C._segmentIndexShift="legacy"===d?s.segments.length:i.length,m[El(w)]=C}return Object.assign(Object.assign({},c),m)}(s,i,r,l,s.children,c));return m._sourceSegment=s,m._segmentIndexShift=i.length,{segmentGroup:m,slicedSegments:r}}const d=new cn(s.segments,s.children);return d._sourceSegment=s,d._segmentIndexShift=i.length,{segmentGroup:d,slicedSegments:r}}function pC(s,i,r){return(!(s.hasChildren()||i.length>0)||"full"!==r.pathMatch)&&""===r.path}function FN(s,i,r,l){return!!(El(s)===l||l!==tn&&pC(i,r,s))&&("**"===s.path||fC(i,s,r).matched)}function RN(s,i,r){return 0===i.length&&!s.children[r]}class mw{constructor(i){this.segmentGroup=i||null}}class jN{constructor(i){this.urlTree=i}}function gC(s){return new $t(i=>i.error(new mw(s)))}function BN(s){return new $t(i=>i.error(new jN(s)))}function _R(s){return new $t(i=>i.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${s}'`)))}class AR{constructor(i,r,l,c,d){this.configLoader=r,this.urlSerializer=l,this.urlTree=c,this.config=d,this.allowRedirects=!0,this.ngModule=i.get(vc)}apply(){const i=dC(this.urlTree.root,[],[],this.config).segmentGroup,r=new cn(i.segments,i.children);return this.expandSegmentGroup(this.ngModule,this.config,r,tn).pipe(dn(d=>this.createUrlTree(TD(d),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Hp(d=>{if(d instanceof jN)return this.allowRedirects=!1,this.match(d.urlTree);throw d instanceof mw?this.noMatchError(d):d}))}match(i){return this.expandSegmentGroup(this.ngModule,this.config,i.root,tn).pipe(dn(c=>this.createUrlTree(TD(c),i.queryParams,i.fragment))).pipe(Hp(c=>{throw c instanceof mw?this.noMatchError(c):c}))}noMatchError(i){return new Error(`Cannot match any routes. URL Segment: '${i.segmentGroup}'`)}createUrlTree(i,r,l){const c=i.segments.length>0?new cn([],{[tn]:i}):i;return new Gp(c,r,l)}expandSegmentGroup(i,r,l,c){return 0===l.segments.length&&l.hasChildren()?this.expandChildren(i,r,l).pipe(dn(d=>new cn([],d))):this.expandSegment(i,l,r,l.segments,c,!0)}expandChildren(i,r,l){const c=[];for(const d of Object.keys(l.children))"primary"===d?c.unshift(d):c.push(d);return ke(c).pipe(Ay(d=>{const m=l.children[d],w=bN(r,d);return this.expandSegmentGroup(i,w,m,d).pipe(dn(C=>({segment:C,outlet:d})))}),tN((d,m)=>(d[m.outlet]=m.segment,d),{}),function yF(s,i){const r=arguments.length>=2;return l=>l.pipe(s?Up((c,d)=>s(c,d,l)):qt,cD(1),r?nN(i):eN(()=>new iC))}())}expandSegment(i,r,l,c,d,m){return ke(l).pipe(Ay(w=>this.expandSegmentAgainstRoute(i,r,l,w,c,d,m).pipe(Hp(E=>{if(E instanceof mw)return Ge(null);throw E}))),ky(w=>!!w),Hp((w,C)=>{if(w instanceof iC||"EmptyError"===w.name){if(RN(r,c,d))return Ge(new cn([],{}));throw new mw(r)}throw w}))}expandSegmentAgainstRoute(i,r,l,c,d,m,w){return FN(c,r,d,m)?void 0===c.redirectTo?this.matchSegmentAgainstRoute(i,r,c,d,m):w&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(i,r,l,c,d,m):gC(r):gC(r)}expandSegmentAgainstRouteUsingRedirect(i,r,l,c,d,m){return"**"===c.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(i,l,c,m):this.expandRegularSegmentAgainstRouteUsingRedirect(i,r,l,c,d,m)}expandWildCardWithParamsAgainstRouteUsingRedirect(i,r,l,c){const d=this.applyRedirectCommands([],l.redirectTo,{});return l.redirectTo.startsWith("/")?BN(d):this.lineralizeSegments(l,d).pipe(pi(m=>{const w=new cn(m,{});return this.expandSegment(i,w,r,m,c,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(i,r,l,c,d,m){const{matched:w,consumedSegments:C,lastChild:E,positionalParamSegments:_}=fC(r,c,d);if(!w)return gC(r);const k=this.applyRedirectCommands(C,c.redirectTo,_);return c.redirectTo.startsWith("/")?BN(k):this.lineralizeSegments(c,k).pipe(pi(F=>this.expandSegment(i,r,l,F.concat(d.slice(E)),m,!1)))}matchSegmentAgainstRoute(i,r,l,c,d){if("**"===l.path)return l.loadChildren?(l._loadedConfig?Ge(l._loadedConfig):this.configLoader.load(i.injector,l)).pipe(dn(F=>(l._loadedConfig=F,new cn(c,{})))):Ge(new cn(c,{}));const{matched:m,consumedSegments:w,lastChild:C}=fC(r,l,c);if(!m)return gC(r);const E=c.slice(C);return this.getChildConfig(i,l,c).pipe(pi(k=>{const F=k.module,j=k.routes,{segmentGroup:H,slicedSegments:et}=dC(r,w,E,j),pt=new cn(H.segments,H.children);if(0===et.length&&pt.hasChildren())return this.expandChildren(F,j,pt).pipe(dn(Ut=>new cn(w,Ut)));if(0===j.length&&0===et.length)return Ge(new cn(w,{}));const vt=El(l)===d;return this.expandSegment(F,pt,j,et,vt?tn:d,!0).pipe(dn(Ot=>new cn(w.concat(Ot.segments),Ot.children)))}))}getChildConfig(i,r,l){return r.children?Ge(new SD(r.children,i)):r.loadChildren?void 0!==r._loadedConfig?Ge(r._loadedConfig):this.runCanLoadGuards(i.injector,r,l).pipe(pi(c=>c?this.configLoader.load(i.injector,r).pipe(dn(d=>(r._loadedConfig=d,d))):function NR(s){return new $t(i=>i.error(dD(`Cannot load children because the guard of the route "path: '${s.path}'" returned false`)))}(r))):Ge(new SD([],i))}runCanLoadGuards(i,r,l){const c=r.canLoad;if(!c||0===c.length)return Ge(!0);const d=c.map(m=>{const w=i.get(m);let C;if(function gR(s){return s&&jf(s.canLoad)}(w))C=w.canLoad(r,l);else{if(!jf(w))throw new Error("Invalid CanLoad guard");C=w(r,l)}return nh(C)});return Ge(d).pipe(pw(),Ia(m=>{if(!$p(m))return;const w=dD(`Redirecting to "${this.urlSerializer.serialize(m)}"`);throw w.url=m,w}),dn(m=>!0===m))}lineralizeSegments(i,r){let l=[],c=r.root;for(;;){if(l=l.concat(c.segments),0===c.numberOfChildren)return Ge(l);if(c.numberOfChildren>1||!c.children[tn])return _R(i.redirectTo);c=c.children[tn]}}applyRedirectCommands(i,r,l){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),i,l)}applyRedirectCreatreUrlTree(i,r,l,c){const d=this.createSegmentGroup(i,r.root,l,c);return new Gp(d,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(i,r){const l={};return No(i,(c,d)=>{if("string"==typeof c&&c.startsWith(":")){const w=c.substring(1);l[d]=r[w]}else l[d]=c}),l}createSegmentGroup(i,r,l,c){const d=this.createSegments(i,r.segments,l,c);let m={};return No(r.children,(w,C)=>{m[C]=this.createSegmentGroup(i,w,l,c)}),new cn(d,m)}createSegments(i,r,l,c){return r.map(d=>d.path.startsWith(":")?this.findPosParam(i,d,c):this.findOrReturn(d,l))}findPosParam(i,r,l){const c=l[r.path.substring(1)];if(!c)throw new Error(`Cannot redirect to '${i}'. Cannot find '${r.path}'.`);return c}findOrReturn(i,r){let l=0;for(const c of r){if(c.path===i.path)return r.splice(l),c;l++}return i}}function TD(s){const i={};for(const l of Object.keys(s.children)){const d=TD(s.children[l]);(d.segments.length>0||d.hasChildren())&&(i[l]=d)}return function kR(s){if(1===s.numberOfChildren&&s.children[tn]){const i=s.children[tn];return new cn(s.segments.concat(i.segments),i.children)}return s}(new cn(s.segments,i))}class VN{constructor(i){this.path=i,this.route=this.path[this.path.length-1]}}class mC{constructor(i,r){this.component=i,this.route=r}}function OR(s,i,r){const l=s._root;return yw(l,i?i._root:null,r,[l.value])}function yC(s,i,r){const l=function LR(s){if(!s)return null;for(let i=s.parent;i;i=i.parent){const r=i.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig}return null}(i);return(l?l.module.injector:r).get(s)}function yw(s,i,r,l,c={canDeactivateChecks:[],canActivateChecks:[]}){const d=Oy(i);return s.children.forEach(m=>{(function FR(s,i,r,l,c={canDeactivateChecks:[],canActivateChecks:[]}){const d=s.value,m=i?i.value:null,w=r?r.getContext(s.value.outlet):null;if(m&&d.routeConfig===m.routeConfig){const C=function RR(s,i,r){if("function"==typeof r)return r(s,i);switch(r){case"pathParamsChange":return!zp(s.url,i.url);case"pathParamsOrQueryParamsChange":return!zp(s.url,i.url)||!eh(s.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wD(s,i)||!eh(s.queryParams,i.queryParams);default:return!wD(s,i)}}(m,d,d.routeConfig.runGuardsAndResolvers);C?c.canActivateChecks.push(new VN(l)):(d.data=m.data,d._resolvedData=m._resolvedData),yw(s,i,d.component?w?w.children:null:r,l,c),C&&w&&w.outlet&&w.outlet.isActivated&&c.canDeactivateChecks.push(new mC(w.outlet.component,m))}else m&&vw(i,w,c),c.canActivateChecks.push(new VN(l)),yw(s,null,d.component?w?w.children:null:r,l,c)})(m,d[m.value.outlet],r,l.concat([m.value]),c),delete d[m.value.outlet]}),No(d,(m,w)=>vw(m,r.getContext(w),c)),c}function vw(s,i,r){const l=Oy(s),c=s.value;No(l,(d,m)=>{vw(d,c.component?i?i.children.getContext(m):null:i,r)}),r.canDeactivateChecks.push(new mC(c.component&&i&&i.outlet&&i.outlet.isActivated?i.outlet.component:null,c))}class YR{}function UN(s){return new $t(i=>i.error(s))}class XR{constructor(i,r,l,c,d,m){this.rootComponentType=i,this.config=r,this.urlTree=l,this.url=c,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m}recognize(){const i=dC(this.urlTree.root,[],[],this.config.filter(m=>void 0===m.redirectTo),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,i,tn);if(null===r)return null;const l=new uC([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},tn,this.rootComponentType,null,this.urlTree.root,-1,{}),c=new Sc(l,r),d=new EN(this.url,c);return this.inheritParamsAndData(d._root),d}inheritParamsAndData(i){const r=i.value,l=DN(r,this.paramsInheritanceStrategy);r.params=Object.freeze(l.params),r.data=Object.freeze(l.data),i.children.forEach(c=>this.inheritParamsAndData(c))}processSegmentGroup(i,r,l){return 0===r.segments.length&&r.hasChildren()?this.processChildren(i,r):this.processSegment(i,r,r.segments,l)}processChildren(i,r){const l=[];for(const d of Object.keys(r.children)){const m=r.children[d],w=bN(i,d),C=this.processSegmentGroup(w,m,d);if(null===C)return null;l.push(...C)}const c=HN(l);return function KR(s){s.sort((i,r)=>i.value.outlet===tn?-1:r.value.outlet===tn?1:i.value.outlet.localeCompare(r.value.outlet))}(c),c}processSegment(i,r,l,c){for(const d of i){const m=this.processSegmentAgainstRoute(d,r,l,c);if(null!==m)return m}return RN(r,l,c)?[]:null}processSegmentAgainstRoute(i,r,l,c){if(i.redirectTo||!FN(i,r,l,c))return null;let d,m=[],w=[];if("**"===i.path){const j=l.length>0?hN(l).parameters:{};d=new uC(l,j,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$N(i),El(i),i.component,i,GN(r),zN(r)+l.length,YN(i))}else{const j=fC(r,i,l);if(!j.matched)return null;m=j.consumedSegments,w=l.slice(j.lastChild),d=new uC(m,j.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$N(i),El(i),i.component,i,GN(r),zN(r)+m.length,YN(i))}const C=function ZR(s){return s.children?s.children:s.loadChildren?s._loadedConfig.routes:[]}(i),{segmentGroup:E,slicedSegments:_}=dC(r,m,w,C.filter(j=>void 0===j.redirectTo),this.relativeLinkResolution);if(0===_.length&&E.hasChildren()){const j=this.processChildren(C,E);return null===j?null:[new Sc(d,j)]}if(0===C.length&&0===_.length)return[new Sc(d,[])];const k=El(i)===c,F=this.processSegment(C,E,_,k?tn:c);return null===F?null:[new Sc(d,F)]}}function JR(s){const i=s.value.routeConfig;return i&&""===i.path&&void 0===i.redirectTo}function HN(s){const i=[],r=new Set;for(const l of s){if(!JR(l)){i.push(l);continue}const c=i.find(d=>l.value.routeConfig===d.value.routeConfig);void 0!==c?(c.children.push(...l.children),r.add(c)):i.push(l)}for(const l of r){const c=HN(l.children);i.push(new Sc(l.value,c))}return i.filter(l=>!r.has(l))}function GN(s){let i=s;for(;i._sourceSegment;)i=i._sourceSegment;return i}function zN(s){let i=s,r=i._segmentIndexShift?i._segmentIndexShift:0;for(;i._sourceSegment;)i=i._sourceSegment,r+=i._segmentIndexShift?i._segmentIndexShift:0;return r-1}function $N(s){return s.data||{}}function YN(s){return s.resolve||{}}function WN(s){return[...Object.keys(s),...Object.getOwnPropertySymbols(s)]}function _D(s){return Ff(i=>{const r=s(i);return r?ke(r).pipe(dn(()=>i)):Ge(i)})}class o2 extends class r2{shouldDetach(i){return!1}store(i,r){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,r){return i.routeConfig===r.routeConfig}}{}const ND=new Se("ROUTES");class XN{constructor(i,r,l,c){this.injector=i,this.compiler=r,this.onLoadStartListener=l,this.onLoadEndListener=c}load(i,r){if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);const c=this.loadModuleFactory(r.loadChildren).pipe(dn(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);const m=d.create(i);return new SD(uN(m.injector.get(ND,void 0,pe.Self|pe.Optional)).map(ED),m)}),Hp(d=>{throw r._loader$=void 0,d}));return r._loader$=new $y(c,()=>new Jt).pipe(ai()),r._loader$}loadModuleFactory(i){return nh(i()).pipe(pi(r=>r instanceof fT?Ge(r):ke(this.compiler.compileModuleAsync(r))))}}class a2{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}}function l2(s){throw s}function u2(s,i,r){return i.parse("/")}function KN(s,i){return Ge(null)}const h2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},c2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zs=(()=>{class s{constructor(r,l,c,d,m,w,C){this.rootComponentType=r,this.urlSerializer=l,this.rootContexts=c,this.location=d,this.config=C,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Jt,this.errorHandler=l2,this.malformedUriErrorHandler=u2,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:KN,afterPreactivation:KN},this.urlHandlingStrategy=new a2,this.routeReuseStrategy=new o2,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=m.get(vc),this.console=m.get(WT);const k=m.get(ii);this.isNgZoneEnabled=k instanceof ii&&ii.isInAngularZone(),this.resetConfig(C),this.currentUrlTree=function RF(){return new Gp(new cn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new XN(m,w,F=>this.triggerEvent(new rN(F)),F=>this.triggerEvent(new oN(F))),this.routerState=SN(this.currentUrlTree,this.rootComponentType),this.transitions=new du({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}setupNavigations(r){const l=this.events;return r.pipe(Up(c=>0!==c.id),dn(c=>Object.assign(Object.assign({},c),{extractedUrl:this.urlHandlingStrategy.extract(c.rawUrl)})),Ff(c=>{let d=!1,m=!1;return Ge(c).pipe(Ia(w=>{this.currentNavigation={id:w.id,initialUrl:w.currentRawUrl,extractedUrl:w.extractedUrl,trigger:w.source,extras:w.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ff(w=>{const C=this.browserUrlTree.toString(),E=!this.navigated||w.extractedUrl.toString()!==C||C!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(w.rawUrl))return vC(w.source)&&(this.browserUrlTree=w.extractedUrl),Ge(w).pipe(Ff(k=>{const F=this.transitions.getValue();return l.next(new fD(k.id,this.serializeUrl(k.extractedUrl),k.source,k.restoredState)),F!==this.transitions.getValue()?Py:Promise.resolve(k)}),function IR(s,i,r,l){return Ff(c=>function PR(s,i,r,l,c){return new AR(s,i,r,l,c).apply()}(s,i,r,c.extractedUrl,l).pipe(dn(d=>Object.assign(Object.assign({},c),{urlAfterRedirects:d}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ia(k=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:k.urlAfterRedirects})}),function QR(s,i,r,l,c){return pi(d=>function WR(s,i,r,l,c="emptyOnly",d="legacy"){try{const m=new XR(s,i,r,l,c,d).recognize();return null===m?UN(new YR):Ge(m)}catch(m){return UN(m)}}(s,i,d.urlAfterRedirects,r(d.urlAfterRedirects),l,c).pipe(dn(m=>Object.assign(Object.assign({},d),{targetSnapshot:m}))))}(this.rootComponentType,this.config,k=>this.serializeUrl(k),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ia(k=>{if("eager"===this.urlUpdateStrategy){if(!k.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl);this.setBrowserUrl(j,k)}this.browserUrlTree=k.urlAfterRedirects}const F=new DF(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot);l.next(F)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:j,source:H,restoredState:et,extras:pt}=w,vt=new fD(F,this.serializeUrl(j),H,et);l.next(vt);const ct=SN(j,this.rootComponentType).snapshot;return Ge(Object.assign(Object.assign({},w),{targetSnapshot:ct,urlAfterRedirects:j,extras:Object.assign(Object.assign({},pt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=w.rawUrl,w.resolve(null),Py}),_D(w=>{const{targetSnapshot:C,id:E,extractedUrl:_,rawUrl:k,extras:{skipLocationChange:F,replaceUrl:j}}=w;return this.hooks.beforePreactivation(C,{navigationId:E,appliedUrlTree:_,rawUrlTree:k,skipLocationChange:!!F,replaceUrl:!!j})}),Ia(w=>{const C=new EF(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),dn(w=>Object.assign(Object.assign({},w),{guards:OR(w.targetSnapshot,w.currentSnapshot,this.rootContexts)})),function jR(s,i){return pi(r=>{const{targetSnapshot:l,currentSnapshot:c,guards:{canActivateChecks:d,canDeactivateChecks:m}}=r;return 0===m.length&&0===d.length?Ge(Object.assign(Object.assign({},r),{guardsResult:!0})):function BR(s,i,r,l){return ke(s).pipe(pi(c=>function $R(s,i,r,l,c){const d=i&&i.routeConfig?i.routeConfig.canDeactivate:null;return d&&0!==d.length?Ge(d.map(w=>{const C=yC(w,i,c);let E;if(function vR(s){return s&&jf(s.canDeactivate)}(C))E=nh(C.canDeactivate(s,i,r,l));else{if(!jf(C))throw new Error("Invalid CanDeactivate guard");E=nh(C(s,i,r,l))}return E.pipe(ky())})).pipe(pw()):Ge(!0)}(c.component,c.route,r,i,l)),ky(c=>!0!==c,!0))}(m,l,c,s).pipe(pi(w=>w&&function pR(s){return"boolean"==typeof s}(w)?function VR(s,i,r,l){return ke(i).pipe(Ay(c=>lD(function HR(s,i){return null!==s&&i&&i(new PF(s)),Ge(!0)}(c.route.parent,l),function UR(s,i){return null!==s&&i&&i(new kF(s)),Ge(!0)}(c.route,l),function zR(s,i,r){const l=i[i.length-1],d=i.slice(0,i.length-1).reverse().map(m=>function bR(s){const i=s.routeConfig?s.routeConfig.canActivateChild:null;return i&&0!==i.length?{node:s,guards:i}:null}(m)).filter(m=>null!==m).map(m=>Q_(()=>Ge(m.guards.map(C=>{const E=yC(C,m.node,r);let _;if(function yR(s){return s&&jf(s.canActivateChild)}(E))_=nh(E.canActivateChild(l,s));else{if(!jf(E))throw new Error("Invalid CanActivateChild guard");_=nh(E(l,s))}return _.pipe(ky())})).pipe(pw())));return Ge(d).pipe(pw())}(s,c.path,r),function GR(s,i,r){const l=i.routeConfig?i.routeConfig.canActivate:null;if(!l||0===l.length)return Ge(!0);const c=l.map(d=>Q_(()=>{const m=yC(d,i,r);let w;if(function mR(s){return s&&jf(s.canActivate)}(m))w=nh(m.canActivate(i,s));else{if(!jf(m))throw new Error("Invalid CanActivate guard");w=nh(m(i,s))}return w.pipe(ky())}));return Ge(c).pipe(pw())}(s,c.route,r))),ky(c=>!0!==c,!0))}(l,d,s,i):Ge(w)),dn(w=>Object.assign(Object.assign({},r),{guardsResult:w})))})}(this.ngModule.injector,w=>this.triggerEvent(w)),Ia(w=>{if($p(w.guardsResult)){const E=dD(`Redirecting to "${this.serializeUrl(w.guardsResult)}"`);throw E.url=w.guardsResult,E}const C=new TF(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot,!!w.guardsResult);this.triggerEvent(C)}),Up(w=>!!w.guardsResult||(this.restoreHistory(w),this.cancelNavigationTransition(w,""),!1)),_D(w=>{if(w.guards.canActivateChecks.length)return Ge(w).pipe(Ia(C=>{const E=new _F(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(E)}),Ff(C=>{let E=!1;return Ge(C).pipe(function qR(s,i){return pi(r=>{const{targetSnapshot:l,guards:{canActivateChecks:c}}=r;if(!c.length)return Ge(r);let d=0;return ke(c).pipe(Ay(m=>function t2(s,i,r,l){return function e2(s,i,r,l){const c=WN(s);if(0===c.length)return Ge({});const d={};return ke(c).pipe(pi(m=>function n2(s,i,r,l){const c=yC(s,i,l);return nh(c.resolve?c.resolve(i,r):c(i,r))}(s[m],i,r,l).pipe(Ia(w=>{d[m]=w}))),cD(1),pi(()=>WN(d).length===c.length?Ge(d):Py))}(s._resolve,s,i,l).pipe(dn(d=>(s._resolvedData=d,s.data=Object.assign(Object.assign({},s.data),DN(s,r).resolve),null)))}(m.route,l,s,i)),Ia(()=>d++),cD(1),pi(m=>d===c.length?Ge(r):Py))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ia({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(C),this.cancelNavigationTransition(C,"At least one route resolver didn't emit any value."))}}))}),Ia(C=>{const E=new NF(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(E)}))}),_D(w=>{const{targetSnapshot:C,id:E,extractedUrl:_,rawUrl:k,extras:{skipLocationChange:F,replaceUrl:j}}=w;return this.hooks.afterPreactivation(C,{navigationId:E,appliedUrlTree:_,rawUrlTree:k,skipLocationChange:!!F,replaceUrl:!!j})}),dn(w=>{const C=function eR(s,i,r){const l=cw(s,i._root,r?r._root:void 0);return new MN(l,i)}(this.routeReuseStrategy,w.targetSnapshot,w.currentRouterState);return Object.assign(Object.assign({},w),{targetRouterState:C})}),Ia(w=>{this.currentUrlTree=w.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl),this.routerState=w.targetRouterState,"deferred"===this.urlUpdateStrategy&&(w.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,w),this.browserUrlTree=w.urlAfterRedirects)}),((s,i,r)=>dn(l=>(new fR(i,l.targetRouterState,l.currentRouterState,r).activate(s),l)))(this.rootContexts,this.routeReuseStrategy,w=>this.triggerEvent(w)),Ia({next(){d=!0},complete(){d=!0}}),function xF(s){return i=>i.lift(new CF(s))}(()=>{var w;d||m||this.cancelNavigationTransition(c,`Navigation ID ${c.id} is not equal to the current navigation id ${this.navigationId}`),(null===(w=this.currentNavigation)||void 0===w?void 0:w.id)===c.id&&(this.currentNavigation=null)}),Hp(w=>{if(m=!0,function bF(s){return s&&s[aN]}(w)){const C=$p(w.url);C||(this.navigated=!0,this.restoreHistory(c,!0));const E=new iN(c.id,this.serializeUrl(c.extractedUrl),w.message);l.next(E),C?setTimeout(()=>{const _=this.urlHandlingStrategy.merge(w.url,this.rawUrlTree),k={skipLocationChange:c.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vC(c.source)};this.scheduleNavigation(_,"imperative",null,k,{resolve:c.resolve,reject:c.reject,promise:c.promise})},0):c.resolve(!1)}else{this.restoreHistory(c,!0);const C=new SF(c.id,this.serializeUrl(c.extractedUrl),w);l.next(C);try{c.resolve(this.errorHandler(w))}catch(E){c.reject(E)}}return Py}))}))}resetRootComponentType(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}setTransition(r){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),r))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const l="popstate"===r.type?"popstate":"hashchange";"popstate"===l&&setTimeout(()=>{var c;const d={replaceUrl:!0},m=(null===(c=r.state)||void 0===c?void 0:c.navigationId)?r.state:null;if(m){const C=Object.assign({},m);delete C.navigationId,delete C.\u0275routerPageId,0!==Object.keys(C).length&&(d.state=C)}const w=this.parseUrl(r.url);this.scheduleNavigation(w,l,m,d)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(r){this.events.next(r)}resetConfig(r){ON(r),this.config=r.map(ED),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,l={}){const{relativeTo:c,queryParams:d,fragment:m,queryParamsHandling:w,preserveFragment:C}=l,E=c||this.routerState.root,_=C?this.currentUrlTree.fragment:m;let k=null;switch(w){case"merge":k=Object.assign(Object.assign({},this.currentUrlTree.queryParams),d);break;case"preserve":k=this.currentUrlTree.queryParams;break;default:k=d||null}return null!==k&&(k=this.removeEmptyProps(k)),function rR(s,i,r,l,c){if(0===r.length)return xD(i.root,i.root,i,l,c);const d=function oR(s){if("string"==typeof s[0]&&1===s.length&&"/"===s[0])return new NN(!0,0,s);let i=0,r=!1;const l=s.reduce((c,d,m)=>{if("object"==typeof d&&null!=d){if(d.outlets){const w={};return No(d.outlets,(C,E)=>{w[E]="string"==typeof C?C.split("/"):C}),[...c,{outlets:w}]}if(d.segmentPath)return[...c,d.segmentPath]}return"string"!=typeof d?[...c,d]:0===m?(d.split("/").forEach((w,C)=>{0==C&&"."===w||(0==C&&""===w?r=!0:".."===w?i++:""!=w&&c.push(w))}),c):[...c,d]},[]);return new NN(r,i,l)}(r);if(d.toRoot())return xD(i.root,new cn([],{}),i,l,c);const m=function sR(s,i,r){if(s.isAbsolute)return new CD(i.root,!0,0);if(-1===r.snapshot._lastPathIndex){const d=r.snapshot._urlSegment;return new CD(d,d===i.root,0)}const l=hC(s.commands[0])?0:1;return function aR(s,i,r){let l=s,c=i,d=r;for(;d>c;){if(d-=c,l=l.parent,!l)throw new Error("Invalid number of '../'");c=l.segments.length}return new CD(l,!1,c-d)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+l,s.numberOfDoubleDots)}(d,i,s),w=m.processChildren?cC(m.segmentGroup,m.index,d.commands):PN(m.segmentGroup,m.index,d.commands);return xD(m.segmentGroup,w,i,l,c)}(E,this.currentUrlTree,r,k,null!=_?_:null)}navigateByUrl(r,l={skipLocationChange:!1}){const c=$p(r)?r:this.parseUrl(r),d=this.urlHandlingStrategy.merge(c,this.rawUrlTree);return this.scheduleNavigation(d,"imperative",null,l)}navigate(r,l={skipLocationChange:!1}){return function f2(s){for(let i=0;i<s.length;i++){const r=s[i];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${i}`)}}(r),this.navigateByUrl(this.createUrlTree(r,l),l)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let l;try{l=this.urlSerializer.parse(r)}catch(c){l=this.malformedUriErrorHandler(c,this.urlSerializer,r)}return l}isActive(r,l){let c;if(c=!0===l?Object.assign({},h2):!1===l?Object.assign({},c2):l,$p(r))return fN(this.currentUrlTree,r,c);const d=this.parseUrl(r);return fN(this.currentUrlTree,d,c)}removeEmptyProps(r){return Object.keys(r).reduce((l,c)=>{const d=r[c];return null!=d&&(l[c]=d),l},{})}processNavigations(){this.navigations.subscribe(r=>{this.navigated=!0,this.lastSuccessfulId=r.id,this.currentPageId=r.targetPageId,this.events.next(new lw(r.id,this.serializeUrl(r.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,r.resolve(!0)},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}scheduleNavigation(r,l,c,d,m){var w,C,E;if(this.disposed)return Promise.resolve(!1);const _=this.transitions.value,k=vC(l)&&_&&!vC(_.source),F=_.rawUrl.toString()===r.toString(),j=_.id===(null===(w=this.currentNavigation)||void 0===w?void 0:w.id);if(k&&F&&j)return Promise.resolve(!0);let et,pt,vt;m?(et=m.resolve,pt=m.reject,vt=m.promise):vt=new Promise((Ut,je)=>{et=Ut,pt=je});const ct=++this.navigationId;let Ot;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(c=this.location.getState()),Ot=c&&c.\u0275routerPageId?c.\u0275routerPageId:d.replaceUrl||d.skipLocationChange?null!==(C=this.browserPageId)&&void 0!==C?C:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):Ot=0,this.setTransition({id:ct,targetPageId:Ot,source:l,restoredState:c,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:d,resolve:et,reject:pt,promise:vt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),vt.catch(Ut=>Promise.reject(Ut))}setBrowserUrl(r,l){const c=this.urlSerializer.serialize(r),d=Object.assign(Object.assign({},l.extras.state),this.generateNgRouterState(l.id,l.targetPageId));this.location.isCurrentPathEqualTo(c)||l.extras.replaceUrl?this.location.replaceState(c,"",d):this.location.go(c,"",d)}restoreHistory(r,l=!1){var c,d;if("computed"===this.canceledNavigationResolution){const m=this.currentPageId-r.targetPageId;"popstate"!==r.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)||0===m?this.currentUrlTree===(null===(d=this.currentNavigation)||void 0===d?void 0:d.finalUrl)&&0===m&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(m)}else"replace"===this.canceledNavigationResolution&&(l&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(r,l){const c=new iN(r.id,this.serializeUrl(r.extractedUrl),l);this.triggerEvent(c),r.resolve(!1)}generateNgRouterState(r,l){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:l}:{navigationId:r}}}return s.\u0275fac=function(r){Tp()},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();function vC(s){return"imperative"!==s}class ZN{}class JN{preload(i,r){return Ge(null)}}let QN=(()=>{class s{constructor(r,l,c,d){this.router=r,this.injector=c,this.preloadingStrategy=d,this.loader=new XN(c,l,C=>r.triggerEvent(new rN(C)),C=>r.triggerEvent(new oN(C)))}setUpPreloading(){this.subscription=this.router.events.pipe(Up(r=>r instanceof lw),Ay(()=>this.preload())).subscribe(()=>{})}preload(){const r=this.injector.get(vc);return this.processRoutes(r,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,l){const c=[];for(const d of l)if(d.loadChildren&&!d.canLoad&&d._loadedConfig){const m=d._loadedConfig;c.push(this.processRoutes(m.module,m.routes))}else d.loadChildren&&!d.canLoad?c.push(this.preloadConfig(r,d)):d.children&&c.push(this.processRoutes(r,d.children));return ke(c).pipe(Ie(),dn(d=>{}))}preloadConfig(r,l){return this.preloadingStrategy.preload(l,()=>(l._loadedConfig?Ge(l._loadedConfig):this.loader.load(r.injector,l)).pipe(pi(d=>(l._loadedConfig=d,this.processRoutes(d.module,d.routes)))))}}return s.\u0275fac=function(r){return new(r||s)(Z(Zs),Z(R1),Z(mn),Z(ZN))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})(),kD=(()=>{class s{constructor(r,l,c={}){this.router=r,this.viewportScroller=l,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(r=>{r instanceof fD?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof lw&&(this.lastId=r.id,this.scheduleScrollEvent(r,this.router.parseUrl(r.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(r=>{r instanceof sN&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,l){this.router.triggerEvent(new sN(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,l))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return s.\u0275fac=function(r){Tp()},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();const Yp=new Se("ROUTER_CONFIGURATION"),qN=new Se("ROUTER_FORROOT_GUARD"),m2=[US,{provide:mN,useClass:yN},{provide:Zs,useFactory:function C2(s,i,r,l,c,d,m={},w,C){const E=new Zs(null,s,i,r,l,c,uN(d));return w&&(E.urlHandlingStrategy=w),C&&(E.routeReuseStrategy=C),function M2(s,i){s.errorHandler&&(i.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(i.malformedUriErrorHandler=s.malformedUriErrorHandler),s.onSameUrlNavigation&&(i.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(i.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.relativeLinkResolution&&(i.relativeLinkResolution=s.relativeLinkResolution),s.urlUpdateStrategy&&(i.urlUpdateStrategy=s.urlUpdateStrategy),s.canceledNavigationResolution&&(i.canceledNavigationResolution=s.canceledNavigationResolution)}(m,E),m.enableTracing&&E.events.subscribe(_=>{var k,F;null===(k=console.group)||void 0===k||k.call(console,`Router Event: ${_.constructor.name}`),console.log(_.toString()),console.log(_),null===(F=console.groupEnd)||void 0===F||F.call(console)}),E},deps:[mN,gw,US,mn,R1,ND,Yp,[class s2{},new Ro],[class i2{},new Ro]]},gw,{provide:by,useFactory:function S2(s){return s.routerState.root},deps:[Zs]},QN,JN,class g2{preload(i,r){return r().pipe(Hp(()=>Ge(null)))}},{provide:Yp,useValue:{enableTracing:!1}}];function y2(){return new qT("Router",Zs)}let tP=(()=>{class s{constructor(r,l){}static forRoot(r,l){return{ngModule:s,providers:[m2,eP(r),{provide:qN,useFactory:x2,deps:[[Zs,new Ro,new vi]]},{provide:Yp,useValue:l||{}},{provide:Ny,useFactory:w2,deps:[Vp,[new jl(VS),new Ro],Yp]},{provide:kD,useFactory:v2,deps:[Zs,lL,Yp]},{provide:ZN,useExisting:l&&l.preloadingStrategy?l.preloadingStrategy:JN},{provide:qT,multi:!0,useFactory:y2},[ID,{provide:L1,multi:!0,useFactory:D2,deps:[ID]},{provide:nP,useFactory:E2,deps:[ID]},{provide:YT,multi:!0,useExisting:nP}]]}}static forChild(r){return{ngModule:s,providers:[eP(r)]}}}return s.\u0275fac=function(r){return new(r||s)(Z(qN,8),Z(Zs,8))},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({}),s})();function v2(s,i,r){return r.scrollOffset&&i.setOffset(r.scrollOffset),new kD(s,i,r)}function w2(s,i,r={}){return r.useHash?new GO(s,i):new w_(s,i)}function x2(s){return"guarded"}function eP(s){return[{provide:cx,multi:!0,useValue:s},{provide:ND,multi:!0,useValue:s}]}let ID=(()=>{class s{constructor(r){this.injector=r,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Jt}appInitializer(){return this.injector.get(VO,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let l=null;const c=new Promise(w=>l=w),d=this.injector.get(Zs),m=this.injector.get(Yp);return"disabled"===m.initialNavigation?(d.setUpLocationChangeListener(),l(!0)):"enabled"===m.initialNavigation||"enabledBlocking"===m.initialNavigation?(d.hooks.afterPreactivation=()=>this.initNavigation?Ge(null):(this.initNavigation=!0,l(!0),this.resultOfPreactivationDone),d.initialNavigation()):l(!0),c})}bootstrapListener(r){const l=this.injector.get(Yp),c=this.injector.get(QN),d=this.injector.get(kD),m=this.injector.get(Zs),w=this.injector.get(bf);r===w.components[0]&&(("enabledNonBlocking"===l.initialNavigation||void 0===l.initialNavigation)&&m.initialNavigation(),c.setUpPreloading(),d.init(),m.resetRootComponentType(w.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return s.\u0275fac=function(r){return new(r||s)(Z(mn))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();function D2(s){return s.appInitializer.bind(s)}function E2(s){return s.bootstrapListener.bind(s)}const nP=new Se("Router Initializer");let _2=(()=>{class s{constructor(){this.title="project-ParcialSW1"}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275cmp=Ds({type:s,selectors:[["app-root"]],decls:1,vars:0,template:function(r,l){1&r&&bt(0,"router-outlet")},directives:[DD],styles:[""]}),s})();var _t=ft(372);var wC=ft(450);const P2=wC.Manager,A2=wC.Socket,OD=wC;class bD{constructor(i){this.config=i,this.subscribersCounter={},this.eventObservables$={},this.emptyConfig={url:"",options:{}},void 0===i&&(i=this.emptyConfig),this.ioSocket=(OD||yt)(i.url,i.options)}of(i){this.ioSocket.of(i)}on(i,r){this.ioSocket.on(i,r)}once(i,r){this.ioSocket.once(i,r)}connect(){return this.ioSocket.connect()}disconnect(i){return this.ioSocket.disconnect.apply(this.ioSocket,arguments)}emit(i,...r){return this.ioSocket.emit.apply(this.ioSocket,arguments)}removeListener(i,r){return this.ioSocket.removeListener.apply(this.ioSocket,arguments)}removeAllListeners(i){return this.ioSocket.removeAllListeners.apply(this.ioSocket,arguments)}fromEvent(i){return this.subscribersCounter[i]||(this.subscribersCounter[i]=0),this.subscribersCounter[i]++,this.eventObservables$[i]||(this.eventObservables$[i]=new $t(r=>{const l=c=>{r.next(c)};return this.ioSocket.on(i,l),()=>{this.subscribersCounter[i]--,0===this.subscribersCounter[i]&&(this.ioSocket.removeListener(i,l),delete this.eventObservables$[i])}}).pipe(Wy())),this.eventObservables$[i]}fromOneTimeEvent(i){return new Promise(r=>this.once(i,r))}}function k2(s){return new bD(s)}const iP=new Se("__SOCKET_IO_CONFIG__");let I2=(()=>{class s{static forRoot(r){return{ngModule:s,providers:[{provide:iP,useValue:r},{provide:bD,useFactory:k2,deps:[iP]}]}}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({}),s})(),O2=(()=>{class s{constructor(r){this.socket=r,this.socketStatus=!1,this.checkStatus()}checkStatus(){this.socket.on("connect",()=>{console.log("Conectado al servidor"),this.socketStatus=!0}),this.socket.on("disconnect",()=>{console.log("Desconectado del servidor"),this.socketStatus=!1})}emit(r,l,c){this.socket.emit(r,l,c)}listen(r){return this.socket.fromEvent(r)}}return s.\u0275fac=function(r){return new(r||s)(Z(bD))},s.\u0275prov=at({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class rP{}class oP{}class Dc{constructor(i){this.normalizedNames=new Map,this.lazyUpdate=null,i?this.lazyInit="string"==typeof i?()=>{this.headers=new Map,i.split("\n").forEach(r=>{const l=r.indexOf(":");if(l>0){const c=r.slice(0,l),d=c.toLowerCase(),m=r.slice(l+1).trim();this.maybeSetNormalizedName(c,d),this.headers.has(d)?this.headers.get(d).push(m):this.headers.set(d,[m])}})}:()=>{this.headers=new Map,Object.keys(i).forEach(r=>{let l=i[r];const c=r.toLowerCase();"string"==typeof l&&(l=[l]),l.length>0&&(this.headers.set(c,l),this.maybeSetNormalizedName(r,c))})}:this.headers=new Map}has(i){return this.init(),this.headers.has(i.toLowerCase())}get(i){this.init();const r=this.headers.get(i.toLowerCase());return r&&r.length>0?r[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(i){return this.init(),this.headers.get(i.toLowerCase())||null}append(i,r){return this.clone({name:i,value:r,op:"a"})}set(i,r){return this.clone({name:i,value:r,op:"s"})}delete(i,r){return this.clone({name:i,value:r,op:"d"})}maybeSetNormalizedName(i,r){this.normalizedNames.has(r)||this.normalizedNames.set(r,i)}init(){this.lazyInit&&(this.lazyInit instanceof Dc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(i=>this.applyUpdate(i)),this.lazyUpdate=null))}copyFrom(i){i.init(),Array.from(i.headers.keys()).forEach(r=>{this.headers.set(r,i.headers.get(r)),this.normalizedNames.set(r,i.normalizedNames.get(r))})}clone(i){const r=new Dc;return r.lazyInit=this.lazyInit&&this.lazyInit instanceof Dc?this.lazyInit:this,r.lazyUpdate=(this.lazyUpdate||[]).concat([i]),r}applyUpdate(i){const r=i.name.toLowerCase();switch(i.op){case"a":case"s":let l=i.value;if("string"==typeof l&&(l=[l]),0===l.length)return;this.maybeSetNormalizedName(i.name,r);const c=("a"===i.op?this.headers.get(r):void 0)||[];c.push(...l),this.headers.set(r,c);break;case"d":const d=i.value;if(d){let m=this.headers.get(r);if(!m)return;m=m.filter(w=>-1===d.indexOf(w)),0===m.length?(this.headers.delete(r),this.normalizedNames.delete(r)):this.headers.set(r,m)}else this.headers.delete(r),this.normalizedNames.delete(r)}}forEach(i){this.init(),Array.from(this.normalizedNames.keys()).forEach(r=>i(this.normalizedNames.get(r),this.headers.get(r)))}}class b2{encodeKey(i){return sP(i)}encodeValue(i){return sP(i)}decodeKey(i){return decodeURIComponent(i)}decodeValue(i){return decodeURIComponent(i)}}const F2=/%(\d[a-f0-9])/gi,R2={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function sP(s){return encodeURIComponent(s).replace(F2,(i,r)=>{var l;return null!==(l=R2[r])&&void 0!==l?l:i})}function aP(s){return`${s}`}class Bf{constructor(i={}){if(this.updates=null,this.cloneFrom=null,this.encoder=i.encoder||new b2,i.fromString){if(i.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function L2(s,i){const r=new Map;return s.length>0&&s.replace(/^\?/,"").split("&").forEach(c=>{const d=c.indexOf("="),[m,w]=-1==d?[i.decodeKey(c),""]:[i.decodeKey(c.slice(0,d)),i.decodeValue(c.slice(d+1))],C=r.get(m)||[];C.push(w),r.set(m,C)}),r}(i.fromString,this.encoder)}else i.fromObject?(this.map=new Map,Object.keys(i.fromObject).forEach(r=>{const l=i.fromObject[r];this.map.set(r,Array.isArray(l)?l:[l])})):this.map=null}has(i){return this.init(),this.map.has(i)}get(i){this.init();const r=this.map.get(i);return r?r[0]:null}getAll(i){return this.init(),this.map.get(i)||null}keys(){return this.init(),Array.from(this.map.keys())}append(i,r){return this.clone({param:i,value:r,op:"a"})}appendAll(i){const r=[];return Object.keys(i).forEach(l=>{const c=i[l];Array.isArray(c)?c.forEach(d=>{r.push({param:l,value:d,op:"a"})}):r.push({param:l,value:c,op:"a"})}),this.clone(r)}set(i,r){return this.clone({param:i,value:r,op:"s"})}delete(i,r){return this.clone({param:i,value:r,op:"d"})}toString(){return this.init(),this.keys().map(i=>{const r=this.encoder.encodeKey(i);return this.map.get(i).map(l=>r+"="+this.encoder.encodeValue(l)).join("&")}).filter(i=>""!==i).join("&")}clone(i){const r=new Bf({encoder:this.encoder});return r.cloneFrom=this.cloneFrom||this,r.updates=(this.updates||[]).concat(i),r}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(i=>this.map.set(i,this.cloneFrom.map.get(i))),this.updates.forEach(i=>{switch(i.op){case"a":case"s":const r=("a"===i.op?this.map.get(i.param):void 0)||[];r.push(aP(i.value)),this.map.set(i.param,r);break;case"d":if(void 0===i.value){this.map.delete(i.param);break}{let l=this.map.get(i.param)||[];const c=l.indexOf(aP(i.value));-1!==c&&l.splice(c,1),l.length>0?this.map.set(i.param,l):this.map.delete(i.param)}}}),this.cloneFrom=this.updates=null)}}class j2{constructor(){this.map=new Map}set(i,r){return this.map.set(i,r),this}get(i){return this.map.has(i)||this.map.set(i,i.defaultValue()),this.map.get(i)}delete(i){return this.map.delete(i),this}has(i){return this.map.has(i)}keys(){return this.map.keys()}}function lP(s){return"undefined"!=typeof ArrayBuffer&&s instanceof ArrayBuffer}function uP(s){return"undefined"!=typeof Blob&&s instanceof Blob}function hP(s){return"undefined"!=typeof FormData&&s instanceof FormData}class ww{constructor(i,r,l,c){let d;if(this.url=r,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=i.toUpperCase(),function B2(s){switch(s){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||c?(this.body=void 0!==l?l:null,d=c):d=l,d&&(this.reportProgress=!!d.reportProgress,this.withCredentials=!!d.withCredentials,d.responseType&&(this.responseType=d.responseType),d.headers&&(this.headers=d.headers),d.context&&(this.context=d.context),d.params&&(this.params=d.params)),this.headers||(this.headers=new Dc),this.context||(this.context=new j2),this.params){const m=this.params.toString();if(0===m.length)this.urlWithParams=r;else{const w=r.indexOf("?");this.urlWithParams=r+(-1===w?"?":w<r.length-1?"&":"")+m}}else this.params=new Bf,this.urlWithParams=r}serializeBody(){return null===this.body?null:lP(this.body)||uP(this.body)||hP(this.body)||function V2(s){return"undefined"!=typeof URLSearchParams&&s instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Bf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||hP(this.body)?null:uP(this.body)?this.body.type||null:lP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Bf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(i={}){var r;const l=i.method||this.method,c=i.url||this.url,d=i.responseType||this.responseType,m=void 0!==i.body?i.body:this.body,w=void 0!==i.withCredentials?i.withCredentials:this.withCredentials,C=void 0!==i.reportProgress?i.reportProgress:this.reportProgress;let E=i.headers||this.headers,_=i.params||this.params;const k=null!==(r=i.context)&&void 0!==r?r:this.context;return void 0!==i.setHeaders&&(E=Object.keys(i.setHeaders).reduce((F,j)=>F.set(j,i.setHeaders[j]),E)),i.setParams&&(_=Object.keys(i.setParams).reduce((F,j)=>F.set(j,i.setParams[j]),_)),new ww(l,c,m,{params:_,headers:E,context:k,reportProgress:C,responseType:d,withCredentials:w})}}var Hr=(()=>((Hr=Hr||{})[Hr.Sent=0]="Sent",Hr[Hr.UploadProgress=1]="UploadProgress",Hr[Hr.ResponseHeader=2]="ResponseHeader",Hr[Hr.DownloadProgress=3]="DownloadProgress",Hr[Hr.Response=4]="Response",Hr[Hr.User=5]="User",Hr))();class LD{constructor(i,r=200,l="OK"){this.headers=i.headers||new Dc,this.status=void 0!==i.status?i.status:r,this.statusText=i.statusText||l,this.url=i.url||null,this.ok=this.status>=200&&this.status<300}}class FD extends LD{constructor(i={}){super(i),this.type=Hr.ResponseHeader}clone(i={}){return new FD({headers:i.headers||this.headers,status:void 0!==i.status?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}}class xC extends LD{constructor(i={}){super(i),this.type=Hr.Response,this.body=void 0!==i.body?i.body:null}clone(i={}){return new xC({body:void 0!==i.body?i.body:this.body,headers:i.headers||this.headers,status:void 0!==i.status?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}}class cP extends LD{constructor(i){super(i,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${i.url||"(unknown url)"}`:`Http failure response for ${i.url||"(unknown url)"}: ${i.status} ${i.statusText}`,this.error=i.error||null}}function RD(s,i){return{body:i,headers:s.headers,context:s.context,observe:s.observe,params:s.params,reportProgress:s.reportProgress,responseType:s.responseType,withCredentials:s.withCredentials}}let fP=(()=>{class s{constructor(r){this.handler=r}request(r,l,c={}){let d;if(r instanceof ww)d=r;else{let C,E;C=c.headers instanceof Dc?c.headers:new Dc(c.headers),c.params&&(E=c.params instanceof Bf?c.params:new Bf({fromObject:c.params})),d=new ww(r,l,void 0!==c.body?c.body:null,{headers:C,context:c.context,params:E,reportProgress:c.reportProgress,responseType:c.responseType||"json",withCredentials:c.withCredentials})}const m=Ge(d).pipe(Ay(C=>this.handler.handle(C)));if(r instanceof ww||"events"===c.observe)return m;const w=m.pipe(Up(C=>C instanceof xC));switch(c.observe||"body"){case"body":switch(d.responseType){case"arraybuffer":return w.pipe(dn(C=>{if(null!==C.body&&!(C.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return C.body}));case"blob":return w.pipe(dn(C=>{if(null!==C.body&&!(C.body instanceof Blob))throw new Error("Response is not a Blob.");return C.body}));case"text":return w.pipe(dn(C=>{if(null!==C.body&&"string"!=typeof C.body)throw new Error("Response is not a string.");return C.body}));default:return w.pipe(dn(C=>C.body))}case"response":return w;default:throw new Error(`Unreachable: unhandled observe type ${c.observe}}`)}}delete(r,l={}){return this.request("DELETE",r,l)}get(r,l={}){return this.request("GET",r,l)}head(r,l={}){return this.request("HEAD",r,l)}jsonp(r,l){return this.request("JSONP",r,{params:(new Bf).append(l,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,l={}){return this.request("OPTIONS",r,l)}patch(r,l,c={}){return this.request("PATCH",r,RD(c,l))}post(r,l,c={}){return this.request("POST",r,RD(c,l))}put(r,l,c={}){return this.request("PUT",r,RD(c,l))}}return s.\u0275fac=function(r){return new(r||s)(Z(rP))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();class dP{constructor(i,r){this.next=i,this.interceptor=r}handle(i){return this.interceptor.intercept(i,this.next)}}const pP=new Se("HTTP_INTERCEPTORS");let U2=(()=>{class s{intercept(r,l){return l.handle(r)}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();const H2=/^\)\]\}',?\n/;let gP=(()=>{class s{constructor(r){this.xhrFactory=r}handle(r){if("JSONP"===r.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new $t(l=>{const c=this.xhrFactory.build();if(c.open(r.method,r.urlWithParams),r.withCredentials&&(c.withCredentials=!0),r.headers.forEach((j,H)=>c.setRequestHeader(j,H.join(","))),r.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){const j=r.detectContentTypeHeader();null!==j&&c.setRequestHeader("Content-Type",j)}if(r.responseType){const j=r.responseType.toLowerCase();c.responseType="json"!==j?j:"text"}const d=r.serializeBody();let m=null;const w=()=>{if(null!==m)return m;const j=c.statusText||"OK",H=new Dc(c.getAllResponseHeaders()),et=function G2(s){return"responseURL"in s&&s.responseURL?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):null}(c)||r.url;return m=new FD({headers:H,status:c.status,statusText:j,url:et}),m},C=()=>{let{headers:j,status:H,statusText:et,url:pt}=w(),vt=null;204!==H&&(vt=void 0===c.response?c.responseText:c.response),0===H&&(H=vt?200:0);let ct=H>=200&&H<300;if("json"===r.responseType&&"string"==typeof vt){const Ot=vt;vt=vt.replace(H2,"");try{vt=""!==vt?JSON.parse(vt):null}catch(Ut){vt=Ot,ct&&(ct=!1,vt={error:Ut,text:vt})}}ct?(l.next(new xC({body:vt,headers:j,status:H,statusText:et,url:pt||void 0})),l.complete()):l.error(new cP({error:vt,headers:j,status:H,statusText:et,url:pt||void 0}))},E=j=>{const{url:H}=w(),et=new cP({error:j,status:c.status||0,statusText:c.statusText||"Unknown Error",url:H||void 0});l.error(et)};let _=!1;const k=j=>{_||(l.next(w()),_=!0);let H={type:Hr.DownloadProgress,loaded:j.loaded};j.lengthComputable&&(H.total=j.total),"text"===r.responseType&&!!c.responseText&&(H.partialText=c.responseText),l.next(H)},F=j=>{let H={type:Hr.UploadProgress,loaded:j.loaded};j.lengthComputable&&(H.total=j.total),l.next(H)};return c.addEventListener("load",C),c.addEventListener("error",E),c.addEventListener("timeout",E),c.addEventListener("abort",E),r.reportProgress&&(c.addEventListener("progress",k),null!==d&&c.upload&&c.upload.addEventListener("progress",F)),c.send(d),l.next({type:Hr.Sent}),()=>{c.removeEventListener("error",E),c.removeEventListener("abort",E),c.removeEventListener("load",C),c.removeEventListener("timeout",E),r.reportProgress&&(c.removeEventListener("progress",k),null!==d&&c.upload&&c.upload.removeEventListener("progress",F)),c.readyState!==c.DONE&&c.abort()}})}}return s.\u0275fac=function(r){return new(r||s)(Z(F_))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();const jD=new Se("XSRF_COOKIE_NAME"),BD=new Se("XSRF_HEADER_NAME");class mP{}let z2=(()=>{class s{constructor(r,l,c){this.doc=r,this.platform=l,this.cookieName=c,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=P_(r,this.cookieName),this.lastCookieString=r),this.lastToken}}return s.\u0275fac=function(r){return new(r||s)(Z(_r),Z(F1),Z(jD))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})(),VD=(()=>{class s{constructor(r,l){this.tokenService=r,this.headerName=l}intercept(r,l){const c=r.url.toLowerCase();if("GET"===r.method||"HEAD"===r.method||c.startsWith("http://")||c.startsWith("https://"))return l.handle(r);const d=this.tokenService.getToken();return null!==d&&!r.headers.has(this.headerName)&&(r=r.clone({headers:r.headers.set(this.headerName,d)})),l.handle(r)}}return s.\u0275fac=function(r){return new(r||s)(Z(mP),Z(BD))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})(),$2=(()=>{class s{constructor(r,l){this.backend=r,this.injector=l,this.chain=null}handle(r){if(null===this.chain){const l=this.injector.get(pP,[]);this.chain=l.reduceRight((c,d)=>new dP(c,d),this.backend)}return this.chain.handle(r)}}return s.\u0275fac=function(r){return new(r||s)(Z(oP),Z(mn))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})(),Y2=(()=>{class s{static disable(){return{ngModule:s,providers:[{provide:VD,useClass:U2}]}}static withOptions(r={}){return{ngModule:s,providers:[r.cookieName?{provide:jD,useValue:r.cookieName}:[],r.headerName?{provide:BD,useValue:r.headerName}:[]]}}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({providers:[VD,{provide:pP,useExisting:VD,multi:!0},{provide:mP,useClass:z2},{provide:jD,useValue:"XSRF-TOKEN"},{provide:BD,useValue:"X-XSRF-TOKEN"}]}),s})(),W2=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({providers:[fP,{provide:rP,useClass:$2},gP,{provide:oP,useExisting:gP}],imports:[[Y2.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),s})(),X2=(()=>{class s{constructor(r,l){this.wsService=r,this.http=l,this.url="https://primerparcialapi.herokuapp.com",this.diagramEvent=new Ci}sendData(r){this.wsService.emit("emite-datos",r)}getData(){return this.wsService.listen("obtiene-datos")}}return s.\u0275fac=function(r){return new(r||s)(Z(O2),Z(fP))},s.\u0275prov=at({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class yP{}const Ec="*";function Z2(s,i){return{type:7,name:s,definitions:i,options:{}}}function vP(s,i=null){return{type:4,styles:i,timings:s}}function wP(s,i=null){return{type:2,steps:s,options:i}}function xw(s){return{type:6,styles:s,offset:null}}function UD(s,i,r){return{type:0,name:s,styles:i,options:r}}function xP(s,i,r=null){return{type:1,expr:s,animation:i,options:r}}function CP(s){Promise.resolve(null).then(s)}class Cw{constructor(i=0,r=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=i+r}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}onStart(i){this._onStartFns.push(i)}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){CP(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(i=>i()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(i){this._position=this.totalTime?i*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(i){const r="start"==i?this._onStartFns:this._onDoneFns;r.forEach(l=>l()),r.length=0}}class MP{constructor(i){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=i;let r=0,l=0,c=0;const d=this.players.length;0==d?CP(()=>this._onFinish()):this.players.forEach(m=>{m.onDone(()=>{++r==d&&this._onFinish()}),m.onDestroy(()=>{++l==d&&this._onDestroy()}),m.onStart(()=>{++c==d&&this._onStart()})}),this.totalTime=this.players.reduce((m,w)=>Math.max(m,w.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this.players.forEach(i=>i.init())}onStart(i){this._onStartFns.push(i)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(i=>i()),this._onStartFns=[])}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(i=>i.play())}pause(){this.players.forEach(i=>i.pause())}restart(){this.players.forEach(i=>i.restart())}finish(){this._onFinish(),this.players.forEach(i=>i.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(i=>i.destroy()),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this.players.forEach(i=>i.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(i){const r=i*this.totalTime;this.players.forEach(l=>{const c=l.totalTime?Math.min(1,r/l.totalTime):1;l.setPosition(c)})}getPosition(){const i=this.players.reduce((r,l)=>null===r||l.totalTime>r.totalTime?l:r,null);return null!=i?i.getPosition():0}beforeDestroy(){this.players.forEach(i=>{i.beforeDestroy&&i.beforeDestroy()})}triggerCallback(i){const r="start"==i?this._onStartFns:this._onDoneFns;r.forEach(l=>l()),r.length=0}}const SP=["toast-component",""];function J2(s,i){if(1&s){const r=F0();Ui(0,"button",5),ki("click",function(){return ud(r),ho().remove()}),Ui(1,"span",6),y(2,"\xd7"),Hi(),Hi()}}function Q2(s,i){if(1&s&&(Mf(0),y(1),_p()),2&s){const r=ho(2);ir(1),x("[",r.duplicatesCount+1,"]")}}function q2(s,i){if(1&s&&(Ui(0,"div"),y(1),Mr(2,Q2,2,1,"ng-container",4),Hi()),2&s){const r=ho();Ma(r.options.titleClass),Xr("aria-label",r.title),ir(1),x(" ",r.title," "),ir(1),Sr("ngIf",r.duplicatesCount)}}function tj(s,i){if(1&s&&bt(0,"div",7),2&s){const r=ho();Ma(r.options.messageClass),Sr("innerHTML",r.message,ef)}}function ej(s,i){if(1&s&&(Ui(0,"div",8),y(1),Hi()),2&s){const r=ho();Ma(r.options.messageClass),Xr("aria-label",r.message),ir(1),x(" ",r.message," ")}}function nj(s,i){if(1&s&&(Ui(0,"div"),bt(1,"div",9),Hi()),2&s){const r=ho();ir(1),Wu("width",r.width+"%")}}function ij(s,i){if(1&s){const r=F0();Ui(0,"button",5),ki("click",function(){return ud(r),ho().remove()}),Ui(1,"span",6),y(2,"\xd7"),Hi(),Hi()}}function rj(s,i){if(1&s&&(Mf(0),y(1),_p()),2&s){const r=ho(2);ir(1),x("[",r.duplicatesCount+1,"]")}}function oj(s,i){if(1&s&&(Ui(0,"div"),y(1),Mr(2,rj,2,1,"ng-container",4),Hi()),2&s){const r=ho();Ma(r.options.titleClass),Xr("aria-label",r.title),ir(1),x(" ",r.title," "),ir(1),Sr("ngIf",r.duplicatesCount)}}function sj(s,i){if(1&s&&bt(0,"div",7),2&s){const r=ho();Ma(r.options.messageClass),Sr("innerHTML",r.message,ef)}}function aj(s,i){if(1&s&&(Ui(0,"div",8),y(1),Hi()),2&s){const r=ho();Ma(r.options.messageClass),Xr("aria-label",r.message),ir(1),x(" ",r.message," ")}}function lj(s,i){if(1&s&&(Ui(0,"div"),bt(1,"div",9),Hi()),2&s){const r=ho();ir(1),Wu("width",r.width+"%")}}class CC{constructor(i,r,l,c,d,m){this.toastId=i,this.config=r,this.message=l,this.title=c,this.toastType=d,this.toastRef=m,this._onTap=new Jt,this._onAction=new Jt,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(i){this._onAction.next(i)}onAction(){return this._onAction.asObservable()}}const GD={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Mw=new Se("ToastConfig");class uj{constructor(i,r){this.component=i,this.injector=r}attach(i,r){return this._attachedHost=i,i.attach(this,r)}detach(){const i=this._attachedHost;if(i)return this._attachedHost=void 0,i.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(i){this._attachedHost=i}}class cj extends class hj{attach(i,r){return this._attachedPortal=i,this.attachComponentPortal(i,r)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(i){this._disposeFn=i}}{constructor(i,r,l){super(),this._hostDomElement=i,this._componentFactoryResolver=r,this._appRef=l}attachComponentPortal(i,r){const l=this._componentFactoryResolver.resolveComponentFactory(i.component);let c;return c=l.create(i.injector),this._appRef.attachView(c.hostView),this.setDisposeFn(()=>{this._appRef.detachView(c.hostView),c.destroy()}),r?this._hostDomElement.insertBefore(this._getComponentRootNode(c),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(c)),c}_getComponentRootNode(i){return i.hostView.rootNodes[0]}}let DP=(()=>{class s{constructor(r){this._document=r}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const r=this._document.createElement("div");r.classList.add("overlay-container"),this._document.body.appendChild(r),this._containerElement=r}}return s.\u0275fac=function(r){return new(r||s)(Z(_r))},s.\u0275prov=at({factory:function(){return new s(Z(_r))},token:s,providedIn:"root"}),s})();class fj{constructor(i){this._portalHost=i}attach(i,r=!0){return this._portalHost.attach(i,r)}detach(){return this._portalHost.detach()}}let EP=(()=>{class s{constructor(r,l,c,d){this._overlayContainer=r,this._componentFactoryResolver=l,this._appRef=c,this._document=d,this._paneElements=new Map}create(r,l){return this._createOverlayRef(this.getPaneElement(r,l))}getPaneElement(r="",l){return this._paneElements.get(l)||this._paneElements.set(l,{}),this._paneElements.get(l)[r]||(this._paneElements.get(l)[r]=this._createPaneElement(r,l)),this._paneElements.get(l)[r]}_createPaneElement(r,l){const c=this._document.createElement("div");return c.id="toast-container",c.classList.add(r),c.classList.add("toast-container"),l?l.getContainerElement().appendChild(c):this._overlayContainer.getContainerElement().appendChild(c),c}_createPortalHost(r){return new cj(r,this._componentFactoryResolver,this._appRef)}_createOverlayRef(r){return new fj(this._createPortalHost(r))}}return s.\u0275fac=function(r){return new(r||s)(Z(DP),Z(If),Z(bf),Z(_r))},s.\u0275prov=at({factory:function(){return new s(Z(DP),Z(If),Z(bf),Z(_r))},token:s,providedIn:"root"}),s})();class dj{constructor(i){this._overlayRef=i,this.duplicatesCount=0,this._afterClosed=new Jt,this._activate=new Jt,this._manualClose=new Jt,this._resetTimeout=new Jt,this._countDuplicate=new Jt}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(i,r){i&&this._resetTimeout.next(),r&&this._countDuplicate.next(++this.duplicatesCount)}}class pj{constructor(i,r){this._toastPackage=i,this._parentInjector=r}get(i,r,l){return i===CC?this._toastPackage:this._parentInjector.get(i,r,l)}}let zD=(()=>{class s{constructor(r,l,c,d,m){this.overlay=l,this._injector=c,this.sanitizer=d,this.ngZone=m,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},r.default),r.config),r.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},r.default.iconClasses),r.config.iconClasses))}show(r,l,c={},d=""){return this._preBuildNotification(d,r,l,this.applyConfig(c))}success(r,l,c={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",r,l,this.applyConfig(c))}error(r,l,c={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",r,l,this.applyConfig(c))}info(r,l,c={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",r,l,this.applyConfig(c))}warning(r,l,c={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",r,l,this.applyConfig(c))}clear(r){for(const l of this.toasts)if(void 0!==r){if(l.toastId===r)return void l.toastRef.manualClose()}else l.toastRef.manualClose()}remove(r){const l=this._findToast(r);if(!l||(l.activeToast.toastRef.close(),this.toasts.splice(l.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const c=this.toasts[this.currentlyActive].toastRef;c.isInactive()||(this.currentlyActive=this.currentlyActive+1,c.activate())}return!0}findDuplicate(r="",l="",c,d){const{includeTitleDuplicates:m}=this.toastrConfig;for(const w of this.toasts){const C=m&&w.title===r;if((!m||C)&&w.message===l)return w.toastRef.onDuplicate(c,d),w}return null}applyConfig(r={}){return Object.assign(Object.assign({},this.toastrConfig),r)}_findToast(r){for(let l=0;l<this.toasts.length;l++)if(this.toasts[l].toastId===r)return{index:l,activeToast:this.toasts[l]};return null}_preBuildNotification(r,l,c,d){return d.onActivateTick?this.ngZone.run(()=>this._buildNotification(r,l,c,d)):this._buildNotification(r,l,c,d)}_buildNotification(r,l,c,d){if(!d.toastComponent)throw new Error("toastComponent required");const m=this.findDuplicate(c,l,this.toastrConfig.resetTimeoutOnDuplicate&&d.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&c||l)&&this.toastrConfig.preventDuplicates&&null!==m)return m;this.previousToastMessage=l;let w=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(w=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const C=this.overlay.create(d.positionClass,this.overlayContainer);this.index=this.index+1;let E=l;l&&d.enableHtml&&(E=this.sanitizer.sanitize(An.HTML,l));const _=new dj(C),k=new CC(this.index,d,E,c,r,_),F=new pj(k,this._injector),j=new uj(d.toastComponent,F),H=C.attach(j,this.toastrConfig.newestOnTop);_.componentInstance=H.instance;const et={toastId:this.index,title:c||"",message:l||"",toastRef:_,onShown:_.afterActivate(),onHidden:_.afterClosed(),onTap:k.onTap(),onAction:k.onAction(),portal:H};return w||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{et.toastRef.activate()})),this.toasts.push(et),et}}return s.\u0275fac=function(r){return new(r||s)(Z(Mw),Z(EP),Z(mn),Z(aD),Z(ii))},s.\u0275prov=at({factory:function(){return new s(Z(Mw),Z(EP),Z(mp),Z(aD),Z(ii))},token:s,providedIn:"root"}),s})(),gj=(()=>{class s{constructor(r,l,c){this.toastrService=r,this.toastPackage=l,this.ngZone=c,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=l.message,this.title=l.title,this.options=l.config,this.originalTimeout=l.config.timeOut,this.toastClasses=`${l.toastType} ${l.config.toastClass}`,this.sub=l.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=l.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=l.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=l.toastRef.countDuplicate().subscribe(d=>{this.duplicatesCount=d})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const r=(new Date).getTime();this.width=(this.hideTime-r)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(r,l){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(r),l)):this.timeout=setTimeout(()=>r(),l)}outsideInterval(r,l){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(r),l)):this.intervalId=setInterval(()=>r(),l)}runInsideAngular(r){this.ngZone?this.ngZone.run(()=>r()):r()}}return s.\u0275fac=function(r){return new(r||s)(Dt(zD),Dt(CC),Dt(ii))},s.\u0275cmp=Ds({type:s,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,l){1&r&&ki("click",function(){return l.tapToast()})("mouseenter",function(){return l.stickAround()})("mouseleave",function(){return l.delayedHideToast()}),2&r&&(rc("@flyInOut",l.state),Ma(l.toastClasses),Wu("display",l.displayStyle))},attrs:SP,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(r,l){1&r&&(Mr(0,J2,3,0,"button",0),Mr(1,q2,3,5,"div",1),Mr(2,tj,1,3,"div",2),Mr(3,ej,2,4,"div",3),Mr(4,nj,2,2,"div",4)),2&r&&(Sr("ngIf",l.options.closeButton),ir(1),Sr("ngIf",l.title),ir(1),Sr("ngIf",l.message&&l.options.enableHtml),ir(1),Sr("ngIf",l.message&&!l.options.enableHtml),ir(1),Sr("ngIf",l.options.progressBar))},directives:[ZS],encapsulation:2,data:{animation:[Z2("flyInOut",[UD("inactive",xw({opacity:0})),UD("active",xw({opacity:1})),UD("removed",xw({opacity:0})),xP("inactive => active",vP("{{ easeTime }}ms {{ easing }}")),xP("active => removed",vP("{{ easeTime }}ms {{ easing }}"))])]}}),s})();const mj=Object.assign(Object.assign({},GD),{toastComponent:gj});let TP=(()=>{class s{static forRoot(r={}){return{ngModule:s,providers:[{provide:Mw,useValue:{default:mj,config:r}}]}}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({imports:[[ow]]}),s})(),yj=(()=>{class s{constructor(r,l,c){this.toastrService=r,this.toastPackage=l,this.appRef=c,this.width=-1,this.toastClasses="",this.state="inactive",this.message=l.message,this.title=l.title,this.options=l.config,this.originalTimeout=l.config.timeOut,this.toastClasses=`${l.toastType} ${l.config.toastClass}`,this.sub=l.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=l.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=l.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=l.toastRef.countDuplicate().subscribe(d=>{this.duplicatesCount=d})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const r=(new Date).getTime();this.width=(this.hideTime-r)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return s.\u0275fac=function(r){return new(r||s)(Dt(zD),Dt(CC),Dt(bf))},s.\u0275cmp=Ds({type:s,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(r,l){1&r&&ki("click",function(){return l.tapToast()})("mouseenter",function(){return l.stickAround()})("mouseleave",function(){return l.delayedHideToast()}),2&r&&(Ma(l.toastClasses),Wu("display",l.displayStyle))},attrs:SP,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(r,l){1&r&&(Mr(0,ij,3,0,"button",0),Mr(1,oj,3,5,"div",1),Mr(2,sj,1,3,"div",2),Mr(3,aj,2,4,"div",3),Mr(4,lj,2,2,"div",4)),2&r&&(Sr("ngIf",l.options.closeButton),ir(1),Sr("ngIf",l.title),ir(1),Sr("ngIf",l.message&&l.options.enableHtml),ir(1),Sr("ngIf",l.message&&!l.options.enableHtml),ir(1),Sr("ngIf",l.options.progressBar))},directives:[ZS],encapsulation:2}),s})();Object.assign(Object.assign({},GD),{toastComponent:yj});const Ve=_t.GraphObject.make;let wj=(()=>{class s{constructor(r,l,c){this.diagramServices=r,this.toast=l,this.router=c,this.diagram=new _t.Diagram,this.palette=new _t.Palette}onClick(r){this.sendData()}ngOnInit(){this.iniciar(),this.getData()}ngAfterViewInit(){}iniciar(){this.diagram=Ve(_t.Diagram,"diagramDiv",{grid:Ve(_t.Panel,"Grid",Ve(_t.Shape,"LineH",{stroke:"lightgray",strokeWidth:.5}),Ve(_t.Shape,"LineH",{stroke:"gray",strokeWidth:.5,interval:10}),Ve(_t.Shape,"LineV",{stroke:"lightgray",strokeWidth:.5}),Ve(_t.Shape,"LineV",{stroke:"gray",strokeWidth:.5,interval:10})),"draggingTool.dragsLink":!0,"draggingTool.isGridSnapEnabled":!0,"linkingTool.isUnconnectedLinkValid":!0,"linkingTool.portGravity":20,"relinkingTool.isUnconnectedLinkValid":!0,"relinkingTool.portGravity":20,"relinkingTool.fromHandleArchetype":Ve(_t.Shape,"Diamond",{segmentIndex:0,cursor:"pointer",desiredSize:new _t.Size(8,8),fill:"tomato",stroke:"darkred"}),"relinkingTool.toHandleArchetype":Ve(_t.Shape,"Diamond",{segmentIndex:-1,cursor:"pointer",desiredSize:new _t.Size(8,8),fill:"darkred",stroke:"tomato"}),"linkReshapingTool.handleArchetype":Ve(_t.Shape,"Diamond",{desiredSize:new _t.Size(7,7),fill:"lightblue",stroke:"deepskyblue"}),"rotatingTool.handleAngle":270,"rotatingTool.handleDistance":30,"rotatingTool.snapAngleMultiple":15,"rotatingTool.snapAngleEpsilon":15,"undoManager.isEnabled":!0});var r=Ve(_t.Adornment,"Auto",Ve(_t.Shape,{fill:null,stroke:"deepskyblue",strokeWidth:1.5,strokeDashArray:[4,2]}),Ve(_t.Placeholder)),l=Ve(_t.Adornment,"Spot",{locationSpot:_t.Spot.Right},Ve(_t.Placeholder),Ve(_t.Shape,{alignment:_t.Spot.TopLeft,cursor:"nw-resize",desiredSize:new _t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),Ve(_t.Shape,{alignment:_t.Spot.Top,cursor:"n-resize",desiredSize:new _t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),Ve(_t.Shape,{alignment:_t.Spot.TopRight,cursor:"ne-resize",desiredSize:new _t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),Ve(_t.Shape,{alignment:_t.Spot.Left,cursor:"w-resize",desiredSize:new _t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),Ve(_t.Shape,{alignment:_t.Spot.Right,cursor:"e-resize",desiredSize:new _t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),Ve(_t.Shape,{alignment:_t.Spot.BottomLeft,cursor:"se-resize",desiredSize:new _t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),Ve(_t.Shape,{alignment:_t.Spot.Bottom,cursor:"s-resize",desiredSize:new _t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),Ve(_t.Shape,{alignment:_t.Spot.BottomRight,cursor:"sw-resize",desiredSize:new _t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"})),c=Ve(_t.Adornment,{locationSpot:_t.Spot.Center,locationObjectName:"ELLIPSE"},Ve(_t.Shape,"Ellipse",{name:"ELLIPSE",cursor:"pointer",desiredSize:new _t.Size(7,7),fill:"lightblue",stroke:"deepskyblue"}),Ve(_t.Shape,{geometryString:"M3.5 7 L3.5 30",isGeometryPositioned:!0,stroke:"deepskyblue",strokeWidth:1.5,strokeDashArray:[4,2]}));function d(w,C){w.ports.each(function(E){""!==E.portId&&(E.fill=C?"rgba(0,0,0,.3)":null)})}this.diagram.nodeTemplate=Ve(_t.Node,"Spot",{locationSpot:_t.Spot.Center},new _t.Binding("location","loc",_t.Point.parse).makeTwoWay(_t.Point.stringify),{selectable:!0,selectionAdornmentTemplate:r},{resizable:!0,resizeObjectName:"PANEL",resizeAdornmentTemplate:l},{rotatable:!0,rotateAdornmentTemplate:c},new _t.Binding("angle").makeTwoWay(),Ve(_t.Panel,"Auto",{name:"PANEL"},new _t.Binding("desiredSize","size",_t.Size.parse).makeTwoWay(_t.Size.stringify),Ve(_t.Shape,"Rectangle",{portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer",fill:"white",strokeWidth:2},new _t.Binding("figure"),new _t.Binding("fill")),Ve(_t.TextBlock,{font:"bold 11pt Helvetica, Arial, sans-serif",margin:8,maxSize:new _t.Size(160,NaN),wrap:_t.TextBlock.WrapFit,editable:!0},new _t.Binding("text").makeTwoWay())),{mouseEnter:function(w,C){d(C,!0)},mouseLeave:function(w,C){d(C,!1)}});var m=Ve(_t.Adornment,"Link",Ve(_t.Shape,{isPanelMain:!0,fill:null,stroke:"deepskyblue",strokeWidth:0}));this.diagram.linkTemplate=Ve(_t.Link,{selectable:!0,selectionAdornmentTemplate:m},{relinkableFrom:!0,relinkableTo:!0,reshapable:!0},{routing:_t.Link.AvoidsNodes,curve:_t.Link.JumpOver,corner:5,toShortLength:4},new _t.Binding("points").makeTwoWay(),Ve(_t.Shape,{isPanelMain:!0,strokeWidth:2}),Ve(_t.Shape,{toArrow:"Standard",stroke:null}),Ve(_t.Panel,"Auto",new _t.Binding("visible","isSelected").ofObject(),Ve(_t.Shape,"RoundedRectangle",{fill:"#F8F8F8",stroke:null}),Ve(_t.TextBlock,{textAlign:"center",font:"10pt helvetica, arial, sans-serif",stroke:"#919191",margin:2,minSize:new _t.Size(10,NaN),editable:!0},new _t.Binding("text").makeTwoWay()))),this.palette=Ve(_t.Palette,"paletteDiv",{maxSelectionCount:1,nodeTemplateMap:this.diagram.nodeTemplateMap,linkTemplate:Ve(_t.Link,{locationSpot:_t.Spot.Center,selectionAdornmentTemplate:Ve(_t.Adornment,"Link",{locationSpot:_t.Spot.Center},Ve(_t.Shape,{isPanelMain:!0,fill:null,stroke:"deepskyblue",strokeWidth:0}),Ve(_t.Shape,{toArrow:"Standard",stroke:null}))},{routing:_t.Link.AvoidsNodes,curve:_t.Link.JumpOver,corner:5,toShortLength:4},new _t.Binding("points"),Ve(_t.Shape,{isPanelMain:!0,strokeWidth:2}),Ve(_t.Shape,{toArrow:"Standard",stroke:null})),model:new _t.GraphLinksModel([{text:"User",figure:"Ellipse",size:"80 70",fill:"#00AD5F"},{text:"API",figure:"Actor",fill:"#00AD5F"},{text:"Container",figure:"Border",fill:" #4b6be1 "},{text:"DataBase",figure:"Database",size:"90 80",fill:"#ff9517 "},{text:"Comentario",figure:"RoundedRectangle",size:"115 50",fill:"lightyellow"},{text:"Modelo",figure:"Border",size:"115 50",fill:"lightyellow"},{text:"PRUEB",figure:"Border",size:"115 50",fill:"lightyellow"}])})}save(){this.saveDiagramProperties(),console.log(this.diagram.model.toJson()),this.diagram.isModified=!1}load(r){this.diagram.model=_t.Model.fromJson(r),this.diagram.animationManager.initialAnimationStyle=_t.AnimationManager.None,this.loadDiagramProperties()}saveDiagramProperties(){this.diagram.model.modelData.position=_t.Point.stringify(this.diagram.position)}loadDiagramProperties(){var r=this.diagram.model.modelData.position;r&&(this.diagram.initialPosition=_t.Point.parse(r))}sendData(){this.diagramServices.sendData(this.diagram.model.toJson())}getData(){this.dataSubscription=this.diagramServices.getData().subscribe(r=>{this.load(r)})}}return s.\u0275fac=function(r){return new(r||s)(Dt(X2),Dt(zD),Dt(Zs))},s.\u0275cmp=Ds({type:s,selectors:[["app-diagram"]],hostBindings:function(r,l){1&r&&ki("click",function(d){return l.onClick(d)},!1,Bd)},inputs:{model:"model"},decls:6,vars:0,consts:[[1,"getDiagrams"],["id","diagramsPanel"],["id","paletteDiv"],["paletteDiv",""],["id","diagramDiv"],["diagramDiv",""]],template:function(r,l){1&r&&(Ui(0,"div",0),Ui(1,"div",1),bt(2,"div",2,3),bt(4,"div",4,5),Hi(),Hi())},styles:["#diagramsPanel[_ngcontent-%COMP%]{width:100%;white-space:nowrap;justify-content:space-between}#diagramDiv[_ngcontent-%COMP%]{border:3px solid black;display:inline-block;vertical-align:top;width:84%;height:550px;background:white}#paletteDiv[_ngcontent-%COMP%]{border:3px solid black;display:inline-block;vertical-align:top;width:13%;height:550px;background:whitesmoke}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}.getDiagrams[_ngcontent-%COMP%]{display:grid;grid-template-columns:5fr 1fr}.loadDiagram[_ngcontent-%COMP%]{width:100%;height:500px;background:whitesmoke;border:3px solid black}"]}),s})(),_P=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275cmp=Ds({type:s,selectors:[["app-room"]],decls:2,vars:0,consts:[[1,"m-3"]],template:function(r,l){1&r&&(Ui(0,"div",0),bt(1,"app-diagram"),Hi())},directives:[wj],styles:[""],encapsulation:2}),s})();const xj=[{path:"",component:_P},{path:"room",component:_P},{path:"**",redirectTo:"room"}];let Cj=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({imports:[[ow,tP.forRoot(xj)],tP]}),s})(),gA=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({}),s})(),CB=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({imports:[[gA]]}),s})(),MB=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({imports:[CB]}),s})();function SB(){return"undefined"!=typeof window&&void 0!==window.document}function pE(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Gf(s){switch(s.length){case 0:return new Cw;case 1:return s[0];default:return new MP(s)}}function OA(s,i,r,l,c={},d={}){const m=[],w=[];let C=-1,E=null;if(l.forEach(_=>{const k=_.offset,F=k==C,j=F&&E||{};Object.keys(_).forEach(H=>{let et=H,pt=_[H];if("offset"!==H)switch(et=i.normalizePropertyName(et,m),pt){case"!":pt=c[H];break;case Ec:pt=d[H];break;default:pt=i.normalizeStyleValue(H,et,pt,m)}j[et]=pt}),F||w.push(j),E=j,C=k}),m.length){const _="\n - ";throw new Error(`Unable to animate due to the following errors:${_}${m.join(_)}`)}return w}function gE(s,i,r,l){switch(i){case"start":s.onStart(()=>l(r&&mE(r,"start",s)));break;case"done":s.onDone(()=>l(r&&mE(r,"done",s)));break;case"destroy":s.onDestroy(()=>l(r&&mE(r,"destroy",s)))}}function mE(s,i,r){const l=r.totalTime,d=yE(s.element,s.triggerName,s.fromState,s.toState,i||s.phaseName,null==l?s.totalTime:l,!!r.disabled),m=s._data;return null!=m&&(d._data=m),d}function yE(s,i,r,l,c="",d=0,m){return{element:s,triggerName:i,fromState:r,toState:l,phaseName:c,totalTime:d,disabled:!!m}}function Oa(s,i,r){let l;return s instanceof Map?(l=s.get(i),l||s.set(i,l=r)):(l=s[i],l||(l=s[i]=r)),l}function bA(s){const i=s.indexOf(":");return[s.substring(1,i),s.substr(i+1)]}let vE=(s,i)=>!1,LA=(s,i,r)=>[];(pE()||"undefined"!=typeof Element)&&(vE=SB()?(s,i)=>{for(;i&&i!==document.documentElement;){if(i===s)return!0;i=i.parentNode||i.host}return!1}:(s,i)=>s.contains(i),LA=(s,i,r)=>{if(r)return Array.from(s.querySelectorAll(i));const l=s.querySelector(i);return l?[l]:[]});let Kp=null,FA=!1;function RA(s){Kp||(Kp=function EB(){return"undefined"!=typeof document?document.body:null}()||{},FA=!!Kp.style&&"WebkitAppearance"in Kp.style);let i=!0;return Kp.style&&!function DB(s){return"ebkit"==s.substring(1,6)}(s)&&(i=s in Kp.style,!i&&FA&&(i="Webkit"+s.charAt(0).toUpperCase()+s.substr(1)in Kp.style)),i}const jA=vE,BA=LA;let VA=(()=>{class s{validateStyleProperty(r){return RA(r)}matchesElement(r,l){return!1}containsElement(r,l){return jA(r,l)}query(r,l,c){return BA(r,l,c)}computeStyle(r,l,c){return c||""}animate(r,l,c,d,m,w=[],C){return new Cw(c,d)}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})(),wE=(()=>{class s{}return s.NOOP=new VA,s})();const xE="ng-enter",IC="ng-leave",OC="ng-trigger",bC=".ng-trigger",HA="ng-animating",CE=".ng-animating";function Zp(s){if("number"==typeof s)return s;const i=s.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:ME(parseFloat(i[1]),i[2])}function ME(s,i){return"s"===i?1e3*s:s}function LC(s,i,r){return s.hasOwnProperty("duration")?s:function NB(s,i,r){let c,d=0,m="";if("string"==typeof s){const w=s.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===w)return i.push(`The provided timing value "${s}" is invalid.`),{duration:0,delay:0,easing:""};c=ME(parseFloat(w[1]),w[2]);const C=w[3];null!=C&&(d=ME(parseFloat(C),w[4]));const E=w[5];E&&(m=E)}else c=s;if(!r){let w=!1,C=i.length;c<0&&(i.push("Duration values below 0 are not allowed for this animation step."),w=!0),d<0&&(i.push("Delay values below 0 are not allowed for this animation step."),w=!0),w&&i.splice(C,0,`The provided timing value "${s}" is invalid.`)}return{duration:c,delay:d,easing:m}}(s,i,r)}function Ry(s,i={}){return Object.keys(s).forEach(r=>{i[r]=s[r]}),i}function zf(s,i,r={}){if(i)for(let l in s)r[l]=s[l];else Ry(s,r);return r}function zA(s,i,r){return r?i+":"+r+";":""}function $A(s){let i="";for(let r=0;r<s.style.length;r++){const l=s.style.item(r);i+=zA(0,l,s.style.getPropertyValue(l))}for(const r in s.style)s.style.hasOwnProperty(r)&&!r.startsWith("_")&&(i+=zA(0,kB(r),s.style[r]));s.setAttribute("style",i)}function rh(s,i,r){s.style&&(Object.keys(i).forEach(l=>{const c=DE(l);r&&!r.hasOwnProperty(l)&&(r[l]=s.style[c]),s.style[c]=i[l]}),pE()&&$A(s))}function Jp(s,i){s.style&&(Object.keys(i).forEach(r=>{const l=DE(r);s.style[l]=""}),pE()&&$A(s))}function _w(s){return Array.isArray(s)?1==s.length?s[0]:wP(s):s}const SE=new RegExp("{{\\s*(.+?)\\s*}}","g");function YA(s){let i=[];if("string"==typeof s){let r;for(;r=SE.exec(s);)i.push(r[1]);SE.lastIndex=0}return i}function FC(s,i,r){const l=s.toString(),c=l.replace(SE,(d,m)=>{let w=i[m];return i.hasOwnProperty(m)||(r.push(`Please provide a value for the animation param ${m}`),w=""),w.toString()});return c==l?s:c}function RC(s){const i=[];let r=s.next();for(;!r.done;)i.push(r.value),r=s.next();return i}const AB=/-+([a-z0-9])/g;function DE(s){return s.replace(AB,(...i)=>i[1].toUpperCase())}function kB(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ba(s,i,r){switch(i.type){case 7:return s.visitTrigger(i,r);case 0:return s.visitState(i,r);case 1:return s.visitTransition(i,r);case 2:return s.visitSequence(i,r);case 3:return s.visitGroup(i,r);case 4:return s.visitAnimate(i,r);case 5:return s.visitKeyframes(i,r);case 6:return s.visitStyle(i,r);case 8:return s.visitReference(i,r);case 9:return s.visitAnimateChild(i,r);case 10:return s.visitAnimateRef(i,r);case 11:return s.visitQuery(i,r);case 12:return s.visitStagger(i,r);default:throw new Error(`Unable to resolve animation metadata node #${i.type}`)}}function WA(s,i){return window.getComputedStyle(s)[i]}function bB(s,i){const r=[];return"string"==typeof s?s.split(/\s*,\s*/).forEach(l=>function LB(s,i,r){if(":"==s[0]){const C=function FB(s,i){switch(s){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(r,l)=>parseFloat(l)>parseFloat(r);case":decrement":return(r,l)=>parseFloat(l)<parseFloat(r);default:return i.push(`The transition alias value "${s}" is not supported`),"* => *"}}(s,r);if("function"==typeof C)return void i.push(C);s=C}const l=s.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==l||l.length<4)return r.push(`The provided transition expression "${s}" is not supported`),i;const c=l[1],d=l[2],m=l[3];i.push(XA(c,m));"<"==d[0]&&!("*"==c&&"*"==m)&&i.push(XA(m,c))}(l,r,i)):r.push(s),r}const BC=new Set(["true","1"]),VC=new Set(["false","0"]);function XA(s,i){const r=BC.has(s)||VC.has(s),l=BC.has(i)||VC.has(i);return(c,d)=>{let m="*"==s||s==c,w="*"==i||i==d;return!m&&r&&"boolean"==typeof c&&(m=c?BC.has(s):VC.has(s)),!w&&l&&"boolean"==typeof d&&(w=d?BC.has(i):VC.has(i)),m&&w}}const RB=new RegExp("s*:selfs*,?","g");function EE(s,i,r){return new jB(s).build(i,r)}class jB{constructor(i){this._driver=i}build(i,r){const l=new UB(r);return this._resetContextStyleTimingState(l),ba(this,_w(i),l)}_resetContextStyleTimingState(i){i.currentQuerySelector="",i.collectedStyles={},i.collectedStyles[""]={},i.currentTime=0}visitTrigger(i,r){let l=r.queryCount=0,c=r.depCount=0;const d=[],m=[];return"@"==i.name.charAt(0)&&r.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),i.definitions.forEach(w=>{if(this._resetContextStyleTimingState(r),0==w.type){const C=w,E=C.name;E.toString().split(/\s*,\s*/).forEach(_=>{C.name=_,d.push(this.visitState(C,r))}),C.name=E}else if(1==w.type){const C=this.visitTransition(w,r);l+=C.queryCount,c+=C.depCount,m.push(C)}else r.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:i.name,states:d,transitions:m,queryCount:l,depCount:c,options:null}}visitState(i,r){const l=this.visitStyle(i.styles,r),c=i.options&&i.options.params||null;if(l.containsDynamicStyles){const d=new Set,m=c||{};if(l.styles.forEach(w=>{if(UC(w)){const C=w;Object.keys(C).forEach(E=>{YA(C[E]).forEach(_=>{m.hasOwnProperty(_)||d.add(_)})})}}),d.size){const w=RC(d.values());r.errors.push(`state("${i.name}", ...) must define default values for all the following style substitutions: ${w.join(", ")}`)}}return{type:0,name:i.name,style:l,options:c?{params:c}:null}}visitTransition(i,r){r.queryCount=0,r.depCount=0;const l=ba(this,_w(i.animation),r);return{type:1,matchers:bB(i.expr,r.errors),animation:l,queryCount:r.queryCount,depCount:r.depCount,options:Qp(i.options)}}visitSequence(i,r){return{type:2,steps:i.steps.map(l=>ba(this,l,r)),options:Qp(i.options)}}visitGroup(i,r){const l=r.currentTime;let c=0;const d=i.steps.map(m=>{r.currentTime=l;const w=ba(this,m,r);return c=Math.max(c,r.currentTime),w});return r.currentTime=c,{type:3,steps:d,options:Qp(i.options)}}visitAnimate(i,r){const l=function GB(s,i){let r=null;if(s.hasOwnProperty("duration"))r=s;else if("number"==typeof s)return TE(LC(s,i).duration,0,"");const l=s;if(l.split(/\s+/).some(d=>"{"==d.charAt(0)&&"{"==d.charAt(1))){const d=TE(0,0,"");return d.dynamic=!0,d.strValue=l,d}return r=r||LC(l,i),TE(r.duration,r.delay,r.easing)}(i.timings,r.errors);r.currentAnimateTimings=l;let c,d=i.styles?i.styles:xw({});if(5==d.type)c=this.visitKeyframes(d,r);else{let m=i.styles,w=!1;if(!m){w=!0;const E={};l.easing&&(E.easing=l.easing),m=xw(E)}r.currentTime+=l.duration+l.delay;const C=this.visitStyle(m,r);C.isEmptyStep=w,c=C}return r.currentAnimateTimings=null,{type:4,timings:l,style:c,options:null}}visitStyle(i,r){const l=this._makeStyleAst(i,r);return this._validateStyleAst(l,r),l}_makeStyleAst(i,r){const l=[];Array.isArray(i.styles)?i.styles.forEach(m=>{"string"==typeof m?m==Ec?l.push(m):r.errors.push(`The provided style string value ${m} is not allowed.`):l.push(m)}):l.push(i.styles);let c=!1,d=null;return l.forEach(m=>{if(UC(m)){const w=m,C=w.easing;if(C&&(d=C,delete w.easing),!c)for(let E in w)if(w[E].toString().indexOf("{{")>=0){c=!0;break}}}),{type:6,styles:l,easing:d,offset:i.offset,containsDynamicStyles:c,options:null}}_validateStyleAst(i,r){const l=r.currentAnimateTimings;let c=r.currentTime,d=r.currentTime;l&&d>0&&(d-=l.duration+l.delay),i.styles.forEach(m=>{"string"!=typeof m&&Object.keys(m).forEach(w=>{if(!this._driver.validateStyleProperty(w))return void r.errors.push(`The provided animation property "${w}" is not a supported CSS property for animations`);const C=r.collectedStyles[r.currentQuerySelector],E=C[w];let _=!0;E&&(d!=c&&d>=E.startTime&&c<=E.endTime&&(r.errors.push(`The CSS property "${w}" that exists between the times of "${E.startTime}ms" and "${E.endTime}ms" is also being animated in a parallel animation between the times of "${d}ms" and "${c}ms"`),_=!1),d=E.startTime),_&&(C[w]={startTime:d,endTime:c}),r.options&&function PB(s,i,r){const l=i.params||{},c=YA(s);c.length&&c.forEach(d=>{l.hasOwnProperty(d)||r.push(`Unable to resolve the local animation param ${d} in the given list of values`)})}(m[w],r.options,r.errors)})})}visitKeyframes(i,r){const l={type:5,styles:[],options:null};if(!r.currentAnimateTimings)return r.errors.push("keyframes() must be placed inside of a call to animate()"),l;let d=0;const m=[];let w=!1,C=!1,E=0;const _=i.steps.map(vt=>{const ct=this._makeStyleAst(vt,r);let Ot=null!=ct.offset?ct.offset:function HB(s){if("string"==typeof s)return null;let i=null;if(Array.isArray(s))s.forEach(r=>{if(UC(r)&&r.hasOwnProperty("offset")){const l=r;i=parseFloat(l.offset),delete l.offset}});else if(UC(s)&&s.hasOwnProperty("offset")){const r=s;i=parseFloat(r.offset),delete r.offset}return i}(ct.styles),Ut=0;return null!=Ot&&(d++,Ut=ct.offset=Ot),C=C||Ut<0||Ut>1,w=w||Ut<E,E=Ut,m.push(Ut),ct});C&&r.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),w&&r.errors.push("Please ensure that all keyframe offsets are in order");const k=i.steps.length;let F=0;d>0&&d<k?r.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==d&&(F=1/(k-1));const j=k-1,H=r.currentTime,et=r.currentAnimateTimings,pt=et.duration;return _.forEach((vt,ct)=>{const Ot=F>0?ct==j?1:F*ct:m[ct],Ut=Ot*pt;r.currentTime=H+et.delay+Ut,et.duration=Ut,this._validateStyleAst(vt,r),vt.offset=Ot,l.styles.push(vt)}),l}visitReference(i,r){return{type:8,animation:ba(this,_w(i.animation),r),options:Qp(i.options)}}visitAnimateChild(i,r){return r.depCount++,{type:9,options:Qp(i.options)}}visitAnimateRef(i,r){return{type:10,animation:this.visitReference(i.animation,r),options:Qp(i.options)}}visitQuery(i,r){const l=r.currentQuerySelector,c=i.options||{};r.queryCount++,r.currentQuery=i;const[d,m]=function BB(s){const i=!!s.split(/\s*,\s*/).find(r=>":self"==r);return i&&(s=s.replace(RB,"")),s=s.replace(/@\*/g,bC).replace(/@\w+/g,r=>bC+"-"+r.substr(1)).replace(/:animating/g,CE),[s,i]}(i.selector);r.currentQuerySelector=l.length?l+" "+d:d,Oa(r.collectedStyles,r.currentQuerySelector,{});const w=ba(this,_w(i.animation),r);return r.currentQuery=null,r.currentQuerySelector=l,{type:11,selector:d,limit:c.limit||0,optional:!!c.optional,includeSelf:m,animation:w,originalSelector:i.selector,options:Qp(i.options)}}visitStagger(i,r){r.currentQuery||r.errors.push("stagger() can only be used inside of query()");const l="full"===i.timings?{duration:0,delay:0,easing:"full"}:LC(i.timings,r.errors,!0);return{type:12,animation:ba(this,_w(i.animation),r),timings:l,options:null}}}class UB{constructor(i){this.errors=i,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function UC(s){return!Array.isArray(s)&&"object"==typeof s}function Qp(s){return s?(s=Ry(s)).params&&(s.params=function VB(s){return s?Ry(s):null}(s.params)):s={},s}function TE(s,i,r){return{duration:s,delay:i,easing:r}}function _E(s,i,r,l,c,d,m=null,w=!1){return{type:1,element:s,keyframes:i,preStyleProps:r,postStyleProps:l,duration:c,delay:d,totalTime:c+d,easing:m,subTimeline:w}}class HC{constructor(){this._map=new Map}get(i){return this._map.get(i)||[]}append(i,r){let l=this._map.get(i);l||this._map.set(i,l=[]),l.push(...r)}has(i){return this._map.has(i)}clear(){this._map.clear()}}const YB=new RegExp(":enter","g"),XB=new RegExp(":leave","g");function NE(s,i,r,l,c,d={},m={},w,C,E=[]){return(new KB).buildKeyframes(s,i,r,l,c,d,m,w,C,E)}class KB{buildKeyframes(i,r,l,c,d,m,w,C,E,_=[]){E=E||new HC;const k=new PE(i,r,E,c,d,_,[]);k.options=C,k.currentTimeline.setStyles([m],null,k.errors,C),ba(this,l,k);const F=k.timelines.filter(j=>j.containsAnimation());if(Object.keys(w).length){let j;for(let H=F.length-1;H>=0;H--){const et=F[H];if(et.element===r){j=et;break}}j&&!j.allowOnlyTimelineStyles()&&j.setStyles([w],null,k.errors,C)}return F.length?F.map(j=>j.buildKeyframes()):[_E(r,[],[],[],0,0,"",!1)]}visitTrigger(i,r){}visitState(i,r){}visitTransition(i,r){}visitAnimateChild(i,r){const l=r.subInstructions.get(r.element);if(l){const c=r.createSubContext(i.options),d=r.currentTimeline.currentTime,m=this._visitSubInstructions(l,c,c.options);d!=m&&r.transformIntoNewTimeline(m)}r.previousNode=i}visitAnimateRef(i,r){const l=r.createSubContext(i.options);l.transformIntoNewTimeline(),this.visitReference(i.animation,l),r.transformIntoNewTimeline(l.currentTimeline.currentTime),r.previousNode=i}_visitSubInstructions(i,r,l){let d=r.currentTimeline.currentTime;const m=null!=l.duration?Zp(l.duration):null,w=null!=l.delay?Zp(l.delay):null;return 0!==m&&i.forEach(C=>{const E=r.appendInstructionToTimeline(C,m,w);d=Math.max(d,E.duration+E.delay)}),d}visitReference(i,r){r.updateOptions(i.options,!0),ba(this,i.animation,r),r.previousNode=i}visitSequence(i,r){const l=r.subContextCount;let c=r;const d=i.options;if(d&&(d.params||d.delay)&&(c=r.createSubContext(d),c.transformIntoNewTimeline(),null!=d.delay)){6==c.previousNode.type&&(c.currentTimeline.snapshotCurrentStyles(),c.previousNode=GC);const m=Zp(d.delay);c.delayNextStep(m)}i.steps.length&&(i.steps.forEach(m=>ba(this,m,c)),c.currentTimeline.applyStylesToKeyframe(),c.subContextCount>l&&c.transformIntoNewTimeline()),r.previousNode=i}visitGroup(i,r){const l=[];let c=r.currentTimeline.currentTime;const d=i.options&&i.options.delay?Zp(i.options.delay):0;i.steps.forEach(m=>{const w=r.createSubContext(i.options);d&&w.delayNextStep(d),ba(this,m,w),c=Math.max(c,w.currentTimeline.currentTime),l.push(w.currentTimeline)}),l.forEach(m=>r.currentTimeline.mergeTimelineCollectedStyles(m)),r.transformIntoNewTimeline(c),r.previousNode=i}_visitTiming(i,r){if(i.dynamic){const l=i.strValue;return LC(r.params?FC(l,r.params,r.errors):l,r.errors)}return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,r){const l=r.currentAnimateTimings=this._visitTiming(i.timings,r),c=r.currentTimeline;l.delay&&(r.incrementTime(l.delay),c.snapshotCurrentStyles());const d=i.style;5==d.type?this.visitKeyframes(d,r):(r.incrementTime(l.duration),this.visitStyle(d,r),c.applyStylesToKeyframe()),r.currentAnimateTimings=null,r.previousNode=i}visitStyle(i,r){const l=r.currentTimeline,c=r.currentAnimateTimings;!c&&l.getCurrentStyleProperties().length&&l.forwardFrame();const d=c&&c.easing||i.easing;i.isEmptyStep?l.applyEmptyStep(d):l.setStyles(i.styles,d,r.errors,r.options),r.previousNode=i}visitKeyframes(i,r){const l=r.currentAnimateTimings,c=r.currentTimeline.duration,d=l.duration,w=r.createSubContext().currentTimeline;w.easing=l.easing,i.styles.forEach(C=>{w.forwardTime((C.offset||0)*d),w.setStyles(C.styles,C.easing,r.errors,r.options),w.applyStylesToKeyframe()}),r.currentTimeline.mergeTimelineCollectedStyles(w),r.transformIntoNewTimeline(c+d),r.previousNode=i}visitQuery(i,r){const l=r.currentTimeline.currentTime,c=i.options||{},d=c.delay?Zp(c.delay):0;d&&(6===r.previousNode.type||0==l&&r.currentTimeline.getCurrentStyleProperties().length)&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=GC);let m=l;const w=r.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!c.optional,r.errors);r.currentQueryTotal=w.length;let C=null;w.forEach((E,_)=>{r.currentQueryIndex=_;const k=r.createSubContext(i.options,E);d&&k.delayNextStep(d),E===r.element&&(C=k.currentTimeline),ba(this,i.animation,k),k.currentTimeline.applyStylesToKeyframe(),m=Math.max(m,k.currentTimeline.currentTime)}),r.currentQueryIndex=0,r.currentQueryTotal=0,r.transformIntoNewTimeline(m),C&&(r.currentTimeline.mergeTimelineCollectedStyles(C),r.currentTimeline.snapshotCurrentStyles()),r.previousNode=i}visitStagger(i,r){const l=r.parentContext,c=r.currentTimeline,d=i.timings,m=Math.abs(d.duration),w=m*(r.currentQueryTotal-1);let C=m*r.currentQueryIndex;switch(d.duration<0?"reverse":d.easing){case"reverse":C=w-C;break;case"full":C=l.currentStaggerTime}const _=r.currentTimeline;C&&_.delayNextStep(C);const k=_.currentTime;ba(this,i.animation,r),r.previousNode=i,l.currentStaggerTime=c.currentTime-k+(c.startTime-l.currentTimeline.startTime)}}const GC={};class PE{constructor(i,r,l,c,d,m,w,C){this._driver=i,this.element=r,this.subInstructions=l,this._enterClassName=c,this._leaveClassName=d,this.errors=m,this.timelines=w,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=GC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=C||new zC(this._driver,r,0),w.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,r){if(!i)return;const l=i;let c=this.options;null!=l.duration&&(c.duration=Zp(l.duration)),null!=l.delay&&(c.delay=Zp(l.delay));const d=l.params;if(d){let m=c.params;m||(m=this.options.params={}),Object.keys(d).forEach(w=>{(!r||!m.hasOwnProperty(w))&&(m[w]=FC(d[w],m,this.errors))})}}_copyOptions(){const i={};if(this.options){const r=this.options.params;if(r){const l=i.params={};Object.keys(r).forEach(c=>{l[c]=r[c]})}}return i}createSubContext(i=null,r,l){const c=r||this.element,d=new PE(this._driver,c,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(c,l||0));return d.previousNode=this.previousNode,d.currentAnimateTimings=this.currentAnimateTimings,d.options=this._copyOptions(),d.updateOptions(i),d.currentQueryIndex=this.currentQueryIndex,d.currentQueryTotal=this.currentQueryTotal,d.parentContext=this,this.subContextCount++,d}transformIntoNewTimeline(i){return this.previousNode=GC,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,r,l){const c={duration:null!=r?r:i.duration,delay:this.currentTimeline.currentTime+(null!=l?l:0)+i.delay,easing:""},d=new ZB(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,c,i.stretchStartingKeyframe);return this.timelines.push(d),c}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,r,l,c,d,m){let w=[];if(c&&w.push(this.element),i.length>0){i=(i=i.replace(YB,"."+this._enterClassName)).replace(XB,"."+this._leaveClassName);let E=this._driver.query(this.element,i,1!=l);0!==l&&(E=l<0?E.slice(E.length+l,E.length):E.slice(0,l)),w.push(...E)}return!d&&0==w.length&&m.push(`\`query("${r}")\` returned zero elements. (Use \`query("${r}", { optional: true })\` if you wish to allow this.)`),w}}class zC{constructor(i,r,l,c){this._driver=i,this.element=r,this.startTime=l,this._elementTimelineStylesLookup=c,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(r),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(r,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(i){const r=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||r?(this.forwardTime(this.currentTime+i),r&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,r){return this.applyStylesToKeyframe(),new zC(this._driver,i,r||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,r){this._localTimelineStyles[i]=r,this._globalTimelineStyles[i]=r,this._styleSummary[i]={time:this.currentTime,value:r}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&(this._previousKeyframe.easing=i),Object.keys(this._globalTimelineStyles).forEach(r=>{this._backFill[r]=this._globalTimelineStyles[r]||Ec,this._currentKeyframe[r]=Ec}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,r,l,c){r&&(this._previousKeyframe.easing=r);const d=c&&c.params||{},m=function JB(s,i){const r={};let l;return s.forEach(c=>{"*"===c?(l=l||Object.keys(i),l.forEach(d=>{r[d]=Ec})):zf(c,!1,r)}),r}(i,this._globalTimelineStyles);Object.keys(m).forEach(w=>{const C=FC(m[w],d,l);this._pendingStyles[w]=C,this._localTimelineStyles.hasOwnProperty(w)||(this._backFill[w]=this._globalTimelineStyles.hasOwnProperty(w)?this._globalTimelineStyles[w]:Ec),this._updateStyle(w,C)})}applyStylesToKeyframe(){const i=this._pendingStyles,r=Object.keys(i);0!=r.length&&(this._pendingStyles={},r.forEach(l=>{this._currentKeyframe[l]=i[l]}),Object.keys(this._localTimelineStyles).forEach(l=>{this._currentKeyframe.hasOwnProperty(l)||(this._currentKeyframe[l]=this._localTimelineStyles[l])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(i=>{const r=this._localTimelineStyles[i];this._pendingStyles[i]=r,this._updateStyle(i,r)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const i=[];for(let r in this._currentKeyframe)i.push(r);return i}mergeTimelineCollectedStyles(i){Object.keys(i._styleSummary).forEach(r=>{const l=this._styleSummary[r],c=i._styleSummary[r];(!l||c.time>l.time)&&this._updateStyle(r,c.value)})}buildKeyframes(){this.applyStylesToKeyframe();const i=new Set,r=new Set,l=1===this._keyframes.size&&0===this.duration;let c=[];this._keyframes.forEach((w,C)=>{const E=zf(w,!0);Object.keys(E).forEach(_=>{const k=E[_];"!"==k?i.add(_):k==Ec&&r.add(_)}),l||(E.offset=C/this.duration),c.push(E)});const d=i.size?RC(i.values()):[],m=r.size?RC(r.values()):[];if(l){const w=c[0],C=Ry(w);w.offset=0,C.offset=1,c=[w,C]}return _E(this.element,c,d,m,this.duration,this.startTime,this.easing,!1)}}class ZB extends zC{constructor(i,r,l,c,d,m,w=!1){super(i,r,m.delay),this.keyframes=l,this.preStyleProps=c,this.postStyleProps=d,this._stretchStartingKeyframe=w,this.timings={duration:m.duration,delay:m.delay,easing:m.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:r,duration:l,easing:c}=this.timings;if(this._stretchStartingKeyframe&&r){const d=[],m=l+r,w=r/m,C=zf(i[0],!1);C.offset=0,d.push(C);const E=zf(i[0],!1);E.offset=JA(w),d.push(E);const _=i.length-1;for(let k=1;k<=_;k++){let F=zf(i[k],!1);F.offset=JA((r+F.offset*l)/m),d.push(F)}l=m,r=0,c="",i=d}return _E(this.element,i,this.preStyleProps,this.postStyleProps,l,r,c,!0)}}function JA(s,i=3){const r=Math.pow(10,i-1);return Math.round(s*r)/r}class AE{}class QB extends AE{normalizePropertyName(i,r){return DE(i)}normalizeStyleValue(i,r,l,c){let d="";const m=l.toString().trim();if(qB[r]&&0!==l&&"0"!==l)if("number"==typeof l)d="px";else{const w=l.match(/^[+-]?[\d\.]+([a-z]*)$/);w&&0==w[1].length&&c.push(`Please provide a CSS unit value for ${i}:${l}`)}return m+d}}const qB=(()=>function tV(s){const i={};return s.forEach(r=>i[r]=!0),i}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function QA(s,i,r,l,c,d,m,w,C,E,_,k,F){return{type:0,element:s,triggerName:i,isRemovalTransition:c,fromState:r,fromStyles:d,toState:l,toStyles:m,timelines:w,queriedElements:C,preStyleProps:E,postStyleProps:_,totalTime:k,errors:F}}const kE={};class qA{constructor(i,r,l){this._triggerName=i,this.ast=r,this._stateStyles=l}match(i,r,l,c){return function eV(s,i,r,l,c){return s.some(d=>d(i,r,l,c))}(this.ast.matchers,i,r,l,c)}buildStyles(i,r,l){const c=this._stateStyles["*"],d=this._stateStyles[i],m=c?c.buildStyles(r,l):{};return d?d.buildStyles(r,l):m}build(i,r,l,c,d,m,w,C,E,_){const k=[],F=this.ast.options&&this.ast.options.params||kE,H=this.buildStyles(l,w&&w.params||kE,k),et=C&&C.params||kE,pt=this.buildStyles(c,et,k),vt=new Set,ct=new Map,Ot=new Map,Ut="void"===c,je={params:Object.assign(Object.assign({},F),et)},Oi=_?[]:NE(i,r,this.ast.animation,d,m,H,pt,je,E,k);let Wi=0;if(Oi.forEach(Ra=>{Wi=Math.max(Ra.duration+Ra.delay,Wi)}),k.length)return QA(r,this._triggerName,l,c,Ut,H,pt,[],[],ct,Ot,Wi,k);Oi.forEach(Ra=>{const ja=Ra.element,Vy=Oa(ct,ja,{});Ra.preStyleProps.forEach(pu=>Vy[pu]=!0);const Nc=Oa(Ot,ja,{});Ra.postStyleProps.forEach(pu=>Nc[pu]=!0),ja!==r&&vt.add(ja)});const Fa=RC(vt.values());return QA(r,this._triggerName,l,c,Ut,H,pt,Oi,Fa,ct,Ot,Wi)}}class nV{constructor(i,r,l){this.styles=i,this.defaultParams=r,this.normalizer=l}buildStyles(i,r){const l={},c=Ry(this.defaultParams);return Object.keys(i).forEach(d=>{const m=i[d];null!=m&&(c[d]=m)}),this.styles.styles.forEach(d=>{if("string"!=typeof d){const m=d;Object.keys(m).forEach(w=>{let C=m[w];C.length>1&&(C=FC(C,c,r));const E=this.normalizer.normalizePropertyName(w,r);C=this.normalizer.normalizeStyleValue(w,E,C,r),l[E]=C})}}),l}}class rV{constructor(i,r,l){this.name=i,this.ast=r,this._normalizer=l,this.transitionFactories=[],this.states={},r.states.forEach(c=>{this.states[c.name]=new nV(c.style,c.options&&c.options.params||{},l)}),tk(this.states,"true","1"),tk(this.states,"false","0"),r.transitions.forEach(c=>{this.transitionFactories.push(new qA(i,c,this.states))}),this.fallbackTransition=function oV(s,i,r){return new qA(s,{type:1,animation:{type:2,steps:[],options:null},matchers:[(m,w)=>!0],options:null,queryCount:0,depCount:0},i)}(i,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,r,l,c){return this.transitionFactories.find(m=>m.match(i,r,l,c))||null}matchStyles(i,r,l){return this.fallbackTransition.buildStyles(i,r,l)}}function tk(s,i,r){s.hasOwnProperty(i)?s.hasOwnProperty(r)||(s[r]=s[i]):s.hasOwnProperty(r)&&(s[i]=s[r])}const sV=new HC;class aV{constructor(i,r,l){this.bodyNode=i,this._driver=r,this._normalizer=l,this._animations={},this._playersById={},this.players=[]}register(i,r){const l=[],c=EE(this._driver,r,l);if(l.length)throw new Error(`Unable to build the animation due to the following errors: ${l.join("\n")}`);this._animations[i]=c}_buildPlayer(i,r,l){const c=i.element,d=OA(0,this._normalizer,0,i.keyframes,r,l);return this._driver.animate(c,d,i.duration,i.delay,i.easing,[],!0)}create(i,r,l={}){const c=[],d=this._animations[i];let m;const w=new Map;if(d?(m=NE(this._driver,r,d,xE,IC,{},{},l,sV,c),m.forEach(_=>{const k=Oa(w,_.element,{});_.postStyleProps.forEach(F=>k[F]=null)})):(c.push("The requested animation doesn't exist or has already been destroyed"),m=[]),c.length)throw new Error(`Unable to create the animation due to the following errors: ${c.join("\n")}`);w.forEach((_,k)=>{Object.keys(_).forEach(F=>{_[F]=this._driver.computeStyle(k,F,Ec)})});const E=Gf(m.map(_=>{const k=w.get(_.element);return this._buildPlayer(_,{},k)}));return this._playersById[i]=E,E.onDestroy(()=>this.destroy(i)),this.players.push(E),E}destroy(i){const r=this._getPlayer(i);r.destroy(),delete this._playersById[i];const l=this.players.indexOf(r);l>=0&&this.players.splice(l,1)}_getPlayer(i){const r=this._playersById[i];if(!r)throw new Error(`Unable to find the timeline player referenced by ${i}`);return r}listen(i,r,l,c){const d=yE(r,"","","");return gE(this._getPlayer(i),l,d,c),()=>{}}command(i,r,l,c){if("register"==l)return void this.register(i,c[0]);if("create"==l)return void this.create(i,r,c[0]||{});const d=this._getPlayer(i);switch(l){case"play":d.play();break;case"pause":d.pause();break;case"reset":d.reset();break;case"restart":d.restart();break;case"finish":d.finish();break;case"init":d.init();break;case"setPosition":d.setPosition(parseFloat(c[0]));break;case"destroy":this.destroy(i)}}}const ek="ng-animate-queued",IE="ng-animate-disabled",fV=[],nk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},dV={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Tl="__ng_removed";class OE{constructor(i,r=""){this.namespaceId=r;const l=i&&i.hasOwnProperty("value");if(this.value=function yV(s){return null!=s?s:null}(l?i.value:i),l){const d=Ry(i);delete d.value,this.options=d}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(i){const r=i.params;if(r){const l=this.options.params;Object.keys(r).forEach(c=>{null==l[c]&&(l[c]=r[c])})}}}const Nw="void",bE=new OE(Nw);class pV{constructor(i,r,l){this.id=i,this.hostElement=r,this._engine=l,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+i,_l(r,this._hostClassName)}listen(i,r,l,c){if(!this._triggers.hasOwnProperty(r))throw new Error(`Unable to listen on the animation trigger event "${l}" because the animation trigger "${r}" doesn't exist!`);if(null==l||0==l.length)throw new Error(`Unable to listen on the animation trigger "${r}" because the provided event is undefined!`);if(!function vV(s){return"start"==s||"done"==s}(l))throw new Error(`The provided animation trigger event "${l}" for the animation trigger "${r}" is not supported!`);const d=Oa(this._elementListeners,i,[]),m={name:r,phase:l,callback:c};d.push(m);const w=Oa(this._engine.statesByElement,i,{});return w.hasOwnProperty(r)||(_l(i,OC),_l(i,OC+"-"+r),w[r]=bE),()=>{this._engine.afterFlush(()=>{const C=d.indexOf(m);C>=0&&d.splice(C,1),this._triggers[r]||delete w[r]})}}register(i,r){return!this._triggers[i]&&(this._triggers[i]=r,!0)}_getTrigger(i){const r=this._triggers[i];if(!r)throw new Error(`The provided animation trigger "${i}" has not been registered!`);return r}trigger(i,r,l,c=!0){const d=this._getTrigger(r),m=new LE(this.id,r,i);let w=this._engine.statesByElement.get(i);w||(_l(i,OC),_l(i,OC+"-"+r),this._engine.statesByElement.set(i,w={}));let C=w[r];const E=new OE(l,this.id);if(!(l&&l.hasOwnProperty("value"))&&C&&E.absorbOptions(C.options),w[r]=E,C||(C=bE),E.value!==Nw&&C.value===E.value){if(!function CV(s,i){const r=Object.keys(s),l=Object.keys(i);if(r.length!=l.length)return!1;for(let c=0;c<r.length;c++){const d=r[c];if(!i.hasOwnProperty(d)||s[d]!==i[d])return!1}return!0}(C.params,E.params)){const et=[],pt=d.matchStyles(C.value,C.params,et),vt=d.matchStyles(E.value,E.params,et);et.length?this._engine.reportError(et):this._engine.afterFlush(()=>{Jp(i,pt),rh(i,vt)})}return}const F=Oa(this._engine.playersByElement,i,[]);F.forEach(et=>{et.namespaceId==this.id&&et.triggerName==r&&et.queued&&et.destroy()});let j=d.matchTransition(C.value,E.value,i,E.params),H=!1;if(!j){if(!c)return;j=d.fallbackTransition,H=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:r,transition:j,fromState:C,toState:E,player:m,isFallbackTransition:H}),H||(_l(i,ek),m.onStart(()=>{jy(i,ek)})),m.onDone(()=>{let et=this.players.indexOf(m);et>=0&&this.players.splice(et,1);const pt=this._engine.playersByElement.get(i);if(pt){let vt=pt.indexOf(m);vt>=0&&pt.splice(vt,1)}}),this.players.push(m),F.push(m),m}deregister(i){delete this._triggers[i],this._engine.statesByElement.forEach((r,l)=>{delete r[i]}),this._elementListeners.forEach((r,l)=>{this._elementListeners.set(l,r.filter(c=>c.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);const r=this._engine.playersByElement.get(i);r&&(r.forEach(l=>l.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,r){const l=this._engine.driver.query(i,bC,!0);l.forEach(c=>{if(c[Tl])return;const d=this._engine.fetchNamespacesByElement(c);d.size?d.forEach(m=>m.triggerLeaveAnimation(c,r,!1,!0)):this.clearElementCache(c)}),this._engine.afterFlushAnimationsDone(()=>l.forEach(c=>this.clearElementCache(c)))}triggerLeaveAnimation(i,r,l,c){const d=this._engine.statesByElement.get(i),m=new Map;if(d){const w=[];if(Object.keys(d).forEach(C=>{if(m.set(C,d[C].value),this._triggers[C]){const E=this.trigger(i,C,Nw,c);E&&w.push(E)}}),w.length)return this._engine.markElementAsRemoved(this.id,i,!0,r,m),l&&Gf(w).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){const r=this._elementListeners.get(i),l=this._engine.statesByElement.get(i);if(r&&l){const c=new Set;r.forEach(d=>{const m=d.name;if(c.has(m))return;c.add(m);const C=this._triggers[m].fallbackTransition,E=l[m]||bE,_=new OE(Nw),k=new LE(this.id,m,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:m,transition:C,fromState:E,toState:_,player:k,isFallbackTransition:!0})})}}removeNode(i,r){const l=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,r),this.triggerLeaveAnimation(i,r,!0))return;let c=!1;if(l.totalAnimations){const d=l.players.length?l.playersByQueriedElement.get(i):[];if(d&&d.length)c=!0;else{let m=i;for(;m=m.parentNode;)if(l.statesByElement.get(m)){c=!0;break}}}if(this.prepareLeaveAnimationListeners(i),c)l.markElementAsRemoved(this.id,i,!1,r);else{const d=i[Tl];(!d||d===nk)&&(l.afterFlush(()=>this.clearElementCache(i)),l.destroyInnerAnimations(i),l._onRemovalComplete(i,r))}}insertNode(i,r){_l(i,this._hostClassName)}drainQueuedTransitions(i){const r=[];return this._queue.forEach(l=>{const c=l.player;if(c.destroyed)return;const d=l.element,m=this._elementListeners.get(d);m&&m.forEach(w=>{if(w.name==l.triggerName){const C=yE(d,l.triggerName,l.fromState.value,l.toState.value);C._data=i,gE(l.player,w.phase,C,w.callback)}}),c.markedForDestroy?this._engine.afterFlush(()=>{c.destroy()}):r.push(l)}),this._queue=[],r.sort((l,c)=>{const d=l.transition.ast.depCount,m=c.transition.ast.depCount;return 0==d||0==m?d-m:this._engine.driver.containsElement(l.element,c.element)?1:-1})}destroy(i){this.players.forEach(r=>r.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}elementContainsData(i){let r=!1;return this._elementListeners.has(i)&&(r=!0),r=!!this._queue.find(l=>l.element===i)||r,r}}class gV{constructor(i,r,l){this.bodyNode=i,this.driver=r,this._normalizer=l,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(c,d)=>{}}_onRemovalComplete(i,r){this.onRemovalComplete(i,r)}get queuedPlayers(){const i=[];return this._namespaceList.forEach(r=>{r.players.forEach(l=>{l.queued&&i.push(l)})}),i}createNamespace(i,r){const l=new pV(i,r,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,r)?this._balanceNamespaceList(l,r):(this.newHostElements.set(r,l),this.collectEnterElement(r)),this._namespaceLookup[i]=l}_balanceNamespaceList(i,r){const l=this._namespaceList.length-1;if(l>=0){let c=!1;for(let d=l;d>=0;d--)if(this.driver.containsElement(this._namespaceList[d].hostElement,r)){this._namespaceList.splice(d+1,0,i),c=!0;break}c||this._namespaceList.splice(0,0,i)}else this._namespaceList.push(i);return this.namespacesByHostElement.set(r,i),i}register(i,r){let l=this._namespaceLookup[i];return l||(l=this.createNamespace(i,r)),l}registerTrigger(i,r,l){let c=this._namespaceLookup[i];c&&c.register(r,l)&&this.totalAnimations++}destroy(i,r){if(!i)return;const l=this._fetchNamespace(i);this.afterFlush(()=>{this.namespacesByHostElement.delete(l.hostElement),delete this._namespaceLookup[i];const c=this._namespaceList.indexOf(l);c>=0&&this._namespaceList.splice(c,1)}),this.afterFlushAnimationsDone(()=>l.destroy(r))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){const r=new Set,l=this.statesByElement.get(i);if(l){const c=Object.keys(l);for(let d=0;d<c.length;d++){const m=l[c[d]].namespaceId;if(m){const w=this._fetchNamespace(m);w&&r.add(w)}}}return r}trigger(i,r,l,c){if($C(r)){const d=this._fetchNamespace(i);if(d)return d.trigger(r,l,c),!0}return!1}insertNode(i,r,l,c){if(!$C(r))return;const d=r[Tl];if(d&&d.setForRemoval){d.setForRemoval=!1,d.setForMove=!0;const m=this.collectedLeaveElements.indexOf(r);m>=0&&this.collectedLeaveElements.splice(m,1)}if(i){const m=this._fetchNamespace(i);m&&m.insertNode(r,l)}c&&this.collectEnterElement(r)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,r){r?this.disabledNodes.has(i)||(this.disabledNodes.add(i),_l(i,IE)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),jy(i,IE))}removeNode(i,r,l,c){if($C(r)){const d=i?this._fetchNamespace(i):null;if(d?d.removeNode(r,c):this.markElementAsRemoved(i,r,!1,c),l){const m=this.namespacesByHostElement.get(r);m&&m.id!==i&&m.removeNode(r,c)}}else this._onRemovalComplete(r,c)}markElementAsRemoved(i,r,l,c,d){this.collectedLeaveElements.push(r),r[Tl]={namespaceId:i,setForRemoval:c,hasAnimation:l,removedBeforeQueried:!1,previousTriggersValues:d}}listen(i,r,l,c,d){return $C(r)?this._fetchNamespace(i).listen(r,l,c,d):()=>{}}_buildInstruction(i,r,l,c,d){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,l,c,i.fromState.options,i.toState.options,r,d)}destroyInnerAnimations(i){let r=this.driver.query(i,bC,!0);r.forEach(l=>this.destroyActiveAnimationsForElement(l)),0!=this.playersByQueriedElement.size&&(r=this.driver.query(i,CE,!0),r.forEach(l=>this.finishActiveQueriedAnimationOnElement(l)))}destroyActiveAnimationsForElement(i){const r=this.playersByElement.get(i);r&&r.forEach(l=>{l.queued?l.markedForDestroy=!0:l.destroy()})}finishActiveQueriedAnimationOnElement(i){const r=this.playersByQueriedElement.get(i);r&&r.forEach(l=>l.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return Gf(this.players).onDone(()=>i());i()})}processLeaveNode(i){var r;const l=i[Tl];if(l&&l.setForRemoval){if(i[Tl]=nk,l.namespaceId){this.destroyInnerAnimations(i);const c=this._fetchNamespace(l.namespaceId);c&&c.clearElementCache(i)}this._onRemovalComplete(i,l.setForRemoval)}(null===(r=i.classList)||void 0===r?void 0:r.contains(IE))&&this.markElementAsDisabled(i,!1),this.driver.query(i,".ng-animate-disabled",!0).forEach(c=>{this.markElementAsDisabled(c,!1)})}flush(i=-1){let r=[];if(this.newHostElements.size&&(this.newHostElements.forEach((l,c)=>this._balanceNamespaceList(l,c)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let l=0;l<this.collectedEnterElements.length;l++)_l(this.collectedEnterElements[l],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const l=[];try{r=this._flushAnimations(l,i)}finally{for(let c=0;c<l.length;c++)l[c]()}}else for(let l=0;l<this.collectedLeaveElements.length;l++)this.processLeaveNode(this.collectedLeaveElements[l]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(l=>l()),this._flushFns=[],this._whenQuietFns.length){const l=this._whenQuietFns;this._whenQuietFns=[],r.length?Gf(r).onDone(()=>{l.forEach(c=>c())}):l.forEach(c=>c())}}reportError(i){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${i.join("\n")}`)}_flushAnimations(i,r){const l=new HC,c=[],d=new Map,m=[],w=new Map,C=new Map,E=new Map,_=new Set;this.disabledNodes.forEach(Qt=>{_.add(Qt);const ue=this.driver.query(Qt,".ng-animate-queued",!0);for(let me=0;me<ue.length;me++)_.add(ue[me])});const k=this.bodyNode,F=Array.from(this.statesByElement.keys()),j=ok(F,this.collectedEnterElements),H=new Map;let et=0;j.forEach((Qt,ue)=>{const me=xE+et++;H.set(ue,me),Qt.forEach(Sn=>_l(Sn,me))});const pt=[],vt=new Set,ct=new Set;for(let Qt=0;Qt<this.collectedLeaveElements.length;Qt++){const ue=this.collectedLeaveElements[Qt],me=ue[Tl];me&&me.setForRemoval&&(pt.push(ue),vt.add(ue),me.hasAnimation?this.driver.query(ue,".ng-star-inserted",!0).forEach(Sn=>vt.add(Sn)):ct.add(ue))}const Ot=new Map,Ut=ok(F,Array.from(vt));Ut.forEach((Qt,ue)=>{const me=IC+et++;Ot.set(ue,me),Qt.forEach(Sn=>_l(Sn,me))}),i.push(()=>{j.forEach((Qt,ue)=>{const me=H.get(ue);Qt.forEach(Sn=>jy(Sn,me))}),Ut.forEach((Qt,ue)=>{const me=Ot.get(ue);Qt.forEach(Sn=>jy(Sn,me))}),pt.forEach(Qt=>{this.processLeaveNode(Qt)})});const je=[],Oi=[];for(let Qt=this._namespaceList.length-1;Qt>=0;Qt--)this._namespaceList[Qt].drainQueuedTransitions(r).forEach(me=>{const Sn=me.player,go=me.element;if(je.push(Sn),this.collectedEnterElements.length){const Ss=go[Tl];if(Ss&&Ss.setForMove){if(Ss.previousTriggersValues&&Ss.previousTriggersValues.has(me.triggerName)){const qp=Ss.previousTriggersValues.get(me.triggerName),Kf=this.statesByElement.get(me.element);Kf&&Kf[me.triggerName]&&(Kf[me.triggerName].value=qp)}return void Sn.destroy()}}const ah=!k||!this.driver.containsElement(k,go),Ba=Ot.get(go),Xf=H.get(go),Xi=this._buildInstruction(me,l,Xf,Ba,ah);if(Xi.errors&&Xi.errors.length)return void Oi.push(Xi);if(ah)return Sn.onStart(()=>Jp(go,Xi.fromStyles)),Sn.onDestroy(()=>rh(go,Xi.toStyles)),void c.push(Sn);if(me.isFallbackTransition)return Sn.onStart(()=>Jp(go,Xi.fromStyles)),Sn.onDestroy(()=>rh(go,Xi.toStyles)),void c.push(Sn);const Ek=[];Xi.timelines.forEach(Ss=>{Ss.stretchStartingKeyframe=!0,this.disabledNodes.has(Ss.element)||Ek.push(Ss)}),Xi.timelines=Ek,l.append(go,Xi.timelines),m.push({instruction:Xi,player:Sn,element:go}),Xi.queriedElements.forEach(Ss=>Oa(w,Ss,[]).push(Sn)),Xi.preStyleProps.forEach((Ss,qp)=>{const Kf=Object.keys(Ss);if(Kf.length){let tg=C.get(qp);tg||C.set(qp,tg=new Set),Kf.forEach(KE=>tg.add(KE))}}),Xi.postStyleProps.forEach((Ss,qp)=>{const Kf=Object.keys(Ss);let tg=E.get(qp);tg||E.set(qp,tg=new Set),Kf.forEach(KE=>tg.add(KE))})});if(Oi.length){const Qt=[];Oi.forEach(ue=>{Qt.push(`@${ue.triggerName} has failed due to:\n`),ue.errors.forEach(me=>Qt.push(`- ${me}\n`))}),je.forEach(ue=>ue.destroy()),this.reportError(Qt)}const Wi=new Map,Fa=new Map;m.forEach(Qt=>{const ue=Qt.element;l.has(ue)&&(Fa.set(ue,ue),this._beforeAnimationBuild(Qt.player.namespaceId,Qt.instruction,Wi))}),c.forEach(Qt=>{const ue=Qt.element;this._getPreviousPlayers(ue,!1,Qt.namespaceId,Qt.triggerName,null).forEach(Sn=>{Oa(Wi,ue,[]).push(Sn),Sn.destroy()})});const Ra=pt.filter(Qt=>ak(Qt,C,E)),ja=new Map;rk(ja,this.driver,ct,E,Ec).forEach(Qt=>{ak(Qt,C,E)&&Ra.push(Qt)});const Nc=new Map;j.forEach((Qt,ue)=>{rk(Nc,this.driver,new Set(Qt),C,"!")}),Ra.forEach(Qt=>{const ue=ja.get(Qt),me=Nc.get(Qt);ja.set(Qt,Object.assign(Object.assign({},ue),me))});const pu=[],Uy=[],Hy={};m.forEach(Qt=>{const{element:ue,player:me,instruction:Sn}=Qt;if(l.has(ue)){if(_.has(ue))return me.onDestroy(()=>rh(ue,Sn.toStyles)),me.disabled=!0,me.overrideTotalTime(Sn.totalTime),void c.push(me);let go=Hy;if(Fa.size>1){let Ba=ue;const Xf=[];for(;Ba=Ba.parentNode;){const Xi=Fa.get(Ba);if(Xi){go=Xi;break}Xf.push(Ba)}Xf.forEach(Xi=>Fa.set(Xi,go))}const ah=this._buildAnimation(me.namespaceId,Sn,Wi,d,Nc,ja);if(me.setRealPlayer(ah),go===Hy)pu.push(me);else{const Ba=this.playersByElement.get(go);Ba&&Ba.length&&(me.parentPlayer=Gf(Ba)),c.push(me)}}else Jp(ue,Sn.fromStyles),me.onDestroy(()=>rh(ue,Sn.toStyles)),Uy.push(me),_.has(ue)&&c.push(me)}),Uy.forEach(Qt=>{const ue=d.get(Qt.element);if(ue&&ue.length){const me=Gf(ue);Qt.setRealPlayer(me)}}),c.forEach(Qt=>{Qt.parentPlayer?Qt.syncPlayerEvents(Qt.parentPlayer):Qt.destroy()});for(let Qt=0;Qt<pt.length;Qt++){const ue=pt[Qt],me=ue[Tl];if(jy(ue,IC),me&&me.hasAnimation)continue;let Sn=[];if(w.size){let ah=w.get(ue);ah&&ah.length&&Sn.push(...ah);let Ba=this.driver.query(ue,CE,!0);for(let Xf=0;Xf<Ba.length;Xf++){let Xi=w.get(Ba[Xf]);Xi&&Xi.length&&Sn.push(...Xi)}}const go=Sn.filter(ah=>!ah.destroyed);go.length?wV(this,ue,go):this.processLeaveNode(ue)}return pt.length=0,pu.forEach(Qt=>{this.players.push(Qt),Qt.onDone(()=>{Qt.destroy();const ue=this.players.indexOf(Qt);this.players.splice(ue,1)}),Qt.play()}),pu}elementContainsData(i,r){let l=!1;const c=r[Tl];return c&&c.setForRemoval&&(l=!0),this.playersByElement.has(r)&&(l=!0),this.playersByQueriedElement.has(r)&&(l=!0),this.statesByElement.has(r)&&(l=!0),this._fetchNamespace(i).elementContainsData(r)||l}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,r,l,c,d){let m=[];if(r){const w=this.playersByQueriedElement.get(i);w&&(m=w)}else{const w=this.playersByElement.get(i);if(w){const C=!d||d==Nw;w.forEach(E=>{E.queued||!C&&E.triggerName!=c||m.push(E)})}}return(l||c)&&(m=m.filter(w=>!(l&&l!=w.namespaceId||c&&c!=w.triggerName))),m}_beforeAnimationBuild(i,r,l){const d=r.element,m=r.isRemovalTransition?void 0:i,w=r.isRemovalTransition?void 0:r.triggerName;for(const C of r.timelines){const E=C.element,_=E!==d,k=Oa(l,E,[]);this._getPreviousPlayers(E,_,m,w,r.toState).forEach(j=>{const H=j.getRealPlayer();H.beforeDestroy&&H.beforeDestroy(),j.destroy(),k.push(j)})}Jp(d,r.fromStyles)}_buildAnimation(i,r,l,c,d,m){const w=r.triggerName,C=r.element,E=[],_=new Set,k=new Set,F=r.timelines.map(H=>{const et=H.element;_.add(et);const pt=et[Tl];if(pt&&pt.removedBeforeQueried)return new Cw(H.duration,H.delay);const vt=et!==C,ct=function xV(s){const i=[];return sk(s,i),i}((l.get(et)||fV).map(Wi=>Wi.getRealPlayer())).filter(Wi=>!!Wi.element&&Wi.element===et),Ot=d.get(et),Ut=m.get(et),je=OA(0,this._normalizer,0,H.keyframes,Ot,Ut),Oi=this._buildPlayer(H,je,ct);if(H.subTimeline&&c&&k.add(et),vt){const Wi=new LE(i,w,et);Wi.setRealPlayer(Oi),E.push(Wi)}return Oi});E.forEach(H=>{Oa(this.playersByQueriedElement,H.element,[]).push(H),H.onDone(()=>function mV(s,i,r){let l;if(s instanceof Map){if(l=s.get(i),l){if(l.length){const c=l.indexOf(r);l.splice(c,1)}0==l.length&&s.delete(i)}}else if(l=s[i],l){if(l.length){const c=l.indexOf(r);l.splice(c,1)}0==l.length&&delete s[i]}return l}(this.playersByQueriedElement,H.element,H))}),_.forEach(H=>_l(H,HA));const j=Gf(F);return j.onDestroy(()=>{_.forEach(H=>jy(H,HA)),rh(C,r.toStyles)}),k.forEach(H=>{Oa(c,H,[]).push(j)}),j}_buildPlayer(i,r,l){return r.length>0?this.driver.animate(i.element,r,i.duration,i.delay,i.easing,l):new Cw(i.duration,i.delay)}}class LE{constructor(i,r,l){this.namespaceId=i,this.triggerName=r,this.element=l,this._player=new Cw,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(i){this._containsRealPlayer||(this._player=i,Object.keys(this._queuedCallbacks).forEach(r=>{this._queuedCallbacks[r].forEach(l=>gE(i,r,void 0,l))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){const r=this._player;r.triggerCallback&&i.onStart(()=>r.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,r){Oa(this._queuedCallbacks,i,[]).push(r)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){const r=this._player;r.triggerCallback&&r.triggerCallback(i)}}function $C(s){return s&&1===s.nodeType}function ik(s,i){const r=s.style.display;return s.style.display=null!=i?i:"none",r}function rk(s,i,r,l,c){const d=[];r.forEach(C=>d.push(ik(C)));const m=[];l.forEach((C,E)=>{const _={};C.forEach(k=>{const F=_[k]=i.computeStyle(E,k,c);(!F||0==F.length)&&(E[Tl]=dV,m.push(E))}),s.set(E,_)});let w=0;return r.forEach(C=>ik(C,d[w++])),m}function ok(s,i){const r=new Map;if(s.forEach(w=>r.set(w,[])),0==i.length)return r;const c=new Set(i),d=new Map;function m(w){if(!w)return 1;let C=d.get(w);if(C)return C;const E=w.parentNode;return C=r.has(E)?E:c.has(E)?1:m(E),d.set(w,C),C}return i.forEach(w=>{const C=m(w);1!==C&&r.get(C).push(w)}),r}function _l(s,i){var r;null===(r=s.classList)||void 0===r||r.add(i)}function jy(s,i){var r;null===(r=s.classList)||void 0===r||r.remove(i)}function wV(s,i,r){Gf(r).onDone(()=>s.processLeaveNode(i))}function sk(s,i){for(let r=0;r<s.length;r++){const l=s[r];l instanceof MP?sk(l.players,i):i.push(l)}}function ak(s,i,r){const l=r.get(s);if(!l)return!1;let c=i.get(s);return c?l.forEach(d=>c.add(d)):i.set(s,l),r.delete(s),!0}class YC{constructor(i,r,l){this.bodyNode=i,this._driver=r,this._normalizer=l,this._triggerCache={},this.onRemovalComplete=(c,d)=>{},this._transitionEngine=new gV(i,r,l),this._timelineEngine=new aV(i,r,l),this._transitionEngine.onRemovalComplete=(c,d)=>this.onRemovalComplete(c,d)}registerTrigger(i,r,l,c,d){const m=i+"-"+c;let w=this._triggerCache[m];if(!w){const C=[],E=EE(this._driver,d,C);if(C.length)throw new Error(`The animation trigger "${c}" has failed to build due to the following errors:\n - ${C.join("\n - ")}`);w=function iV(s,i,r){return new rV(s,i,r)}(c,E,this._normalizer),this._triggerCache[m]=w}this._transitionEngine.registerTrigger(r,c,w)}register(i,r){this._transitionEngine.register(i,r)}destroy(i,r){this._transitionEngine.destroy(i,r)}onInsert(i,r,l,c){this._transitionEngine.insertNode(i,r,l,c)}onRemove(i,r,l,c){this._transitionEngine.removeNode(i,r,c||!1,l)}disableAnimations(i,r){this._transitionEngine.markElementAsDisabled(i,r)}process(i,r,l,c){if("@"==l.charAt(0)){const[d,m]=bA(l);this._timelineEngine.command(d,r,m,c)}else this._transitionEngine.trigger(i,r,l,c)}listen(i,r,l,c,d){if("@"==l.charAt(0)){const[m,w]=bA(l);return this._timelineEngine.listen(m,r,w,d)}return this._transitionEngine.listen(i,r,l,c,d)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let SV=(()=>{class s{constructor(r,l,c){this._element=r,this._startStyles=l,this._endStyles=c,this._state=0;let d=s.initialStylesByElement.get(r);d||s.initialStylesByElement.set(r,d={}),this._initialStyles=d}start(){this._state<1&&(this._startStyles&&rh(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(rh(this._element,this._initialStyles),this._endStyles&&(rh(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(s.initialStylesByElement.delete(this._element),this._startStyles&&(Jp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Jp(this._element,this._endStyles),this._endStyles=null),rh(this._element,this._initialStyles),this._state=3)}}return s.initialStylesByElement=new WeakMap,s})();function FE(s){let i=null;const r=Object.keys(s);for(let l=0;l<r.length;l++){const c=r[l];DV(c)&&(i=i||{},i[c]=s[c])}return i}function DV(s){return"display"===s||"position"===s}class lk{constructor(i,r,l,c){this.element=i,this.keyframes=r,this.options=l,this._specialStyles=c,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=l.duration,this._delay=l.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(i,r,l){return i.animate(r,l)}onStart(i){this._onStartFns.push(i)}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const i={};if(this.hasStarted()){const r=this._finalKeyframe;Object.keys(r).forEach(l=>{"offset"!=l&&(i[l]=this._finished?r[l]:WA(this.element,l))})}this.currentSnapshot=i}triggerCallback(i){const r="start"==i?this._onStartFns:this._onDoneFns;r.forEach(l=>l()),r.length=0}}class EV{validateStyleProperty(i){return RA(i)}matchesElement(i,r){return!1}containsElement(i,r){return jA(i,r)}query(i,r,l){return BA(i,r,l)}computeStyle(i,r,l){return window.getComputedStyle(i)[r]}animate(i,r,l,c,d,m=[]){const C={duration:l,delay:c,fill:0==c?"both":"forwards"};d&&(C.easing=d);const E={},_=m.filter(F=>F instanceof lk);(function IB(s,i){return 0===s||0===i})(l,c)&&_.forEach(F=>{let j=F.currentSnapshot;Object.keys(j).forEach(H=>E[H]=j[H])}),r=function OB(s,i,r){const l=Object.keys(r);if(l.length&&i.length){let d=i[0],m=[];if(l.forEach(w=>{d.hasOwnProperty(w)||m.push(w),d[w]=r[w]}),m.length)for(var c=1;c<i.length;c++){let w=i[c];m.forEach(function(C){w[C]=WA(s,C)})}}return i}(i,r=r.map(F=>zf(F,!1)),E);const k=function MV(s,i){let r=null,l=null;return Array.isArray(i)&&i.length?(r=FE(i[0]),i.length>1&&(l=FE(i[i.length-1]))):i&&(r=FE(i)),r||l?new SV(s,r,l):null}(i,r);return new lk(i,r,C,k)}}let TV=(()=>{class s extends yP{constructor(r,l){super(),this._nextAnimationId=0,this._renderer=r.createRenderer(l.body,{id:"0",encapsulation:rs.None,styles:[],data:{animation:[]}})}build(r){const l=this._nextAnimationId.toString();this._nextAnimationId++;const c=Array.isArray(r)?wP(r):r;return uk(this._renderer,null,l,"register",[c]),new _V(l,this._renderer)}}return s.\u0275fac=function(r){return new(r||s)(Z(K0),Z(_r))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();class _V extends class K2{}{constructor(i,r){super(),this._id=i,this._renderer=r}create(i,r){return new NV(this._id,i,r||{},this._renderer)}}class NV{constructor(i,r,l,c){this.id=i,this.element=r,this._renderer=c,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",l)}_listen(i,r){return this._renderer.listen(this.element,`@@${this.id}:${i}`,r)}_command(i,...r){return uk(this._renderer,this.element,this.id,i,r)}onDone(i){this._listen("done",i)}onStart(i){this._listen("start",i)}onDestroy(i){this._listen("destroy",i)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(i){this._command("setPosition",i)}getPosition(){var i,r;return null!==(r=null===(i=this._renderer.engine.players[+this.id])||void 0===i?void 0:i.getPosition())&&void 0!==r?r:0}}function uk(s,i,r,l,c){return s.setProperty(i,`@@${r}:${l}`,c)}const hk="@.disabled";let PV=(()=>{class s{constructor(r,l,c){this.delegate=r,this.engine=l,this._zone=c,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),l.onRemovalComplete=(d,m)=>{const w=null==m?void 0:m.parentNode(d);w&&m.removeChild(w,d)}}createRenderer(r,l){const d=this.delegate.createRenderer(r,l);if(!(r&&l&&l.data&&l.data.animation)){let _=this._rendererCache.get(d);return _||(_=new ck("",d,this.engine),this._rendererCache.set(d,_)),_}const m=l.id,w=l.id+"-"+this._currentId;this._currentId++,this.engine.register(w,r);const C=_=>{Array.isArray(_)?_.forEach(C):this.engine.registerTrigger(m,w,r,_.name,_)};return l.data.animation.forEach(C),new AV(this,w,d,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(r,l,c){r>=0&&r<this._microtaskId?this._zone.run(()=>l(c)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(d=>{const[m,w]=d;m(w)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([l,c]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return s.\u0275fac=function(r){return new(r||s)(Z(K0),Z(YC),Z(ii))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();class ck{constructor(i,r,l){this.namespaceId=i,this.delegate=r,this.engine=l,this.destroyNode=this.delegate.destroyNode?c=>r.destroyNode(c):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(i,r){return this.delegate.createElement(i,r)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,r){this.delegate.appendChild(i,r),this.engine.onInsert(this.namespaceId,r,i,!1)}insertBefore(i,r,l,c=!0){this.delegate.insertBefore(i,r,l),this.engine.onInsert(this.namespaceId,r,i,c)}removeChild(i,r,l){this.engine.onRemove(this.namespaceId,r,this.delegate,l)}selectRootElement(i,r){return this.delegate.selectRootElement(i,r)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,r,l,c){this.delegate.setAttribute(i,r,l,c)}removeAttribute(i,r,l){this.delegate.removeAttribute(i,r,l)}addClass(i,r){this.delegate.addClass(i,r)}removeClass(i,r){this.delegate.removeClass(i,r)}setStyle(i,r,l,c){this.delegate.setStyle(i,r,l,c)}removeStyle(i,r,l){this.delegate.removeStyle(i,r,l)}setProperty(i,r,l){"@"==r.charAt(0)&&r==hk?this.disableAnimations(i,!!l):this.delegate.setProperty(i,r,l)}setValue(i,r){this.delegate.setValue(i,r)}listen(i,r,l){return this.delegate.listen(i,r,l)}disableAnimations(i,r){this.engine.disableAnimations(i,r)}}class AV extends ck{constructor(i,r,l,c){super(r,l,c),this.factory=i,this.namespaceId=r}setProperty(i,r,l){"@"==r.charAt(0)?"."==r.charAt(1)&&r==hk?this.disableAnimations(i,l=void 0===l||!!l):this.engine.process(this.namespaceId,i,r.substr(1),l):this.delegate.setProperty(i,r,l)}listen(i,r,l){if("@"==r.charAt(0)){const c=function kV(s){switch(s){case"body":return document.body;case"document":return document;case"window":return window;default:return s}}(i);let d=r.substr(1),m="";return"@"!=d.charAt(0)&&([d,m]=function IV(s){const i=s.indexOf(".");return[s.substring(0,i),s.substr(i+1)]}(d)),this.engine.listen(this.namespaceId,c,d,m,w=>{this.factory.scheduleListenerCallback(w._data||-1,l,w)})}return this.delegate.listen(i,r,l)}}let OV=(()=>{class s extends YC{constructor(r,l,c){super(r.body,l,c)}ngOnDestroy(){this.flush()}}return s.\u0275fac=function(r){return new(r||s)(Z(_r),Z(wE),Z(AE))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})();const fk=new Se("AnimationModuleType"),dk=[{provide:yP,useClass:TV},{provide:AE,useFactory:function bV(){return new QB}},{provide:YC,useClass:OV},{provide:K0,useFactory:function LV(s,i,r){return new PV(s,i,r)},deps:[nC,YC,ii]}],pk=[{provide:wE,useFactory:()=>new EV},{provide:fk,useValue:"BrowserAnimations"},...dk],FV=[{provide:wE,useClass:VA},{provide:fk,useValue:"NoopAnimations"},...dk];let RV=(()=>{class s{static withConfig(r){return{ngModule:s,providers:r.disableAnimations?FV:pk}}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({providers:pk,imports:[W_]}),s})();function Jr(s){for(var i=arguments.length,r=Array(i>1?i-1:0),l=1;l<i;l++)r[l-1]=arguments[l];throw Error("[Immer] minified error nr: "+s+(r.length?" "+r.map(function(m){return"'"+m+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Tc(s){return!!s&&!!s[Ye]}function oh(s){return!!s&&(function(i){if(!i||"object"!=typeof i)return!1;var r=Object.getPrototypeOf(i);if(null===r)return!0;var l=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return l===Object||"function"==typeof l&&Function.toString.call(l)===YV}(s)||Array.isArray(s)||!!s[Iw]||!!s.constructor[Iw]||KC(s)||ZC(s))}function _c(s,i,r){void 0===r&&(r=!1),0===$f(s)?(r?Object.keys:By)(s).forEach(function(l){r&&"symbol"==typeof l||i(l,s[l],s)}):s.forEach(function(l,c){return i(c,l,s)})}function $f(s){var i=s[Ye];return i?i.i>3?i.i-4:i.i:Array.isArray(s)?1:KC(s)?2:ZC(s)?3:0}function Yf(s,i){return 2===$f(s)?s.has(i):Object.prototype.hasOwnProperty.call(s,i)}function gk(s,i,r){var l=$f(s);2===l?s.set(i,r):3===l?(s.delete(i),s.add(r)):s[i]=r}function KC(s){return zV&&s instanceof Map}function ZC(s){return $V&&s instanceof Set}function Qr(s){return s.o||s.t}function RE(s){if(Array.isArray(s))return Array.prototype.slice.call(s);var i=Sk(s);delete i[Ye];for(var r=By(i),l=0;l<r.length;l++){var c=r[l],d=i[c];!1===d.writable&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(i[c]={configurable:!0,writable:!0,enumerable:d.enumerable,value:s[c]})}return Object.create(Object.getPrototypeOf(s),i)}function jE(s,i){return void 0===i&&(i=!1),BE(s)||Tc(s)||!oh(s)||($f(s)>1&&(s.set=s.add=s.clear=s.delete=jV),Object.freeze(s),i&&_c(s,function(r,l){return jE(l,!0)},!0)),s}function jV(){Jr(2)}function BE(s){return null==s||"object"!=typeof s||Object.isFrozen(s)}function sh(s){var i=XE[s];return i||Jr(18,s),i}function Pw(){return kw}function UE(s,i){i&&(sh("Patches"),s.u=[],s.s=[],s.v=i)}function JC(s){HE(s),s.p.forEach(BV),s.p=null}function HE(s){s===kw&&(kw=s.l)}function yk(s){return kw={p:[],l:kw,h:s,m:!0,_:0}}function BV(s){var i=s[Ye];0===i.i||1===i.i?i.j():i.O=!0}function GE(s,i){i._=i.p.length;var r=i.p[0],l=void 0!==s&&s!==r;return i.h.g||sh("ES5").S(i,s,l),l?(r[Ye].P&&(JC(i),Jr(4)),oh(s)&&(s=QC(i,s),i.l||qC(i,s)),i.u&&sh("Patches").M(r[Ye].t,s,i.u,i.s)):s=QC(i,r,[]),JC(i),i.u&&i.v(i.u,i.s),s!==WE?s:void 0}function QC(s,i,r){if(BE(i))return i;var l=i[Ye];if(!l)return _c(i,function(d,m){return vk(s,l,i,d,m,r)},!0),i;if(l.A!==s)return i;if(!l.P)return qC(s,l.t,!0),l.t;if(!l.I){l.I=!0,l.A._--;var c=4===l.i||5===l.i?l.o=RE(l.k):l.o;_c(3===l.i?new Set(c):c,function(d,m){return vk(s,l,c,d,m,r)}),qC(s,c,!1),r&&s.u&&sh("Patches").R(l,r,s.u,s.s)}return l.o}function vk(s,i,r,l,c,d){if(Tc(c)){var m=QC(s,c,d&&i&&3!==i.i&&!Yf(i.D,l)?d.concat(l):void 0);if(gk(r,l,m),!Tc(m))return;s.m=!1}if(oh(c)&&!BE(c)){if(!s.h.F&&s._<1)return;QC(s,c),i&&i.A.l||qC(s,c)}}function qC(s,i,r){void 0===r&&(r=!1),s.h.F&&s.m&&jE(i,r)}function zE(s,i){var r=s[Ye];return(r?Qr(r):s)[i]}function wk(s,i){if(i in s)for(var r=Object.getPrototypeOf(s);r;){var l=Object.getOwnPropertyDescriptor(r,i);if(l)return l;r=Object.getPrototypeOf(r)}}function Js(s){s.P||(s.P=!0,s.l&&Js(s.l))}function $E(s){s.o||(s.o=RE(s.t))}function Aw(s,i,r){var l=KC(i)?sh("MapSet").N(i,r):ZC(i)?sh("MapSet").T(i,r):s.g?function(c,d){var m=Array.isArray(c),w={i:m?1:0,A:d?d.A:Pw(),P:!1,I:!1,D:{},l:d,t:c,k:null,o:null,j:null,C:!1},C=w,E=Ow;m&&(C=[w],E=bw);var _=Proxy.revocable(C,E),k=_.revoke,F=_.proxy;return w.k=F,w.j=k,F}(i,r):sh("ES5").J(i,r);return(r?r.A:Pw()).p.push(l),l}function xk(s,i){switch(i){case 2:return new Map(s);case 3:return Array.from(s)}return RE(s)}var Ck,kw,YE="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),zV="undefined"!=typeof Map,$V="undefined"!=typeof Set,Mk="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,WE=YE?Symbol.for("immer-nothing"):((Ck={})["immer-nothing"]=!0,Ck),Iw=YE?Symbol.for("immer-draftable"):"__$immer_draftable",Ye=YE?Symbol.for("immer-state"):"__$immer_state",YV=("undefined"!=typeof Symbol&&Symbol,""+Object.prototype.constructor),By="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames,Sk=Object.getOwnPropertyDescriptors||function(s){var i={};return By(s).forEach(function(r){i[r]=Object.getOwnPropertyDescriptor(s,r)}),i},XE={},Ow={get:function(s,i){if(i===Ye)return s;var c,w,C,r=Qr(s);if(!Yf(r,i))return c=s,(C=wk(r,i))?"value"in C?C.value:null===(w=C.get)||void 0===w?void 0:w.call(c.k):void 0;var l=r[i];return s.I||!oh(l)?l:l===zE(s.t,i)?($E(s),s.o[i]=Aw(s.A.h,l,s)):l},has:function(s,i){return i in Qr(s)},ownKeys:function(s){return Reflect.ownKeys(Qr(s))},set:function(s,i,r){var l=wk(Qr(s),i);if(null==l?void 0:l.set)return l.set.call(s.k,r),!0;if(!s.P){var c=zE(Qr(s),i),d=null==c?void 0:c[Ye];if(d&&d.t===r)return s.o[i]=r,s.D[i]=!1,!0;if(function mk(s,i){return s===i?0!==s||1/s==1/i:s!=s&&i!=i}(r,c)&&(void 0!==r||Yf(s.t,i)))return!0;$E(s),Js(s)}return s.o[i]===r&&"number"!=typeof r&&(void 0!==r||i in s.o)||(s.o[i]=r,s.D[i]=!0,!0)},deleteProperty:function(s,i){return void 0!==zE(s.t,i)||i in s.t?(s.D[i]=!1,$E(s),Js(s)):delete s.D[i],s.o&&delete s.o[i],!0},getOwnPropertyDescriptor:function(s,i){var r=Qr(s),l=Reflect.getOwnPropertyDescriptor(r,i);return l&&{writable:!0,configurable:1!==s.i||"length"!==i,enumerable:l.enumerable,value:r[i]}},defineProperty:function(){Jr(11)},getPrototypeOf:function(s){return Object.getPrototypeOf(s.t)},setPrototypeOf:function(){Jr(12)}},bw={};_c(Ow,function(s,i){bw[s]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),bw.deleteProperty=function(s,i){return bw.set.call(this,s,i,void 0)},bw.set=function(s,i,r){return Ow.set.call(this,s[0],i,r,s[0])};var WV=function(){function s(r){var l=this;this.g=Mk,this.F=!0,this.produce=function(c,d,m){if("function"==typeof c&&"function"!=typeof d){var w=d;d=c;var C=l;return function(et){var pt=this;void 0===et&&(et=w);for(var vt=arguments.length,ct=Array(vt>1?vt-1:0),Ot=1;Ot<vt;Ot++)ct[Ot-1]=arguments[Ot];return C.produce(et,function(Ut){var je;return(je=d).call.apply(je,[pt,Ut].concat(ct))})}}var E;if("function"!=typeof d&&Jr(6),void 0!==m&&"function"!=typeof m&&Jr(7),oh(c)){var _=yk(l),k=Aw(l,c,void 0),F=!0;try{E=d(k),F=!1}finally{F?JC(_):HE(_)}return"undefined"!=typeof Promise&&E instanceof Promise?E.then(function(et){return UE(_,m),GE(et,_)},function(et){throw JC(_),et}):(UE(_,m),GE(E,_))}if(!c||"object"!=typeof c){if(void 0===(E=d(c))&&(E=c),E===WE&&(E=void 0),l.F&&jE(E,!0),m){var j=[],H=[];sh("Patches").M(c,E,j,H),m(j,H)}return E}Jr(21,c)},this.produceWithPatches=function(c,d){if("function"==typeof c)return function(E){for(var _=arguments.length,k=Array(_>1?_-1:0),F=1;F<_;F++)k[F-1]=arguments[F];return l.produceWithPatches(E,function(j){return c.apply(void 0,[j].concat(k))})};var m,w,C=l.produce(c,d,function(E,_){m=E,w=_});return"undefined"!=typeof Promise&&C instanceof Promise?C.then(function(E){return[E,m,w]}):[C,m,w]},"boolean"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),"boolean"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=s.prototype;return i.createDraft=function(r){oh(r)||Jr(8),Tc(r)&&(r=function VV(s){return Tc(s)||Jr(22,s),function i(r){if(!oh(r))return r;var l,c=r[Ye],d=$f(r);if(c){if(!c.P&&(c.i<4||!sh("ES5").K(c)))return c.t;c.I=!0,l=xk(r,d),c.I=!1}else l=xk(r,d);return _c(l,function(m,w){c&&function XC(s,i){return 2===$f(s)?s.get(i):s[i]}(c.t,m)===w||gk(l,m,i(w))}),3===d?new Set(l):l}(s)}(r));var l=yk(this),c=Aw(this,r,void 0);return c[Ye].C=!0,HE(l),c},i.finishDraft=function(r,l){var d=(r&&r[Ye]).A;return UE(d,l),GE(void 0,d)},i.setAutoFreeze=function(r){this.F=r},i.setUseProxies=function(r){r&&!Mk&&Jr(20),this.g=r},i.applyPatches=function(r,l){var c;for(c=l.length-1;c>=0;c--){var d=l[c];if(0===d.path.length&&"replace"===d.op){r=d.value;break}}c>-1&&(l=l.slice(c+1));var m=sh("Patches").$;return Tc(r)?m(r,l):this.produce(r,function(w){return m(w,l)})},s}(),La=new WV,XV=La.produce;La.produceWithPatches.bind(La),La.setAutoFreeze.bind(La),La.setUseProxies.bind(La),La.applyPatches.bind(La),La.createDraft.bind(La),La.finishDraft.bind(La);const Dk=XV;let qV=(()=>{class s{static syncNodeData(r,l,c){if(!r||!r.modifiedNodeData&&!r.insertedNodeKeys&&!r.removedNodeKeys)return l;const d=new _t.Map;return Dk(l,w=>{if(r.modifiedNodeData&&r.modifiedNodeData.forEach(C=>{const E=c?c.getKeyForNodeData(C):C.key;d.set(E,C);for(let _=0;_<l.length;_++){const k=l[_];(c?c.getKeyForNodeData(k):k.key)===E&&(w[_]=C)}}),r.insertedNodeKeys&&r.insertedNodeKeys.forEach(C=>{const E=d.get(C);E&&w.push(E)}),r.removedNodeKeys)return w.filter(C=>{const E=c?c.getKeyForNodeData(C):C.key;return!r.removedNodeKeys.includes(E)})})}static syncLinkData(r,l,c){if(!r||!r.modifiedLinkData&&!r.insertedLinkKeys&&!r.removedLinkKeys)return l;const d=new _t.Map;return l=Dk(l,m=>{if(r.modifiedLinkData&&r.modifiedLinkData.forEach(w=>{const C=c?c.getKeyForLinkData(w):w.key;d.set(C,w);for(let E=0;E<l.length;E++){const _=l[E];(c?c.getKeyForLinkData(_):_.key)===C&&(m[E]=w)}}),r.insertedLinkKeys&&r.insertedLinkKeys.forEach(w=>{const C=d.get(w);C&&m.push(C)}),r.removedLinkKeys)return m.filter(w=>{const C=c?c.getKeyForLinkData(w):w.key;return!r.removedLinkKeys.includes(C)})})}static syncModelData(r,l){return r&&r.modelData?r.modelData?r.modelData:void 0:l}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})(),tU=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=It({type:s}),s.\u0275inj=Ue({providers:[qV],imports:[[]]}),s})();const eU={url:"https://sw1-parcial1-verano.herokuapp.com/",options:{transports:["websocket","polling"]}};let nU=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=It({type:s,bootstrap:[_2]}),s.\u0275inj=Ue({providers:[],imports:[[W_,Cj,W2,MB,I2.forRoot(eU),tU,TP.forRoot({positionClass:"toast-top-right",timeOut:1e3}),RV]]}),s})();(function cO(){o_=!1})(),OL().bootstrapModule(nU).catch(s=>console.error(s))},150:Yt=>{function D(ft){this.ms=(ft=ft||{}).min||100,this.max=ft.max||1e4,this.factor=ft.factor||2,this.jitter=ft.jitter>0&&ft.jitter<=1?ft.jitter:0,this.attempts=0}Yt.exports=D,D.prototype.duration=function(){var ft=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var yt=Math.random(),St=Math.floor(yt*this.jitter*ft);ft=0==(1&Math.floor(10*yt))?ft-St:ft+St}return 0|Math.min(ft,this.max)},D.prototype.reset=function(){this.attempts=0},D.prototype.setMin=function(ft){this.ms=ft},D.prototype.setMax=function(ft){this.max=ft},D.prototype.setJitter=function(ft){this.jitter=ft}},390:(Yt,D)=>{!function(ft){"use strict";D.encode=function(yt){var Mt,St=new Uint8Array(yt),q=St.length,xt="";for(Mt=0;Mt<q;Mt+=3)xt+=ft[St[Mt]>>2],xt+=ft[(3&St[Mt])<<4|St[Mt+1]>>4],xt+=ft[(15&St[Mt+1])<<2|St[Mt+2]>>6],xt+=ft[63&St[Mt+2]];return q%3==2?xt=xt.substring(0,xt.length-1)+"=":q%3==1&&(xt=xt.substring(0,xt.length-2)+"=="),xt},D.decode=function(yt){var q,gt,ut,J,Y,St=.75*yt.length,Mt=yt.length,xt=0;"="===yt[yt.length-1]&&(St--,"="===yt[yt.length-2]&&St--);var L=new ArrayBuffer(St),G=new Uint8Array(L);for(q=0;q<Mt;q+=4)gt=ft.indexOf(yt[q]),ut=ft.indexOf(yt[q+1]),J=ft.indexOf(yt[q+2]),Y=ft.indexOf(yt[q+3]),G[xt++]=gt<<2|ut>>4,G[xt++]=(15&ut)<<4|J>>2,G[xt++]=(3&J)<<6|63&Y;return L}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},264:Yt=>{function D(yt){if(yt)return function ft(yt){for(var St in D.prototype)yt[St]=D.prototype[St];return yt}(yt)}Yt.exports=D,D.prototype.on=D.prototype.addEventListener=function(yt,St){return this._callbacks=this._callbacks||{},(this._callbacks["$"+yt]=this._callbacks["$"+yt]||[]).push(St),this},D.prototype.once=function(yt,St){function Mt(){this.off(yt,Mt),St.apply(this,arguments)}return Mt.fn=St,this.on(yt,Mt),this},D.prototype.off=D.prototype.removeListener=D.prototype.removeAllListeners=D.prototype.removeEventListener=function(yt,St){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var Mt=this._callbacks["$"+yt];if(!Mt)return this;if(1==arguments.length)return delete this._callbacks["$"+yt],this;for(var q,xt=0;xt<Mt.length;xt++)if((q=Mt[xt])===St||q.fn===St){Mt.splice(xt,1);break}return 0===Mt.length&&delete this._callbacks["$"+yt],this},D.prototype.emit=function(yt){this._callbacks=this._callbacks||{};for(var St=new Array(arguments.length-1),Mt=this._callbacks["$"+yt],q=1;q<arguments.length;q++)St[q-1]=arguments[q];if(Mt){q=0;for(var xt=(Mt=Mt.slice(0)).length;q<xt;++q)Mt[q].apply(this,St)}return this},D.prototype.listeners=function(yt){return this._callbacks=this._callbacks||{},this._callbacks["$"+yt]||[]},D.prototype.hasListeners=function(yt){return!!this.listeners(yt).length}},455:(Yt,D,ft)=>{D.formatArgs=function St(ut){if(ut[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+ut[0]+(this.useColors?"%c ":" ")+"+"+Yt.exports.humanize(this.diff),!this.useColors)return;const J="color: "+this.color;ut.splice(1,0,J,"color: inherit");let Y=0,L=0;ut[0].replace(/%[a-zA-Z%]/g,G=>{"%%"!==G&&(Y++,"%c"===G&&(L=Y))}),ut.splice(L,0,J)},D.save=function Mt(ut){try{ut?D.storage.setItem("debug",ut):D.storage.removeItem("debug")}catch(J){}},D.load=function q(){let ut;try{ut=D.storage.getItem("debug")}catch(J){}return!ut&&"undefined"!=typeof process&&"env"in process&&(ut=process.env.DEBUG),ut},D.useColors=function yt(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},D.storage=function xt(){try{return localStorage}catch(ut){}}(),D.destroy=(()=>{let ut=!1;return()=>{ut||(ut=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),D.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],D.log=console.debug||console.log||(()=>{}),Yt.exports=ft(283)(D);const{formatters:gt}=Yt.exports;gt.j=function(ut){try{return JSON.stringify(ut)}catch(J){return"[UnexpectedJSONParseError]: "+J.message}}},283:(Yt,D,ft)=>{Yt.exports=function yt(St){function q(st){let U,kt,he,Bt=null;function Ke(...W){if(!Ke.enabled)return;const Ft=Ke,qt=Number(new Date);Ft.diff=qt-(U||qt),Ft.prev=U,Ft.curr=qt,U=qt,W[0]=q.coerce(W[0]),"string"!=typeof W[0]&&W.unshift("%O");let Nl=0;W[0]=W[0].replace(/%([a-zA-Z%])/g,(Dn,Pl)=>{if("%%"===Dn)return"%";Nl++;const Po=q.formatters[Pl];return"function"==typeof Po&&(Dn=Po.call(Ft,W[Nl]),W.splice(Nl,1),Nl--),Dn}),q.formatArgs.call(Ft,W),(Ft.log||q.log).apply(Ft,W)}return Ke.namespace=st,Ke.useColors=q.useColors(),Ke.color=q.selectColor(st),Ke.extend=xt,Ke.destroy=q.destroy,Object.defineProperty(Ke,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==Bt?Bt:(kt!==q.namespaces&&(kt=q.namespaces,he=q.enabled(st)),he),set:W=>{Bt=W}}),"function"==typeof q.init&&q.init(Ke),Ke}function xt(st,U){const Bt=q(this.namespace+(void 0===U?":":U)+st);return Bt.log=this.log,Bt}function Y(st){return st.toString().substring(2,st.toString().length-2).replace(/\.\*\?$/,"*")}return q.debug=q,q.default=q,q.coerce=function L(st){return st instanceof Error?st.stack||st.message:st},q.disable=function ut(){const st=[...q.names.map(Y),...q.skips.map(Y).map(U=>"-"+U)].join(",");return q.enable(""),st},q.enable=function gt(st){let U;q.save(st),q.namespaces=st,q.names=[],q.skips=[];const Bt=("string"==typeof st?st:"").split(/[\s,]+/),kt=Bt.length;for(U=0;U<kt;U++)!Bt[U]||("-"===(st=Bt[U].replace(/\*/g,".*?"))[0]?q.skips.push(new RegExp("^"+st.substr(1)+"$")):q.names.push(new RegExp("^"+st+"$")))},q.enabled=function J(st){if("*"===st[st.length-1])return!0;let U,Bt;for(U=0,Bt=q.skips.length;U<Bt;U++)if(q.skips[U].test(st))return!1;for(U=0,Bt=q.names.length;U<Bt;U++)if(q.names[U].test(st))return!0;return!1},q.humanize=ft(366),q.destroy=function G(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(St).forEach(st=>{q[st]=St[st]}),q.names=[],q.skips=[],q.formatters={},q.selectColor=function Mt(st){let U=0;for(let Bt=0;Bt<st.length;Bt++)U=(U<<5)-U+st.charCodeAt(Bt),U|=0;return q.colors[Math.abs(U)%q.colors.length]},q.enable(q.load()),q}},851:Yt=>{Yt.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},410:(Yt,D,ft)=>{const yt=ft(213);Yt.exports=(St,Mt)=>new yt(St,Mt),Yt.exports.Socket=yt,Yt.exports.protocol=yt.protocol,Yt.exports.Transport=ft(330),Yt.exports.transports=ft(497),Yt.exports.parser=ft(577)},213:(Yt,D,ft)=>{const yt=ft(497),St=ft(264),Mt=ft(455)("engine.io-client:socket"),q=ft(577),xt=ft(884),gt=ft(257);class ut extends St{constructor(L,G={}){super(),L&&"object"==typeof L&&(G=L,L=null),L?(L=xt(L),G.hostname=L.host,G.secure="https"===L.protocol||"wss"===L.protocol,G.port=L.port,L.query&&(G.query=L.query)):G.host&&(G.hostname=xt(G.host).host),this.secure=null!=G.secure?G.secure:"undefined"!=typeof location&&"https:"===location.protocol,G.hostname&&!G.port&&(G.port=this.secure?"443":"80"),this.hostname=G.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=G.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=G.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},G),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=gt.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(L){Mt('creating transport "%s"',L);const G=function J(Y){const L={};for(let G in Y)Y.hasOwnProperty(G)&&(L[G]=Y[G]);return L}(this.opts.query);G.EIO=q.protocol,G.transport=L,this.id&&(G.sid=this.id);const st=Object.assign({},this.opts.transportOptions[L],this.opts,{query:G,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return Mt("options: %j",st),new yt[L](st)}open(){let L;if(this.opts.rememberUpgrade&&ut.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))L="websocket";else{if(0===this.transports.length)return void setTimeout(()=>{this.emit("error","No transports available")},0);L=this.transports[0]}this.readyState="opening";try{L=this.createTransport(L)}catch(G){return Mt("error while creating transport: %s",G),this.transports.shift(),void this.open()}L.open(),this.setTransport(L)}setTransport(L){Mt("setting transport %s",L.name),this.transport&&(Mt("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=L,L.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(L){Mt('probing transport "%s"',L);let G=this.createTransport(L,{probe:1}),st=!1;ut.priorWebsocketSuccess=!1;const U=()=>{st||(Mt('probe transport "%s" opened',L),G.send([{type:"ping",data:"probe"}]),G.once("packet",qt=>{if(!st)if("pong"===qt.type&&"probe"===qt.data){if(Mt('probe transport "%s" pong',L),this.upgrading=!0,this.emit("upgrading",G),!G)return;ut.priorWebsocketSuccess="websocket"===G.name,Mt('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{st||"closed"!==this.readyState&&(Mt("changing transport and sending upgrade packet"),Ft(),this.setTransport(G),G.send([{type:"upgrade"}]),this.emit("upgrade",G),G=null,this.upgrading=!1,this.flush())})}else{Mt('probe transport "%s" failed',L);const Ln=new Error("probe error");Ln.transport=G.name,this.emit("upgradeError",Ln)}}))};function Bt(){st||(st=!0,Ft(),G.close(),G=null)}const kt=qt=>{const Ln=new Error("probe error: "+qt);Ln.transport=G.name,Bt(),Mt('probe transport "%s" failed because of error: %s',L,qt),this.emit("upgradeError",Ln)};function he(){kt("transport closed")}function Ke(){kt("socket closed")}function W(qt){G&&qt.name!==G.name&&(Mt('"%s" works - aborting "%s"',qt.name,G.name),Bt())}const Ft=()=>{G.removeListener("open",U),G.removeListener("error",kt),G.removeListener("close",he),this.removeListener("close",Ke),this.removeListener("upgrading",W)};G.once("open",U),G.once("error",kt),G.once("close",he),this.once("close",Ke),this.once("upgrading",W),G.open()}onOpen(){if(Mt("socket open"),this.readyState="open",ut.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){Mt("starting upgrade probes");let L=0;const G=this.upgrades.length;for(;L<G;L++)this.probe(this.upgrades[L])}}onPacket(L){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(Mt('socket receive: type "%s", data "%s"',L.type,L.data),this.emit("packet",L),this.emit("heartbeat"),L.type){case"open":this.onHandshake(JSON.parse(L.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("pong");break;case"error":const G=new Error("server error");G.code=L.data,this.onError(G);break;case"message":this.emit("data",L.data),this.emit("message",L.data)}else Mt('packet received with socket readyState "%s"',this.readyState)}onHandshake(L){this.emit("handshake",L),this.id=L.sid,this.transport.query.sid=L.sid,this.upgrades=this.filterUpgrades(L.upgrades),this.pingInterval=L.pingInterval,this.pingTimeout=L.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(Mt("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(L,G,st){return this.sendPacket("message",L,G,st),this}send(L,G,st){return this.sendPacket("message",L,G,st),this}sendPacket(L,G,st,U){if("function"==typeof G&&(U=G,G=void 0),"function"==typeof st&&(U=st,st=null),"closing"===this.readyState||"closed"===this.readyState)return;(st=st||{}).compress=!1!==st.compress;const Bt={type:L,data:G,options:st};this.emit("packetCreate",Bt),this.writeBuffer.push(Bt),U&&this.once("flush",U),this.flush()}close(){const L=()=>{this.onClose("forced close"),Mt("socket closing - telling transport to close"),this.transport.close()},G=()=>{this.removeListener("upgrade",G),this.removeListener("upgradeError",G),L()},st=()=>{this.once("upgrade",G),this.once("upgradeError",G)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?st():L()}):this.upgrading?st():L()),this}onError(L){Mt("socket error %j",L),ut.priorWebsocketSuccess=!1,this.emit("error",L),this.onClose("transport error",L)}onClose(L,G){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(Mt('socket close with reason: "%s"',L),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",L,G),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(L){const G=[];let st=0;const U=L.length;for(;st<U;st++)~this.transports.indexOf(L[st])&&G.push(L[st]);return G}}ut.priorWebsocketSuccess=!1,ut.protocol=q.protocol,Yt.exports=ut},330:(Yt,D,ft)=>{const yt=ft(577),St=ft(264),Mt=ft(455)("engine.io-client:transport");Yt.exports=class q extends St{constructor(gt){super(),this.opts=gt,this.query=gt.query,this.readyState="",this.socket=gt.socket}onError(gt,ut){const J=new Error(gt);return J.type="TransportError",J.description=ut,this.emit("error",J),this}open(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(gt){"open"===this.readyState?this.write(gt):Mt("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(gt){const ut=yt.decodePacket(gt,this.socket.binaryType);this.onPacket(ut)}onPacket(gt){this.emit("packet",gt)}onClose(){this.readyState="closed",this.emit("close")}}},497:(Yt,D,ft)=>{const yt=ft(35),St=ft(889),Mt=ft(29),q=ft(909);D.polling=function xt(gt){let ut,J=!1,Y=!1;const L=!1!==gt.jsonp;if("undefined"!=typeof location){const G="https:"===location.protocol;let st=location.port;st||(st=G?443:80),J=gt.hostname!==location.hostname||st!==gt.port,Y=gt.secure!==G}if(gt.xdomain=J,gt.xscheme=Y,ut=new yt(gt),"open"in ut&&!gt.forceJSONP)return new St(gt);if(!L)throw new Error("JSONP disabled");return new Mt(gt)},D.websocket=q},29:(Yt,D,ft)=>{const yt=ft(904),St=ft(851),Mt=/\n/g,q=/\\n/g;let xt;Yt.exports=class gt extends yt{constructor(J){super(J),this.query=this.query||{},xt||(xt=St.___eio=St.___eio||[]),this.index=xt.length,xt.push(this.onData.bind(this)),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=()=>{},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const J=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),J.async=!0,J.src=this.uri(),J.onerror=G=>{this.onError("jsonp poll error",G)};const Y=document.getElementsByTagName("script")[0];Y?Y.parentNode.insertBefore(J,Y):(document.head||document.body).appendChild(J),this.script=J,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){const G=document.createElement("iframe");document.body.appendChild(G),document.body.removeChild(G)},100)}doWrite(J,Y){let L;if(!this.form){const U=document.createElement("form"),Bt=document.createElement("textarea"),kt=this.iframeId="eio_iframe_"+this.index;U.className="socketio",U.style.position="absolute",U.style.top="-1000px",U.style.left="-1000px",U.target=kt,U.method="POST",U.setAttribute("accept-charset","utf-8"),Bt.name="d",U.appendChild(Bt),document.body.appendChild(U),this.form=U,this.area=Bt}function G(){st(),Y()}this.form.action=this.uri();const st=()=>{if(this.iframe)try{this.form.removeChild(this.iframe)}catch(U){this.onError("jsonp polling iframe removal error",U)}try{L=document.createElement('<iframe src="javascript:0" name="'+this.iframeId+'">')}catch(U){L=document.createElement("iframe"),L.name=this.iframeId,L.src="javascript:0"}L.id=this.iframeId,this.form.appendChild(L),this.iframe=L};st(),J=J.replace(q,"\\\n"),this.area.value=J.replace(Mt,"\\n");try{this.form.submit()}catch(U){}this.iframe.attachEvent?this.iframe.onreadystatechange=()=>{"complete"===this.iframe.readyState&&G()}:this.iframe.onload=G}}},889:(Yt,D,ft)=>{const yt=ft(35),St=ft(904),Mt=ft(264),{pick:q}=ft(28),xt=ft(851),gt=ft(455)("engine.io-client:polling-xhr");function ut(){}const J=null!=new yt({xdomain:!1}).responseType;let L=(()=>{class st extends Mt{constructor(Bt,kt){super(),this.opts=kt,this.method=kt.method||"GET",this.uri=Bt,this.async=!1!==kt.async,this.data=void 0!==kt.data?kt.data:null,this.create()}create(){const Bt=q(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");Bt.xdomain=!!this.opts.xd,Bt.xscheme=!!this.opts.xs;const kt=this.xhr=new yt(Bt);try{gt("xhr open %s: %s",this.method,this.uri),kt.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){kt.setDisableHeaderCheck&&kt.setDisableHeaderCheck(!0);for(let he in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(he)&&kt.setRequestHeader(he,this.opts.extraHeaders[he])}}catch(he){}if("POST"===this.method)try{kt.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(he){}try{kt.setRequestHeader("Accept","*/*")}catch(he){}"withCredentials"in kt&&(kt.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(kt.timeout=this.opts.requestTimeout),this.hasXDR()?(kt.onload=()=>{this.onLoad()},kt.onerror=()=>{this.onError(kt.responseText)}):kt.onreadystatechange=()=>{4===kt.readyState&&(200===kt.status||1223===kt.status?this.onLoad():setTimeout(()=>{this.onError("number"==typeof kt.status?kt.status:0)},0))},gt("xhr data %s",this.data),kt.send(this.data)}catch(he){return void setTimeout(()=>{this.onError(he)},0)}"undefined"!=typeof document&&(this.index=st.requestsCount++,st.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(Bt){this.emit("data",Bt),this.onSuccess()}onError(Bt){this.emit("error",Bt),this.cleanup(!0)}cleanup(Bt){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=ut:this.xhr.onreadystatechange=ut,Bt)try{this.xhr.abort()}catch(kt){}"undefined"!=typeof document&&delete st.requests[this.index],this.xhr=null}}onLoad(){const Bt=this.xhr.responseText;null!==Bt&&this.onData(Bt)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}return st.requestsCount=0,st.requests={},st})();function G(){for(let st in L.requests)L.requests.hasOwnProperty(st)&&L.requests[st].abort()}"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",G):"function"==typeof addEventListener&&addEventListener("onpagehide"in xt?"pagehide":"unload",G,!1)),Yt.exports=class Y extends St{constructor(U){if(super(U),"undefined"!=typeof location){const kt="https:"===location.protocol;let he=location.port;he||(he=kt?443:80),this.xd="undefined"!=typeof location&&U.hostname!==location.hostname||he!==U.port,this.xs=U.secure!==kt}this.supportsBinary=J&&!(U&&U.forceBase64)}request(U={}){return Object.assign(U,{xd:this.xd,xs:this.xs},this.opts),new L(this.uri(),U)}doWrite(U,Bt){const kt=this.request({method:"POST",data:U});kt.on("success",Bt),kt.on("error",he=>{this.onError("xhr post error",he)})}doPoll(){gt("xhr poll");const U=this.request();U.on("data",this.onData.bind(this)),U.on("error",Bt=>{this.onError("xhr poll error",Bt)}),this.pollXhr=U}},Yt.exports.Request=L},904:(Yt,D,ft)=>{const yt=ft(330),St=ft(257),Mt=ft(577),q=ft(379),xt=ft(455)("engine.io-client:polling");Yt.exports=class gt extends yt{get name(){return"polling"}doOpen(){this.poll()}pause(J){this.readyState="pausing";const Y=()=>{xt("paused"),this.readyState="paused",J()};if(this.polling||!this.writable){let L=0;this.polling&&(xt("we are currently polling - waiting to pause"),L++,this.once("pollComplete",function(){xt("pre-pause polling complete"),--L||Y()})),this.writable||(xt("we are currently writing - waiting to pause"),L++,this.once("drain",function(){xt("pre-pause writing complete"),--L||Y()}))}else Y()}poll(){xt("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(J){xt("polling got data %s",J),Mt.decodePayload(J,this.socket.binaryType).forEach(L=>{if("opening"===this.readyState&&"open"===L.type&&this.onOpen(),"close"===L.type)return this.onClose(),!1;this.onPacket(L)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():xt('ignoring poll - transport state "%s"',this.readyState))}doClose(){const J=()=>{xt("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(xt("transport open - closing"),J()):(xt("transport not open - deferring close"),this.once("open",J))}write(J){this.writable=!1,Mt.encodePayload(J,Y=>{this.doWrite(Y,()=>{this.writable=!0,this.emit("drain")})})}uri(){let J=this.query||{};const Y=this.opts.secure?"https":"http";let L="";return!1!==this.opts.timestampRequests&&(J[this.opts.timestampParam]=q()),!this.supportsBinary&&!J.sid&&(J.b64=1),J=St.encode(J),this.opts.port&&("https"===Y&&443!==Number(this.opts.port)||"http"===Y&&80!==Number(this.opts.port))&&(L=":"+this.opts.port),J.length&&(J="?"+J),Y+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+L+this.opts.path+J}}},967:(Yt,D,ft)=>{const yt=ft(851);Yt.exports={WebSocket:yt.WebSocket||yt.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer"}},909:(Yt,D,ft)=>{const yt=ft(330),St=ft(577),Mt=ft(257),q=ft(379),{pick:xt}=ft(28),{WebSocket:gt,usingBrowserWebSocket:ut,defaultBinaryType:J}=ft(967),Y=ft(455)("engine.io-client:websocket"),L="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class G extends yt{constructor(U){super(U),this.supportsBinary=!U.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const U=this.uri(),Bt=this.opts.protocols,kt=L?{}:xt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(kt.headers=this.opts.extraHeaders);try{this.ws=ut&&!L?Bt?new gt(U,Bt):new gt(U):new gt(U,Bt,kt)}catch(he){return this.emit("error",he)}this.ws.binaryType=this.socket.binaryType||J,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=U=>this.onData(U.data),this.ws.onerror=U=>this.onError("websocket error",U)}write(U){this.writable=!1;for(let Bt=0;Bt<U.length;Bt++){const kt=U[Bt],he=Bt===U.length-1;St.encodePacket(kt,this.supportsBinary,Ke=>{const W={};ut||(kt.options&&(W.compress=kt.options.compress),this.opts.perMessageDeflate&&("string"==typeof Ke?Buffer.byteLength(Ke):Ke.length)<this.opts.perMessageDeflate.threshold&&(W.compress=!1));try{ut?this.ws.send(Ke):this.ws.send(Ke,W)}catch(Ft){Y("websocket closed before onclose event")}he&&setTimeout(()=>{this.writable=!0,this.emit("drain")},0)})}}onClose(){yt.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let U=this.query||{};const Bt=this.opts.secure?"wss":"ws";let kt="";return this.opts.port&&("wss"===Bt&&443!==Number(this.opts.port)||"ws"===Bt&&80!==Number(this.opts.port))&&(kt=":"+this.opts.port),this.opts.timestampRequests&&(U[this.opts.timestampParam]=q()),this.supportsBinary||(U.b64=1),U=Mt.encode(U),U.length&&(U="?"+U),Bt+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+kt+this.opts.path+U}check(){return!(!gt||"__initialize"in gt&&this.name===G.prototype.name)}}Yt.exports=G},28:Yt=>{Yt.exports.pick=(D,...ft)=>ft.reduce((yt,St)=>(D.hasOwnProperty(St)&&(yt[St]=D[St]),yt),{})},35:(Yt,D,ft)=>{const yt=ft(764),St=ft(851);Yt.exports=function(Mt){const q=Mt.xdomain,xt=Mt.xscheme,gt=Mt.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!q||yt))return new XMLHttpRequest}catch(ut){}try{if("undefined"!=typeof XDomainRequest&&!xt&&gt)return new XDomainRequest}catch(ut){}if(!q)try{return new(St[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(ut){}}},463:Yt=>{const D=Object.create(null);D.open="0",D.close="1",D.ping="2",D.pong="3",D.message="4",D.upgrade="5",D.noop="6";const ft=Object.create(null);Object.keys(D).forEach(St=>{ft[D[St]]=St}),Yt.exports={PACKET_TYPES:D,PACKET_TYPES_REVERSE:ft,ERROR_PACKET:{type:"error",data:"parser error"}}},527:(Yt,D,ft)=>{const{PACKET_TYPES_REVERSE:yt,ERROR_PACKET:St}=ft(463);let q;"function"==typeof ArrayBuffer&&(q=ft(390));const gt=(J,Y)=>{if(q){const L=q.decode(J);return ut(L,Y)}return{base64:!0,data:J}},ut=(J,Y)=>"blob"===Y&&J instanceof ArrayBuffer?new Blob([J]):J;Yt.exports=(J,Y)=>{if("string"!=typeof J)return{type:"message",data:ut(J,Y)};const L=J.charAt(0);return"b"===L?{type:"message",data:gt(J.substring(1),Y)}:yt[L]?J.length>1?{type:yt[L],data:J.substring(1)}:{type:yt[L]}:St}},185:(Yt,D,ft)=>{const{PACKET_TYPES:yt}=ft(463),St="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Mt="function"==typeof ArrayBuffer,gt=(ut,J)=>{const Y=new FileReader;return Y.onload=function(){const L=Y.result.split(",")[1];J("b"+L)},Y.readAsDataURL(ut)};Yt.exports=({type:ut,data:J},Y,L)=>St&&J instanceof Blob?Y?L(J):gt(J,L):Mt&&(J instanceof ArrayBuffer||(ut=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(ut):ut&&ut.buffer instanceof ArrayBuffer)(J))?Y?L(J instanceof ArrayBuffer?J:J.buffer):gt(new Blob([J]),L):L(yt[ut]+(J||""))},577:(Yt,D,ft)=>{const yt=ft(185),St=ft(527),Mt=String.fromCharCode(30);Yt.exports={protocol:4,encodePacket:yt,encodePayload:(gt,ut)=>{const J=gt.length,Y=new Array(J);let L=0;gt.forEach((G,st)=>{yt(G,!1,U=>{Y[st]=U,++L===J&&ut(Y.join(Mt))})})},decodePacket:St,decodePayload:(gt,ut)=>{const J=gt.split(Mt),Y=[];for(let L=0;L<J.length;L++){const G=St(J[L],ut);if(Y.push(G),"error"===G.type)break}return Y}}},372:Yt=>{!function(){var D;function ft(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function yt(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:ft(t)}}function St(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var q,Mt="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)q=Object.setPrototypeOf;else{var xt;t:{var ut={};try{ut.__proto__={a:!0},xt=ut.a;break t}catch(t){}xt=!1}q=xt?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var J=q;function Y(t,e){if(t.prototype=Mt(e.prototype),t.prototype.constructor=t,J)J(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var o=Object.getOwnPropertyDescriptor(e,n);o&&Object.defineProperty(t,n,o)}else t[n]=e[n];t.AB=e.prototype}var L="undefined"!=typeof window&&window===self?self:"undefined"!=typeof global&&null!=global?global:self,G="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};!function st(t){if(t){for(var e=L,n=["Array","prototype","fill"],o=0;o<n.length-1;o++){var a=n[o];a in e||(e[a]={}),e=e[a]}(t=t(o=e[n=n[n.length-1]]))!=o&&null!=t&&G(e,n,{writable:!0,value:t})}}(function(t){return t||function(e,n,o){var a=this.length||0;for(0>n&&(n=Math.max(0,a+n)),(null==o||o>a)&&(o=a),0>(o=Number(o))&&(o=Math.max(0,a+o)),n=Number(n||0);n<o;n++)this[n]=e;return this}});var U="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||"object"==typeof window&&window.window===window&&window||{};function Bt(){}function kt(t,e){var n=-1;return function(){var o=this,a=arguments;-1!==n&&U.clearTimeout(n),n=he(function(){n=-1,t.apply(o,a)},e)}}function he(t,e){return U.setTimeout(t,e)}function Ke(t){return U.document.createElement(t)}function W(t){throw Error(t)}function Ft(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),void 0!==e&&(t+="  to value: "+e),W(t)}function qt(t,e,n,o){n=null===n?"*":"string"==typeof n?n:"function"==typeof n&&"string"==typeof n.className?n.className:"",void 0!==o&&(n+="."+o),W(n+" is not in the range "+e+": "+t)}function Ln(t){U.console&&U.console.log(t)}function Nl(){U.console&&U.console.log("Warning: List/Map/Set constructors no longer take an argument that enforces type.Instead they take an optional collection of Values to add to the collection. See 2.0 changelog for details.")}function $t(t){return"object"==typeof t&&null!==t}function Dn(t){return Array.isArray(t)||U.NodeList&&t instanceof U.NodeList||U.HTMLCollection&&t instanceof U.HTMLCollection}function Pl(t){return Array.prototype.slice.call(t)}function Po(t,e,n){Array.isArray(t)?e>=t.length?t.push(n):t.splice(e,0,n):W("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+e)}function Al(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):W("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function ye(){var t=ng.pop();return void 0===t?[]:t}function Jt(t){t.length=0,ng.push(t)}function Va(t){if("function"==typeof t){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(""!==(e=e.substring(9,e.indexOf("(")).trim()))return t._className=e}else if($t(t)&&t.constructor)return Va(t.constructor);return typeof t}function Pr(t){var e=t;return $t(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?"undefined":null===e?"null":e.toString()}function dn(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var n=t.lB;if(n&&n[e])return!0;t=Object.getPrototypeOf(t)}return!1}function qo(t,e,n){Object.defineProperty(Fe.prototype,t,{get:e,set:n})}function eg(){var t=ig;if(void 0===U.document)return t;if(0===t.length)for(var e=U.document.getElementsByTagName("canvas"),n=e.length,o=0;o<n;o++){var a=e[o];a.parentElement&&a.parentElement.B&&t.push(a.parentElement.B)}return t}function de(t){for(var e=[],n=0;256>n;n++)e["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(15&n)]=String.fromCharCode(n);t.length%2&&(t="0"+t),n=[];for(var o=0,a=0;a<t.length;a+=2)n[o++]=e[t.substr(a,2)];for(t=""===(t=n.join(""))?"0":t,e=[],n=0;256>n;n++)e[n]=n;for(n=o=0;256>n;n++)a=e[n],e[n]=e[o=(o+e[n]+119)%256],e[o]=a;o=n=0;for(var u="",h=0;h<t.length;h++)a=e[n=(n+1)%256],e[n]=e[o=(o+e[n])%256],e[o]=a,u+=String.fromCharCode(t.charCodeAt(h)^e[(e[n]+e[o])%256]);return u}void 0===U.requestAnimationFrame&&(U.requestAnimationFrame=void 0===U.setImmediate?function(t){U.setTimeout(t,0)}:U.setImmediate);var Gy=void 0!==U.navigator&&0<U.navigator.userAgent.indexOf("MSIE 9.0"),lh=void 0!==U.navigator&&0<U.navigator.userAgent.indexOf("MSIE 10.0"),Ua=void 0!==U.navigator&&0<U.navigator.userAgent.indexOf("Trident/7"),zy=void 0!==U.navigator&&0<U.navigator.userAgent.indexOf("Edge/"),gu=void 0!==U.navigator&&void 0!==U.navigator.platform&&0<=U.navigator.platform.toUpperCase().indexOf("MAC"),Lw=void 0!==U.navigator&&void 0!==U.navigator.platform&&null!==U.navigator.platform.match(/(iPhone|iPod|iPad)/i),ng=[];Object.freeze([]);var ig=[];function it(t,e,n){wn(this),this.l=t,this.Qa=e,this.v=n}function Qs(t,e){return null==e||""===e?null:t[e]}function rg(){this.sx=[]}function Ki(){}Bt.className="Util",Bt.Dx="32ab5ff3b26f42dc0ed90f21452913b5",Bt.adym="gojs.net",Bt.vfo="28e647fdb765",Bt.className="Util",it.prototype.toString=function(){return"EnumValue."+this.Qa},L.Object.defineProperties(it.prototype,{classType:{get:function(){return this.l}},name:{get:function(){return this.Qa}},value:{get:function(){return this.v}}}),it.className="EnumValue",rg.prototype.toString=function(){return this.sx.join("")},rg.prototype.add=function(t){""!==t&&this.sx.push(t)},rg.className="StringBuilder",Ki.className="PropertyCollection";var mo,og={nB:!1,sB:!1,pB:!1,rB:!1,xB:!1,vB:!1,my:!1,oB:null,trace:function(t){U.console&&U.console.log(t)},qB:function(t,e,n,o){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(n,n),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(o.left,o.top+20),t.lineTo(o.left,o.top),t.lineTo(o.left+20,o.top),t.moveTo(o.right,o.bottom-20),t.lineTo(o.right,o.bottom),t.lineTo(o.right-20,o.bottom),t.stroke(),t.fillText("DB: "+Math.round(o.x)+", "+Math.round(o.y)+", "+Math.round(o.width)+", "+Math.round(o.height),o.left,o.top-5)},mB:function(t){var n,e={};for(n in t){if(e.x=n,"licenseKey"!==e.x){var o=t[e.x];if(void 0!==o.prototype){e.Im=Object.getOwnPropertyNames(o.prototype);for(var a={zk:0};a.zk<e.Im.length;(a={zk:a.zk}).zk++){var u=Object.getOwnPropertyDescriptor(o.prototype,e.Im[a.zk]);void 0!==u.get&&void 0===u.set&&Object.defineProperty(o.prototype,e.Im[a.zk],{set:function(h,f){return function(){throw Error("Property "+h.Im[f.zk]+" of "+h.x+" is read-only.")}}(e,a)})}}}e={Im:e.Im,x:e.x}}}};function Mi(){}function zn(t){this.key=-1,this.value=t}function ke(t){this.tb=t,this.gf=null,t.Ha=null,this.ia=t.Aa,this.Pa=-1}function ri(t){this.tb=t,t.gh=null,this.ia=t.Aa,this.Pa=t.j.length}function lt(t){wn(this),this.s=!1,this.j=[],this.Aa=0,this.gh=this.Ha=null,void 0!==t&&("function"==typeof t||"string"==typeof t?Nl():this.addAll(t))}function oi(t){this.vg=t,t.Ha=null,this.ia=t.Aa,this.ka=null}function nt(t){wn(this),this.s=!1,this.Ib={},this.Gb=0,this.Ha=null,this.Aa=0,this.af=this.ba=null,void 0!==t&&("function"==typeof t||"string"==typeof t?Nl():this.addAll(t))}function wn(t){t.__gohashid=Ha++}function pi(t){var e=t.__gohashid;return void 0===e&&(e=Ha++,t.__gohashid=e),e}function En(t){return t.__gohashid}Mi.prototype.reset=function(){},Mi.prototype.next=function(){return!1},Mi.prototype.sd=function(){return!1},Mi.prototype.first=function(){return null},Mi.prototype.any=function(){return!1},Mi.prototype.all=function(){return!0},Mi.prototype.each=function(){return this},Mi.prototype.map=function(){return this},Mi.prototype.filter=function(){return this},Mi.prototype.Rd=function(){},Mi.prototype.toString=function(){return"EmptyIterator"},L.Object.defineProperties(Mi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),Mi.prototype.first=Mi.prototype.first,Mi.prototype.hasNext=Mi.prototype.sd,Mi.prototype.next=Mi.prototype.next,Mi.prototype.reset=Mi.prototype.reset,Mi.className="EmptyIterator",mo=new Mi,zn.prototype.reset=function(){this.key=-1},zn.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},zn.prototype.sd=function(){return this.next()},zn.prototype.first=function(){return this.key=0,this.value},zn.prototype.any=function(t){return this.key=-1,t(this.value)},zn.prototype.all=function(t){return this.key=-1,t(this.value)},zn.prototype.each=function(t){return this.key=-1,t(this.value),this},zn.prototype.map=function(t){return new zn(t(this.value))},zn.prototype.filter=function(t){return t(this.value)?new zn(this.value):mo},zn.prototype.Rd=function(){this.value=null},zn.prototype.toString=function(){return"SingletonIterator("+this.value+")"},L.Object.defineProperties(zn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),zn.prototype.first=zn.prototype.first,zn.prototype.hasNext=zn.prototype.sd,zn.prototype.next=zn.prototype.next,zn.prototype.reset=zn.prototype.reset,zn.className="SingletonIterator",ke.prototype.reset=function(){var t=this.tb;t.Ha=null,this.ia=t.Aa,this.Pa=-1},ke.prototype.next=function(){var t=this.tb;if(t.Aa!==this.ia&&0>this.key)return!1;var e=(t=t.j).length,n=++this.Pa,o=this.gf;if(null!==o)for(;n<e;){var a=t[n];if(o(a))return this.key=this.Pa=n,this.value=a,!0;n++}else{if(n<e)return this.key=n,this.value=t[n],!0;this.Rd()}return!1},ke.prototype.sd=function(){return this.next()},ke.prototype.first=function(){var t=this.tb;this.ia=t.Aa,this.Pa=0;var e=(t=t.j).length,n=this.gf;if(null!==n){for(var o=0;o<e;){var a=t[o];if(n(a))return this.key=this.Pa=o,this.value=a;o++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},ke.prototype.any=function(t){var e=this.tb;e.Ha=null,this.Pa=-1;for(var n=(e=e.j).length,o=this.gf,a=0;a<n;a++){var u=e[a];if((null===o||o(u))&&t(u))return!0}return!1},ke.prototype.all=function(t){var e=this.tb;e.Ha=null,this.Pa=-1;for(var n=(e=e.j).length,o=this.gf,a=0;a<n;a++){var u=e[a];if((null===o||o(u))&&!t(u))return!1}return!0},ke.prototype.each=function(t){var e=this.tb;e.Ha=null,this.Pa=-1;for(var n=(e=e.j).length,o=this.gf,a=0;a<n;a++){var u=e[a];(null===o||o(u))&&t(u)}return this},ke.prototype.map=function(t){var e=this.tb;e.Ha=null,this.Pa=-1;for(var n=[],o=(e=e.j).length,a=this.gf,u=0;u<o;u++){var h=e[u];(null===a||a(h))&&n.push(t(h))}return(t=new lt).j=n,t.ob(),t.iterator},ke.prototype.filter=function(t){var e=this.tb;e.Ha=null,this.Pa=-1;for(var n=[],o=(e=e.j).length,a=this.gf,u=0;u<o;u++){var h=e[u];(null===a||a(h))&&t(h)&&n.push(h)}return(t=new lt).j=n,t.ob(),t.iterator},ke.prototype.Rd=function(){this.key=-1,this.value=null,this.ia=-1,this.gf=null,this.tb.Ha=this},ke.prototype.toString=function(){return"ListIterator@"+this.Pa+"/"+this.tb.count},L.Object.defineProperties(ke.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.gf},set:function(t){this.gf=t}},count:{get:function(){var t=this.gf;if(null!==t){for(var e=0,n=this.tb.j,o=n.length,a=0;a<o;a++)t(n[a])&&e++;return e}return this.tb.j.length}}}),ke.prototype.first=ke.prototype.first,ke.prototype.hasNext=ke.prototype.sd,ke.prototype.next=ke.prototype.next,ke.prototype.reset=ke.prototype.reset,ke.className="ListIterator",ri.prototype.reset=function(){var t=this.tb;t.gh=null,this.ia=t.Aa,this.Pa=t.j.length},ri.prototype.next=function(){var t=this.tb;if(t.Aa!==this.ia&&0>this.key)return!1;var e=--this.Pa;return 0<=e?(this.key=e,this.value=t.j[e],!0):(this.Rd(),!1)},ri.prototype.sd=function(){return this.next()},ri.prototype.first=function(){var t=this.tb;this.ia=t.Aa;var e=t.j;return this.Pa=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},ri.prototype.any=function(t){var e=this.tb;e.gh=null;var n=(e=e.j).length;for(this.Pa=n,--n;0<=n;n--)if(t(e[n]))return!0;return!1},ri.prototype.all=function(t){var e=this.tb;e.gh=null;var n=(e=e.j).length;for(this.Pa=n,--n;0<=n;n--)if(!t(e[n]))return!1;return!0},ri.prototype.each=function(t){var e=this.tb;e.gh=null;var n=(e=e.j).length;for(this.Pa=n,--n;0<=n;n--)t(e[n]);return this},ri.prototype.map=function(t){var e=this.tb;e.gh=null;var n=[],o=(e=e.j).length;for(this.Pa=o,--o;0<=o;o--)n.push(t(e[o]));return(t=new lt).j=n,t.ob(),t.iterator},ri.prototype.filter=function(t){var e=this.tb;e.gh=null;var n=[],o=(e=e.j).length;for(this.Pa=o,--o;0<=o;o--){var a=e[o];t(a)&&n.push(a)}return(t=new lt).j=n,t.ob(),t.iterator},ri.prototype.Rd=function(){this.key=-1,this.value=null,this.ia=-1,this.tb.gh=this},ri.prototype.toString=function(){return"ListIteratorBackwards("+this.Pa+"/"+this.tb.count+")"},L.Object.defineProperties(ri.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.tb.j.length}}}),ri.prototype.first=ri.prototype.first,ri.prototype.hasNext=ri.prototype.sd,ri.prototype.next=ri.prototype.next,ri.prototype.reset=ri.prototype.reset,ri.className="ListIteratorBackwards",(D=lt.prototype).ob=function(){var t=this.Aa;999999999<++t&&(t=0),this.Aa=t},D.freeze=function(){return this.s=!0,this},D.ea=function(){return this.s=!1,this},D.toString=function(){return"List()#"+En(this)},D.add=function(t){return null===t||(this.s&&Ft(this,t),this.j.push(t),this.ob()),this},D.push=function(t){this.add(t)},D.addAll=function(t){if(null===t)return this;this.s&&Ft(this);var e=this.j;if(Dn(t))for(var n=t.length,o=0;o<n;o++)e.push(t[o]);else for(t=t.iterator;t.next();)e.push(t.value);return this.ob(),this},D.clear=function(){this.s&&Ft(this),this.j.length=0,this.ob()},D.contains=function(t){return null!==t&&-1!==this.j.indexOf(t)},D.has=function(t){return this.contains(t)},D.indexOf=function(t){return null===t?-1:this.j.indexOf(t)},D.J=function(t){var e=this.j;return(0>t||t>=e.length)&&qt(t,"0 <= i < length",lt,"elt:i"),e[t]},D.get=function(t){return this.J(t)},D.Rc=function(t,e){var n=this.j;(0>t||t>=n.length)&&qt(t,"0 <= i < length",lt,"setElt:i"),this.s&&Ft(this,t),n[t]=e},D.set=function(t,e){this.Rc(t,e)},D.first=function(){var t=this.j;return 0===t.length?null:t[0]},D.Xb=function(){var t=this.j,e=t.length;return 0<e?t[e-1]:null},D.pop=function(){this.s&&Ft(this);var t=this.j;return 0<t.length?t.pop():null},lt.prototype.any=function(t){for(var e=this.j,n=e.length,o=0;o<n;o++)if(t(e[o]))return!0;return!1},lt.prototype.all=function(t){for(var e=this.j,n=e.length,o=0;o<n;o++)if(!t(e[o]))return!1;return!0},lt.prototype.each=function(t){for(var e=this.j,n=e.length,o=0;o<n;o++)t(e[o]);return this},lt.prototype.map=function(t){for(var e=new lt,n=[],o=this.j,a=o.length,u=0;u<a;u++)n.push(t(o[u]));return e.j=n,e.ob(),e},lt.prototype.filter=function(t){for(var e=new lt,n=[],o=this.j,a=o.length,u=0;u<a;u++){var h=o[u];t(h)&&n.push(h)}return e.j=n,e.ob(),e},(D=lt.prototype).wb=function(t,e){0>t&&qt(t,">= 0",lt,"insertAt:i"),this.s&&Ft(this,t);var n=this.j;t>=n.length?n.push(e):n.splice(t,0,e),this.ob()},D.remove=function(t){if(null===t)return!1;this.s&&Ft(this,t);var e=this.j;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.ob(),!0)},D.delete=function(t){return this.remove(t)},D.cb=function(t){var e=this.j;(0>t||t>=e.length)&&qt(t,"0 <= i < length",lt,"removeAt:i"),this.s&&Ft(this,t),t===e.length-1?e.pop():e.splice(t,1),this.ob()},D.removeRange=function(t,e){var n=this.j,o=n.length;if(0>t)t=0;else if(t>=o)return this;if(0>e)return this;if(e>=o&&(e=o-1),t>e)return this;this.s&&Ft(this);for(var a=t,u=e+1;u<o;)n[a++]=n[u++];return n.length=o-(e-t+1),this.ob(),this},lt.prototype.copy=function(){var t=new lt,e=this.j;return 0<e.length&&(t.j=Array.prototype.slice.call(e)),t},(D=lt.prototype).ma=function(){for(var t=this.j,e=this.count,n=Array(e),o=0;o<e;o++)n[o]=t[o];return n},D.Mw=function(){for(var t=new nt,e=this.j,n=this.count,o=0;o<n;o++)t.add(e[o]);return t},D.sort=function(t){return this.s&&Ft(this),this.j.sort(t),this.ob(),this},D.uj=function(t,e,n){var o=this.j,a=o.length;void 0===e&&(e=0),void 0===n&&(n=a),this.s&&Ft(this);var u=n-e;if(1>=u)return this;if((0>e||e>=a-1)&&qt(e,"0 <= from < length",lt,"sortRange:from"),2===u)return 0<t(n=o[e],a=o[e+1])&&(o[e]=a,o[e+1]=n,this.ob()),this;if(0===e)if(n>=a)o.sort(t);else for((e=o.slice(0,n)).sort(t),t=0;t<n;t++)o[t]=e[t];else if(n>=a)for((n=o.slice(e)).sort(t),t=e;t<a;t++)o[t]=n[t-e];else for((a=o.slice(e,n)).sort(t),t=e;t<n;t++)o[t]=a[t-e];return this.ob(),this},D.reverse=function(){return this.s&&Ft(this),this.j.reverse(),this.ob(),this},L.Object.defineProperties(lt.prototype,{_dataArray:{get:function(){return this.j}},count:{get:function(){return this.j.length}},size:{get:function(){return this.j.length}},length:{get:function(){return this.j.length}},iterator:{get:function(){if(0>=this.j.length)return mo;var t=this.Ha;return null!==t?(t.reset(),t):new ke(this)}},iteratorBackwards:{get:function(){if(0>=this.j.length)return mo;var t=this.gh;return null!==t?(t.reset(),t):new ri(this)}}}),lt.prototype.reverse=lt.prototype.reverse,lt.prototype.sortRange=lt.prototype.uj,lt.prototype.sort=lt.prototype.sort,lt.prototype.toSet=lt.prototype.Mw,lt.prototype.toArray=lt.prototype.ma,lt.prototype.removeRange=lt.prototype.removeRange,lt.prototype.removeAt=lt.prototype.cb,lt.prototype.delete=lt.prototype.delete,lt.prototype.remove=lt.prototype.remove,lt.prototype.insertAt=lt.prototype.wb,lt.prototype.pop=lt.prototype.pop,lt.prototype.last=lt.prototype.Xb,lt.prototype.first=lt.prototype.first,lt.prototype.set=lt.prototype.set,lt.prototype.setElt=lt.prototype.Rc,lt.prototype.get=lt.prototype.get,lt.prototype.elt=lt.prototype.J,lt.prototype.indexOf=lt.prototype.indexOf,lt.prototype.has=lt.prototype.has,lt.prototype.contains=lt.prototype.contains,lt.prototype.clear=lt.prototype.clear,lt.prototype.addAll=lt.prototype.addAll,lt.prototype.push=lt.prototype.push,lt.prototype.add=lt.prototype.add,lt.prototype.thaw=lt.prototype.ea,lt.prototype.freeze=lt.prototype.freeze,lt.className="List",oi.prototype.reset=function(){var t=this.vg;t.Ha=null,this.ia=t.Aa,this.ka=null},oi.prototype.next=function(){var t=this.vg;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Rd(),!1)},oi.prototype.sd=function(){return this.next()},oi.prototype.first=function(){var t=this.vg;if(this.ia=t.Aa,null!==(t=t.ba)){this.ka=t;var e=t.value;return this.key=t.key,this.value=e}return null},oi.prototype.any=function(t){var e=this.vg;for(this.ka=e.Ha=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},oi.prototype.all=function(t){var e=this.vg;for(this.ka=e.Ha=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},oi.prototype.each=function(t){var e=this.vg;for(this.ka=e.Ha=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},oi.prototype.map=function(t){var e=this.vg;e.Ha=null;var n=new lt;for(e=e.ba;null!==e;)n.add(t(e.value)),e=e.oa;return n.iterator},oi.prototype.filter=function(t){var e=this.vg;e.Ha=null;var n=new lt;for(e=e.ba;null!==e;){var o=e.value;t(o)&&n.add(o),e=e.oa}return n.iterator},oi.prototype.Rd=function(){this.value=this.key=null,this.ia=-1,this.vg.Ha=this},oi.prototype.toString=function(){return null!==this.ka?"SetIterator@"+this.ka.value:"SetIterator"},L.Object.defineProperties(oi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.vg.Gb}}}),oi.prototype.first=oi.prototype.first,oi.prototype.hasNext=oi.prototype.sd,oi.prototype.next=oi.prototype.next,oi.prototype.reset=oi.prototype.reset,oi.className="SetIterator",(D=nt.prototype).ob=function(){var t=this.Aa;999999999<++t&&(t=0),this.Aa=t},D.freeze=function(){return this.s=!0,this},D.ea=function(){return this.s=!1,this},D.toString=function(){return"Set()#"+En(this)},D.add=function(t){if(null===t)return this;this.s&&Ft(this,t);var e=t;return $t(t)&&(e=pi(t)),void 0===this.Ib[e]&&(this.Gb++,t=new Zf(t,t),this.Ib[e]=t,null===(e=this.af)?this.ba=t:(t.Xl=e,e.oa=t),this.af=t,this.ob()),this},D.addAll=function(t){if(null===t)return this;if(this.s&&Ft(this),Dn(t))for(var e=t.length,n=0;n<e;n++)this.add(t[n]);else for(t=t.iterator;t.next();)this.add(t.value);return this},D.contains=function(t){if(null===t)return!1;var e=t;return(!$t(t)||void 0!==(e=En(t)))&&void 0!==this.Ib[e]},D.has=function(t){return this.contains(t)},D.Ez=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},D.Fz=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},D.first=function(){var t=this.ba;return null===t?null:t.value},nt.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},nt.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},nt.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e.value),e=e.oa;return this},nt.prototype.map=function(t){for(var e=new nt,n=this.ba;null!==n;)e.add(t(n.value)),n=n.oa;return e},nt.prototype.filter=function(t){for(var e=new nt,n=this.ba;null!==n;){var o=n.value;t(o)&&e.add(o),n=n.oa}return e},(D=nt.prototype).remove=function(t){if(null===t)return!1;this.s&&Ft(this,t);var e=t;if($t(t)&&void 0===(e=En(t))||void 0===(t=this.Ib[e]))return!1;var n=t.oa,o=t.Xl;return null!==n&&(n.Xl=o),null!==o&&(o.oa=n),this.ba===t&&(this.ba=n),this.af===t&&(this.af=o),delete this.Ib[e],this.Gb--,this.ob(),!0},D.delete=function(t){return this.remove(t)},D.Zq=function(t){if(null===t)return this;if(this.s&&Ft(this),Dn(t))for(var e=t.length,n=0;n<e;n++)this.remove(t[n]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},D.WA=function(t){if(null===t||0===this.count)return this;this.s&&Ft(this);var e=new nt;e.addAll(t),t=[];for(var n=this.iterator;n.next();){var o=n.value;e.contains(o)||t.push(o)}return this.Zq(t),this},D.clear=function(){this.s&&Ft(this),this.Ib={},this.Gb=0,null!==this.Ha&&this.Ha.reset(),this.af=this.ba=null,this.ob()},nt.prototype.copy=function(){var n,t=new nt,e=this.Ib;for(n in e)t.add(e[n].value);return t},nt.prototype.ma=function(){var o,t=Array(this.Gb),e=this.Ib,n=0;for(o in e)t[n]=e[o].value,n++;return t},nt.prototype.Lw=function(){var n,t=new lt,e=this.Ib;for(n in e)t.add(e[n].value);return t},L.Object.defineProperties(nt.prototype,{count:{get:function(){return this.Gb}},size:{get:function(){return this.Gb}},iterator:{get:function(){if(0>=this.Gb)return mo;var t=this.Ha;return null!==t?(t.reset(),t):new oi(this)}}}),nt.prototype.toList=nt.prototype.Lw,nt.prototype.toArray=nt.prototype.ma,nt.prototype.clear=nt.prototype.clear,nt.prototype.retainAll=nt.prototype.WA,nt.prototype.removeAll=nt.prototype.Zq,nt.prototype.delete=nt.prototype.delete,nt.prototype.remove=nt.prototype.remove,nt.prototype.first=nt.prototype.first,nt.prototype.containsAny=nt.prototype.Fz,nt.prototype.containsAll=nt.prototype.Ez,nt.prototype.has=nt.prototype.has,nt.prototype.contains=nt.prototype.contains,nt.prototype.addAll=nt.prototype.addAll,nt.prototype.add=nt.prototype.add,nt.prototype.thaw=nt.prototype.ea,nt.prototype.freeze=nt.prototype.freeze;var Ha=1;function Si(t){this.ga=t,this.ia=t.Aa,this.ka=null}function Ie(t){nt.call(this),wn(this),this.s=!0,this.ga=t}function si(t){this.ga=t,t.$e=null,this.ia=t.Aa,this.ka=null}function Zf(t,e){this.key=t,this.value=e,this.Xl=this.oa=null}function ai(t){this.ga=t,t.Ha=null,this.ia=t.Aa,this.ka=null}function Et(t){wn(this),this.s=!1,this.Ib={},this.Gb=0,this.$e=this.Ha=null,this.Aa=0,this.af=this.ba=null,void 0!==t&&("function"==typeof t||"string"==typeof t?Nl():this.addAll(t))}function A(t,e){void 0===t?this.y=this.x=0:"number"==typeof t&&"number"==typeof e?(this.x=t,this.y=e):W("Invalid arguments to Point constructor: "+t+", "+e),this.s=!1}function $y(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var o=t[e++];o&&(n=parseFloat(o));for(var a=0;""===t[e];)e++;return(o=t[e++])&&(a=parseFloat(o)),new A(n,a)}return new A}function Fw(t){return t.x.toString()+" "+t.y.toString()}function Rw(t,e){if(0===t)return 0<e?90:0>e?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var n=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n}function bi(t,e){return e.Jd(t),t}function Di(t,e,n,o,a,u){var h=a-n,f=u-o,p=h*h+f*f,g=-(n-=t)*h-(o-=e)*f;return 0>=g||g>=p?(h=a-t,f=u-e,Math.min(n*n+o*o,h*h+f*f)):(t=h*o-f*n)*t/p}function qs(t,e,n,o){return(t=n-t)*t+(e=o-e)*e}function Yy(t,e,n,o){return e=o-e,0==(t=n-t)?0<e?90:0>e?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(o=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?o=0>e?o+180:180-o:0>e&&(o=360-o),o)}nt.className="Set",nt.uniqueHash=wn,nt.hashIdUnique=pi,nt.hashId=En,Si.prototype.reset=function(){this.ia=this.ga.Aa,this.ka=null},Si.prototype.next=function(){var t=this.ga;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=this.key=t=e.key,!0):(this.Rd(),!1)},Si.prototype.sd=function(){return this.next()},Si.prototype.first=function(){var t=this.ga;return this.ia=t.Aa,null!==(t=t.ba)?(this.ka=t,this.value=this.key=t=t.key):null},Si.prototype.any=function(t){var e=this.ga;for(this.ka=null,e=e.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},Si.prototype.all=function(t){var e=this.ga;for(this.ka=null,e=e.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},Si.prototype.each=function(t){var e=this.ga;for(this.ka=null,e=e.ba;null!==e;)t(e.key),e=e.oa;return this},Si.prototype.map=function(t){var e=this.ga;this.ka=null;var n=new lt;for(e=e.ba;null!==e;)n.add(t(e.key)),e=e.oa;return n.iterator},Si.prototype.filter=function(t){var e=this.ga;this.ka=null;var n=new lt;for(e=e.ba;null!==e;){var o=e.key;t(o)&&n.add(o),e=e.oa}return n.iterator},Si.prototype.Rd=function(){this.value=this.key=null,this.ia=-1},Si.prototype.toString=function(){return null!==this.ka?"MapKeySetIterator@"+this.ka.value:"MapKeySetIterator"},L.Object.defineProperties(Si.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Gb}}}),Si.prototype.first=Si.prototype.first,Si.prototype.hasNext=Si.prototype.sd,Si.prototype.next=Si.prototype.next,Si.prototype.reset=Si.prototype.reset,Si.className="MapKeySetIterator",Y(Ie,nt),(D=Ie.prototype).freeze=function(){return this},D.ea=function(){return this},D.toString=function(){return"MapKeySet("+this.ga.toString()+")"},D.add=function(){return W("This Set is read-only: "+this.toString()),this},D.contains=function(t){return this.ga.contains(t)},D.has=function(t){return this.contains(t)},D.remove=function(){return W("This Set is read-only: "+this.toString()),!1},D.delete=function(t){return this.remove(t)},D.clear=function(){W("This Set is read-only: "+this.toString())},D.first=function(){var t=this.ga.ba;return null!==t?t.key:null},Ie.prototype.any=function(t){for(var e=this.ga.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},Ie.prototype.all=function(t){for(var e=this.ga.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},Ie.prototype.each=function(t){for(var e=this.ga.ba;null!==e;)t(e.key),e=e.oa;return this},Ie.prototype.map=function(t){for(var e=new nt,n=this.ga.ba;null!==n;)e.add(t(n.key)),n=n.oa;return e},Ie.prototype.filter=function(t){for(var e=new nt,n=this.ga.ba;null!==n;){var o=n.key;t(o)&&e.add(o),n=n.oa}return e},Ie.prototype.copy=function(){return new Ie(this.ga)},Ie.prototype.Mw=function(){var n,t=new nt,e=this.ga.Ib;for(n in e)t.add(e[n].key);return t},Ie.prototype.ma=function(){var o,t=this.ga.Ib,e=Array(this.ga.Gb),n=0;for(o in t)e[n]=t[o].key,n++;return e},Ie.prototype.Lw=function(){var n,t=new lt,e=this.ga.Ib;for(n in e)t.add(e[n].key);return t},L.Object.defineProperties(Ie.prototype,{count:{get:function(){return this.ga.Gb}},size:{get:function(){return this.ga.Gb}},iterator:{get:function(){return 0>=this.ga.Gb?mo:new Si(this.ga)}}}),Ie.prototype.toList=Ie.prototype.Lw,Ie.prototype.toArray=Ie.prototype.ma,Ie.prototype.toSet=Ie.prototype.Mw,Ie.prototype.first=Ie.prototype.first,Ie.prototype.clear=Ie.prototype.clear,Ie.prototype.delete=Ie.prototype.delete,Ie.prototype.remove=Ie.prototype.remove,Ie.prototype.has=Ie.prototype.has,Ie.prototype.contains=Ie.prototype.contains,Ie.prototype.add=Ie.prototype.add,Ie.prototype.thaw=Ie.prototype.ea,Ie.prototype.freeze=Ie.prototype.freeze,Ie.className="MapKeySet",si.prototype.reset=function(){var t=this.ga;t.$e=null,this.ia=t.Aa,this.ka=null},si.prototype.next=function(){var t=this.ga;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Rd(),!1)},si.prototype.sd=function(){return this.next()},si.prototype.first=function(){var t=this.ga;if(this.ia=t.Aa,null!==(t=t.ba)){this.ka=t;var e=t.value;return this.key=t.key,this.value=e}return null},si.prototype.any=function(t){var e=this.ga;for(this.ka=e.$e=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},si.prototype.all=function(t){var e=this.ga;for(this.ka=e.$e=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},si.prototype.each=function(t){var e=this.ga;for(this.ka=e.$e=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},si.prototype.map=function(t){var e=this.ga;this.ka=e.$e=null;var n=new lt;for(e=e.ba;null!==e;)n.add(t(e.value)),e=e.oa;return n.iterator},si.prototype.filter=function(t){var e=this.ga;this.ka=e.$e=null;var n=new lt;for(e=e.ba;null!==e;){var o=e.value;t(o)&&n.add(o),e=e.oa}return n.iterator},si.prototype.Rd=function(){this.value=this.key=null,this.ia=-1,this.ga.$e=this},si.prototype.toString=function(){return null!==this.ka?"MapValueSetIterator@"+this.ka.value:"MapValueSetIterator"},L.Object.defineProperties(si.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Gb}}}),si.prototype.first=si.prototype.first,si.prototype.hasNext=si.prototype.sd,si.prototype.next=si.prototype.next,si.prototype.reset=si.prototype.reset,si.className="MapValueSetIterator",Zf.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},Zf.className="KeyValuePair",ai.prototype.reset=function(){var t=this.ga;t.Ha=null,this.ia=t.Aa,this.ka=null},ai.prototype.next=function(){var t=this.ga;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.key=e.key,this.value=e.value,!0):(this.Rd(),!1)},ai.prototype.sd=function(){return this.next()},ai.prototype.first=function(){var t=this.ga;return this.ia=t.Aa,null!==(t=t.ba)?(this.ka=t,this.key=t.key,this.value=t.value,t):null},ai.prototype.any=function(t){var e=this.ga;for(this.ka=e.Ha=null,e=e.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},ai.prototype.all=function(t){var e=this.ga;for(this.ka=e.Ha=null,e=e.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},ai.prototype.each=function(t){var e=this.ga;for(this.ka=e.Ha=null,e=e.ba;null!==e;)t(e),e=e.oa;return this},ai.prototype.map=function(t){var e=this.ga;this.ka=e.Ha=null;var n=new lt;for(e=e.ba;null!==e;)n.add(t(e)),e=e.oa;return n.iterator},ai.prototype.filter=function(t){var e=this.ga;this.ka=e.Ha=null;var n=new lt;for(e=e.ba;null!==e;)t(e)&&n.add(e),e=e.oa;return n.iterator},ai.prototype.Rd=function(){this.value=this.key=null,this.ia=-1,this.ga.Ha=this},ai.prototype.toString=function(){return null!==this.ka?"MapIterator@"+this.ka:"MapIterator"},L.Object.defineProperties(ai.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Gb}}}),ai.prototype.first=ai.prototype.first,ai.prototype.hasNext=ai.prototype.sd,ai.prototype.next=ai.prototype.next,ai.prototype.reset=ai.prototype.reset,ai.className="MapIterator",(D=Et.prototype).ob=function(){var t=this.Aa;999999999<++t&&(t=0),this.Aa=t},D.freeze=function(){return this.s=!0,this},D.ea=function(){return this.s=!1,this},D.toString=function(){return"Map()#"+En(this)},D.add=function(t,e){this.s&&Ft(this,t);var n=t;$t(t)&&(n=pi(t));var o=this.Ib[n];return void 0===o?(this.Gb++,t=new Zf(t,e),this.Ib[n]=t,null===(n=this.af)?this.ba=t:(t.Xl=n,n.oa=t),this.af=t,this.ob()):o.value=e,this},D.set=function(t,e){return this.add(t,e)},D.addAll=function(t){if(null===t)return this;if(Dn(t))for(var e=t.length,n=0;n<e;n++){var o=t[n];this.add(o.key,o.value)}else if(t instanceof Et)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)this.add((e=t.value).key,e.value);return this},D.first=function(){return this.ba},Et.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},Et.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},Et.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e),e=e.oa;return this},Et.prototype.map=function(t){for(var e=new Et,n=this.ba;null!==n;)e.add(n.key,t(n)),n=n.oa;return e},Et.prototype.filter=function(t){for(var e=new Et,n=this.ba;null!==n;)t(n)&&e.add(n.key,n.value),n=n.oa;return e},(D=Et.prototype).contains=function(t){var e=t;return(!$t(t)||void 0!==(e=En(t)))&&void 0!==this.Ib[e]},D.has=function(t){return this.contains(t)},D.H=function(t){var e=t;return $t(t)&&void 0===(e=En(t))||void 0===(t=this.Ib[e])?null:t.value},D.get=function(t){return this.H(t)},D.remove=function(t){if(null===t)return!1;this.s&&Ft(this,t);var e=t;if($t(t)&&void 0===(e=En(t))||void 0===(t=this.Ib[e]))return!1;var n=t.oa,o=t.Xl;return null!==n&&(n.Xl=o),null!==o&&(o.oa=n),this.ba===t&&(this.ba=n),this.af===t&&(this.af=o),delete this.Ib[e],this.Gb--,this.ob(),!0},D.delete=function(t){return this.remove(t)},D.clear=function(){this.s&&Ft(this),this.Ib={},this.Gb=0,null!==this.Ha&&this.Ha.reset(),null!==this.$e&&this.$e.reset(),this.af=this.ba=null,this.ob()},Et.prototype.copy=function(){var n,t=new Et,e=this.Ib;for(n in e){var o=e[n];t.add(o.key,o.value)}return t},Et.prototype.ma=function(){var o,t=this.Ib,e=Array(this.Gb),n=0;for(o in t){var a=t[o];e[n]=new Zf(a.key,a.value),n++}return e},Et.prototype.Mf=function(){return new Ie(this)},L.Object.defineProperties(Et.prototype,{count:{get:function(){return this.Gb}},size:{get:function(){return this.Gb}},iterator:{get:function(){if(0>=this.count)return mo;var t=this.Ha;return null!==t?(t.reset(),t):new ai(this)}},iteratorKeys:{get:function(){return 0>=this.count?mo:new Si(this)}},iteratorValues:{get:function(){if(0>=this.count)return mo;var t=this.$e;return null!==t?(t.reset(),t):new si(this)}}}),Et.prototype.toKeySet=Et.prototype.Mf,Et.prototype.toArray=Et.prototype.ma,Et.prototype.clear=Et.prototype.clear,Et.prototype.delete=Et.prototype.delete,Et.prototype.remove=Et.prototype.remove,Et.prototype.get=Et.prototype.get,Et.prototype.getValue=Et.prototype.H,Et.prototype.has=Et.prototype.has,Et.prototype.contains=Et.prototype.contains,Et.prototype.first=Et.prototype.first,Et.prototype.addAll=Et.prototype.addAll,Et.prototype.set=Et.prototype.set,Et.prototype.add=Et.prototype.add,Et.prototype.thaw=Et.prototype.ea,Et.prototype.freeze=Et.prototype.freeze,Et.className="Map",A.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},A.prototype.h=function(t,e){return this.x=t,this.y=e,this},A.prototype.Jg=function(t,e){return this.x=t,this.y=e,this},A.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},A.prototype.copy=function(){var t=new A;return t.x=this.x,t.y=this.y,t},(D=A.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},D.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},D.freeze=function(){return this.s=!0,this},D.ea=function(){return Object.isFrozen(this)&&W("cannot thaw constant: "+this),this.s=!1,this},D.toString=function(){return"Point("+this.x+","+this.y+")"},D.w=function(t){return t instanceof A&&this.x===t.x&&this.y===t.y},D.fj=function(t,e){return this.x===t&&this.y===e},D.Na=function(t){return R.A(this.x,t.x)&&R.A(this.y,t.y)},D.add=function(t){return this.x+=t.x,this.y+=t.y,this},D.ge=function(t){return this.x-=t.x,this.y-=t.y,this},D.offset=function(t,e){return this.x+=t,this.y+=e,this},A.prototype.rotate=function(t){if(0===t)return this;var e=this.x,n=this.y;if(0===e&&0===n)return this;if(360<=t?t-=360:0>t&&(t+=360),90===t){t=0;var o=1}else 180===t?(t=-1,o=0):270===t?(t=0,o=-1):(o=t*Math.PI/180,t=Math.cos(o),o=Math.sin(o));return this.x=t*e-o*n,this.y=o*e+t*n,this},(D=A.prototype).scale=function(t,e){return this.x*=t,this.y*=e,this},D.He=function(t){var e=t.x-this.x;return e*e+(t=t.y-this.y)*t},D.rd=function(t,e){return(t-=this.x)*t+(e-=this.y)*e},D.normalize=function(){var t=this.x,e=this.y,n=Math.sqrt(t*t+e*e);return 0<n&&(this.x=t/n,this.y=e/n),this},D.Sa=function(t){return Rw(t.x-this.x,t.y-this.y)},D.direction=function(t,e){return Rw(t-this.x,e-this.y)},D.OA=function(t,e,n,o){return R.Ph(t,e,n,o,this.x,this.y,this),this},D.PA=function(t,e){return R.Ph(t.x,t.y,e.x,e.y,this.x,this.y,this),this},D.aB=function(t,e,n,o){return R.Dq(this.x,this.y,t,e,n,o,this),this},D.bB=function(t,e){return R.Dq(this.x,this.y,t.x,t.y,e.width,e.height,this),this},D.tj=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},D.Tk=function(t,e,n,o,a){return this.x=t+a.x*n+a.offsetX,this.y=e+a.y*o+a.offsetY,this},D.transform=function(t){return t.sa(this),this},D.u=function(){return isFinite(this.x)&&isFinite(this.y)},A.alloc=function(){var t=Jf.pop();return void 0===t?new A:t},A.allocAt=function(t,e){var n=Jf.pop();return void 0===n?new A(t,e):(n.x=t,n.y=e,n)},A.free=function(t){Jf.push(t)},A.prototype.isReal=A.prototype.u,A.prototype.setSpot=A.prototype.Tk,A.prototype.setRectSpot=A.prototype.tj,A.prototype.snapToGridPoint=A.prototype.bB,A.prototype.snapToGrid=A.prototype.aB,A.prototype.projectOntoLineSegmentPoint=A.prototype.PA,A.prototype.projectOntoLineSegment=A.prototype.OA,A.intersectingLineSegments=function(t,e,n,o,a,u,h,f){return R.Lq(t,e,n,o,a,u,h,f)},A.prototype.direction=A.prototype.direction,A.prototype.directionPoint=A.prototype.Sa,A.prototype.normalize=A.prototype.normalize,A.prototype.distanceSquared=A.prototype.rd,A.prototype.distanceSquaredPoint=A.prototype.He,A.prototype.scale=A.prototype.scale,A.prototype.rotate=A.prototype.rotate,A.prototype.offset=A.prototype.offset,A.prototype.subtract=A.prototype.ge,A.prototype.add=A.prototype.add,A.prototype.equalsApprox=A.prototype.Na,A.prototype.equalTo=A.prototype.fj,A.prototype.equals=A.prototype.w,A.prototype.set=A.prototype.set,A.prototype.setTo=A.prototype.Jg;var Ga,Wy,Vn,sg,fn,xn,Ae,ag,Pc,en,lg,Ce,Jf=[];function Nt(t,e){void 0===t?this.height=this.width=0:"number"==typeof t&&(0<=t||isNaN(t))&&"number"==typeof e&&(0<=e||isNaN(e))?(this.width=t,this.height=e):W("Invalid arguments to Size constructor: "+t+", "+e),this.s=!1}function qr(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var o=t[e++];o&&(n=parseFloat(o));for(var a=0;""===t[e];)e++;return(o=t[e++])&&(a=parseFloat(o)),new Nt(n,a)}return new Nt}function jw(t){return t.width.toString()+" "+t.height.toString()}A.className="Point",A.parse=$y,A.stringify=Fw,A.distanceLineSegmentSquared=Di,A.distanceSquared=qs,A.direction=Yy,A.Origin=Ga=new A(0,0).ca(),A.InfiniteTopLeft=Wy=new A(-1/0,-1/0).ca(),A.InfiniteBottomRight=Vn=new A(1/0,1/0).ca(),A.SixPoint=sg=new A(6,6).ca(),A.NoPoint=fn=new A(NaN,NaN).ca(),A.parse=$y,A.stringify=Fw,A.distanceLineSegmentSquared=Di,A.distanceSquared=qs,A.direction=Yy,Nt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},Nt.prototype.h=function(t,e){return this.width=t,this.height=e,this},Nt.prototype.Jg=function(t,e){return this.width=t,this.height=e,this},Nt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},Nt.prototype.copy=function(){var t=new Nt;return t.width=this.width,t.height=this.height,t},(D=Nt.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},D.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},D.freeze=function(){return this.s=!0,this},D.ea=function(){return Object.isFrozen(this)&&W("cannot thaw constant: "+this),this.s=!1,this},D.toString=function(){return"Size("+this.width+","+this.height+")"},D.w=function(t){return t instanceof Nt&&this.width===t.width&&this.height===t.height},D.fj=function(t,e){return this.width===t&&this.height===e},D.Na=function(t){return R.A(this.width,t.width)&&R.A(this.height,t.height)},D.u=function(){return isFinite(this.width)&&isFinite(this.height)},Nt.alloc=function(){var t=eM.pop();return void 0===t?new Nt:t},Nt.free=function(t){eM.push(t)},Nt.prototype.isReal=Nt.prototype.u,Nt.prototype.equalsApprox=Nt.prototype.Na,Nt.prototype.equalTo=Nt.prototype.fj,Nt.prototype.equals=Nt.prototype.w,Nt.prototype.set=Nt.prototype.set,Nt.prototype.setTo=Nt.prototype.Jg;var eM=[];function z(t,e,n,o){void 0===t?this.height=this.width=this.y=this.x=0:t instanceof A?(n=t.x,t=t.y,e instanceof A?(o=e.x,e=e.y,this.x=Math.min(n,o),this.y=Math.min(t,e),this.width=Math.abs(n-o),this.height=Math.abs(t-e)):e instanceof Nt?(this.x=n,this.y=t,this.width=e.width,this.height=e.height):W("Incorrect arguments supplied to Rect constructor")):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&(0<=n||isNaN(n))&&"number"==typeof o&&(0<=o||isNaN(o))?(this.x=t,this.y=e,this.width=n,this.height=o):W("Invalid arguments to Rect constructor: "+t+", "+e+", "+n+", "+o),this.s=!1}function Ao(t,e,n){t.width=e,t.height=n}function ko(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var o=t[e++];o&&(n=parseFloat(o));for(var a=0;""===t[e];)e++;(o=t[e++])&&(a=parseFloat(o));for(var u=0;""===t[e];)e++;(o=t[e++])&&(u=parseFloat(o));for(var h=0;""===t[e];)e++;return(o=t[e++])&&(h=parseFloat(o)),new z(n,a,u,h)}return new z}function nM(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}function Xy(t,e){return R.aa(t.x,e.x)&&R.aa(t.y,e.y)&&R.aa(t.width,e.width)&&R.aa(t.height,e.height)}function Ky(t,e,n,o,a){var u=t.width;return n+a<=-u?(t.x+=u/2,t.width=0):(t.x-=a,t.width+=n+a),e+o<=-(n=t.height)?(t.y+=n/2,t.height=0):(t.y-=e,t.height+=e+o),t}function za(t,e,n,o,a){var u=Math.max(t.x,e),h=Math.max(t.y,n);return e=Math.min(t.x+t.width,e+o),n=Math.min(t.y+t.height,n+a),t.x=u,t.y=h,t.width=Math.max(0,e-u),t.height=Math.max(0,n-h),t}function iM(t,e){var n=t.width,o=t.x,a=e.x-10;return!(o>e.width+10+10+a||a>n+o||(n=t.height,(t=t.y)>e.height+10+10+(o=e.y-10)||o>n+t))}function Kn(t,e,n,o,a){var u=Math.min(t.x,e),h=Math.min(t.y,n);return e=Math.max(t.x+t.width,e+o),n=Math.max(t.y+t.height,n+a),t.x=u,t.y=h,t.width=e-u,t.height=n-h,t}function ts(t,e,n,o,a,u,h,f){return void 0===h&&(h=0),void 0===f&&(f=0),t<=a&&a+h<=t+n&&e<=u&&u+f<=e+o}function rM(t,e,n,o,a,u,h,f){return!(t>h+a||a>n+t||e>f+u||u>o+e)}Nt.className="Size",Nt.parse=qr,Nt.stringify=jw,Nt.ZeroSize=xn=new Nt(0,0).ca(),Nt.OneSize=Ae=new Nt(1,1).ca(),Nt.SixSize=ag=new Nt(6,6).ca(),Nt.EightSize=Pc=new Nt(8,8).ca(),Nt.TenSize=en=new Nt(10,10).ca(),Nt.InfiniteSize=lg=new Nt(1/0,1/0).ca(),Nt.NoSize=Ce=new Nt(NaN,NaN).ca(),Nt.parse=qr,Nt.stringify=jw,(D=z.prototype).assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},D.h=function(t,e,n,o){return this.x=t,this.y=e,this.width=n,this.height=o,this},D.Jg=function(t,e,n,o){return this.x=t,this.y=e,this.width=n,this.height=o,this},D.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},D.Sc=function(t){return this.x=t.x,this.y=t.y,this},D.$A=function(t){return this.width=t.width,this.height=t.height,this},z.prototype.copy=function(){var t=new z;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},(D=z.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},D.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},D.freeze=function(){return this.s=!0,this},D.ea=function(){return Object.isFrozen(this)&&W("cannot thaw constant: "+this),this.s=!1,this},D.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},D.w=function(t){return t instanceof z&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},D.fj=function(t,e,n,o){return this.x===t&&this.y===e&&this.width===n&&this.height===o},D.Na=function(t){return R.A(this.x,t.x)&&R.A(this.y,t.y)&&R.A(this.width,t.width)&&R.A(this.height,t.height)},D.$=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},D.Ge=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},D.contains=function(t,e,n,o){return void 0===n&&(n=0),void 0===o&&(o=0),this.x<=t&&t+n<=this.x+this.width&&this.y<=e&&e+o<=this.y+this.height},D.offset=function(t,e){return this.x+=t,this.y+=e,this},D.Lc=function(t,e){return Ky(this,e,t,e,t)},D.rq=function(t){return Ky(this,t.top,t.right,t.bottom,t.left)},D.Kw=function(t){return Ky(this,-t.top,-t.right,-t.bottom,-t.left)},D.sA=function(t,e,n,o){return Ky(this,t,e,n,o)},D.Dy=function(t){return za(this,t.x,t.y,t.width,t.height)},D.aw=function(t,e,n,o){return za(this,t,e,n,o)},D.Oc=function(t){return this.bw(t.x,t.y,t.width,t.height)},D.bw=function(t,e,n,o){var a=this.width,u=this.x;return!(a!==1/0&&n!==1/0&&(a+=u,n+=t,isNaN(n)||isNaN(a)||u>n||t>a)||(n=this.y,(t=this.height)!==1/0&&o!==1/0&&(t+=n,o+=e,isNaN(o)||isNaN(t)||n>o||e>t)))},D.Oe=function(t){return Kn(this,t.x,t.y,0,0)},D.Tc=function(t){return Kn(this,t.x,t.y,t.width,t.height)},D.Sw=function(t,e,n,o){return void 0===n&&(n=0),void 0===o&&(o=0),Kn(this,t,e,n,o)},D.Tk=function(t,e,n){return this.x=t-n.offsetX-n.x*this.width,this.y=e-n.offsetY-n.y*this.height,this},D.u=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},D.yA=function(){return 0===this.width&&0===this.height},z.alloc=function(){var t=Zy.pop();return void 0===t?new z:t},z.allocAt=function(t,e,n,o){var a=Zy.pop();return void 0===a?new z(t,e,n,o):a.h(t,e,n,o)},z.free=function(t){Zy.push(t)},L.Object.defineProperties(z.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new A(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new Nt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new A(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),z.prototype.isEmpty=z.prototype.yA,z.prototype.isReal=z.prototype.u,z.intersectsLineSegment=function(t,e,n,o,a,u,h,f){return R.Ey(t,e,n,o,a,u,h,f)},z.prototype.setSpot=z.prototype.Tk,z.prototype.union=z.prototype.Sw,z.prototype.unionRect=z.prototype.Tc,z.prototype.unionPoint=z.prototype.Oe,z.prototype.intersects=z.prototype.bw,z.prototype.intersectsRect=z.prototype.Oc,z.prototype.intersect=z.prototype.aw,z.prototype.intersectRect=z.prototype.Dy,z.prototype.grow=z.prototype.sA,z.prototype.subtractMargin=z.prototype.Kw,z.prototype.addMargin=z.prototype.rq,z.prototype.inflate=z.prototype.Lc,z.prototype.offset=z.prototype.offset,z.prototype.contains=z.prototype.contains,z.prototype.containsRect=z.prototype.Ge,z.prototype.containsPoint=z.prototype.$,z.prototype.equalsApprox=z.prototype.Na,z.prototype.equalTo=z.prototype.fj,z.prototype.equals=z.prototype.w,z.prototype.setSize=z.prototype.$A,z.prototype.setPoint=z.prototype.Sc,z.prototype.set=z.prototype.set,z.prototype.setTo=z.prototype.Jg;var ug,oM,Zy=[];function te(t,e,n,o){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===n?(this.top=t,this.right=e,this.bottom=t,this.left=e):void 0!==o?(this.top=t,this.right=e,this.bottom=n,this.left=o):W("Invalid arguments to Margin constructor: "+t+", "+e+", "+n+", "+o),this.s=!1}function Io(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=NaN;""===t[e];)e++;var o=t[e++];if(o&&(n=parseFloat(o)),isNaN(n))return new te;for(var a=NaN;""===t[e];)e++;if((o=t[e++])&&(a=parseFloat(o)),isNaN(a))return new te(n);for(var u=NaN;""===t[e];)e++;if((o=t[e++])&&(u=parseFloat(o)),isNaN(u))return new te(n,a);for(var h=NaN;""===t[e];)e++;return(o=t[e++])&&(h=parseFloat(o)),isNaN(h)?new te(n,a):new te(n,a,u,h)}return new te}function Zn(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}z.className="Rect",z.parse=ko,z.stringify=nM,z.contains=ts,z.intersects=rM,z.ZeroRect=ug=new z(0,0,0,0).ca(),z.NoRect=oM=new z(NaN,NaN,NaN,NaN).ca(),z.parse=ko,z.stringify=nM,z.contains=ts,z.intersects=rM,te.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},te.prototype.Jg=function(t,e,n,o){return this.top=t,this.right=e,this.bottom=n,this.left=o,this},te.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},te.prototype.copy=function(){var t=new te;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},(D=te.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},D.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},D.freeze=function(){return this.s=!0,this},D.ea=function(){return Object.isFrozen(this)&&W("cannot thaw constant: "+this),this.s=!1,this},D.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},D.w=function(t){return t instanceof te&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left},D.fj=function(t,e,n,o){return this.top===t&&this.right===e&&this.bottom===n&&this.left===o},D.Na=function(t){return R.A(this.top,t.top)&&R.A(this.right,t.right)&&R.A(this.bottom,t.bottom)&&R.A(this.left,t.left)},D.u=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},te.alloc=function(){var t=aM.pop();return void 0===t?new te:t},te.free=function(t){aM.push(t)},te.prototype.isReal=te.prototype.u,te.prototype.equalsApprox=te.prototype.Na,te.prototype.equalTo=te.prototype.fj,te.prototype.equals=te.prototype.w,te.prototype.set=te.prototype.set,te.prototype.setTo=te.prototype.Jg;var Qf,sM,gi,Ue,es,uh,qf,ie,Ac,kl,Il,ns,kc,pe,mu,Ic,$a,hg,Bw,Ya,is,Vw,Uw,rs,Jy,Qy,qy,Ei,Fn,lM,Hw,hh,Be,lr,Li,Ar,cg,ta,aM=[];function at(t,e,n,o){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),this.x=t,this.y=e,this.offsetX=n,this.offsetY=o),this.s=!1}function Fi(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function tv(t){if("string"==typeof t){if("None"===(t=t.trim()))return gi;if("TopLeft"===t)return Ue;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return es;if("TopRight"===t)return uh;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return qf;if("Center"===t)return ie;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return Ac;if("BottomLeft"===t)return kl;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return Il;if("BottomRight"===t)return ns;if("TopSide"===t)return kc;if("LeftSide"===t)return pe;if("RightSide"===t)return mu;if("BottomSide"===t)return Ic;if("TopBottomSides"===t)return $a;if("LeftRightSides"===t)return hg;if("TopLeftSides"===t)return Bw;if("TopRightSides"===t)return Ya;if("BottomLeftSides"===t)return is;if("BottomRightSides"===t)return Vw;if("NotTopSide"===t)return Uw;if("NotLeftSide"===t)return rs;if("NotRightSide"===t)return Jy;if("NotBottomSide"===t)return Qy;if("AllSides"===t)return qy;if("Default"===t)return Ei;t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var o=t[e++];void 0!==o&&0<o.length&&(n=parseFloat(o));for(var a=0;""===t[e];)e++;void 0!==(o=t[e++])&&0<o.length&&(a=parseFloat(o));for(var u=0;""===t[e];)e++;void 0!==(o=t[e++])&&0<o.length&&(u=parseFloat(o));for(var h=0;""===t[e];)e++;return void 0!==(o=t[e++])&&0<o.length&&(h=parseFloat(o)),new at(n,a,u,h)}return new at}function Ds(t){return t.kb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}te.className="Margin",te.parse=Io,te.stringify=Zn,te.ZeroMargin=Qf=new te(0,0,0,0).ca(),te.TwoMargin=sM=new te(2,2,2,2).ca(),te.parse=Io,te.stringify=Zn,at.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},at.prototype.Jg=function(t,e,n,o){return this.x=t,this.y=e,this.offsetX=n,this.offsetY=o,this},at.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},at.prototype.copy=function(){var t=new at;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},(D=at.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},D.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},D.freeze=function(){return this.s=!0,this},D.ea=function(){return Object.isFrozen(this)&&W("cannot thaw constant: "+this),this.s=!1,this},D.toString=function(){return this.kb()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.w(gi)?"None":this.w(Ue)?"TopLeft":this.w(es)?"Top":this.w(uh)?"TopRight":this.w(qf)?"Left":this.w(ie)?"Center":this.w(Ac)?"Right":this.w(kl)?"BottomLeft":this.w(Il)?"Bottom":this.w(ns)?"BottomRight":this.w(kc)?"TopSide":this.w(pe)?"LeftSide":this.w(mu)?"RightSide":this.w(Ic)?"BottomSide":this.w($a)?"TopBottomSides":this.w(hg)?"LeftRightSides":this.w(Bw)?"TopLeftSides":this.w(Ya)?"TopRightSides":this.w(is)?"BottomLeftSides":this.w(Vw)?"BottomRightSides":this.w(Uw)?"NotTopSide":this.w(rs)?"NotLeftSide":this.w(Jy)?"NotRightSide":this.w(Qy)?"NotBottomSide":this.w(qy)?"AllSides":this.w(Ei)?"Default":"None"},D.w=function(t){return t instanceof at&&(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY},D.lw=function(){return new at(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},D.Gf=function(t){if(!this.Qc())return!1;if(!t.Qc())if(t.w(Fn))t=pe;else if(t.w(lM))t=mu;else if(t.w(Hw))t=kc;else{if(!t.w(hh))return!1;t=Ic}return(this.offsetY&(t=t.offsetY))===t},D.kb=function(){return!isNaN(this.x)&&!isNaN(this.y)},D.nc=function(){return isNaN(this.x)||isNaN(this.y)},D.Qc=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},D.Wt=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},D.Nb=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},at.alloc=function(){var t=Gw.pop();return void 0===t?new at:t},at.free=function(t){Gw.push(t)},at.prototype.isDefault=at.prototype.Nb,at.prototype.isNone=at.prototype.Wt,at.prototype.isSide=at.prototype.Qc,at.prototype.isNoSpot=at.prototype.nc,at.prototype.isSpot=at.prototype.kb,at.prototype.includesSide=at.prototype.Gf,at.prototype.opposite=at.prototype.lw,at.prototype.equals=at.prototype.w,at.prototype.set=at.prototype.set,at.prototype.setTo=at.prototype.Jg;var Gw=[];function Ht(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}at.className="Spot",at.parse=tv,at.stringify=Ds,at.None=gi=Fi(new at(0,0,0,0),0).ca(),at.Default=Ei=Fi(new at(0,0,-1,0),-1).ca(),at.TopLeft=Ue=new at(0,0,0,0).ca(),at.TopCenter=es=new at(.5,0,0,0).ca(),at.TopRight=uh=new at(1,0,0,0).ca(),at.LeftCenter=qf=new at(0,.5,0,0).ca(),at.Center=ie=new at(.5,.5,0,0).ca(),at.RightCenter=Ac=new at(1,.5,0,0).ca(),at.BottomLeft=kl=new at(0,1,0,0).ca(),at.BottomCenter=Il=new at(.5,1,0,0).ca(),at.BottomRight=ns=new at(1,1,0,0).ca(),at.MiddleTop=Be=es,at.MiddleLeft=lr=qf,at.MiddleRight=Li=Ac,at.MiddleBottom=Ar=Il,at.Top=Hw=es,at.Left=Fn=qf,at.Right=lM=Ac,at.Bottom=hh=Il,at.TopSide=kc=Fi(new at(0,0,1,1),1).ca(),at.LeftSide=pe=Fi(new at(0,0,1,2),1).ca(),at.RightSide=mu=Fi(new at(0,0,1,4),1).ca(),at.BottomSide=Ic=Fi(new at(0,0,1,8),1).ca(),at.TopBottomSides=$a=Fi(new at(0,0,1,9),1).ca(),at.LeftRightSides=hg=Fi(new at(0,0,1,6),1).ca(),at.TopLeftSides=Bw=Fi(new at(0,0,1,3),1).ca(),at.TopRightSides=Ya=Fi(new at(0,0,1,5),1).ca(),at.BottomLeftSides=is=Fi(new at(0,0,1,10),1).ca(),at.BottomRightSides=Vw=Fi(new at(0,0,1,12),1).ca(),at.NotTopSide=Uw=Fi(new at(0,0,1,14),1).ca(),at.NotLeftSide=rs=Fi(new at(0,0,1,13),1).ca(),at.NotRightSide=Jy=Fi(new at(0,0,1,11),1).ca(),at.NotBottomSide=Qy=Fi(new at(0,0,1,7),1).ca(),at.AllSides=qy=Fi(new at(0,0,1,15),1).ca(),cg=new at(.156,.156).ca(),ta=new at(.844,.844).ca(),at.parse=tv,at.stringify=Ds,Ht.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Ht.prototype.copy=function(){var t=new Ht;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},(D=Ht.prototype).toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},D.w=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},D.Ut=function(){return 0===this.dx&&0===this.dy&&1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22},D.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},D.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,n=this.m12*t.m11+this.m22*t.m12,o=this.m11*t.m21+this.m21*t.m22,a=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=n,this.m21=o,this.m22=a,this},D.iw=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*e,o=-t.m12*e,a=-t.m21*e,u=t.m11*e,h=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*n+this.m21*o,n=this.m12*n+this.m22*o,o=this.m11*a+this.m21*u,a=this.m12*a+this.m22*u,this.dx=this.m11*h+this.m21*t+this.dx,this.dy=this.m12*h+this.m22*t+this.dy,this.m11=e,this.m12=n,this.m21=o,this.m22=a,this},D.Tt=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,n=-this.m21*t,o=this.m11*t,a=t*(this.m21*this.dy-this.m22*this.dx),u=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=n,this.m22=o,this.dx=a,this.dy=u,this},Ht.prototype.rotate=function(t,e,n){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;if(this.translate(e,n),90===t){t=0;var o=1}else 180===t?(t=-1,o=0):270===t?(t=0,o=-1):(o=t*Math.PI/180,t=Math.cos(o),o=Math.sin(o));var a=this.m12*t+this.m22*o,u=this.m11*-o+this.m21*t,h=this.m12*-o+this.m22*t;return this.m11=this.m11*t+this.m21*o,this.m12=a,this.m21=u,this.m22=h,this.translate(-e,-n),this},(D=Ht.prototype).translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},D.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},D.sa=function(t){var e=t.x,n=t.y;return t.h(e*this.m11+n*this.m21+this.dx,e*this.m12+n*this.m22+this.dy)},D.Jd=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=t.x,o=t.y;return t.h(n*this.m22*e+o*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+o*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},D.$x=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=1.25*t.x,o=1.2*t.y;return t.h(n*this.m22*e+o*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+o*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},D.Qw=function(t){var e=t.x,n=t.y,o=e+t.width,a=n+t.height,u=this.m11,h=this.m12,f=this.m21,p=this.m22,g=this.dx,y=this.dy,v=e*u+n*f+g,x=e*h+n*p+y,S=o*u+n*f+g,M=o*h+n*p+y;return n=e*u+a*f+g,e=e*h+a*p+y,u=o*u+a*f+g,o=o*h+a*p+y,a=Math.min(v,S),v=Math.max(v,S),S=Math.min(x,M),x=Math.max(x,M),a=Math.min(a,n),v=Math.max(v,n),S=Math.min(S,e),x=Math.max(x,e),a=Math.min(a,u),v=Math.max(v,u),S=Math.min(S,o),x=Math.max(x,o),t.h(a,S,v-a,x-S),t},Ht.alloc=function(){var t=ev.pop();return void 0===t?new Ht:t},Ht.free=function(t){ev.push(t)},Ht.prototype.transformRect=Ht.prototype.Qw,Ht.prototype.transformPoint=Ht.prototype.sa,Ht.prototype.scale=Ht.prototype.scale,Ht.prototype.translate=Ht.prototype.translate,Ht.prototype.rotate=Ht.prototype.rotate,Ht.prototype.invert=Ht.prototype.Tt,Ht.prototype.multiplyInverted=Ht.prototype.iw,Ht.prototype.multiply=Ht.prototype.multiply,Ht.prototype.reset=Ht.prototype.reset,Ht.prototype.isIdentity=Ht.prototype.Ut,Ht.prototype.equals=Ht.prototype.w,Ht.prototype.set=Ht.prototype.set;var ev=[];Ht.className="Transform",Ht.xF="54a702f3e53909c447824c6706603faf4c";var R={jB:"7da71ca0ad381e90",Lg:(Math.sqrt(2)-1)/3*4,kx:null,sqrt:function(t){if(0>=t)return 0;var e=R.kx;if(null===e){e=[];for(var n=0;2e3>=n;n++)e[n]=Math.sqrt(n);R.kx=e}return 1>t?2e3>=(n=1/t)?1/e[0|n]:Math.sqrt(t):2e3>=t?e[0|t]:Math.sqrt(t)},A:function(t,e){return.5>(t-=e)&&-.5<t},aa:function(t,e){return 5e-8>(t-=e)&&-5e-8<t},Ob:function(t,e,n,o,a,u,h){if(0>=a&&(a=1e-6),t<n)var f=t,p=n;else f=n,p=t;if(e<o)var g=e,y=o;else g=o,y=e;if(t===n)return g<=h&&h<=y&&t-a<=u&&u<=t+a;if(e===o)return f<=u&&u<=p&&e-a<=h&&h<=e+a;if(p+=a,(f-=a)<=u&&u<=p&&(y+=a,(g-=a)<=h&&h<=y))if(p-f>y-g){if(!(t-n>a||n-t>a))return!0;if((u=(o-e)/(n-t)*(u-t)+e)-a<=h&&h<=u+a)return!0}else{if(!(e-o>a||o-e>a))return!0;if((h=(n-t)/(o-e)*(h-e)+t)-a<=u&&u<=h+a)return!0}return!1},yt:function(t,e,n,o,a,u,h,f,p,g,y,v){if(R.Ob(t,e,h,f,v,n,o)&&R.Ob(t,e,h,f,v,a,u))return R.Ob(t,e,h,f,v,g,y);var x=(t+n)/2,S=(e+o)/2,M=(n+a)/2,T=(o+u)/2,N=((o=(x+M)/2)+(M=(M+(a=(a+h)/2))/2))/2,P=((n=(S+T)/2)+(T=(T+(u=(u+f)/2))/2))/2;return R.yt(t,e,x,S,o,n,N,P,p,g,y,v)||R.yt(N,P,M,T,a,u,h,f,p,g,y,v)},yz:function(t,e,n,o,a,u,h,f,p){var g=(n+a)/2,y=(o+u)/2;return p.h((((t+n)/2+g)/2+(g+(a+h)/2)/2)/2,(((e+o)/2+y)/2+(y+(u+f)/2)/2)/2),p},xz:function(t,e,n,o,a,u,h,f){var p=(n+a)/2,g=(o+u)/2;return Yy(((t+n)/2+p)/2,((e+o)/2+g)/2,(p+(a+h)/2)/2,(g+(u+f)/2)/2)},um:function(t,e,n,o,a,u,h,f,p,g){if(R.Ob(t,e,h,f,p,n,o)&&R.Ob(t,e,h,f,p,a,u))Kn(g,t,e,0,0),Kn(g,h,f,0,0);else{var y=(t+n)/2,v=(e+o)/2,x=(n+a)/2,S=(o+u)/2,M=((o=(y+x)/2)+(x=(x+(a=(a+h)/2))/2))/2,T=((n=(v+S)/2)+(S=(S+(u=(u+f)/2))/2))/2;R.um(t,e,y,v,o,n,M,T,p,g),R.um(M,T,x,S,a,u,h,f,p,g)}return g},Fe:function(t,e,n,o,a,u,h,f,p,g){if(R.Ob(t,e,h,f,p,n,o)&&R.Ob(t,e,h,f,p,a,u))0===g.length&&(g.push(t),g.push(e)),g.push(h),g.push(f);else{var y=(t+n)/2,v=(e+o)/2,x=(n+a)/2,S=(o+u)/2,M=((o=(y+x)/2)+(x=(x+(a=(a+h)/2))/2))/2,T=((n=(v+S)/2)+(S=(S+(u=(u+f)/2))/2))/2;R.Fe(t,e,y,v,o,n,M,T,p,g),R.Fe(M,T,x,S,a,u,h,f,p,g)}return g},pw:function(t,e,n,o,a,u,h,f,p,g){if(R.Ob(t,e,a,u,g,n,o))return R.Ob(t,e,a,u,g,f,p);var y=(t+n)/2,v=(e+o)/2,x=(y+(n=(n+a)/2))/2,S=(v+(o=(o+u)/2))/2;return R.pw(t,e,y,v,x,S,h,f,p,g)||R.pw(x,S,n,o,a,u,h,f,p,g)},yB:function(t,e,n,o,a,u,h){return h.h(((t+n)/2+(n+a)/2)/2,((e+o)/2+(o+u)/2)/2),h},ow:function(t,e,n,o,a,u,h,f){if(R.Ob(t,e,a,u,h,n,o))Kn(f,t,e,0,0),Kn(f,a,u,0,0);else{var p=(t+n)/2,g=(e+o)/2,y=(p+(n=(n+a)/2))/2,v=(g+(o=(o+u)/2))/2;R.ow(t,e,p,g,y,v,h,f),R.ow(y,v,n,o,a,u,h,f)}return f},Vq:function(t,e,n,o,a,u,h,f){if(R.Ob(t,e,a,u,h,n,o))0===f.length&&(f.push(t),f.push(e)),f.push(a),f.push(u);else{var p=(t+n)/2,g=(e+o)/2,y=(p+(n=(n+a)/2))/2,v=(g+(o=(o+u)/2))/2;R.Vq(t,e,p,g,y,v,h,f),R.Vq(y,v,n,o,a,u,h,f)}return f},tq:function(t,e,n,o,a,u,h,f,p,g,y,v,x,S){if(R.Ob(t,e,h,f,x,n,o)&&R.Ob(t,e,h,f,x,a,u)){if(t<p&&h<p&&t<y&&h<y||t>p&&h>p&&t>y&&h>y||e<g&&f<g&&e<v&&f<v||e>g&&f>g&&e>v&&f>v)return!1;var M=(t-h)*(g-v)-(e-f)*(p-y);if(0===M)return!1;if(x=((t*f-e*h)*(p-y)-(t-h)*(p*v-g*y))/M,M=((t*f-e*h)*(g-v)-(e-f)*(p*v-g*y))/M,(p>y?p-y:y-p)<(g>v?g-v:v-g)){if(e<f?h=e:(h=f,f=e),1e-5+M<h||M>f+1e-5)return!1}else if(t<h?f=t:(f=h,h=t),1e-5+x<f||x>h+1e-5)return!1;return S.h(x,M),!0}var T=(e+o)/2,N=(n+a)/2,P=(o+u)/2,I=((o=((M=(t+n)/2)+N)/2)+(N=(N+(a=(a+h)/2))/2))/2,O=((n=(T+P)/2)+(P=(P+(u=(u+f)/2))/2))/2,b=1/0,B=!1,K=0,rt=0;return R.tq(t,e,M,T,o,n,I,O,p,g,y,v,x,S)&&(t=(S.x-p)*(S.x-p)+(S.y-g)*(S.y-g))<b&&(b=t,B=!0,K=S.x,rt=S.y),R.tq(I,O,N,P,a,u,h,f,p,g,y,v,x,S)&&(S.x-p)*(S.x-p)+(S.y-g)*(S.y-g)<b&&(B=!0,K=S.x,rt=S.y),B&&(S.x=K,S.y=rt),B},uq:function(t,e,n,o,a,u,h,f,p,g,y,v,x){var S=0;if(R.Ob(t,e,h,f,x,n,o)&&R.Ob(t,e,h,f,x,a,u)){if(0==(x=(t-h)*(g-v)-(e-f)*(p-y)))return S;var M=((t*f-e*h)*(p-y)-(t-h)*(p*v-g*y))/x,T=((t*f-e*h)*(g-v)-(e-f)*(p*v-g*y))/x;if(M>=y)return S;if((p>y?p-y:y-p)<(g>v?g-v:v-g)){if(e<f?(t=e,e=f):t=f,T<t||T>e)return S}else if(t<h?(e=t,t=h):e=h,M<e||M>t)return S;0<x?S++:0>x&&S--}else{T=(e+o)/2;var N=(n+a)/2,P=(o+u)/2,I=((o=((M=(t+n)/2)+N)/2)+(N=(N+(a=(a+h)/2))/2))/2,O=((n=(T+P)/2)+(P=(P+(u=(u+f)/2))/2))/2;S+=R.uq(t,e,M,T,o,n,I,O,p,g,y,v,x),S+=R.uq(I,O,N,P,a,u,h,f,p,g,y,v,x)}return S},Ph:function(t,e,n,o,a,u,h){return R.aa(t,n)?(e<o?(n=e,e=o):n=o,u<n?(h.h(t,n),!1):u>e?(h.h(t,e),!1):(h.h(t,u),!0)):R.aa(e,o)?(t<n?(o=t,t=n):o=n,a<o?(h.h(o,e),!1):a>t?(h.h(t,e),!1):(h.h(a,e),!0)):-5e-6>(a=((t-a)*(t-n)+(e-u)*(e-o))/((n-t)*(n-t)+(o-e)*(o-e)))?(h.h(t,e),!1):1.000005<a?(h.h(n,o),!1):(h.h(t+a*(n-t),e+a*(o-e)),!0)},Le:function(t,e,n,o,a,u,h,f,p){return R.A(t,n)&&R.A(e,o)?(p.h(t,e),!1):R.aa(a,h)?R.aa(t,n)?(R.Ph(t,e,n,o,a,u,p),!1):R.Ph(t,e,n,o,a,(o-e)/(n-t)*(a-t)+e,p):(f=(f-u)/(h-a),R.aa(t,n)?(n=f*(t-a)+u,e<o?(a=e,e=o):a=o,n<a?(p.h(t,a),!1):n>e?(p.h(t,e),!1):(p.h(t,n),!0)):R.aa(f,h=(o-e)/(n-t))?(R.Ph(t,e,n,o,a,u,p),!1):(a=(h*t-f*a+u-e)/(h-f),R.aa(h,0)?(t<n?(o=t,t=n):o=n,a<o?(p.h(o,e),!1):a>t?(p.h(t,e),!1):(p.h(a,e),!0)):R.Ph(t,e,n,o,a,h*(a-t)+e,p)))},wB:function(t,e,n,o,a){return R.Le(n.x,n.y,o.x,o.y,t.x,t.y,e.x,e.y,a)},uB:function(t,e,n,o,a,u,h,f,p,g){function y(N,P){var I=(N-t)*(N-t)+(P-e)*(P-e);I<v&&(v=I,p.h(N,P))}var v=1/0;y(p.x,p.y);var x=0,S=0,M=0,T=0;if(a<h?(x=a,S=h):(x=h,S=a),u<f?(M=a,T=h):(M=h,T=a),x=(S-x)/2+g,g=(T-M)/2+g,a=(a+h)/2,u=(u+f)/2,0===x||0===g)return p;if(.5>(n>t?n-t:t-n)){if(0>(x=1-(n-a)*(n-a)/(x*x)))return p;o=-g*(x=Math.sqrt(x))+u,y(n,g*x+u),y(n,o)}else{if(0>(x=(f=2*(n=(o-e)/(n-t))*(e-n*t)/(g*g)-2*n*u/(g*g)-2*a/(x*x))*f-4*(o=1/(x*x)+n*n/(g*g))*(2*n*t*u/(g*g)-2*e*u/(g*g)+u*u/(g*g)+a*a/(x*x)-1+(e-n*t)*(e-n*t)/(g*g))))return p;y(g=(-f+(x=Math.sqrt(x)))/(2*o),n*g-n*t+e),y(x=(-f-x)/(2*o),n*x-n*t+e)}return p},Ef:function(t,e,n,o,a,u,h,f,p){var g=1e21,y=t,v=e;if(R.Le(t,e,t,o,a,u,h,f,p)){var x=(p.x-a)*(p.x-a)+(p.y-u)*(p.y-u);x<g&&(g=x,y=p.x,v=p.y)}return R.Le(n,e,n,o,a,u,h,f,p)&&(x=(p.x-a)*(p.x-a)+(p.y-u)*(p.y-u))<g&&(g=x,y=p.x,v=p.y),R.Le(t,e,n,e,a,u,h,f,p)&&(e=(p.x-a)*(p.x-a)+(p.y-u)*(p.y-u))<g&&(g=e,y=p.x,v=p.y),R.Le(t,o,n,o,a,u,h,f,p)&&(t=(p.x-a)*(p.x-a)+(p.y-u)*(p.y-u))<g&&(g=t,y=p.x,v=p.y),p.h(y,v),1e21>g},tB:function(t,e,n,o,a,u,h,f,p){return h=a-h,a=0==(n=t-n)||0===h?0===n?(e=(u-f)/h)*(f=t)+(u-e*a):(u=(e-o)/n)*(f=a)+(e-u*t):(o=(e-o)/n)*(f=(u-(f=(u-f)/h)*a-(t=e-o*t))/(o-f))+t,p.h(f,a),p},Rt:function(t,e,n){return R.Ey(t.x,t.y,t.width,t.height,e.x,e.y,n.x,n.y)},Ey:function(t,e,n,o,a,u,h,f){var p=t+n,g=e+o;return a===h?(u<f?(h=u,u=f):h=f,t<=a&&a<=p&&h<=g&&u>=e):u===f?(a<h?(f=a,a=h):f=h,e<=u&&u<=g&&f<=p&&a>=t):!!(ts(t,e,n,o,a,u)||ts(t,e,n,o,h,f)||R.Lq(t,e,p,e,a,u,h,f)||R.Lq(p,e,p,g,a,u,h,f)||R.Lq(p,g,t,g,a,u,h,f)||R.Lq(t,g,t,e,a,u,h,f))},Lq:function(t,e,n,o,a,u,h,f){return 0>=R.Bt(t,e,n,o,a,u)*R.Bt(t,e,n,o,h,f)&&0>=R.Bt(a,u,h,f,t,e)*R.Bt(a,u,h,f,n,o)},Bt:function(t,e,n,o,a,u){return n-=t,0==(u=(t=a-t)*(o-=e)-(e=u-e)*n)&&0<(u=t*n+e*o)&&0>(u=(t-n)*n+(e-o)*o)&&(u=0),0>u?-1:0<u?1:0},Sq:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},hy:function(t,e,n,o,a,u){var h=Math.PI;u||(o*=h/180,a*=h/180);var f=o>a?-1:1;u=[];var p=h/2,g=o;if(1e-5>(o=Math.min(2*h,Math.abs(a-o))))return p=g+f*Math.min(o,p),f=t+n*Math.cos(g),g=e+n*Math.sin(g),t+=n*Math.cos(p),e+=n*Math.sin(p),u.push([f,g,n=(f+t)/2,p=(g+e)/2,n,p,t,e]),u;for(;1e-5<o;)a=g+f*Math.min(o,p),u.push(R.Hz(n,g,a,t,e)),o-=Math.abs(a-g),g=a;return u},Hz:function(t,e,n,o,a){var u=(n-e)/2,h=t*Math.cos(u),f=t*Math.sin(u),p=-f,g=h*h+p*p,y=g+h*h+p*f;return f=h-(g=4/3*(Math.sqrt(2*g*y)-y)/(h*f-p*h))*p,p=-(h=p+g*h),g=u+e,u=Math.cos(g),g=Math.sin(g),[o+t*Math.cos(e),a+t*Math.sin(e),o+f*u-h*g,a+f*g+h*u,o+f*u-p*g,a+f*g+p*u,o+t*Math.cos(n),a+t*Math.sin(n)]},Dq:function(t,e,n,o,a,u,h){var f=n=Math.floor((t-n)/a)*a+n;return n+a-t<a/2&&(f=n+a),t=o=Math.floor((e-o)/u)*u+o,o+u-e<u/2&&(t=o+u),h.h(f,t),h},uy:function(t,e){var o,n=Math.max(t,e);t=Math.min(t,e);do{e=n%t,n=o=t,t=e}while(0<e);return o},Mz:function(t,e,n,o){var a=0>n,u=0>o;if(t<e)var h=1,f=0;else h=0,f=1;var p=0===h?t:e,g=0===h?n:o;return(0===h?a:u)&&(g=-g),n=0===(h=f)?n:o,(0===h?a:u)&&(n=-n),R.Nz(p,0===h?t:e,g,n,0,0)},Nz:function(t,e,n,o,a,u){if(0<o)if(0<n){a=t*t,t*=n;var h=e*o,f=-(u=e*e)+h,p=-u+Math.sqrt(t*t+h*h);e=f;for(var g=0;9999999999>g&&(e=.5*(f+p))!==f&&e!==p;++g){var y=t/(e+a),v=h/(e+u);if(0<(y=y*y+v*v-1))f=e;else{if(!(0>y))break;p=e}}n=a*n/(e+a)-n,o=u*o/(e+u)-o,n=Math.sqrt(n*n+o*o)}else n=Math.abs(o-e);else(u=t*n)<(o=t*t-e*e)?(o=u/o,u=e*Math.sqrt(Math.abs(1-o*o)),n=t*o-n,n=Math.sqrt(n*n+u*u)):n=Math.abs(n-t);return n},Qe:new Ki,bn:new Ki,Th:new Ki,Uh:0};function It(t){wn(this),this.s=!1,void 0===t&&(t=pn),this.pa=t,this.oc=this.hc=this.fd=this.ed=0,this.Jj=new lt,this.Yr=this.Jj.Aa,this.Gr=(new z).freeze(),this.qa=!0,this.jn=this.al=null,this.kn=NaN,this.qf=Ue,this.rf=ns,this.Dl=this.El=NaN,this.Uf=Je}function zw(t,e){return t.type===Tn&&e.type===pn&&!!(1===e.figures.count&&(e=e.figures.J(0),1===e.segments.count&&R.A(t.startX,e.startX)&&R.A(t.startY,e.startY)&&(e=e.segments.J(0),e.type===He&&R.A(t.endX,e.endX)&&R.A(t.endY,e.endY))))}function nv(t){return t.toString()}function se(t,e){function n(){return T>=b-1||null!==v[T+1].match(B)}function o(){return T++,v[T]}function a(){var $=new A(parseFloat(o()),parseFloat(o()));return N===N.toLowerCase()&&($.x=O.x+$.x,$.y=O.y+$.y),$}function u(){return O=a()}function h(){return I=a()}function f(){var $=P.toLowerCase();return"c"!==$&&"s"!==$&&"q"!==$&&"t"!==$?O:new A(2*O.x-I.x,2*O.y-I.y)}void 0===e&&(e=!1);var p=new RegExp("(["+nd+"])(["+nd+"])","gm"),g=new RegExp("(["+nd+"])([^s])","gm"),y=new RegExp("([^s])(["+nd+"])","gm"),v=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(p,"$1 $2")).replace(p,"$1 $2")).replace(g,"$1 $2")).replace(y,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" ");for(t=0;t<v.length;t++)if(null!==(g=v[t]).match(/(\.[0-9]*)(\.)/gm)){p=ye(),y="";for(var x=!1,S=0;S<g.length;S++){var M=g[S];"."!==M||x?"."===M?(p.push(y),y="."):y+=M:(x=!0,y+=M)}for(p.push(y),v.splice(t,1),g=0;g<p.length;g++)v.splice(t+g,0,p[g]);t+=p.length-1,Jt(p)}var T=-1,N="",P="";p=new A(0,0);var I=new A(0,0),O=new A(0,0),b=v.length;t=Xv(null),y=g=!1,x=!0,S=null;for(var B=new RegExp("["+nd+"]");!(T>=b-1);)if(P=N,""!==(N=o()))switch(N.toUpperCase()){case"X":x=!0,y=g=!1;break;case"M":for(S=u(),null===t.ic||!0===x?(Ah(t,S.x,S.y,g,!y),x=!1):t.moveTo(S.x,S.y),p=O;!n();)S=u(),t.lineTo(S.x,S.y);break;case"L":for(;!n();)S=u(),t.lineTo(S.x,S.y);break;case"H":for(;!n();)O=new A((N===N.toLowerCase()?O.x:0)+parseFloat(o()),O.y),t.lineTo(O.x,O.y);break;case"V":for(;!n();)O=new A(O.x,(N===N.toLowerCase()?O.y:0)+parseFloat(o())),t.lineTo(O.x,O.y);break;case"C":for(;!n();){S=a(),M=h();var K=u();ga(t,S.x,S.y,M.x,M.y,K.x,K.y)}break;case"S":for(;!n();)S=f(),M=h(),K=u(),ga(t,S.x,S.y,M.x,M.y,K.x,K.y);break;case"Q":for(;!n();)S=h(),M=u(),kh(t,S.x,S.y,M.x,M.y);break;case"T":for(;!n();)I=S=f(),M=u(),kh(t,S.x,S.y,M.x,M.y);break;case"B":for(;!n();){S=parseFloat(o()),M=parseFloat(o()),K=parseFloat(o());var rt=parseFloat(o()),tt=parseFloat(o()),mt=tt,ht=!1;n()||(mt=parseFloat(o()),n()||(ht=0!==parseFloat(o()))),N===N.toLowerCase()&&(K+=O.x,rt+=O.y),t.arcTo(S,M,K,rt,tt,mt,ht)}break;case"A":for(;!n();)S=Math.abs(parseFloat(o())),M=Math.abs(parseFloat(o())),K=parseFloat(o()),tt=rt=!1,ht=mt=0,1===(mt=o()).length?(rt=!!parseFloat(mt),tt=!!parseFloat(o()),mt=parseFloat(o())):2===mt.length?(rt=!!parseFloat(mt[0]),tt=!!parseFloat(mt[1]),mt=parseFloat(o())):(rt=!!parseFloat(mt[0]),tt=!!parseFloat(mt[1]),mt=parseFloat(mt.slice(2))),ht=parseFloat(o()),N===N.toLowerCase()&&(mt=O.x+mt,ht=O.y+ht),O.h(mt,ht),mm(t,S,M,K,rt,tt,mt,ht);break;case"Z":Wv(t),O=p;break;case"F":for(S="",M=1;v[T+M];)if(null!==v[T+M].match(/[Uu]/))M++;else{if(null!==v[T+M].match(B)){S=v[T+M];break}M++}S.match(/[Mm]/)?g=!0:0<t.ic.segments.length&&(t.ic.isFilled=!0);break;case"U":for(S="",M=1;v[T+M];)if(null!==v[T+M].match(/[Ff]/))M++;else{if(null!==v[T+M].match(B)){S=v[T+M];break}M++}S.match(/[Mm]/)?y=!0:t.fr(!1)}if(p=t.Lt,uf=t,e)for(e=p.figures.iterator;e.next();)e.value.isFilled=!0;return p}function yo(t,e){for(var n=t.length,o=A.alloc(),a=0;a<n;a++){var u=t[a];o.x=u[0],o.y=u[1],e.sa(o),u[0]=o.x,u[1]=o.y,o.x=u[2],o.y=u[3],e.sa(o),u[2]=o.x,u[3]=o.y,o.x=u[4],o.y=u[5],e.sa(o),u[4]=o.x,u[5]=o.y,o.x=u[6],o.y=u[7],e.sa(o),u[6]=o.x,u[7]=o.y}A.free(o)}function Gr(t,e,n){switch(t.type){case Tn:case kr:case ur:n?e.h(t.ed,t.fd,0,0):Kn(e,t.ed,t.fd,0,0),Kn(e,t.hc,t.oc,0,0);break;case pn:var o=t.figures;t=o.j,o=o.length;for(var a=0;a<o;a++){var u=t[a];n&&0===a?e.h(u.startX,u.startY,0,0):Kn(e,u.startX,u.startY,0,0);for(var h=u.segments.j,f=h.length,p=u.startX,g=u.startY,y=0;y<f;y++){var v=h[y];switch(v.type){case He:case $n:Kn(e,p=v.endX,g=v.endY,0,0);break;case ln:R.um(p,g,v.point1X,v.point1Y,v.point2X,v.point2Y,v.endX,v.endY,.5,e),p=v.endX,g=v.endY;break;case hr:R.ow(p,g,v.point1X,v.point1Y,v.endX,v.endY,.5,e),p=v.endX,g=v.endY;break;case Oe:case Ir:var x=v.type===Oe?ge(v,u):Cn(v,u,p,g),S=x.length;if(0===S){Kn(e,p=v.centerX,g=v.centerY,0,0);break}v=null;for(var M=0;M<S;M++)R.um((v=x[M])[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],.5,e);null!==v&&(p=v[6],g=v[7]);break;default:W("Unknown Segment type: "+v.type)}}}break;default:W("Unknown Geometry type: "+t.type)}}function Wa(t,e,n,o,a){var u=e.x;e=e.y;for(var p,g,y,v,h=t.bounds.x-20,f=0,x=t.figures.j,S=x.length,M=0;M<S;M++){var T=x[M];if(T.isFilled){if(o&&T.$(u,e,n))return!0;for(var N=T.segments,P=p=T.startX,I=g=T.startY,O=N.j,b=0;b<=N.length;b++){var B=void 0;if(b!==N.length){var K=(B=O[b]).type;t=B.endX,v=B.endY}else K=He,t=P,v=I;switch(K){case $n:if(P=Xa(u,e,h,e,p,g,P,I),isNaN(P))return!0;f+=P,P=t,I=v;break;case He:if(p=Xa(u,e,h,e,p,g,t,v),isNaN(p))return!0;f+=p;break;case ln:f+=y=R.uq(p,g,B.point1X,B.point1Y,B.point2X,B.point2Y,t,v,h,e,u,e,.5);break;case hr:f+=y=R.uq(p,g,(p+2*B.point1X)/3,(g+2*B.point1Y)/3,(2*B.point1X+t)/3,(2*B.point1Y+v)/3,t,v,h,e,u,e,.5);break;case Oe:case Ir:var rt=(K=B.type===Oe?ge(B,T):Cn(B,T,p,g)).length;if(0===rt){if(p=Xa(u,e,h,e,p,g,B.centerX,B.centerY),isNaN(p))return!0;f+=p;break}B=null;for(var tt=0;tt<rt;tt++){if(B=K[tt],0===tt){if(y=Xa(u,e,h,e,p,g,B[0],B[1]),isNaN(y))return!0;f+=y}f+=y=R.uq(B[0],B[1],B[2],B[3],B[4],B[5],B[6],B[7],h,e,u,e,.5)}null!==B&&(t=B[6],v=B[7]);break;default:W("Unknown Segment type: "+B.type)}p=t,g=v}if(0!==f)return!0;f=0}else if(T.$(u,e,a?n:n+2))return!0}return 0!==f}function Xa(t,e,n,o,a,u,h,f){if(R.Ob(a,u,h,f,.05,t,e))return NaN;var p=(t-n)*(u-f);if(0===p)return 0;var g=((t*o-e*n)*(a-h)-(t-n)*(a*f-u*h))/p;if(e=(t*o-e*n)*(u-f)/p,g>=t)return 0;if((a>h?a-h:h-a)<(u>f?u-f:f-u)){if(u<f){if(e<u||e>f)return 0}else if(e<f||e>u)return 0}else if(a<h){if(g<a||g>h)return 0}else if(g<h||g>a)return 0;return 0<p?1:-1}function os(t,e,n,o){for(var a=(t=t.figures.j).length,u=0;u<a;u++)if(t[u].$(e,n,o))return!0;return!1}function td(t){if(null===t.al){var e=t.al=[],n=t.jn=[],o=[],a=[];if(t.type===Tn)o.push(t.startX),o.push(t.startY),o.push(t.endX),o.push(t.endY),e.push(o),a.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),n.push(a);else if(t.type===kr)o.push(t.startX),o.push(t.startY),o.push(t.endX),o.push(t.startY),o.push(t.endX),o.push(t.endY),o.push(t.startX),o.push(t.endY),o.push(t.startX),o.push(t.startY),e.push(o),a.push(Math.abs(t.startX-t.endX)),a.push(Math.abs(t.startY-t.endY)),a.push(Math.abs(t.startX-t.endX)),a.push(Math.abs(t.startY-t.endY)),n.push(a);else if(t.type===ur){var u=new nn;u.startX=t.endX,u.startY=(t.startY+t.endY)/2;var h=new Ct(Oe);if(h.startAngle=0,h.sweepAngle=360,h.centerX=(t.startX+t.endX)/2,h.centerY=(t.startY+t.endY)/2,h.radiusX=Math.abs(t.startX-t.endX)/2,h.radiusY=Math.abs(t.startY-t.endY)/2,u.add(h),0===(a=(t=ge(h,u)).length))o.push(h.centerX),o.push(h.centerY);else{h=u.startX,u=u.startY;for(var f=0;f<a;f++){var p=t[f];R.Fe(h,u,p[2],p[3],p[4],p[5],p[6],p[7],.5,o),h=p[6],u=p[7]}}e.push(o),n.push(ed(o))}else for(t=t.figures.iterator;t.next();){(o=[]).push((a=t.value).startX),o.push(a.startY),f=h=a.startX,p=u=a.startY;for(var g=a.segments.j,y=g.length,v=0;v<y;v++){var x=g[v];switch(x.type){case $n:4<=o.length&&(e.push(o),n.push(ed(o))),(o=[]).push(x.endX),o.push(x.endY),f=h=x.endX,p=u=x.endY;break;case He:o.push(x.endX),o.push(x.endY),h=x.endX,u=x.endY;break;case ln:R.Fe(h,u,x.point1X,x.point1Y,x.point2X,x.point2Y,x.endX,x.endY,.5,o),h=x.endX,u=x.endY;break;case hr:R.Vq(h,u,x.point1X,x.point1Y,x.endX,x.endY,.5,o),h=x.endX,u=x.endY;break;case Oe:var S=ge(x,a),M=S.length;if(0===M){o.push(x.centerX),o.push(x.centerY),h=x.centerX,u=x.centerY;break}for(var T=0;T<M;T++){var N=S[T];R.Fe(h,u,N[2],N[3],N[4],N[5],N[6],N[7],.5,o),h=N[6],u=N[7]}break;case Ir:if(0===(M=(S=Cn(x,a,h,u)).length)){o.push(x.centerX),o.push(x.centerY),h=x.centerX,u=x.centerY;break}for(T=0;T<M;T++)R.Fe(h,u,(N=S[T])[2],N[3],N[4],N[5],N[6],N[7],.5,o),h=N[6],u=N[7];break;default:W("Segment not of valid type: "+x.type)}x.isClosed&&(o.push(f),o.push(p))}4<=o.length&&(e.push(o),n.push(ed(o)))}}}function ed(t){for(var e=[],n=0,o=0,a=t.length,u=0;u<a;u+=2){var h=t[u],f=t[u+1];0!==u&&e.push(Math.sqrt(qs(n,o,h,f))),n=h,o=f}return e}R.za=R.jB,It.prototype.copy=function(){var t=new It;t.pa=this.pa,t.ed=this.ed,t.fd=this.fd,t.hc=this.hc,t.oc=this.oc;for(var e=this.Jj.j,n=e.length,o=t.Jj,a=0;a<n;a++){var u=e[a].copy();o.add(u)}return t.Yr=this.Yr,t.Gr.assign(this.Gr),t.qa=this.qa,t.al=this.al,t.jn=this.jn,t.kn=this.kn,t.qf=this.qf.G(),t.rf=this.rf.G(),t.El=this.El,t.Dl=this.Dl,t.Uf=this.Uf,t},(D=It.prototype).ca=function(){return this.freeze(),Object.freeze(this),this},D.freeze=function(){this.s=!0;var t=this.figures;t.freeze();for(var e=(t=t.j).length,n=0;n<e;n++)t[n].freeze();return this},D.ea=function(){Object.isFrozen(this)&&W("cannot thaw constant: "+this),this.s=!1;var t=this.figures;t.ea();for(var e=(t=t.j).length,n=0;n<e;n++)t[n].ea();return this},D.Na=function(t){if(!(t instanceof It))return!1;if(this.type!==t.type)return this.type===Tn&&t.type===pn?zw(this,t):t.type===Tn&&this.type===pn&&zw(t,this);if(this.type===pn){var e=this.figures.j,n=e.length;if(n!==(t=t.figures.j).length)return!1;for(var o=0;o<n;o++)if(!e[o].Na(t[o]))return!1;return!0}return R.A(this.startX,t.startX)&&R.A(this.startY,t.startY)&&R.A(this.endX,t.endX)&&R.A(this.endY,t.endY)},D.jb=function(t){t.classType===It&&(this.type=t)},D.toString=function(t){switch(void 0===t&&(t=-1),this.type){case Tn:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case kr:var e=new z(this.startX,this.startY,0,0);return e.Sw(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case ur:if((e=new z(this.startX,this.startY,0,0)).Sw(this.endX,this.endY,0,0),0>t)return"M"+(t=e.left.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+e.right.toString()+" "+(e.y+e.height/2).toString()+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var n=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+n+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t)+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+n;case pn:e="";for(var o=(n=this.figures.j).length,a=0;a<o;a++){var u=n[a];0<a&&(e+=" x "),u.isFilled&&(e+="F "),e+=u.toString(t)}return e;default:return this.type.toString()}},D.fw=function(){if(this.qa||this.Yr!==this.figures.Aa)return!0;for(var t=this.figures.j,e=t.length,n=0;n<e;n++)if(t[n].fw())return!0;return!1},It.prototype.computeBounds=function(){this.qa=!1,this.jn=this.al=null,this.kn=NaN,this.Yr=this.figures.Aa;for(var t=this.figures.j,e=t.length,n=0;n<e;n++){var o=t[n];o.qa=!1;var a=o.segments;o.dt=a.Aa,a=(o=a.j).length;for(var u=0;u<a;u++){var h=o[u];h.qa=!1,h.Se=null}}(t=this.Gr).ea(),isNaN(this.El)||isNaN(this.Dl)?t.h(0,0,0,0):t.h(0,0,this.El,this.Dl),Gr(this,t,!1),Kn(t,0,0,0,0),t.freeze()},It.prototype.gy=function(){var t=new z;return Gr(this,t,!0),t},It.prototype.normalize=function(){this.s&&Ft(this);var t=this.gy();return this.offset(-t.x,-t.y),new A(-t.x,-t.y)},It.prototype.offset=function(t,e){return this.s&&Ft(this),this.transform(1,0,0,1,t,e),this},It.prototype.scale=function(t,e){return this.s&&Ft(this),this.transform(t,0,0,e,0,0),this},It.prototype.rotate=function(t,e,n){this.s&&Ft(this),void 0===e&&(e=0),void 0===n&&(n=0);var o=Ht.alloc();return o.reset(),o.rotate(t,e,n),this.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),Ht.free(o),this},(D=It.prototype).transform=function(t,e,n,o,a,u){switch(this.type){case Tn:case kr:case ur:var h=this.ed,f=this.fd;this.ed=h*t+f*n+a,this.fd=h*e+f*o+u,this.hc=(h=this.hc)*t+(f=this.oc)*n+a,this.oc=h*e+f*o+u;break;case pn:for(var p=this.figures.j,g=p.length,y=0;y<g;y++){var v=p[y];v.startX=(h=v.startX)*t+(f=v.startY)*n+a,v.startY=h*e+f*o+u;for(var x=(v=v.segments.j).length,S=0;S<x;S++){var M=v[S];switch(M.type){case He:case $n:M.endX=(h=M.endX)*t+(f=M.endY)*n+a,M.endY=h*e+f*o+u;break;case ln:M.point1X=(h=M.point1X)*t+(f=M.point1Y)*n+a,M.point1Y=h*e+f*o+u,M.point2X=(h=M.point2X)*t+(f=M.point2Y)*n+a,M.point2Y=h*e+f*o+u,M.endX=(h=M.endX)*t+(f=M.endY)*n+a,M.endY=h*e+f*o+u;break;case hr:M.point1X=(h=M.point1X)*t+(f=M.point1Y)*n+a,M.point1Y=h*e+f*o+u,M.endX=(h=M.endX)*t+(f=M.endY)*n+a,M.endY=h*e+f*o+u;break;case Oe:M.centerX=(h=M.centerX)*t+(f=M.centerY)*n+a,M.centerY=h*e+f*o+u,0!==e&&(0>(h=180*Math.atan2(e,t)/Math.PI)&&(h+=360),M.startAngle+=h),0>t&&(M.startAngle=180-M.startAngle,M.sweepAngle=-M.sweepAngle),0>o&&(M.startAngle=-M.startAngle,M.sweepAngle=-M.sweepAngle),M.radiusX*=Math.sqrt(t*t+n*n),void 0!==M.radiusY&&(M.radiusY*=Math.sqrt(e*e+o*o));break;case Ir:M.endX=(h=M.endX)*t+(f=M.endY)*n+a,M.endY=h*e+f*o+u,0!==e&&(0>(h=180*Math.atan2(e,t)/Math.PI)&&(h+=360),M.xAxisRotation+=h),0>t&&(M.xAxisRotation=180-M.xAxisRotation,M.isClockwiseArc=!M.isClockwiseArc),0>o&&(M.xAxisRotation=-M.xAxisRotation,M.isClockwiseArc=!M.isClockwiseArc),M.radiusX*=Math.sqrt(t*t+n*n),M.radiusY*=Math.sqrt(e*e+o*o);break;default:W("Unknown Segment type: "+M.type)}}}}return this.qa=!0,this},D.$=function(t,e){void 0===e&&(e=0);var n=this.ed,o=this.fd,a=this.hc,u=this.oc;switch(this.type){case Tn:return R.Ob(n,o,a,u,e,t.x,t.y);case kr:var h=z.allocAt(Math.min(n,a)-e,Math.min(o,u)-e,Math.abs(a-n)+2*e,Math.abs(u-o)+2*e);return t=h.$(t),z.free(h),t;case ur:h=Math.min(n,a)-e;var f=Math.min(o,u)-e;return n=(Math.abs(a-n)+2*e)/2,e=(Math.abs(u-o)+2*e)/2,!(0>=n||0>=e)&&1>=(h=t.x-(h+n))*h/(n*n)+(f=t.y-(f+e))*f/(e*e);case pn:return Wa(this,t,e,!0,!1);default:return!1}},D.Wv=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=new A),this.type===Tn)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var n=this.flattenedSegments,o=this.flattenedLengths,a=n.length,u=this.flattenedTotalLength*t,h=0,f=0;f<a;f++){var p=o[f],g=p.length;for(t=0;t<g;t++){var y=p[t];if(h+y>=u)return o=u-h,e.h((f=(n=n[f])[2*t])+(n[2*t+2]-f)*(o=0===y?0:o/y),(a=n[2*t+1])+(n[2*t+3]-a)*o),e;h+=y}}return e},D.vy=function(t){if(0>t?t=0:1<t&&(t=1),this.type===Tn)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,n=this.flattenedLengths,o=e.length,a=this.flattenedTotalLength*t,u=0,h=0;h<o;h++){var f=n[h],p=f.length;for(t=0;t<p;t++){var g=f[t];if(u+g>=a)return e=(a=e[h])[2*t],n=a[2*t+1],o=a[2*t+2],t=a[2*t+3],1>Math.abs(o-e)&&1>Math.abs(t-n)?0:1>Math.abs(o-e)?0<=t-n?90:270:1>Math.abs(t-n)?0<=o-e?0:180:180*Math.atan2(t-n,o-e)/Math.PI;u+=g}}return NaN},D.Xv=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=[]),e.length=3,this.type===Tn)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var n=this.flattenedSegments,o=this.flattenedLengths,a=n.length,u=this.flattenedTotalLength*t,h=0,f=0;f<a;f++){var p=o[f],g=p.length;for(t=0;t<g;t++){var y=p[t];if(h+y>=u)return o=u-h,o=0===y?0:o/y,n=(y=n[f])[2*t],f=y[2*t+1],a=y[2*t+2],t=y[2*t+3],e[0]=n+(a-n)*o,e[1]=f+(t-f)*o,e[2]=1>Math.abs(a-n)&&1>Math.abs(t-f)?0:1>Math.abs(a-n)?0<=t-f?90:270:1>Math.abs(t-f)?0<=a-n?0:180:180*Math.atan2(t-f,a-n)/Math.PI,e;h+=y}}return e},D.wy=function(t){if(this.type===Tn){var e=this.startX,n=this.startY,o=this.endX,a=this.endY;if(e!==o||n!==a){var u=t.x;if(t=t.y,e===o){if(n<a){var h=n;o=a}else h=a,o=n;return t<=h?h===n?0:1:t>=o?o===n?0:1:Math.abs(t-n)/(o-h)}if(n===a)return e<o?h=e:(h=o,o=e),u<=h?h===e?0:1:u>=o?o===e?0:1:Math.abs(u-e)/(o-h);h=(o-e)*(o-e)+(a-n)*(a-n);var f=A.alloc();return R.Ph(e,n,o,a,u,t,f),t=f.x,u=f.y,A.free(f),Math.sqrt(((t-e)*(t-e)+(u-n)*(u-n))/h)}}else{if(this.type!==kr){e=this.flattenedSegments,n=this.flattenedLengths,u=this.flattenedTotalLength,o=A.alloc(),a=1/0,f=h=0,p=e.length;for(var y=g=0,v=0;v<p;v++)for(var x=e[v],S=n[v],M=x.length,T=0;T<M;T+=2){var N=x[T],P=x[T+1];if(0!==T){R.Ph(g,y,N,P,t.x,t.y,o);var I=(o.x-t.x)*(o.x-t.x)+(o.y-t.y)*(o.y-t.y);I<a&&(a=I,h=f,h+=Math.sqrt((o.x-g)*(o.x-g)+(o.y-y)*(o.y-y))),f+=S[(T-2)/2]}g=N,y=P}return A.free(o),0>(t=h/u)?0:1<t?1:t}f=this.startY;var p=this.endX;if(a=this.endY,(h=this.startX)!==p||f!==a){u=2*(e=p-h)+2*(n=a-f),o=t.x,t=t.y,o=Math.min(Math.max(o,h),p),t=Math.min(Math.max(t,f),a),h=Math.abs(o-h),p=Math.abs(o-p),f=Math.abs(t-f),a=Math.abs(t-a);var g=Math.min(h,p,f,a);if(g===f)return o/u;if(g===p)return(e+t)/u;if(g===a)return(2*e+n-o)/u;if(g===h)return(2*e+2*n-t)/u}}return 0},D.add=function(t){return this.Jj.add(t),this},D.Xm=function(t,e,n,o,a,u,h,f){return this.s&&Ft(this),this.qf=new at(t,e,a,u).freeze(),this.rf=new at(n,o,h,f).freeze(),this},L.Object.defineProperties(It.prototype,{flattenedSegments:{get:function(){return td(this),this.al}},flattenedLengths:{get:function(){return td(this),this.jn}},flattenedTotalLength:{get:function(){var t=this.kn;if(isNaN(t)){if(this.type===Tn){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===kr)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else for(var n=(e=this.flattenedLengths).length,o=t=0;o<n;o++)for(var a=e[o],u=a.length,h=0;h<u;h++)t+=a[h];this.kn=t}return t}},type:{get:function(){return this.pa},set:function(t){this.pa!==t&&(this.s&&Ft(this,t),this.pa=t,this.qa=!0)}},startX:{get:function(){return this.ed},set:function(t){this.ed!==t&&(this.s&&Ft(this,t),this.ed=t,this.qa=!0)}},startY:{get:function(){return this.fd},set:function(t){this.fd!==t&&(this.s&&Ft(this,t),this.fd=t,this.qa=!0)}},endX:{get:function(){return this.hc},set:function(t){this.hc!==t&&(this.s&&Ft(this,t),this.hc=t,this.qa=!0)}},endY:{get:function(){return this.oc},set:function(t){this.oc!==t&&(this.s&&Ft(this,t),this.oc=t,this.qa=!0)}},figures:{get:function(){return this.Jj},set:function(t){this.Jj!==t&&(this.s&&Ft(this,t),this.Jj=t,this.qa=!0)}},spot1:{get:function(){return this.qf},set:function(t){this.s&&Ft(this,t),this.qf=t.G()}},spot2:{get:function(){return this.rf},set:function(t){this.s&&Ft(this,t),this.rf=t.G()}},defaultStretch:{get:function(){return this.Uf},set:function(t){this.s&&Ft(this,t),this.Uf=t}},bounds:{get:function(){return this.fw()&&this.computeBounds(),this.Gr}}}),It.prototype.setSpots=It.prototype.Xm,It.prototype.add=It.prototype.add,It.prototype.getFractionForPoint=It.prototype.wy,It.prototype.getPointAndAngleAlongPath=It.prototype.Xv,It.prototype.getAngleAlongPath=It.prototype.vy,It.prototype.getPointAlongPath=It.prototype.Wv,It.prototype.containsPoint=It.prototype.$,It.prototype.transform=It.prototype.transform,It.prototype.rotate=It.prototype.rotate,It.prototype.scale=It.prototype.scale,It.prototype.offset=It.prototype.offset,It.prototype.normalize=It.prototype.normalize,It.prototype.computeBoundsWithoutOrigin=It.prototype.gy,It.prototype.equalsApprox=It.prototype.Na;var Tn=new it(It,"Line",0),kr=new it(It,"Rectangle",1),ur=new it(It,"Ellipse",2),pn=new it(It,"Path",3),nd="UuBbMmZzLlHhVvCcSsQqTtAaFfXx";function nn(t,e,n,o){wn(this),this.tx=null,this.s=!1,void 0===n&&(n=!0),this.ks=n,void 0===o&&(o=!0),this.ps=o,this.ed=void 0!==t?t:0,this.fd=void 0!==e?e:0,this.cm=new lt,this.dt=this.cm.Aa,this.qa=!0}function Ct(t,e,n,o,a,u,h,f){wn(this),this.s=!1,void 0===t&&(t=He),this.pa=t,this.hc=void 0!==e?e:0,this.oc=void 0!==n?n:0,void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=0),void 0===h&&(h=0),t===Ir?(0>(t=u%360)&&(t+=360),this.Ce=t,this.Qi=0,this.Ri=Math.max(o,0),this.qh=Math.max(a,0),this.Ml="boolean"==typeof h?h:"number"==typeof h&&!!h,this.el=!!f):(this.Ce=o,this.Qi=a,t===Oe&&(u=Math.max(u,0)),this.Ri=u,"number"==typeof h?(t===Oe&&(h=Math.max(h,0)),this.qh=h):this.qh=0,this.el=this.Ml=!1),this.Oj=!1,this.qa=!0,this.Se=null}function ge(t,e){if(null!==t.Se&&!1===e.qa)return t.Se;var n=t.radiusX,o=t.radiusY;if(void 0===o&&(o=n),0===n||0===o)return t.Se=[],t.Se;e=t.Ce;var a=t.Qi,u=R.hy(0,0,n<o?n:o,t.startAngle,t.startAngle+t.sweepAngle,!1);if(n!==o){var h=Ht.alloc();h.reset(),n<o?h.scale(1,o/n):h.scale(n/o,1),yo(u,h),Ht.free(h)}for(n=u.length,o=0;o<n;o++)(h=u[o])[0]+=e,h[1]+=a,h[2]+=e,h[3]+=a,h[4]+=e,h[5]+=a,h[6]+=e,h[7]+=a;return t.Se=u,t.Se}function Cn(t,e,n,o){function a(T,N,P,I){return(T*I<N*P?-1:1)*Math.acos((T*P+N*I)/(Math.sqrt(T*T+N*N)*Math.sqrt(P*P+I*I)))}if(null!==t.Se&&!1===e.qa)return t.Se;var u=t.qh;0===(e=t.Ri)&&(e=1e-4),0===u&&(u=1e-4);var h=Math.PI/180*t.Ce,f=t.Ml,p=t.el,g=t.hc,y=t.oc,v=Math.cos(h),x=Math.sin(h),S=v*(n-g)/2+x*(o-y)/2,M=S*S/(e*e)+(h=-x*(n-g)/2+v*(o-y)/2)*h/(u*u);return 1<M&&(e*=Math.sqrt(M),u*=Math.sqrt(M)),M=(f===p?-1:1)*Math.sqrt((e*e*u*u-e*e*h*h-u*u*S*S)/(e*e*h*h+u*u*S*S)),isNaN(M)&&(M=0),f=M*e*h/u,M=M*-u*S/e,isNaN(f)&&(f=0),isNaN(M)&&(M=0),n=(n+g)/2+v*f-x*M,o=(o+y)/2+x*f+v*M,y=a(1,0,(S-f)/e,(h-M)/u),h=a(v=(S-f)/e,g=(h-M)/u,S=(-S-f)/e,f=(-h-M)/u),-1>=(S=(v*S+g*f)/(Math.sqrt(v*v+g*g)*Math.sqrt(S*S+f*f)))?h=Math.PI:1<=S&&(h=0),!p&&0<h&&(h-=2*Math.PI),p&&0>h&&(h+=2*Math.PI),p=e>u?1:e/u,S=e>u?u/e:1,e=R.hy(0,0,e>u?e:u,y,y+h,!0),(u=Ht.alloc()).reset(),u.translate(n,o),u.rotate(t.Ce,0,0),u.scale(p,S),yo(e,u),Ht.free(u),t.Se=e,t.Se}It.className="Geometry",It.stringify=nv,It.fillPath=function(t){for(var e=(t=t.split(/[Xx]/)).length,n="",o=0;o<e;o++){var a=t[o];n=null!==a.match(/[Ff]/)?0===o?n+a:n+"X"+(" "===a[0]?"":" ")+a:n+(0===o?"":"X ")+"F"+(" "===a[0]?"":" ")+a}return n},It.parse=se,It.Line=Tn,It.Rectangle=kr,It.Ellipse=ur,It.Path=pn,nn.prototype.copy=function(){var t=new nn;t.ks=this.ks,t.ps=this.ps,t.ed=this.ed,t.fd=this.fd;for(var e=this.cm.j,n=e.length,o=t.cm,a=0;a<n;a++){var u=e[a].copy();o.add(u)}return t.dt=this.dt,t.qa=this.qa,t.tx=this.tx,t},(D=nn.prototype).Na=function(t){if(!(t instanceof nn&&R.A(this.startX,t.startX)&&R.A(this.startY,t.startY)))return!1;var e=this.segments.j,n=e.length;if(n!==(t=t.segments.j).length)return!1;for(var o=0;o<n;o++)if(!e[o].Na(t[o]))return!1;return!0},D.toString=function(t){void 0===t&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),n=this.segments.j,o=n.length,a=0;a<o;a++)e+=" "+n[a].toString(t);return e},D.freeze=function(){this.s=!0;var t=this.segments;t.freeze();var e=t.j;t=t.length;for(var n=0;n<t;n++)e[n].freeze();return this},D.ea=function(){this.s=!1;var t=this.segments;t.ea();for(var e=(t=t.j).length,n=0;n<e;n++)t[n].ea();return this},D.fw=function(){if(this.qa)return!0;var t=this.segments;if(this.dt!==t.Aa)return!0;for(var e=(t=t.j).length,n=0;n<e;n++)if(t[n].qa)return!0;return!1},D.add=function(t){return this.cm.add(t),this},D.$=function(t,e,n){for(var o=this.startX,a=this.startY,u=o,h=a,f=this.segments.j,p=f.length,g=0;g<p;g++){var y=f[g];switch(y.type){case $n:u=y.endX,h=y.endY,o=y.endX,a=y.endY;break;case He:if(R.Ob(o,a,y.endX,y.endY,n,t,e))return!0;o=y.endX,a=y.endY;break;case ln:if(R.yt(o,a,y.point1X,y.point1Y,y.point2X,y.point2Y,y.endX,y.endY,.5,t,e,n))return!0;o=y.endX,a=y.endY;break;case hr:if(R.pw(o,a,y.point1X,y.point1Y,y.endX,y.endY,.5,t,e,n))return!0;o=y.endX,a=y.endY;break;case Oe:case Ir:var v=y.type===Oe?ge(y,this):Cn(y,this,o,a),x=v.length;if(0===x){if(R.Ob(o,a,y.centerX,y.centerY,n,t,e))return!0;o=y.centerX,a=y.centerY;break}for(var S=null,M=0;M<x;M++)if(S=v[M],0===M&&R.Ob(o,a,S[0],S[1],n,t,e)||R.yt(S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],.5,t,e,n))return!0;null!==S&&(o=S[6],a=S[7]);break;default:W("Unknown Segment type: "+y.type)}if(y.isClosed&&(o!==u||a!==h)&&R.Ob(o,a,u,h,n,t,e))return!0}return!1},L.Object.defineProperties(nn.prototype,{isFilled:{get:function(){return this.ks},set:function(t){this.s&&Ft(this,t),this.ks=t}},isShadowed:{get:function(){return this.ps},set:function(t){this.s&&Ft(this,t),this.ps=t}},startX:{get:function(){return this.ed},set:function(t){this.s&&Ft(this,t),this.ed=t,this.qa=!0}},startY:{get:function(){return this.fd},set:function(t){this.s&&Ft(this,t),this.fd=t,this.qa=!0}},segments:{get:function(){return this.cm},set:function(t){this.s&&Ft(this,t),this.cm=t,this.qa=!0}}}),nn.prototype.add=nn.prototype.add,nn.prototype.equalsApprox=nn.prototype.Na,nn.className="PathFigure",Ct.prototype.copy=function(){var t=new Ct;return t.pa=this.pa,t.hc=this.hc,t.oc=this.oc,t.Ce=this.Ce,t.Qi=this.Qi,t.Ri=this.Ri,t.qh=this.qh,t.Ml=this.Ml,t.el=this.el,t.Oj=this.Oj,t.qa=this.qa,t},(D=Ct.prototype).Na=function(t){if(!(t instanceof Ct)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case $n:case He:return R.A(this.endX,t.endX)&&R.A(this.endY,t.endY);case ln:return R.A(this.endX,t.endX)&&R.A(this.endY,t.endY)&&R.A(this.point1X,t.point1X)&&R.A(this.point1Y,t.point1Y)&&R.A(this.point2X,t.point2X)&&R.A(this.point2Y,t.point2Y);case hr:return R.A(this.endX,t.endX)&&R.A(this.endY,t.endY)&&R.A(this.point1X,t.point1X)&&R.A(this.point1Y,t.point1Y);case Oe:return R.A(this.startAngle,t.startAngle)&&R.A(this.sweepAngle,t.sweepAngle)&&R.A(this.centerX,t.centerX)&&R.A(this.centerY,t.centerY)&&R.A(this.radiusX,t.radiusX)&&R.A(this.radiusY,t.radiusY);case Ir:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&R.A(this.xAxisRotation,t.xAxisRotation)&&R.A(this.endX,t.endX)&&R.A(this.endY,t.endY)&&R.A(this.radiusX,t.radiusX)&&R.A(this.radiusY,t.radiusY);default:return!1}},D.jb=function(t){t.classType===Ct&&(this.type=t)},D.toString=function(t){switch(void 0===t&&(t=-1),this.type){case $n:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case He:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case ln:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case hr:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Oe:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case Ir:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.Oj?"z":"")},D.freeze=function(){return this.s=!0,this},D.ea=function(){return this.s=!1,this},D.close=function(){return this.Oj=!0,this},L.Object.defineProperties(Ct.prototype,{isClosed:{get:function(){return this.Oj},set:function(t){this.Oj!==t&&(this.Oj=t,this.qa=!0)}},type:{get:function(){return this.pa},set:function(t){this.s&&Ft(this,t),this.pa=t,this.qa=!0}},endX:{get:function(){return this.hc},set:function(t){this.s&&Ft(this,t),this.hc=t,this.qa=!0}},endY:{get:function(){return this.oc},set:function(t){this.s&&Ft(this,t),this.oc=t,this.qa=!0}},point1X:{get:function(){return this.Ce},set:function(t){this.s&&Ft(this,t),this.Ce=t,this.qa=!0}},point1Y:{get:function(){return this.Qi},set:function(t){this.s&&Ft(this,t),this.Qi=t,this.qa=!0}},point2X:{get:function(){return this.Ri},set:function(t){this.s&&Ft(this,t),this.Ri=t,this.qa=!0}},point2Y:{get:function(){return this.qh},set:function(t){this.s&&Ft(this,t),this.qh=t,this.qa=!0}},centerX:{get:function(){return this.Ce},set:function(t){this.s&&Ft(this,t),this.Ce=t,this.qa=!0}},centerY:{get:function(){return this.Qi},set:function(t){this.s&&Ft(this,t),this.Qi=t,this.qa=!0}},radiusX:{get:function(){return this.Ri},set:function(t){0>t&&qt(t,">= zero",Ct,"radiusX"),this.s&&Ft(this,t),this.Ri=t,this.qa=!0}},radiusY:{get:function(){return this.qh},set:function(t){0>t&&qt(t,">= zero",Ct,"radiusY"),this.s&&Ft(this,t),this.qh=t,this.qa=!0}},startAngle:{get:function(){return this.hc},set:function(t){this.hc!==t&&(this.s&&Ft(this,t),0>(t%=360)&&(t+=360),this.hc=t,this.qa=!0)}},sweepAngle:{get:function(){return this.oc},set:function(t){this.s&&Ft(this,t),360<t&&(t=360),-360>t&&(t=-360),this.oc=t,this.qa=!0}},isClockwiseArc:{get:function(){return this.el},set:function(t){this.s&&Ft(this,t),this.el=t,this.qa=!0}},isLargeArc:{get:function(){return this.Ml},set:function(t){this.s&&Ft(this,t),this.Ml=t,this.qa=!0}},xAxisRotation:{get:function(){return this.Ce},set:function(t){0>(t%=360)&&(t+=360),this.s&&Ft(this,t),this.Ce=t,this.qa=!0}}}),Ct.prototype.equalsApprox=Ct.prototype.Na;var $n=new it(Ct,"Move",0),He=new it(Ct,"Line",1),ln=new it(Ct,"Bezier",2),hr=new it(Ct,"QuadraticBezier",3),Oe=new it(Ct,"Arc",4),Ir=new it(Ct,"SvgArc",4);function Qn(){this.B=null,this.xv=new A(0,0).freeze(),this.Hu=new A(0,0).freeze(),this.yr=this.As=0,this.zr=1,this.Ci="",this.st=this.Sr=!1,this.Pr=this.Br=0,this.Qg=this.cs=this.ns=!1,this.Xr=null,this.nt=0,this.qd=this.mt=null}function ve(){this.B=null,this.Qa="",this.Ks=this.kt=null}function De(){this.un=Me,this.hf=this.zs="",this.bp=this.cp=this.jp=this.kp=this.ip=this.B=this.bc=null}Ct.className="PathSegment",Ct.Move=$n,Ct.Line=He,Ct.Bezier=ln,Ct.QuadraticBezier=hr,Ct.Arc=Oe,Ct.SvgArc=Ir,Qn.prototype.copy=function(){var t=new Qn;return this.clone(t)},Qn.prototype.clone=function(t){return t.B=this.B,t.xv.assign(this.viewPoint),t.Hu.assign(this.documentPoint),t.As=this.As,t.yr=this.yr,t.zr=this.zr,t.Ci=this.Ci,t.Sr=this.Sr,t.st=this.st,t.Br=this.Br,t.Pr=this.Pr,t.ns=this.ns,t.cs=this.cs,t.Qg=this.Qg,t.Xr=this.Xr,t.nt=this.nt,t.mt=this.mt,t.qd=this.qd,t},Qn.prototype.toString=function(){var t="^";return 0!==this.modifiers&&(t+="M:"+this.modifiers),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.clickCount&&(t+="C:"+this.clickCount),0!==this.delta&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),null!==this.documentPoint&&(t+="@"+this.documentPoint.toString()),t},Qn.prototype.Gq=function(t,e){var n=this.diagram;return null===n||ux(n,this.event,t,e),e},Qn.prototype.mA=function(t,e){var n=this.diagram;return null===n||(ux(n,this.event,t,e),e.assign(n.nu(e))),e},L.Object.defineProperties(Qn.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},viewPoint:{get:function(){return this.xv},set:function(t){this.xv.assign(t)}},documentPoint:{get:function(){return this.Hu},set:function(t){this.Hu.assign(t)}},modifiers:{get:function(){return this.As},set:function(t){this.As=t}},button:{get:function(){return this.yr},set:function(t){if(this.yr=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.zr},set:function(t){this.zr=t}},key:{get:function(){return this.Ci},set:function(t){this.Ci=t}},down:{get:function(){return this.Sr},set:function(t){this.Sr=t}},up:{get:function(){return this.st},set:function(t){this.st=t}},clickCount:{get:function(){return this.Br},set:function(t){this.Br=t}},delta:{get:function(){return this.Pr},set:function(t){this.Pr=t}},isMultiTouch:{get:function(){return this.ns},set:function(t){this.ns=t}},handled:{get:function(){return this.cs},set:function(t){this.cs=t}},bubbles:{get:function(){return this.Qg},set:function(t){this.Qg=t}},event:{get:function(){return this.Xr},set:function(t){this.Xr=t}},isTouchEvent:{get:function(){var t=U.TouchEvent,e=this.event;return!!(t&&e instanceof t)||(t=U.PointerEvent)&&e instanceof t&&("touch"===e.pointerType||"pen"===e.pointerType)}},timestamp:{get:function(){return this.nt},set:function(t){this.nt=t}},targetDiagram:{get:function(){return this.mt},set:function(t){this.mt=t}},targetObject:{get:function(){return this.qd},set:function(t){this.qd=t}},control:{get:function(){return 0!=(1&this.modifiers)},set:function(t){this.modifiers=t?1|this.modifiers:-2&this.modifiers}},shift:{get:function(){return 0!=(4&this.modifiers)},set:function(t){this.modifiers=t?4|this.modifiers:-5&this.modifiers}},alt:{get:function(){return 0!=(2&this.modifiers)},set:function(t){this.modifiers=t?2|this.modifiers:-3&this.modifiers}},meta:{get:function(){return 0!=(8&this.modifiers)},set:function(t){this.modifiers=t?8|this.modifiers:-9&this.modifiers}},left:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(1&this.buttons):0===this.button},set:function(t){this.buttons=t?1|this.buttons:-2&this.buttons}},right:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(2&this.buttons):2===this.button},set:function(t){this.buttons=t?2|this.buttons:-3&this.buttons}},middle:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(4&this.buttons):1===this.button},set:function(t){this.buttons=t?4|this.buttons:-5&this.buttons}}}),Qn.prototype.getMultiTouchDocumentPoint=Qn.prototype.mA,Qn.prototype.getMultiTouchViewPoint=Qn.prototype.Gq,Qn.className="InputEvent",ve.prototype.copy=function(){var t=new ve;return t.B=this.B,t.Qa=this.Qa,t.kt=this.kt,t.Ks=this.Ks,t},ve.prototype.toString=function(){var t="*"+this.name;return null!==this.subject&&(t+=":"+this.subject.toString()),null!==this.parameter&&(t+="("+this.parameter.toString()+")"),t},L.Object.defineProperties(ve.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},subject:{get:function(){return this.kt},set:function(t){this.kt=t}},parameter:{get:function(){return this.Ks},set:function(t){this.Ks=t}}}),ve.className="DiagramEvent",De.prototype.clear=function(){this.bp=this.cp=this.jp=this.kp=this.ip=this.B=this.bc=null},De.prototype.copy=function(){var t=new De;t.un=this.un,t.zs=this.zs,t.hf=this.hf,t.bc=this.bc,t.B=this.B,t.ip=this.ip;var e=this.kp;return t.kp=$t(e)&&"function"==typeof e.G?e.G():e,t.jp=$t(e=this.jp)&&"function"==typeof e.G?e.G():e,t.cp=$t(e=this.cp)&&"function"==typeof e.G?e.G():e,t.bp=$t(e=this.bp)&&"function"==typeof e.G?e.G():e,t},De.prototype.jb=function(t){t.classType===De&&(this.change=t)},De.prototype.toString=function(){var t="";return t=this.change===cr?t+"* ":this.change===Me?t+(null!==this.model?"!m":"!d"):t+(null!==this.model?"!m":"!d")+this.change,this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===cr?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=Pr(this.object)),null!==this.oldValue&&(t+="  old: "+Pr(this.oldValue)),null!==this.oldParam&&(t+=" "+this.oldParam),null!==this.newValue&&(t+="  new: "+Pr(this.newValue)),null!==this.newParam&&(t+=" "+this.newParam)),t},De.prototype.H=function(t){return t?this.oldValue:this.newValue},De.prototype.oA=function(t){return t?this.oldParam:this.newParam},De.prototype.canUndo=function(){return null!==this.model||null!==this.diagram},De.prototype.undo=function(){this.canUndo()&&(null!==this.model?this.model.changeState(this,!0):null!==this.diagram&&this.diagram.changeState(this,!0))},De.prototype.canRedo=function(){return null!==this.model||null!==this.diagram},De.prototype.redo=function(){this.canRedo()&&(null!==this.model?this.model.changeState(this,!1):null!==this.diagram&&this.diagram.changeState(this,!1))},L.Object.defineProperties(De.prototype,{model:{get:function(){return this.bc},set:function(t){this.bc=t}},diagram:{get:function(){return this.B},set:function(t){this.B=t}},change:{get:function(){return this.un},set:function(t){this.un=t}},modelChange:{get:function(){return this.zs},set:function(t){this.zs=t}},propertyName:{get:function(){return this.hf},set:function(t){this.hf=t}},isTransactionFinished:{get:function(){return this.un===cr&&("CommittedTransaction"===this.hf||"FinishedUndo"===this.hf||"FinishedRedo"===this.hf)}},object:{get:function(){return this.ip},set:function(t){this.ip=t}},oldValue:{get:function(){return this.kp},set:function(t){this.kp=t}},oldParam:{get:function(){return this.jp},set:function(t){this.jp=t}},newValue:{get:function(){return this.cp},set:function(t){this.cp=t}},newParam:{get:function(){return this.bp},set:function(t){this.bp=t}}}),De.prototype.redo=De.prototype.redo,De.prototype.canRedo=De.prototype.canRedo,De.prototype.undo=De.prototype.undo,De.prototype.canUndo=De.prototype.canUndo,De.prototype.getParam=De.prototype.oA,De.prototype.getValue=De.prototype.H,De.prototype.clear=De.prototype.clear;var cr=new it(De,"Transaction",-1),Me=new it(De,"Property",0),rn=new it(De,"Insert",1),be=new it(De,"Remove",2);function Mn(){this.v=(new lt).freeze(),this.Qa="",this.l=!1}function Le(){this.fv=new nt,this.nd=!1,this.I=(new lt).freeze(),this.Wd=-1,this.v=999,this.se=!1,this.Mr=null,this.Yi=0,this.l=!1,this.ye=(new lt).freeze(),this.Ul=new lt,this.Ou=!0,this.Vu=this.ls=this.Zu=this.Yu=!1}function Es(t,e,n){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&Ln("Ending transaction without having started a transaction: "+n);var o=1===t.transactionLevel,a=t.currentTransaction;o&&e&&(t.isInternalTransaction||t.Cb("CommittingTransaction",n,a));var u=0;if(0<t.transactionLevel&&(t.Yi--,t.isEnabled)){var h=t.ye.count;0<h&&(""===n&&(n=t.ye.J(0)),t.ye.ea(),t.ye.cb(h-1),t.ye.freeze()),0<(h=t.Ul.count)&&(u=t.Ul.J(h-1),t.Ul.cb(h-1))}if(o){if(e){if(t.ls=!1,null===a&&""!==n&&(a=t.currentTransaction),t.isEnabled&&null!==a){for(a.isComplete||(a.isComplete=!0,a.name=n),(e=t.history).ea(),o=e.count-1;o>t.historyIndex;o--)null!==(u=e.J(o))&&u.clear(),e.cb(o),t.ls=!0;0<=(o=t.maxHistoryLength)&&(0===o?e.clear():e.count>=o&&(null!==(u=e.J(0))&&u.clear(),e.cb(0),t.Wd--)),0===o||0!==e.count&&e.get(e.count-1)===a||(e.add(a),t.Wd++),e.freeze()}t.isInternalTransaction||t.Cb("CommittedTransaction",n,a)}else{t.se=!0;try{t.isEnabled&&null!==a&&(a.isComplete=!0,a.undo())}finally{t.isInternalTransaction||t.Cb("RolledBackTransaction",n,a),t.se=!1}null!==a&&a.clear()}return t.Mr=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&null!==a){for(t=u,a=(n=a.changes).count-1;a>=t;a--)null!==(e=n.J(a))&&e.undo(),n.ea(),n.cb(a);n.freeze()}return!1}function Rt(){wn(this),this.B=Ja,this.Qa="",this.nd=!0,this.Uc=!1,this.jx=null,this.lz=new Qn,this.vt=-1}function Fe(){Rt.call(this),this.name="ToolManager",this.Dc=new lt,this.Vc=new lt,this.Od=new lt,this.T=this.Ja=850,this.v=new Nt(2,2).ca(),this.eb=5e3,this.Ka=to,this.I=id,this.Lr=this.l=null,this.ik=-1}function ea(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}De.className="ChangedEvent",De.Transaction=cr,De.Property=Me,De.Insert=rn,De.Remove=be,Mn.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(void 0!==t&&0<t){t=this.changes.count;for(var n=0;n<t;n++){var o=this.changes.J(n);null!==o&&(e+="\n  "+o.toString())}}return e},Mn.prototype.clear=function(){var t=this.changes;t.ea();for(var e=t.count-1;0<=e;e--){var n=t.J(e);null!==n&&n.clear()}t.clear(),t.freeze()},Mn.prototype.canUndo=function(){return this.isComplete},Mn.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.J(t);null!==e&&e.undo()}},Mn.prototype.canRedo=function(){return this.isComplete},Mn.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var n=this.changes.J(e);null!==n&&n.redo()}},Mn.prototype.mw=function(){if(this.isComplete){var t=this.changes;t.ea();for(var e=new Et,n=0;n<t.count;n++){var o=t.J(n);if(null!==o&&o.change===Me&&o.object){var a=e.get(o.object);a||(a=new Et,e.set(o.object,a));var u=a.get(o.propertyName);null===u?a.set(o.propertyName,-1):(0<u&&t.Rc(u,null),a.set(o.propertyName,n))}}for(n=e=0;n<t.count;n++)null!==(o=t.J(n))&&(n>e&&t.Rc(e,o),e++);for(;t.length>e;)t.pop();t.freeze()}},L.Object.defineProperties(Mn.prototype,{changes:{get:function(){return this.v}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},isComplete:{get:function(){return this.l},set:function(t){this.l=t}}}),Mn.prototype.optimize=Mn.prototype.mw,Mn.prototype.redo=Mn.prototype.redo,Mn.prototype.canRedo=Mn.prototype.canRedo,Mn.prototype.undo=Mn.prototype.undo,Mn.prototype.canUndo=Mn.prototype.canUndo,Mn.prototype.clear=Mn.prototype.clear,Mn.className="Transaction",Le.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var n=this.nestedTransactionNames.count,o=0;o<n;o++)0<o&&(e+=" "),e+=this.nestedTransactionNames.J(o);if(e+="]",void 0!==t&&0<t)for(n=this.history.count,o=0;o<n;o++)e+="\n "+this.history.J(o).toString(t-1);return e},Le.prototype.clear=function(){var t=this.history;t.ea();for(var e=t.count-1;0<=e;e--){var n=t.J(e);null!==n&&n.clear()}t.clear(),this.Wd=-1,t.freeze(),this.se=!1,this.Mr=null,this.Yi=0,this.ye.ea(),this.ye.clear(),this.ye.freeze(),this.Ul.clear(),this.Vu=this.ls=this.Zu=this.Yu=!1},Le.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},(D=Le.prototype).Wx=function(t){this.fv.add(t)},D.Qy=function(t){this.fv.remove(t)},D.xa=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.isUndoingRedoing)return!1;!0===this.Ou&&(this.Ou=!1,this.Yi++,this.isInternalTransaction||this.Cb("StartingFirstTransaction",t,this.currentTransaction),0<this.Yi&&this.Yi--),this.isEnabled&&(this.ye.ea(),this.ye.add(t),this.ye.freeze(),this.Ul.add(null===this.currentTransaction?0:this.currentTransaction.changes.count)),this.Yi++;var e=1===this.transactionLevel;return e&&(this.isInternalTransaction||this.Cb("StartedTransaction",t,this.currentTransaction)),e},D.Wa=function(t){return void 0===t&&(t=""),Es(this,!0,t)},D.Kf=function(){return Es(this,!1,"")},Le.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!(null===t||!t.canUndo())},Le.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.se=!0,this.Cb("StartingUndo","Undo",t),this.Wd--,t.undo()}catch(e){Ln("undo error: "+e.toString())}finally{this.Cb("FinishedUndo","Undo",t),this.se=!1}}},Le.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!(null===t||!t.canRedo())},Le.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.se=!0,this.Cb("StartingRedo","Redo",t),this.Wd++,t.redo()}catch(e){Ln("redo error: "+e.toString())}finally{this.Cb("FinishedRedo","Redo",t),this.se=!1}}},Le.prototype.Cb=function(t,e,n){void 0===n&&(n=null);var o=new De;for(o.change=cr,o.propertyName=t,o.object=n,o.oldValue=e,t=this.models;t.next();)o.model=e=t.value,e.zt(o)},Le.prototype.$v=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;null===e&&(this.Mr=e=new Mn);var n=t.copy();(e=e.changes).ea(),e.add(n),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.Ou&&(null!==(t=t.diagram)&&!1===t.pj||Ln("Change not within a transaction: "+n.toString()))}},Le.prototype.skipsEvent=function(t){if(null===t||0>t.change.value)return!0;if(null===(t=t.object))return!1;if(void 0!==t.layer){if(null!==(t=t.layer)&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},L.Object.defineProperties(Le.prototype,{models:{get:function(){return this.fv.iterator}},isEnabled:{get:function(){return this.nd},set:function(t){this.nd=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.J(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.J(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.se}},history:{get:function(){return this.I}},maxHistoryLength:{get:function(){return this.v},set:function(t){this.v=t}},historyIndex:{get:function(){return this.Wd}},currentTransaction:{get:function(){return this.Mr}},transactionLevel:{get:function(){return this.Yi}},isInTransaction:{get:function(){return 0<this.Yi}},checksTransactionLevel:{get:function(){return this.l},set:function(t){this.l=t}},nestedTransactionNames:{get:function(){return this.ye}},isPendingClear:{get:function(){return this.Yu},set:function(t){this.Yu=t}},isPendingUnmodified:{get:function(){return this.Zu},set:function(t){this.Zu=t}},isInternalTransaction:{get:function(){return this.Vu},set:function(t){this.Vu=t}},isJustDiscarded:{get:function(){return this.ls}}}),Le.prototype.handleChanged=Le.prototype.$v,Le.prototype.redo=Le.prototype.redo,Le.prototype.undo=Le.prototype.undo,Le.prototype.canUndo=Le.prototype.canUndo,Le.prototype.rollbackTransaction=Le.prototype.Kf,Le.prototype.commitTransaction=Le.prototype.Wa,Le.prototype.startTransaction=Le.prototype.xa,Le.prototype.removeModel=Le.prototype.Qy,Le.prototype.addModel=Le.prototype.Wx,Le.prototype.clear=Le.prototype.clear,Le.className="UndoManager",Rt.prototype.toString=function(){return""!==this.name?this.name+" Tool":Va(this.constructor)},Rt.prototype.updateAdornments=function(){},Rt.prototype.canStart=function(){return this.isEnabled},Rt.prototype.doStart=function(){},Rt.prototype.doActivate=function(){this.isActive=!0},Rt.prototype.doDeactivate=function(){this.isActive=!1},Rt.prototype.doStop=function(){},Rt.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Rt.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Rt.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Rt.prototype.doMouseMove=function(){},Rt.prototype.doMouseUp=function(){this.stopTool()},Rt.prototype.doMouseWheel=function(){},Rt.prototype.canStartMultiTouch=function(){return!0},Rt.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,n=e.Gq(0,A.allocAt(NaN,NaN)),o=e.Gq(1,A.allocAt(NaN,NaN));if(n.u()&&o.u()&&(this.doCancel(),t.Bm("hasGestureZoom"))){t.Wl=t.scale;var a=o.x-n.x,u=o.y-n.y;t.rv=Math.sqrt(a*a+u*u),e.bubbles=!1}A.free(n),A.free(o)},Rt.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,n=e.Gq(0,A.allocAt(NaN,NaN)),o=e.Gq(1,A.allocAt(NaN,NaN));if(n.u()&&o.u()&&(this.doCancel(),t.Bm("hasGestureZoom"))){var a=o.x-n.x,u=o.y-n.y;u=Math.sqrt(a*a+u*u)/t.rv,a=new A((Math.min(o.x,n.x)+Math.max(o.x,n.x))/2,(Math.min(o.y,n.y)+Math.max(o.y,n.y))/2);var h=t.commandHandler;if((u*=t.Wl)!==t.scale&&h.canResetZoom(u)){var f=t.zoomPoint;t.zoomPoint=a,h.resetZoom(u),t.zoomPoint=f}e.bubbles=!1}A.free(n),A.free(o)},Rt.prototype.doKeyDown=function(){"Esc"===this.diagram.lastInput.key&&this.doCancel()},Rt.prototype.doKeyUp=function(){},Rt.prototype.xa=function(t){return void 0===t&&(t=this.name),this.transactionResult=null,this.diagram.xa(t)},Rt.prototype.Kg=function(){var t=this.diagram;return null===this.transactionResult?t.Kf():t.Wa(this.transactionResult)},Rt.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,n=t.zm(e.documentPoint,!1);if(null!==n){if(gu?e.meta:e.control){for(t.R("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!e.isSelected),t.R("ChangedSelection",t.selection)}else if(e.shift){if(!n.isSelected){for(t.R("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!0),t.R("ChangedSelection",t.selection)}}else if(!n.isSelected){for(e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&t.select(e)}}else!e.left||(gu?e.meta:e.control)||e.shift||t.clearSelection()}},Rt.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(a){return!a.layer.isTemporary});var n=this.diagram,o=n.lastInput;return t=n.Vb(o.documentPoint,t,e),o.targetObject=t,function uM(t,e,n){if(e.handled=!1,null===t||t.Ig()){var o=0;e.left?o=1===e.clickCount?1:2===e.clickCount?2:1:e.right&&1===e.clickCount&&(o=3);var a="ObjectSingleClicked";if(null!==t){switch(o){case 1:a="ObjectSingleClicked";break;case 2:a="ObjectDoubleClicked";break;case 3:a="ObjectContextClicked"}0!==o&&n.R(a,t)}else{switch(o){case 1:a="BackgroundSingleClicked";break;case 2:a="BackgroundDoubleClicked";break;case 3:a="BackgroundContextClicked"}0!==o&&n.R(a)}if(null!==t)for(;null!==t;){switch(n=null,o){case 1:n=t.click;break;case 2:n=t.doubleClick?t.doubleClick:t.click;break;case 3:n=t.contextClick}if(null!==n&&(n(e,t),e.handled))break;t=t.panel}else{switch(t=null,o){case 1:t=n.click;break;case 2:t=n.doubleClick?n.doubleClick:n.click;break;case 3:t=n.contextClick}null!==t&&t(e)}}}(t,o,n),o.handled},Rt.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(!0!==t.animationManager.sc){var n=t.skipsUndoManager;t.skipsUndoManager=!0;var o=t.viewportBounds.$(e.documentPoint)?t.Vb(e.documentPoint,null,null):null;e.targetObject=o;var a=!1;if(o!==t.Ej){var u=t.Ej,h=u;for(t.Ej=o,this.doCurrentObjectChanged(u,o),e.handled=!1;null!==u;){var f=u.mouseLeave;if(null!==f&&(o===u||null!==o&&o.Hg(u)||(f(e,u,o),a=!0,e.handled)))break;u=u.panel}for(u=h,e.handled=!1;null!==o&&(null===(h=o.mouseEnter)||!(u===o||null!==u&&u.Hg(o)||(h(e,o,u),a=!0,e.handled)));)o=o.panel;o=t.Ej}if(null!==o){for(u=o,h="";null!==u&&""===(h=u.cursor);)u=u.panel;for(t.currentCursor=h,e.handled=!1,u=o;null!==u&&(null===(o=u.mouseOver)||(o(e,u),a=!0,!e.handled));)u=u.panel}else t.currentCursor="",null!==(o=t.mouseOver)&&(o(e),a=!0);a&&t.Eb(),t.skipsUndoManager=n}},Rt.prototype.doCurrentObjectChanged=function(){},Rt.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,n=e.delta;if(0!==n&&t.documentBounds.u()){var o=t.commandHandler,a=t.toolManager.mouseWheelBehavior;if(null!==o&&(a===ch&&!e.shift||a===to&&e.control))(0<n?o.canIncreaseZoom():o.canDecreaseZoom())&&(a=t.zoomPoint,t.zoomPoint=e.viewPoint,0<n?o.increaseZoom():o.decreaseZoom(),t.zoomPoint=a),e.bubbles=!1;else if(a===ch&&e.shift||a===to&&!e.control){o=t.position.copy();var u=0<n?n:-n,h=e.event,f=h.deltaMode;if(a=h.deltaX,h=h.deltaY,(lh||Ua||zy)&&(f=1,0<a&&(a=3),0>a&&(a=-3),0<h&&(h=3),0>h&&(h=-3)),void 0===f||void 0===a||void 0===h||0===a&&0===h||e.shift)!e.shift&&t.allowVerticalScroll?t.scroll("pixel",0<n?"up":"down",u=3*u*t.scrollVerticalLineChange):e.shift&&t.allowHorizontalScroll&&t.scroll("pixel",0<n?"left":"right",u=3*u*t.scrollHorizontalLineChange);else{switch(f){case 0:default:n="pixel";break;case 1:n="line";break;case 2:n="page"}0!==a&&t.allowHorizontalScroll&&(0<(a*=t.scrollHorizontalLineChange/16)?t.scroll(n,"left",-a):t.scroll(n,"right",a)),0!==h&&t.allowVerticalScroll&&(0<(h*=t.scrollVerticalLineChange/16)?t.scroll(n,"up",-h):t.scroll(n,"down",h))}t.position.w(o)||(e.bubbles=!1)}}},Rt.prototype.standardWaitAfter=function(t,e){void 0===e&&(e=this.diagram.lastInput),this.cancelWaitAfter();var n=this,o=e.clone(this.lz);this.vt=he(function(){n.doWaitAfter(o)},t)},Rt.prototype.cancelWaitAfter=function(){-1!==this.vt&&U.clearTimeout(this.vt),this.vt=-1},Rt.prototype.doWaitAfter=function(){},Rt.prototype.findToolHandleAt=function(t,e){return null===(t=this.diagram.Vb(t,function(n){for(;null!==n&&!(n.panel instanceof Gt);)n=n.panel;return n}))?null:t.part.category===e?t:null},Rt.prototype.isBeyondDragSize=function(t,e){var n=this.diagram;void 0===t&&(t=n.firstInput.viewPoint),void 0===e&&(e=n.lastInput.viewPoint);var o=n.toolManager.dragSize,a=o.width;return o=o.height,n.firstInput.isTouchEvent&&(a+=6,o+=6),Math.abs(e.x-t.x)>a||Math.abs(e.y-t.y)>o},L.Object.defineProperties(Rt.prototype,{diagram:{get:function(){return this.B},set:function(t){t instanceof V&&(this.B=t)}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},isEnabled:{get:function(){return this.nd},set:function(t){this.nd=t}},isActive:{get:function(){return this.Uc},set:function(t){this.Uc=t}},transactionResult:{get:function(){return this.jx},set:function(t){this.jx=t}}}),Rt.prototype.stopTransaction=Rt.prototype.Kg,Rt.prototype.startTransaction=Rt.prototype.xa,Rt.className="Tool",Y(Fe,Rt),Fe.prototype.initializeStandardTools=function(){},Fe.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof Gt&&this.Lr===t){var n=e.adornedObject;(null!==t?n.part===t:null===n)?this.showToolTip(e,n):this.hideToolTip()}},Fe.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===eo&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===rd)return void(e.bubbles=!0);if(this.gestureBehavior===eo)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomStart()}for(var n=this.mouseDownTools.length,o=0;o<n;o++){var a=this.mouseDownTools.J(o);if(a.diagram=this.diagram,a.canStart())return t.doFocus(),t.currentTool=a,void(t.currentTool===a&&(a.isActive||a.doActivate(),a.doMouseDown()))}1===t.lastInput.button&&(this.mouseWheelBehavior===to?this.mouseWheelBehavior=ch:this.mouseWheelBehavior===ch&&(this.mouseWheelBehavior=to)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},Fe.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===rd)return void(e.bubbles=!0);if(this.gestureBehavior===eo)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomMove()}if(this.isActive)for(var n=this.mouseMoveTools.length,o=0;o<n;o++){var a=this.mouseMoveTools.J(o);if(a.diagram=this.diagram,a.canStart())return t.doFocus(),t.currentTool=a,void(t.currentTool===a&&(a.isActive||a.doActivate(),a.doMouseMove()))}ea(this,t),null===(t=e.event)||"mousemove"!==t.type&&"pointermove"!==t.type&&t.cancelable||(e.bubbles=!0)},Fe.prototype.doCurrentObjectChanged=function(t,e){null===(t=this.currentToolTip)||null!==e&&t instanceof Gt&&(e===t||e.Hg(t))||this.hideToolTip()},Fe.prototype.doWaitAfter=function(t){var e=this.diagram;e.ta&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&((t=t.copy()).button=2,t.buttons=2,e.lastInput=t,e.hk=!0,e.doMouseUp()))},Fe.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.Vb(e.documentPoint,null,null));var n=e.targetObject;if(null!==n)for(e.handled=!1;null!==n&&(null===(t=this.isActive?n.mouseHold:n.mouseHover)||(t(e,n),!e.handled));)n=n.panel;else null!==(n=this.isActive?t.mouseHold:t.mouseHover)&&n(e)},Fe.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(null===e.targetObject&&(e.targetObject=t.Vb(e.documentPoint,null,null)),null!==(e=e.targetObject)){if(!((t=this.currentToolTip)instanceof Gt)||e!==t&&!e.Hg(t)){for(;null!==e;){if(null!==(t=e.toolTip))return void this.showToolTip(t,e);e=e.panel}this.hideToolTip()}}else null!==(e=t.toolTip)?this.showToolTip(e,null):this.hideToolTip()},Fe.prototype.showToolTip=function(t,e){var n=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof Gt){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category="ToolTip",null!==t.placeholder&&(t.placeholder.scale=n.scale);var o=t.diagram;null!==o&&o!==n&&o.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.Ta(),this.positionToolTip(t,e)}else t instanceof jn&&t!==this.currentToolTip&&t.show(e,n,this);if(this.currentToolTip=t,-1!==this.ik&&(U.clearTimeout(this.ik),this.ik=-1),0<(t=this.toolTipDuration)&&t!==1/0){var a=this;this.ik=he(function(){a.hideToolTip()},t)}},Fe.prototype.positionToolTip=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),o=t.measuredBounds,a=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=o.width),n.x+o.width>a.right&&(n.x-=o.width+5/e.scale),n.x<a.x&&(n.x=a.x),n.y=n.y+20/e.scale+o.height>a.bottom?n.y-(o.height+5/e.scale):n.y+20/e.scale,n.y<a.y&&(n.y=a.y),t.position=n}},Fe.prototype.hideToolTip=function(){-1!==this.ik&&(U.clearTimeout(this.ik),this.ik=-1);var t=this.diagram,e=this.currentToolTip;null!==e&&(e instanceof Gt?(t.remove(e),null!==this.Lr&&this.Lr.Jf(e.category),e.data=null,e.adornedObject=null):e instanceof jn&&null!==e.hide&&e.hide(t,this),this.currentToolTip=null)},Fe.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,n=0;n<e;n++){var o=this.mouseUpTools.J(n);if(o.diagram=this.diagram,o.canStart())return t.doFocus(),t.currentTool=o,void(t.currentTool===o&&(o.isActive||o.doActivate(),o.doMouseUp()))}t.doFocus(),this.doDeactivate()},Fe.prototype.doMouseWheel=function(){this.standardMouseWheel()},Fe.prototype.doKeyDown=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyDown()},Fe.prototype.doKeyUp=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyUp()},Fe.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,n=0;n<e;n++){var o=this.mouseDownTools.J(n);if(o.name===t)return o}for(e=this.mouseMoveTools.length,n=0;n<e;n++)if((o=this.mouseMoveTools.J(n)).name===t)return o;for(e=this.mouseUpTools.length,n=0;n<e;n++)if((o=this.mouseUpTools.J(n)).name===t)return o;return null},Fe.prototype.replaceTool=function(t,e){null!==e&&(e.diagram=this.diagram);for(var n=this.mouseDownTools.length,o=0;o<n;o++){var a=this.mouseDownTools.J(o);if(a.name===t)return null!==e?this.mouseDownTools.Rc(o,e):this.mouseDownTools.cb(o),a}for(n=this.mouseMoveTools.length,o=0;o<n;o++)if((a=this.mouseMoveTools.J(o)).name===t)return null!==e?this.mouseMoveTools.Rc(o,e):this.mouseMoveTools.cb(o),a;for(n=this.mouseUpTools.length,o=0;o<n;o++)if((a=this.mouseUpTools.J(o)).name===t)return null!==e?this.mouseUpTools.Rc(o,e):this.mouseUpTools.cb(o),a;return null},Fe.prototype.Xa=function(t,e,n){null!==e&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):null!==e&&n.add(e)},L.Object.defineProperties(Fe.prototype,{mouseWheelBehavior:{get:function(){return this.Ka},set:function(t){this.Ka=t}},gestureBehavior:{get:function(){return this.I},set:function(t){this.I=t}},currentToolTip:{get:function(){return this.l},set:function(t){this.l=t,this.Lr=null!==t&&t instanceof Gt?t.adornedPart:null}},mouseDownTools:{get:function(){return this.Dc}},mouseMoveTools:{get:function(){return this.Vc}},mouseUpTools:{get:function(){return this.Od}},hoverDelay:{get:function(){return this.Ja},set:function(t){this.Ja=t}},holdDelay:{get:function(){return this.T},set:function(t){this.T=t}},dragSize:{get:function(){return this.v},set:function(t){this.v=t.G()}},toolTipDuration:{get:function(){return this.eb},set:function(t){this.eb=t}}}),Fe.prototype.replaceStandardTool=Fe.prototype.Xa;var to=new it(Fe,"WheelScroll",0),ch=new it(Fe,"WheelZoom",1),fg=new it(Fe,"WheelNone",2),id=new it(Fe,"GestureZoom",3),eo=new it(Fe,"GestureCancel",4),rd=new it(Fe,"GestureNone",5);function ze(){Rt.call(this),this.name="Dragging",this.I=this.Vc=!0,this.v=this.eb=this.Ja=this.rg=null,this.Rn=this.Od=!1,this.im=new A(NaN,NaN),this.it=new A,this.Dc=!0,this.pl=100,this.Xg=[],this.mr=(new nt).freeze(),this.Ka=new Rl,this.Ao=null,this.T="copy",this.Vh="",this.Wh="no-drop"}function iv(t,e){if(t.dragsLink){var n=t.diagram;n.allowRelink&&(n.model.Bk()&&1===e.count&&e.first()instanceof Q?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.nk(),t.rg=n.toolManager.findTool("Relinking"),null===t.rg&&(t.rg=new Or,t.rg.diagram=n)):(t.draggedLink=null,t.rg=null))}}function rv(t){var e=t.diagram,n=e.skipsUndoManager;e.skipsUndoManager=!0,fM(t,e.lastInput,null),e.skipsUndoManager=n,t.Xg.length=0}function hM(){var t=qn;yu(t),Yw(t);var e=t.diagram;t.im.u()&&(e.position=t.im),e.Lf()}function $w(t,e){if(null===t.copiedParts){var n=t.diagram;if((!e||!n.isReadOnly&&!n.isModelReadOnly)&&null!==t.draggedParts){var o=n.undoManager;for(o.isEnabled&&o.isInTransaction?null!==o.currentTransaction&&0<o.currentTransaction.changes.count&&(n.undoManager.Kf(),n.xa("Drag")):Yw(t),n.skipsUndoManager=!e,n.partManager.addsToTemporaryLayer=!e,t.startPoint=n.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Mf():n.selection,e=n.tk(e,n,!0),n=new Et,o=t.draggedParts.iterator;o.next();){var a=o.key;if(a.Pc()&&a.canCopy()){var u=e.H(a);null!==u&&(u.location=a.location,u.Ta(),n.add(u,t.Cd(u.location)))}}for(e=e.iterator;e.next();)(o=e.value)instanceof Q&&o.canCopy()&&n.add(o,t.Cd());t.copiedParts=n,iv(t,n.Mf()),null!==t.draggedLink&&Hl(n=t.draggedLink,t.startPoint.x-((e=n.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2))}}}function yu(t){var e=t.diagram;if(null!==t.copiedParts&&(e.gu(t.copiedParts.Mf(),!1),t.copiedParts=null,null!==t.draggedParts))for(var n=t.draggedParts.iterator;n.next();)n.key instanceof Q&&(n.value.point=new A(0,0));e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function cM(t){if(null!==t.draggedLink){if(t.dragsLink&&null!==t.rg){var e=t.rg;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode)}t.draggedLink=null,t.rg=null}}function Oc(t,e,n){var o=t.diagram,a=t.startPoint,u=A.alloc();u.assign(o.lastInput.documentPoint),t.moveParts(e,u.ge(a),n),A.free(u),!0===o.Je("temporaryPixelRatio")&&null===o.xh&&30<o.Zx&&(Cu(o),o.Yq())}function Yw(t){if(null!==t.draggedParts){for(var e=t.diagram,n=t.draggedParts.iterator;n.next();){var o=n.key;o.Pc()&&(o.location=n.value.point)}for(n=t.draggedParts.iterator;n.next();)if((o=n.key)instanceof Q&&o.suspendsRouting){var a=n.value.point;t.draggedParts.add(o,t.Cd()),Hl(o,-a.x,-a.y)}e.jd()}}function Ww(t,e){var n=t.diagram;t.dragsLink&&(null!==t.draggedLink&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),gM(t,!1));var o=t.findDragOverObject(e),a=n.lastInput;a.targetObject=o,t.doUpdateCursor(o);var u=n.skipsUndoManager,h=!1;try{if(n.skipsUndoManager=!0,h=fM(t,a,o),!t.isActive&&null===qn)return;var f=null!==o?o.part:null;if(null===f||n.handlesDragDropForTopLevelParts&&f.isTopLevel&&!(f instanceof Pt)){var p=n.mouseDragOver;null!==p&&(p(a),h=!0)}if(!t.isActive&&null===qn||(t.doDragOver(e,o),!t.isActive&&null===qn))return}finally{n.skipsUndoManager=u,h&&n.jd()}t.Ao=o,n.isReadOnly||!n.allowMove&&!n.allowCopy||!n.allowHorizontalScroll&&!n.allowVerticalScroll||n.Ft(a.viewPoint)}function fM(t,e,n){var o=!1,a=t.Xg.length,u=0<a?t.Xg[0]:null;if(n===u)return!1;e.handled=!1;for(var h=0;h<a;h++){var f=t.Xg[h],p=f.mouseDragLeave;if(null!==p&&(p(e,f,n),o=!0,e.handled))break}if(t.Xg.length=0,!t.isActive&&null===qn||null===n)return o;for(e.handled=!1,a=n;null!==a;)t.Xg.push(a),a=dM(a);for(a=t.Xg.length,n=0;n<a&&(null===(f=(h=t.Xg[n]).mouseDragEnter)||(f(e,h,u),o=!0,!e.handled));n++);return o}function dM(t){var e=t.panel;return null!==e?e:t instanceof wt&&!(t instanceof Pt)&&null!==(t=t.containingGroup)&&t.handlesDragDropForMembers?t:null}function pM(t,e,n){var o=t.rg;if(null===o)return null;var a=t.diagram.Fg(e,o.portGravity,function(g){return o.findValidLinkablePort(g,n)});t=A.alloc();var u=1/0,h=null;for(a=a.iterator;a.next();){var f=a.value;if(null!==f.part){var p=f.da(ie,t);(p=e.He(p))<u&&(h=f,u=p)}}return A.free(t),h}function gM(t,e){var n=t.draggedLink;if(null!==n&&!(2>n.pointsCount)){var o=t.diagram;if(!o.isReadOnly){var a=t.rg;if(null!==a){var u=null,h=null;null===n.fromNode&&null!==(u=pM(t,n.i(0),!1))&&(h=u.part);var f=null,p=null;null===n.toNode&&null!==(f=pM(t,n.i(n.pointsCount-1),!0))&&(p=f.part),a.isValidLink(h,u,p,f)?e?(n.defaultFromPoint=n.i(0),n.defaultToPoint=n.i(n.pointsCount-1),n.suspendsRouting=!1,n.fromNode=h,null!==u&&(n.fromPortId=u.portId),n.toNode=p,null!==f&&(n.toPortId=f.portId),n.fromPort!==o.Ly&&o.R("LinkRelinked",n,o.Ly),n.toPort!==o.My&&o.R("LinkRelinked",n,o.My)):Jw(a,h,u,p,f):Jw(a,null,null,null,null)}}}}function mM(t,e){var n=t.diagram;t.dragsLink&&gM(t,!0),rv(t);var o=t.findDragOverObject(e),a=n.lastInput;if(a.targetObject=o,null!==o){a.handled=!1;for(var u=o;null!==u;){var h=u.mouseDrop;if(null!==h&&(h(a,u),a.handled))break;ZE(t,a,u),u=dM(u)}}else null!==(u=n.mouseDrop)&&u(a);if(t.isActive||null!==qn){for(a=(t.copiedParts||t.draggedParts).iterator;a.next();)(u=a.key)instanceof ot&&u.linksConnected.each(function(f){f.suspendsRouting=!1});if(t.doDropOnto(e,o),t.isActive||null!==qn){for(t=z.alloc(),e=n.selection.iterator;e.next();)(o=e.value)instanceof ot&&JE(n,o,t);z.free(t)}}}function ZE(t,e,n){n=n.part,!(t=t.diagram).handlesDragDropForTopLevelParts||!n.isTopLevel||n instanceof Pt||null!==(n=t.mouseDrop)&&n(e)}function JE(t,e,n){var o=!1;if(e.getAvoidableRect(n),t.viewportBounds.Ge(n)&&(o=!0),0!==(t=t.Uv(n,function(a){return a.part},function(a){return a instanceof Q},!0,function(a){return a instanceof Q},o)).count)for(t=t.iterator;t.next();)!(n=t.value).Kd(e)&&n.isAvoiding&&n.Ua()}function dg(t,e,n,o){if(null===t.copiedParts){var a=t.diagram;if(!a.isReadOnly&&!a.isModelReadOnly){a.skipsUndoManager=!n,a.partManager.addsToTemporaryLayer=!n,t.startPoint=o.documentPoint,n=a.tk(e,a,!0);var u=z.alloc();a=o=1/0;for(var h=-1/0,f=-1/0,p=e.iterator;p.next();){var g=p.value;if(g.isVisible()){var y=g.location;g=y.x,y=y.y,isNaN(g)||isNaN(y)||(g<o&&(o=g),y<a&&(a=y),g>h&&(h=g),y>f&&(f=y))}}for(o===1/0?u.h(0,0,0,0):u.h(o,a,h-o,f-a),o=u.x+u.width/2,a=u.y+u.height/2,z.free(u),u=t.it,h=new Et,f=A.alloc(),p=e.iterator;p.next();)(g=p.value)instanceof Q&&g.canCopy()&&null!==(y=n.H(g))&&(y.points=g.points,Hl(y,u.x-o,u.y-a),y.suspendsRouting=!0,h.add(y,t.Cd()));for(e=e.iterator;e.next();)(g=e.value).Pc()&&g.canCopy()&&null!==(p=n.H(g))&&(f.h(u.x-(o-(g=g.location).x),u.y-(a-g.y)),p.location=f,p.Ta(),h.add(p,t.Cd(f)));A.free(f),t.copiedParts=h,iv(t,h.Mf()),null!==t.draggedLink&&Hl(n=t.draggedLink,t.startPoint.x-((e=n.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2))}}}Fe.className="ToolManager",Fe.WheelScroll=to,Fe.WheelZoom=ch,Fe.WheelNone=fg,Fe.GestureZoom=id,Fe.GestureCancel=eo,Fe.GestureNone=rd,Y(ze,Rt),ze.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.pl))&&null!==this.findDraggablePart()},ze.prototype.findDraggablePart=function(){var t=this.diagram;if(null===(t=t.zm(t.firstInput.documentPoint,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.containingGroup;return null!==t&&(t.canMove()||t.canCopy())?t:null},ze.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.zm(t.firstInput.documentPoint,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,null===this.currentPart||this.currentPart.isSelected||(t.R("ChangingSelection",t.selection),e=t.lastInput,(gu?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.R("ChangedSelection",t.selection))}}},ze.prototype.doActivate=function(){var t=this.diagram;this.Ao=null,null===this.currentPart&&this.standardMouseSelect();var e=this.currentPart;null!==e&&(e.canMove()||e.canCopy())&&(qn=null,this.isActive=!0,this.im.set(t.position),iv(this,t.selection),this.Xg.length=0,t.animationManager.Cc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),t.mu=!0,!0===t.Je("temporaryPixelRatio")&&30<t.Zx&&Cu(t),Fg(t,this.draggedParts),this.xa("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Rn=!1,qn=this,od=this.diagram,this.doSimulatedDragOut()))},ze.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},ze.prototype.Cd=function(t){return new Ps(void 0===t?Ga:this.isGridSnapEnabled?new A(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3):t.copy())},ze.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(t.Lf(),rv(this),Eu(t,this.draggedParts),this.draggedParts=this.currentPart=this.Ao=null,this.Rn=this.isDragOutStarted=!1,0<bc.count){for(var e=bc,n=e.length,o=0;o<n;o++){var a=e.J(o);cM(a),yu(a),rv(a),a.diagram.Lf()}e.clear()}cM(this),this.im.h(NaN,NaN),qn=od=null,yu(this),t.isMouseCaptured=!1,t.currentCursor="",t.mu=!1,this.Kg(),dh(t,!0)},ze.prototype.doCancel=function(){yu(this),Yw(this);var t=this.diagram;this.im.u()&&(t.position=this.im),this.stopTool()},ze.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&("Esc"===e.key?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},ze.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()},ze.prototype.moveParts=function(t,e,n){void 0===n&&(n=!1);var o=this.diagram;null!==o&&bg(o,t,e,this.dragOptions,n)},ze.prototype.findDragOverObject=function(t){var e=this;return xv(this.diagram,t,null,function(n){return!(n=null===n||!!(null===(n=n.part)||n instanceof Gt||n.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(n)||e.copiedParts&&e.copiedParts.contains(n)))})},ze.prototype.doUpdateCursor=function(t){var e=this.diagram;this.Ao!==t&&(!this.diagram.currentTool.isActive||this.mayCopy()?e.currentCursor=this.copyCursor:this.mayMove()?e.currentCursor=this.moveCursor:this.mayDragOut()&&(e.currentCursor=this.nodropCursor))},ze.prototype.doDragOver=function(){},ze.prototype.doDropOnto=function(){},ze.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||null===this.currentPart||null===this.draggedParts||(this.mayCopy()?($w(this,!1),Fg(t,this.copiedParts),Oc(this,this.copiedParts,!1),Eu(t,this.copiedParts)):this.mayMove()?(yu(this),Oc(this,this.draggedParts,!0)):this.mayDragOut()?($w(this,!1),Oc(this,this.copiedParts,!1)):yu(this),Ww(this,t.lastInput.documentPoint))}},ze.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var n=this.mayCopy();if(n&&null!==this.copiedParts?(yu(this),$w(this,!0),Fg(t,this.copiedParts),Oc(this,this.copiedParts,!1),Eu(t,this.copiedParts),null!==this.copiedParts&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(a){a.isSelected=!0}))):(e=!0,yu(this),this.mayMove()&&(Oc(this,this.draggedParts,!0),Ww(this,t.lastInput.documentPoint))),this.Rn=!0,mM(this,t.lastInput.documentPoint),this.isActive){var o=n?this.copiedParts.Mf():this.draggedParts.Mf();this.copiedParts=null,e&&function Xw(t){if(null!==t.draggedParts)for(var e=t.draggedParts.iterator;e.next();){var n=e.key;n instanceof ot&&(null===(n=n.containingGroup)||null===n.placeholder||t.draggedParts.contains(n)||n.placeholder.o())}}(this),t.Oa(),Eu(t,this.draggedParts),this.transactionResult=n?"Copy":"Move",t.R(n?"SelectionCopied":"SelectionMoved",o)}this.stopTool(),n&&t.R("ChangedSelection",t.selection)}}},ze.prototype.simulatedMouseMove=function(t,e,n){if(null===qn)return!1;var o=qn.diagram;n instanceof V||(n=null);var a=od;return n!==a&&(null!==a&&a!==o&&(a.Lf(),qn.isDragOutStarted=!1,null!==(a=a.toolManager.findTool("Dragging"))&&a.doSimulatedDragLeave()),od=n,null!==n&&n!==o&&(hM(),null!==(a=n.toolManager.findTool("Dragging"))&&(bc.contains(a)||bc.add(a),a.doSimulatedDragEnter()))),!(null===n||n===o||!n.allowDrop||n.isReadOnly||!n.allowInsert||(null!==(o=n.toolManager.findTool("Dragging"))&&(null!==t&&(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.hr(e),n.lastInput.down=!1,n.lastInput.up=!1,o.doSimulatedDragOver()),0))},ze.prototype.simulatedMouseUp=function(t,e,n){if(null===qn)return!1;var o=od,a=qn.diagram;if(null===n)return qn.doCancel(),!0;if(n!==o){var u=o.toolManager.findTool("Dragging");if(null!==o&&o!==a&&null!==u)return o.Lf(),qn.isDragOutStarted=!1,u.doSimulatedDragLeave(),!1;od=n,null!==(o=n.toolManager.findTool("Dragging"))&&(hM(),bc.contains(o)||bc.add(o),o.doSimulatedDragEnter())}return n!==this.diagram&&(null!==t?(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)):null===e&&(e=new A),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.hr(e),n.lastInput.down=!1,n.lastInput.up=!0,null!==(t=n.toolManager.findTool("Dragging"))&&t.doSimulatedDrop(),null!==(t=qn)&&(n=t.mayCopy(),t.transactionResult=n?"Copy":"Move",t.stopTool()),!0)},ze.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(gu?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},ze.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},ze.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canMove())},ze.prototype.computeBorder=function(t,e,n){return this.Rn||null===this.draggedParts||this.draggedParts.contains(t)?null:n.assign(e)},ze.prototype.lA=function(){return qn},ze.prototype.mayDragIn=function(){var t=this.diagram;return!(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)&&!(null===qn||qn.diagram.model.dataFormat!==t.model.dataFormat)},ze.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.Cc(),Ns(t),t.animationManager.Cc(),null!==qn&&(qn.diagram.mu=!1),this.doUpdateCursor(t.grid)}},ze.prototype.doSimulatedDragLeave=function(){null!==qn&&qn.doSimulatedDragOut(),this.doCancel()},ze.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.rn=!0;var e=qn;if(null!==e&&null!==e.draggedParts){if(!this.mayDragIn())return;dg(this,e.draggedParts.Mf(),!1,t.firstInput),Oc(this,this.copiedParts,!1),Ww(this,t.lastInput.documentPoint)}t.animationManager.rn=!1},ze.prototype.doSimulatedDrop=function(){var t=this.diagram,e=qn;if(null!==e){var n=e.diagram;if(e.Rn=!0,yu(this),!this.mayDragIn())return;t.animationManager.rn=!0,t.R("ChangingSelection",t.selection),this.xa("Drop"),dg(this,e.draggedParts.Mf(),!0,t.lastInput),Oc(this,this.copiedParts,!1),null!==this.copiedParts&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(o){o.isSelected=!0})),mM(this,t.lastInput.documentPoint),t.Oa(),e=t.selection,null!==this.copiedParts?this.transactionResult="ExternalCopy":e=new nt,this.copiedParts=null,t.doFocus(),t.R("ExternalObjectsDropped",e,n),this.Kg(),t.R("ChangedSelection",t.selection)}t.animationManager.rn=!1},ze.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.mu=!1,t.currentCursor=this.mayCopy()||this.mayMove()?"":this.nodropCursor,this.Ao=null},ze.prototype.computeMove=function(t,e,n,o){return null!==(n=this.diagram)?n.computeMove(t,e,this.dragOptions,o):new A},L.Object.defineProperties(ze.prototype,{isCopyEnabled:{get:function(){return this.Vc},set:function(t){this.Vc=t}},copiesEffectiveCollection:{get:function(){return this.I},set:function(t){this.I=t}},dragOptions:{get:function(){return this.Ka},set:function(t){this.Ka=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.Dc},set:function(t){this.Dc=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.w(t)||(t=t.G(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.w(t)||(t=t.G(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.w(t)||(t=t.G(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.T},set:function(t){this.T=t}},moveCursor:{get:function(){return this.Vh},set:function(t){this.Vh=t}},nodropCursor:{get:function(){return this.Wh},set:function(t){this.Wh=t}},currentPart:{get:function(){return this.Ja},set:function(t){this.Ja=t}},copiedParts:{get:function(){return this.v},set:function(t){this.v=t}},draggedParts:{get:function(){return this.eb},set:function(t){this.eb=t}},draggingParts:{get:function(){return null!==this.copiedParts?this.copiedParts.Mf():null!==this.draggedParts?this.draggedParts.Mf():this.mr}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Od},set:function(t){this.Od=t}},startPoint:{get:function(){return this.it},set:function(t){this.it.w(t)||this.it.assign(t)}},delay:{get:function(){return this.pl},set:function(t){this.pl=t}}}),ze.prototype.getDraggingSource=ze.prototype.lA;var bc=null,qn=null,od=null;function _n(){Rt.call(this),this.Wh=100,this.Ka=!1,this.ni="pointer";var t=new Q,e=new At;e.isPanelMain=!0,e.stroke="blue",t.add(e),(e=new At).toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.hx=t,t=new ot,(e=new At).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Ae,t.add(e),t.selectable=!1,t.layerName="Tool",this.gx=t,this.l=e,t=new ot,(e=new At).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Ae,t.add(e),t.selectable=!1,t.layerName="Tool",this.ix=t,this.v=e,this.Vh=this.Od=this.Dc=this.eb=this.Vc=null,this.Ja=!0,this.dz=new Et,this.mr=this.Hi=this.ex=null}function ov(t,e,n,o){if(e===n)return!0;var a=e.fromNode;return!(null===a||!a.isLinkLabel||(o.add(a),!ov(t,a.labeledLink,n,o)))||!(null===(e=e.toNode)||!e.isLinkLabel||(o.add(e),!ov(t,e.labeledLink,n,o)))}function fr(t,e,n,o,a){if(e===n)return!0;if(null===e||null===n)return!1;for(var u=e.linksConnected;u.next();){var h=u.value;if(h!==o&&(!a||h.isTreeLink)&&h.toNode===e&&(h=h.fromNode)!==e&&fr(t,h,n,o,a))return!0}return!1}function sv(t,e,n,o,a){if(n===o)return!0;if(null===n||null===o||e.contains(n))return!1;e.add(n);for(var u=n.linksConnected;u.next();){var h=u.value;if(h!==a&&h.toNode===n&&(h=h.fromNode)!==n&&sv(t,e,h,o,a))return!0}return!1}function Kw(t,e,n,o,a){if(n===o)return!0;if(null===n||null===o||e.contains(n))return!1;e.add(n);for(var u=n.linksConnected;u.next();){var h=u.value;if(h!==a){var f=h.fromNode;if(h=h.toNode,(f=f===n?h:f)!==n&&Kw(t,e,f,o,a))return!0}}return!1}function Zi(){_n.call(this),this.name="Linking",this.T={},this.I=null,this.K=sd,this.cn=null}ze.className="DraggingTool",bc=new lt,qo("draggingTool",function(){return this.findTool("Dragging")},function(t){this.Xa("Dragging",t,this.mouseMoveTools)}),Fe.prototype.doCancel=function(){null!==qn&&qn.doCancel(),Rt.prototype.doCancel.call(this)},Y(_n,Rt),_n.prototype.doStop=function(){this.diagram.Lf(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},_n.prototype.copyPortProperties=function(t,e,n,o,a){if(null!==t&&null!==e&&null!==n&&null!==o){var u=e.Cf(),h=Nt.alloc();h.width=e.naturalBounds.width*u,h.height=e.naturalBounds.height*u,o.desiredSize=h,Nt.free(h),a?(o.toSpot=e.toSpot,o.toEndSegmentLength=e.toEndSegmentLength):(o.fromSpot=e.fromSpot,o.fromEndSegmentLength=e.fromEndSegmentLength),n.locationSpot=ie,u=A.alloc(),n.location=e.da(ie,u),A.free(u),o.angle=e.lj(),null!==this.portTargeted&&this.portTargeted(t,e,n,o,a)}},_n.prototype.setNoTargetPortProperties=function(t,e,n){null!==e&&(e.desiredSize=Ae,e.fromSpot=gi,e.toSpot=gi),null!==t&&(t.location=this.diagram.lastInput.documentPoint),null!==this.portTargeted&&this.portTargeted(null,null,t,e,n)},_n.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},_n.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort&&this.targetPort.part instanceof ot){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Ft(t.lastInput.viewPoint)}},_n.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var n=t.part;if(!(n instanceof ot))return null;for(;null!==t;){var o=e?t.toLinkable:t.fromLinkable;if(!0===o&&(null!==t.portId||t instanceof ot)&&(e?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(!1===o)break;t=t.panel}return null},_n.prototype.findTargetPort=function(t){var e=this.diagram,n=e.lastInput.documentPoint,o=this.portGravity;0>=o&&(o=.1);var a=this,u=e.Fg(n,o,function(v){return a.findValidLinkablePort(v,t)},null,!0);for(o=1/0,e=null,u=u.iterator;u.next();){var h=u.value,f=h.part;if(f instanceof ot){var p=h.da(ie,A.alloc()),g=n.x-p.x,y=n.y-p.y;A.free(p),(p=g*g+y*y)<o&&(null!==(g=this.validPortsCache.H(h))?g&&(e=h,o=p):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,f,h)||!t&&this.isValidLink(f,h,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(h,!0),e=h,o=p):this.validPortsCache.add(h,!1))}}return null!==e&&(n=e.part)instanceof ot&&(null===n.layer||n.layer.allowLink)?e:null},_n.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.fromLinkable))return!1;var n=e.fromMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(null===(e=e.portId)&&(e=""),t.Cq(e).count>=n)return!1}return!0},_n.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.toLinkable))return!1;var n=e.toMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalToNode&&e===this.originalToPort)return!0;if(null===(e=e.portId)&&(e=""),t.Hd(e).count>=n)return!1}return!0},_n.prototype.isInSameNode=function(t,e){return null!==t&&null!==e&&(t===e||(e=e.part,null!==(t=t.part)&&t===e))},_n.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var n=t.part;if(!(n instanceof ot))return!1;null===(t=t.portId)&&(t="");var o=e.part;if(!(o instanceof ot))return!1;for(null===(e=e.portId)&&(e=""),e=o.Hd(e);e.next();)if((o=e.value).fromNode===n&&o.fromPortId===t)return!0;return!1},_n.prototype.isValidLink=function(t,e,n,o){if(!this.isValidFrom(t,e)||!this.isValidTo(n,o)||!(null===e||null===o||(e.fromLinkableSelfNode&&o.toLinkableSelfNode||!this.isInSameNode(e,o))&&(e.fromLinkableDuplicates&&o.toLinkableDuplicates||!this.isLinked(e,o)))||null!==this.originalLink&&(null!==t&&this.isLabelDependentOnLink(t,this.originalLink)||null!==n&&this.isLabelDependentOnLink(n,this.originalLink))||null!==t&&null!==n&&(null===t.data&&null!==n.data||null!==t.data&&null===n.data)||!this.isValidCycle(t,n,this.originalLink))return!1;if(null!==t){var a=t.linkValidation;if(null!==a&&!a(t,e,n,o,this.originalLink))return!1}return!(null!==n&&(a=n.linkValidation,null!==a&&!a(t,e,n,o,this.originalLink)))&&(null===(a=this.linkValidation)||a(t,e,n,o,this.originalLink))},_n.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var n=t.labeledLink;if(null===n)return!1;if(n===e)return!0;var o=new nt;return o.add(t),ov(this,n,e,o)},_n.prototype.isValidCycle=function(t,e,n){if(void 0===n&&(n=null),null===t||null===e)return this.isUnconnectedLinkValid;var o=this.diagram.validCycle;if(o!==vh){if(o===mx){if(null!==(o=n||this.temporaryLink)&&!o.isTreeLink)return!0;for(o=e.linksConnected;o.next();){var a=o.value;if(a!==n&&a.isTreeLink&&a.toNode===e)return!1}return!fr(this,t,e,n,!0)}if(o===DM){if(null!==(o=n||this.temporaryLink)&&!o.isTreeLink)return!0;for(o=t.linksConnected;o.next();)if((a=o.value)!==n&&a.isTreeLink&&a.fromNode===t)return!1;return!fr(this,t,e,n,!0)}if(o===Uc)return t===e?t=!0:((o=new nt).add(e),t=sv(this,o,t,e,n)),!t;if(o===Nv)return!fr(this,t,e,n,!1);if(o===gx)return t===e?t=!0:((o=new nt).add(e),t=Kw(this,o,t,e,n)),!t}return!0},L.Object.defineProperties(_n.prototype,{portGravity:{get:function(){return this.Wh},set:function(t){0<=t&&(this.Wh=t)}},isUnconnectedLinkValid:{get:function(){return this.Ka},set:function(t){this.Ka=t}},linkingCursor:{get:function(){return this.ni},set:function(t){this.ni=t}},temporaryLink:{get:function(){return this.hx},set:function(t){this.hx=t}},temporaryFromNode:{get:function(){return this.gx},set:function(t){(this.gx=t)&&(this.l=t.port)}},temporaryFromPort:{get:function(){return this.l},set:function(t){if(null!==this.l){var e=this.l.panel;if(null!==e){var n=e.W.indexOf(this.l);e.cb(n),e.wb(n,t)}}this.l=t}},temporaryToNode:{get:function(){return this.ix},set:function(t){(this.ix=t)&&(this.v=t.port)}},temporaryToPort:{get:function(){return this.v},set:function(t){if(null!==this.v){var e=this.v.panel;if(null!==e){var n=e.W.indexOf(this.v);e.cb(n),e.wb(n,t)}}this.v=t}},originalLink:{get:function(){return this.Vc},set:function(t){this.Vc=t}},originalFromNode:{get:function(){return this.eb},set:function(t){this.eb=t}},originalFromPort:{get:function(){return this.Dc},set:function(t){this.Dc=t}},originalToNode:{get:function(){return this.Od},set:function(t){this.Od=t}},originalToPort:{get:function(){return this.Vh},set:function(t){this.Vh=t}},isForwards:{get:function(){return this.Ja},set:function(t){this.Ja=t}},validPortsCache:{get:function(){return this.dz}},targetPort:{get:function(){return this.ex},set:function(t){this.ex=t}},linkValidation:{get:function(){return this.Hi},set:function(t){this.Hi=t}},portTargeted:{get:function(){return this.mr},set:function(t){this.mr=t}}}),_n.className="LinkingBaseTool",Y(Zi,_n),Zi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Vt()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},Zi.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(null===e&&(e=t.Vb(t.firstInput.documentPoint,null,null)),null===e||!((t=e.part)instanceof ot))return null;var n=this.direction;if(n===sd||n===av){var o=this.findValidLinkablePort(e,!1);if(null!==o||this.startObject===t&&this.findValidLinkablePort(o=t.port,!1))return this.isForwards=!0,o}return n!==sd&&n!==Zw||!(null!==(e=this.findValidLinkablePort(e,!0))||this.startObject===t&&this.findValidLinkablePort(e=t.port,!0))?null:(this.isForwards=!1,e)},Zi.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();null===e?this.stopTool():(this.xa(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(null===this.temporaryToNode||this.temporaryToNode.location.u()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,(e=this.originalFromPort.part)instanceof ot&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(null===this.temporaryFromNode||this.temporaryFromNode.location.u()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,(e=this.originalToPort.part)instanceof ot&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.Ua(),t.add(this.temporaryLink)),this.isActive=!0)},Zi.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.Kg()},Zi.prototype.doStop=function(){_n.prototype.doStop.call(this),this.startObject=null},Zi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.transactionResult=null,n=null,o=null,a=null,u=null;try{var h=this.targetPort=this.findTargetPort(this.isForwards);if(null!==h){var f=h.part;f instanceof ot&&(this.isForwards?(null!==this.originalFromNode&&(e=this.originalFromNode,n=this.originalFromPort),o=f,a=h):(e=f,n=h,null!==this.originalToNode&&(o=this.originalToNode,a=this.originalToPort)))}else this.isForwards?null!==this.originalFromNode&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,n=this.originalFromPort):null!==this.originalToNode&&this.isUnconnectedLinkValid&&(o=this.originalToNode,a=this.originalToPort);null!==e||null!==o?null!==(u=this.insertLink(e,n,o,a))?(null===h&&(this.isForwards?u.defaultToPoint=t.lastInput.documentPoint:u.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),u.isSelected=!0),this.transactionResult=this.name,t.R("LinkDrawn",u)):this.doNoLink(e,n,o,a):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),u&&t.allowSelect&&t.R("ChangedSelection",t.selection)}}},Zi.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(null===t)return!0;if(t instanceof Q)return t.isTreeLink;var e=this.diagram;return null===e||(t=e.partManager.getLinkCategoryForData(t),null===(e=e.partManager.findLinkTemplateForCategory(t))||e.isTreeLink)},Zi.prototype.insertLink=function(t,e,n,o){return this.diagram.partManager.insertLink(t,e,n,o)},Zi.prototype.doNoLink=function(){},L.Object.defineProperties(Zi.prototype,{archetypeLinkData:{get:function(){return this.T},set:function(t){this.T=t}},archetypeLabelNodeData:{get:function(){return this.I},set:function(t){this.I=t}},direction:{get:function(){return this.K},set:function(t){this.K=t}},startObject:{get:function(){return this.cn},set:function(t){this.cn=t}}});var sd=new it(Zi,"Either",0),av=new it(Zi,"ForwardsOnly",0),Zw=new it(Zi,"BackwardsOnly",0);function Or(){_n.call(this),this.name="Relinking";var t=new At;t.figure="Diamond",t.desiredSize=Pc,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.T=t,(t=new At).figure="Diamond",t.desiredSize=Pc,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.cn=t,this.I=null,this.Ix=new z}function Jw(t,e,n,o,a){null!==e?(t.copyPortProperties(e,n,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),null!==o?(t.copyPortProperties(o,a,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}function Re(){Rt.call(this),this.name="LinkReshaping";var t=new At;t.figure="Rectangle",t.desiredSize=ag,t.fill="lightblue",t.stroke="dodgerblue",this.v=t,(t=new At).figure="Diamond",t.desiredSize=Pc,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.I=t,this.T=3,this.vu=this.l=null,this.Jx=new A,this.Js=new lt}function vu(t,e,n,o,a,u){return u?Math.abs(e.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-o.y)<t.resegmentingDistance&&Math.abs(o.y-a.y)<t.resegmentingDistance:Math.abs(e.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-o.x)<t.resegmentingDistance&&Math.abs(o.x-a.x)<t.resegmentingDistance}Zi.className="LinkingTool",Zi.Either=sd,Zi.ForwardsOnly=av,Zi.BackwardsOnly=Zw,Y(Or,_n),Or.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Q){var e="RelinkFrom",n=null;if(t.isSelected&&!this.diagram.isReadOnly){var o=t.selectionObject;null!==o&&t.canRelinkFrom()&&t.actualBounds.u()&&t.isVisible()&&o.actualBounds.u()&&o.If()&&null===(n=t.wk(e))&&(n=this.makeAdornment(o,!1),t.Fh(e,n))}null===n&&t.Jf(e),e="RelinkTo",n=null,t.isSelected&&!this.diagram.isReadOnly&&null!==(o=t.selectionObject)&&t.canRelinkTo()&&t.actualBounds.u()&&t.isVisible()&&o.actualBounds.u()&&o.If()&&(null===(n=t.wk(e))?(n=this.makeAdornment(o,!0),t.Fh(e,n)):n.o()),null===n&&t.Jf(e)}},Or.prototype.makeAdornment=function(t,e){var n=new Gt;return n.type=X.Link,null!==(e=e?this.toHandleArchetype:this.fromHandleArchetype)&&n.add(e.copy()),n.adornedObject=t,n},Or.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Vt()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null!==e},Or.prototype.doActivate=function(){var t=this.diagram;if(null===this.originalLink){var e=this.handle;if(null===e&&null===(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"))&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null===e)return;var n=e.part;if(!(n instanceof Gt&&n.adornedPart instanceof Q))return;this.handle=e,this.isForwards=null===n||"RelinkTo"===n.category,this.originalLink=n.adornedPart}this.xa(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.Ix.set(this.originalLink.actualBounds),null!==this.originalLink&&0<this.originalLink.pointsCount&&(null===this.originalLink.fromNode&&(null!==this.temporaryFromPort&&(this.temporaryFromPort.desiredSize=xn),null!==this.temporaryFromNode&&(this.temporaryFromNode.location=this.originalLink.i(0))),null===this.originalLink.toNode&&(null!==this.temporaryToPort&&(this.temporaryToPort.desiredSize=xn),null!==this.temporaryToNode&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.Ua(),t.add(this.temporaryLink)),this.isActive=!0},Or.prototype.copyLinkProperties=function(t,e){if(null!==t&&null!==e){e.adjusting=t.adjusting,e.corner=t.corner;var n=t.curve;(n===Uu||n===rl)&&(n=Un),e.curve=n,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},Or.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.Kg()},Or.prototype.doStop=function(){_n.prototype.doStop.call(this),this.handle=null},Or.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,n=this.originalFromPort,o=this.originalToNode,a=this.originalToPort,u=this.originalLink;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort){var h=this.targetPort.part;h instanceof ot&&(this.isForwards?(o=h,a=this.targetPort):(e=h,n=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?a=o=null:n=e=null:u=null;null!==u?(this.reconnectLink(u,this.isForwards?o:e,this.isForwards?a:n,this.isForwards),null===this.targetPort&&(this.isForwards?u.defaultToPoint=t.lastInput.documentPoint:u.defaultFromPoint=t.lastInput.documentPoint,u.Ua()),t.allowSelect&&(u.isSelected=!0),this.transactionResult=this.name,t.R("LinkRelinked",u,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.Mq(this.Ix)}this.stopTool()},Or.prototype.reconnectLink=function(t,e,n,o){return n=null!==n&&null!==n.portId?n.portId:"",o?(t.toNode=e,t.toPortId=n):(t.fromNode=e,t.fromPortId=n),!0},Or.prototype.doNoRelink=function(){},L.Object.defineProperties(Or.prototype,{fromHandleArchetype:{get:function(){return this.T},set:function(t){this.T=t}},toHandleArchetype:{get:function(){return this.cn},set:function(t){this.cn=t}},handle:{get:function(){return this.I},set:function(t){if(null!==t&&!(t.part instanceof Gt))throw Error("new handle is not in an Adornment: "+t);this.I=t}}}),Or.className="RelinkingTool",qo("linkingTool",function(){return this.findTool("Linking")},function(t){this.Xa("Linking",t,this.mouseMoveTools)}),qo("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.Xa("Relinking",t,this.mouseDownTools)}),Y(Re,Rt),Re.prototype.Yv=function(t){return t&&t.Qs&&0!==t.Qs.value?t.Qs:lv},Re.prototype.Wm=function(t,e){t.Qs=e},Re.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Q){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.path;null!==n&&t.canReshape()&&t.actualBounds.u()&&t.isVisible()&&n.actualBounds.u()&&n.If()&&(null===(e=t.wk(this.name))||e.Fx!==t.pointsCount||e.Tx!==t.resegmentable)&&null!==(e=this.makeAdornment(n))&&(e.Fx=t.pointsCount,e.Tx=t.resegmentable,t.Fh(this.name,e))}null===e&&t.Jf(this.name)}},Re.prototype.makeAdornment=function(t){var e=t.part,n=e.pointsCount,o=e.isOrthogonal,a=null;if(null!==e.points&&1<n){(a=new Gt).type=X.Link,n=e.firstPickIndex;var u=e.lastPickIndex,h=o?1:0;if(e.resegmentable&&e.computeCurve()!==vr)for(var f=n+h;f<u-h;f++){var p=this.makeResegmentHandle(t,f);null!==p&&(p.segmentIndex=f,p.segmentFraction=.5,p.fromMaxLinks=999,a.add(p))}for(h=n+1;h<u;h++)if(null!==(f=this.makeHandle(t,h))){if(f.segmentIndex=h,h!==n)if(h===n+1&&o){p=e.i(n);var g=e.i(n+1);R.A(p.x,g.x)&&R.A(p.y,g.y)&&(g=e.i(n-1)),R.A(p.x,g.x)?(this.Wm(f,Lc),f.cursor="n-resize"):R.A(p.y,g.y)&&(this.Wm(f,wu),f.cursor="w-resize")}else h===u-1&&o?(p=e.i(u-1),g=e.i(u),R.A(p.x,g.x)&&R.A(p.y,g.y)&&(p=e.i(u+1)),R.A(p.x,g.x)?(this.Wm(f,Lc),f.cursor="n-resize"):R.A(p.y,g.y)&&(this.Wm(f,wu),f.cursor="w-resize")):h!==u&&(this.Wm(f,uv),f.cursor="move");a.add(f)}a.adornedObject=t}return a},Re.prototype.makeHandle=function(){var t=this.handleArchetype;return null===t?null:t.copy()},Re.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return null===t?null:t.copy()},Re.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowReshape||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},Re.prototype.doActivate=function(){var t=this.diagram;if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle){var e=this.handle.part.adornedPart;if(e instanceof Q){if(this.vu=e,t.isMouseCaptured=!0,this.xa(this.name),e.resegmentable&&999===this.handle.fromMaxLinks){var n=e.points.copy(),o=this.getResegmentingPoint();if(n.wb(this.handle.segmentIndex+1,o),e.isOrthogonal&&n.wb(this.handle.segmentIndex+1,o),e.points=n,e.Mb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return void this.doDeactivate()}this.Jx=e.i(this.handle.segmentIndex),this.Js=e.points.copy(),this.isActive=!0}}},Re.prototype.doDeactivate=function(){this.Kg(),this.vu=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},Re.prototype.doCancel=function(){var t=this.adornedLink;null!==t&&(t.points=this.Js),this.stopTool()},Re.prototype.getResegmentingPoint=function(){return this.handle.da(ie)},Re.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},Re.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),null!==(e=this.adornedLink)&&e.resegmentable){var n=this.handle.segmentIndex,o=e.i(n-1),a=e.i(n),u=e.i(n+1);if(e.isOrthogonal){if(n>e.firstPickIndex+1&&n<e.lastPickIndex-1){var h=e.i(n-2);if(Math.abs(o.x-a.x)<this.resegmentingDistance&&Math.abs(o.y-a.y)<this.resegmentingDistance&&(vu(this,h,o,a,u,!0)||vu(this,h,o,a,u,!1))){var f=e.points.copy();vu(this,h,o,a,u,!0)?(f.Rc(n-2,new A(h.x,(u.y+h.y)/2)),f.Rc(n+1,new A(u.x,(u.y+h.y)/2))):(f.Rc(n-2,new A((u.x+h.x)/2,h.y)),f.Rc(n+1,new A((u.x+h.x)/2,u.y))),f.cb(n),f.cb(n-1),e.points=f,e.Mb()}else h=e.i(n+2),Math.abs(a.x-u.x)<this.resegmentingDistance&&Math.abs(a.y-u.y)<this.resegmentingDistance&&(vu(this,o,a,u,h,!0)||vu(this,o,a,u,h,!1))&&(f=e.points.copy(),vu(this,o,a,u,h,!0)?(f.Rc(n-1,new A(o.x,(o.y+h.y)/2)),f.Rc(n+2,new A(h.x,(o.y+h.y)/2))):(f.Rc(n-1,new A((o.x+h.x)/2,o.y)),f.Rc(n+2,new A((o.x+h.x)/2,h.y))),f.cb(n+1),f.cb(n),e.points=f,e.Mb())}}else h=A.alloc(),R.Ph(o.x,o.y,u.x,u.y,a.x,a.y,h)&&h.He(a)<this.resegmentingDistance*this.resegmentingDistance&&((o=e.points.copy()).cb(n),e.points=o,e.Mb()),A.free(h)}t.Oa(),this.transactionResult=this.name,t.R("LinkReshaped",this.adornedLink,this.Js)}this.stopTool()},Re.prototype.reshape=function(t){var e=this.adornedLink;e.Sh();var n=this.handle.segmentIndex,o=this.Yv(this.handle);if(e.isOrthogonal)if(n===e.firstPickIndex+1)n=e.firstPickIndex+1,o===Lc?(e.L(n,e.i(n-1).x,t.y),e.L(n+1,e.i(n+2).x,t.y)):o===wu&&(e.L(n,t.x,e.i(n-1).y),e.L(n+1,t.x,e.i(n+2).y));else if(n===e.lastPickIndex-1)n=e.lastPickIndex-1,o===Lc?(e.L(n-1,e.i(n-2).x,t.y),e.L(n,e.i(n+1).x,t.y)):o===wu&&(e.L(n-1,t.x,e.i(n-2).y),e.L(n,t.x,e.i(n+1).y));else{var a=e.i(o=n),u=e.i(o-1),h=e.i(o+1);R.A(u.x,a.x)&&R.A(a.y,h.y)?(R.A(u.x,e.i(o-2).x)&&!R.A(u.y,e.i(o-2).y)?(e.m(o,t.x,u.y),n++,o++):e.L(o-1,t.x,u.y),R.A(h.y,e.i(o+2).y)&&!R.A(h.x,e.i(o+2).x)?e.m(o+1,h.x,t.y):e.L(o+1,h.x,t.y)):R.A(u.y,a.y)&&R.A(a.x,h.x)?(R.A(u.y,e.i(o-2).y)&&!R.A(u.x,e.i(o-2).x)?(e.m(o,u.x,t.y),n++,o++):e.L(o-1,u.x,t.y),R.A(h.x,e.i(o+2).x)&&!R.A(h.y,e.i(o+2).y)?e.m(o+1,t.x,h.y):e.L(o+1,t.x,h.y)):R.A(u.x,a.x)&&R.A(a.x,h.x)?(R.A(u.x,e.i(o-2).x)&&!R.A(u.y,e.i(o-2).y)?(e.m(o,t.x,u.y),n++,o++):e.L(o-1,t.x,u.y),R.A(h.x,e.i(o+2).x)&&!R.A(h.y,e.i(o+2).y)?e.m(o+1,t.x,h.y):e.L(o+1,t.x,h.y)):R.A(u.y,a.y)&&R.A(a.y,h.y)&&(R.A(u.y,e.i(o-2).y)&&!R.A(u.x,e.i(o-2).x)?(e.m(o,u.x,t.y),n++,o++):e.L(o-1,u.x,t.y),R.A(h.y,e.i(o+2).y)&&!R.A(h.x,e.i(o+2).x)?e.m(o+1,h.x,t.y):e.L(o+1,h.x,t.y)),e.L(n,t.x,t.y)}else e.L(n,t.x,t.y),a=e.fromPort,null!==(o=e.fromNode)&&null!==(u=o.findVisibleNode())&&u!==o&&(a=(o=u).port),1===n&&e.computeSpot(!0,a).nc()&&(u=a.da(ie,A.alloc()),o=e.getLinkPointFromPoint(o,a,u,t,!0,A.alloc()),e.L(0,o.x,o.y),A.free(u),A.free(o)),a=e.toPort,null!==(o=e.toNode)&&null!==(u=o.findVisibleNode())&&u!==o&&(a=(o=u).port),n===e.pointsCount-2&&e.computeSpot(!1,a).nc()&&(n=a.da(ie,A.alloc()),t=e.getLinkPointFromPoint(o,a,n,t,!1,A.alloc()),e.L(e.pointsCount-1,t.x,t.y),A.free(n),A.free(t));e.zf()},Re.prototype.computeReshape=function(t){var e=this.adornedLink,n=this.handle.segmentIndex;switch(this.Yv(this.handle)){case uv:return t;case Lc:return new A(e.i(n).x,t.y);case wu:return new A(t.x,e.i(n).y);default:return e.i(n)}},L.Object.defineProperties(Re.prototype,{handleArchetype:{get:function(){return this.v},set:function(t){this.v=t}},midHandleArchetype:{get:function(){return this.I},set:function(t){this.I=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof Gt))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedLink:{get:function(){return this.vu}},resegmentingDistance:{get:function(){return this.T},set:function(t){this.T=t}},originalPoint:{get:function(){return this.Jx}},originalPoints:{get:function(){return this.Js}}}),Re.prototype.setReshapingBehavior=Re.prototype.Wm,Re.prototype.getReshapingBehavior=Re.prototype.Yv;var lv=new it(Re,"None",0),wu=new it(Re,"Horizontal",1),Lc=new it(Re,"Vertical",2),uv=new it(Re,"All",3);function mi(){Rt.call(this),this.name="Resizing",this.hg=new Nt(1,1).freeze(),this.gg=new Nt(9999,9999).freeze(),this.Rg=new Nt(NaN,NaN).freeze(),this.I=!1,this.T=!0,this.ie=null;var t=new At;t.alignmentFocus=ie,t.figure="Rectangle",t.desiredSize=ag,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.v=t,this.l=null,this.Is=new A,this.Hx=new Nt,this.lp=new A,this.Mu=new Nt(0,0),this.Lu=new Nt(1/0,1/0),this.Ku=new Nt(1,1)}function zr(){Rt.call(this),this.name="Rotating",this.Ka=45,this.Ja=2,this.lp=new A,this.ie=null;var t=new At;t.figure="Ellipse",t.desiredSize=Pc,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.v=t,this.l=null,this.Gx=0,this.Rs=new A(NaN,NaN),this.I=0,this.T=50}function xu(){Rt.call(this),this.name="ClickSelecting"}function Ol(){Rt.call(this),this.name="Action",this.Xk=null}function Rn(){Rt.call(this),this.name="ClickCreating",this.Aj=null,this.v=!0,this.l=!1,this.yx=new A(0,0)}function ss(){Rt.call(this),this.name="DragSelecting",this.pl=175,this.v=!1;var t=new wt;t.layerName="Tool",t.selectable=!1;var e=new At;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.l=t}function Ts(){Rt.call(this),this.name="Panning",this.jv=new A,this.kz=new A,this.Qg=!1;var t=this;this.Mx=function(){var e=t.diagram;null!==e&&e.removeEventListener(U.document,"scroll",t.Mx,!1),t.stopTool()}}function jn(){this.T=this.I=this.l=this.v=null}function Oo(t,e,n){this.text=t,this.ey=e,this.visible=n}function $r(){Rt.call(this),this.name="ContextMenu",this.v=this.Bu=this.l=null,this.Ex=new A,this.Cu=null,this.Xu=!1;var t=this;this.vv=function(){t.stopTool()}}function bo(t){return t.preventDefault(),!1}function Qw(t){var e=t.diagram;if(t.isActive){var n=t.currentContextMenu;if(null!==n){if(!(n instanceof jn)){var o=e.Vb(e.lastInput.documentPoint,null,null);null!==o&&o.Hg(n)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(gg(t,!0),t.isActive||t.stopTool())}function gg(t,e,n){if(void 0===n&&(n=null),!t.Xu&&(t.Xu=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.Xu=!1,!e)){if(t.isActive=!0,e=br,null===n&&(n=t.findObjectWithContextMenu()),null!==n){var o=n.contextMenu;null!==o?(t.currentObject=n instanceof Z?n:null,t.showContextMenu(o,t.currentObject)):null!==e&&t.showContextMenu(e,t.currentObject)}else null!==e&&t.showContextMenu(e,null);t.currentContextMenu instanceof Gt&&!t.currentContextMenu.visible&&t.stopTool()}}Re.className="LinkReshapingTool",Re.None=lv,Re.Horizontal=wu,Re.Vertical=Lc,Re.All=uv,qo("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.Xa("LinkReshaping",t,this.mouseDownTools)}),Y(mi,Rt),mi.prototype.updateAdornments=function(t){if(!(null===t||t instanceof Q)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,n=t.wk(this.name);if(null!==e&&t.canResize()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.If()&&((null===n||n.adornedObject!==e)&&(n=this.makeAdornment(e)),null!==n))return e=e.lj(),yr(t)&&this.updateResizeHandles(n,e),void t.Fh(this.name,n)}t.Jf(this.name)}},mi.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(null===e){(e=new Gt).type=X.Spot,e.locationSpot=ie;var n=new Ni;n.isPanelMain=!0,e.add(n),e.add(this.makeHandle(t,Ue)),e.add(this.makeHandle(t,uh)),e.add(this.makeHandle(t,ns)),e.add(this.makeHandle(t,kl)),e.add(this.makeHandle(t,Be)),e.add(this.makeHandle(t,Li)),e.add(this.makeHandle(t,Ar)),e.add(this.makeHandle(t,lr))}else if(Lr(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},mi.prototype.makeHandle=function(t,e){return null===(t=this.handleArchetype)?null:((t=t.copy()).alignment=e,t)},mi.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Nb()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var n=t.alignment;if(n.nc()&&(n=ie),0>=n.x)e=0>=n.y?e+225:1<=n.y?e+135:e+180;else if(1<=n.x)0>=n.y?e+=315:1<=n.y&&(e+=45);else if(0>=n.y)e+=270;else{if(!(1<=n.y))break t;e+=90}0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof X)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)},mi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowResize||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},mi.prototype.doActivate=function(){var t=this.diagram;null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle&&(this.adornedObject=this.handle.part.adornedObject,null!==this.adornedObject&&(t.isMouseCaptured=!0,t.animationManager.Cc(),this.xa(this.name),this.Is.set(this.adornedObject.da(this.handle.alignment.lw())),this.lp.set(this.adornedObject.part.location),this.Hx.set(this.adornedObject.desiredSize),this.Ku=this.computeCellSize(),this.Mu=this.computeMinSize(),this.Lu=this.computeMaxSize(),this.isActive=!0))},mi.prototype.doDeactivate=function(){var t=this.diagram;this.Kg(),this.ie=this.handle=null,this.isActive=t.isMouseCaptured=!1},mi.prototype.doCancel=function(){null!==this.adornedObject&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},mi.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.Mu,n=this.Lu,o=this.Ku,a=this.adornedObject.Nt(t.lastInput.documentPoint,A.alloc()),u=this.computeReshape();e=this.computeResize(a,this.handle.alignment,e,n,o,u),this.resize(e),t.jd(),A.free(a)}},mi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.Mu,n=this.Lu,o=this.Ku,a=this.adornedObject.Nt(t.lastInput.documentPoint,A.alloc()),u=this.computeReshape();e=this.computeResize(a,this.handle.alignment,e,n,o,u),this.resize(e),A.free(a),t.Oa(),this.transactionResult=this.name,t.R("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},mi.prototype.resize=function(t){var e=this.diagram,n=this.adornedObject;if(null!==n){if(n.desiredSize=t.size,(t=n.part).Ta(),n=n.da(this.handle.alignment.lw()),t instanceof Pt){var o=new lt;if(o.add(t),!this.dragsMembers&&null===t.placeholder){var a=new Rl;a.dragsMembers=!1}e.moveParts(o,this.oppositePoint.copy().ge(n),!0,a)}else t.location=t.location.copy().ge(n).add(this.oppositePoint);e.jd()}},mi.prototype.computeResize=function(t,e,n,o,a,u){e.nc()&&(e=ie);var h=this.adornedObject.naturalBounds,f=h.x,p=h.y,g=h.x+h.width,y=h.y+h.height,v=1;if(!u){var x=h.height;0>=(v=h.width)&&(v=1),0>=x&&(x=1),v=x/v}return x=A.alloc(),R.Dq(t.x,t.y,f,p,a.width,a.height,x),t=h.copy(),0>=e.x?0>=e.y?(t.x=Math.max(x.x,g-o.width),t.x=Math.min(t.x,g-n.width),t.width=Math.max(g-t.x,n.width),t.y=Math.max(x.y,y-o.height),t.y=Math.min(t.y,y-n.height),t.height=Math.max(y-t.y,n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,o.height),n.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,o.width),n.width),t.height=v*t.width),t.x=g-t.width,t.y=y-t.height)):1<=e.y?(t.x=Math.max(x.x,g-o.width),t.x=Math.min(t.x,g-n.width),t.width=Math.max(g-t.x,n.width),t.height=Math.max(Math.min(x.y-p,o.height),n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,o.height),n.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,o.width),n.width),t.height=v*t.width),t.x=g-t.width)):(t.x=Math.max(x.x,g-o.width),t.x=Math.min(t.x,g-n.width),t.width=g-t.x,u||(t.height=Math.max(Math.min(v*t.width,o.height),n.height),t.width=t.height/v,t.y=p+.5*(y-p-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(x.x-f,o.width),n.width),t.y=Math.max(x.y,y-o.height),t.y=Math.min(t.y,y-n.height),t.height=Math.max(y-t.y,n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,o.height),n.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,o.width),n.width),t.height=v*t.width),t.y=y-t.height)):1<=e.y?(t.width=Math.max(Math.min(x.x-f,o.width),n.width),t.height=Math.max(Math.min(x.y-p,o.height),n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,o.height),n.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,o.width),n.width),t.height=v*t.width))):(t.width=Math.max(Math.min(x.x-f,o.width),n.width),u||(t.height=Math.max(Math.min(v*t.width,o.height),n.height),t.width=t.height/v,t.y=p+.5*(y-p-t.height))):0>=e.y?(t.y=Math.max(x.y,y-o.height),t.y=Math.min(t.y,y-n.height),t.height=y-t.y,u||(t.width=Math.max(Math.min(t.height/v,o.width),n.width),t.height=v*t.width,t.x=f+.5*(g-f-t.width))):1<=e.y&&(t.height=Math.max(Math.min(x.y-p,o.height),n.height),u||(t.width=Math.max(Math.min(t.height/v,o.width),n.width),t.height=v*t.width,t.x=f+.5*(g-f-t.width))),A.free(x),t},mi.prototype.computeReshape=function(){var t=un;return this.adornedObject instanceof At&&(t=Bv(this.adornedObject)),!(t===xo||this.diagram.lastInput.shift)},mi.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},mi.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},mi.prototype.computeCellSize=function(){var t=new Nt(NaN,NaN),e=this.adornedObject.part;return null!==e&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&null!==(e=e.grid)&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height)),(isNaN(t.width)||0===t.width||t.width===1/0)&&(t.width=1),(isNaN(t.height)||0===t.height||t.height===1/0)&&(t.height=1),t},L.Object.defineProperties(mi.prototype,{handleArchetype:{get:function(){return this.v},set:function(t){this.v=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof Gt))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedObject:{get:function(){return this.ie},set:function(t){if(null!==t&&t.part instanceof Gt)throw Error("new handle must not be in an Adornment: "+t);this.ie=t}},minSize:{get:function(){return this.hg},set:function(t){if(!this.hg.w(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.hg.h(e,t)}}},maxSize:{get:function(){return this.gg},set:function(t){if(!this.gg.w(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.gg.h(e,t)}}},cellSize:{get:function(){return this.Rg},set:function(t){this.Rg.w(t)||this.Rg.assign(t)}},isGridSnapEnabled:{get:function(){return this.I},set:function(t){this.I=t}},dragsMembers:{get:function(){return this.T},set:function(t){this.T=t}},oppositePoint:{get:function(){return this.Is},set:function(t){this.Is.w(t)||this.Is.assign(t)}},originalDesiredSize:{get:function(){return this.Hx}},originalLocation:{get:function(){return this.lp}}}),mi.className="ResizingTool",qo("resizingTool",function(){return this.findTool("Resizing")},function(t){this.Xa("Resizing",t,this.mouseDownTools)}),Y(zr,Rt),zr.prototype.updateAdornments=function(t){if(null!==t){if(t.Oh()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&null!==(e=t.rotateObject)&&t.canRotate()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.If()){var n=t.wk(this.name);if((null===n||n.adornedObject!==e)&&(n=this.makeAdornment(e)),null!==n)return n.angle=e.lj(),null===n.placeholder&&(n.location=this.computeAdornmentLocation(e)),void t.Fh(this.name,n)}t.Jf(this.name)}},zr.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(null===e){(e=new Gt).type=X.Position,e.locationSpot=ie;var n=this.handleArchetype;null!==n&&e.add(n.copy())}else if(Lr(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},zr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowRotate||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},zr.prototype.doActivate=function(){var t=this.diagram;if(null===this.adornedObject){if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;this.adornedObject=this.handle.part.adornedObject}null!==this.adornedObject&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.xa(this.name),this.Gx=this.adornedObject.angle,this.Rs=this.computeRotationPoint(this.adornedObject),this.lp=this.adornedObject.part.location.copy(),this.isActive=!0)},zr.prototype.computeRotationPoint=function(t){var e=t.part,n=e.locationObject;return e.rotationSpot.kb()?t.da(e.rotationSpot):t===e||t===n?n.da(e.locationSpot):t.da(ie)},zr.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.u()||(e=this.computeRotationPoint(t)),e=t.Nt(e);var n=this.handleAngle;0>n?n+=360:360<=n&&(n-=360),n=Math.round(45*Math.round(n/45));var o=this.handleDistance;return 0===n?e.x=t.naturalBounds.width+o:45===n?(e.x=t.naturalBounds.width+o,e.y=t.naturalBounds.height+o):90===n?e.y=t.naturalBounds.height+o:135===n?(e.x=-o,e.y=t.naturalBounds.height+o):180===n?e.x=-o:225===n?(e.x=-o,e.y=-o):270===n?e.y=-o:315===n&&(e.x=t.naturalBounds.width+o,e.y=-o),t.da(e)},zr.prototype.doDeactivate=function(){var t=this.diagram;this.Kg(),this.ie=this.handle=null,this.Rs=new A(NaN,NaN),this.isActive=t.isMouseCaptured=!1},zr.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},zr.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},zr.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Oa(),this.transactionResult=this.name,t.R("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},zr.prototype.rotate=function(t){var e=this.adornedObject;if(null!==e){e.angle=t,(e=e.part).Ta();var n=e.locationObject,o=e.rotateObject;(n===o||n.Hg(o))&&(n=this.lp.copy(),e.location=n.ge(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.jd()}},zr.prototype.computeRotate=function(t){t=this.rotationPoint.Sa(t)-this.handleAngle;var e=this.adornedObject.panel;null!==e&&(t-=e.lj()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var n=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<n&&(t%e<n?t=Math.floor(t/e)*e:t%e>e-n&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},L.Object.defineProperties(zr.prototype,{handleArchetype:{get:function(){return this.v},set:function(t){this.v=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof Gt))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedObject:{get:function(){return this.ie},set:function(t){if(null!==t&&t.part instanceof Gt)throw Error("new handle must not be in an Adornment: "+t);this.ie=t}},snapAngleMultiple:{get:function(){return this.Ka},set:function(t){this.Ka=t}},snapAngleEpsilon:{get:function(){return this.Ja},set:function(t){this.Ja=t}},originalAngle:{get:function(){return this.Gx}},rotationPoint:{get:function(){return this.Rs},set:function(t){this.Rs=t.copy()}},handleAngle:{get:function(){return this.I},set:function(t){this.I=t}},handleDistance:{get:function(){return this.T},set:function(t){this.T=t}}}),zr.className="RotatingTool",qo("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.Xa("Rotating",t,this.mouseDownTools)}),Y(xu,Rt),xu.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},xu.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},xu.className="ClickSelectingTool",Y(Ol,Rt),Ol.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,n=t.Vb(e.documentPoint,function(o){for(;null!==o.panel&&!o.isActionable;)o=o.panel;return o});return!(null===n||!n.isActionable||(this.Xk=n,t.Ej=t.Vb(e.documentPoint,null,null),0))},Ol.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Xk;null!==e&&(t.targetObject=e,null!==e.actionDown&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},Ol.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Xk;null!==e&&(t.targetObject=e,null!==e.actionMove&&e.actionMove(t,e))}},Ol.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Xk;if(null===e)return;t.targetObject=e,null!==e.actionUp&&e.actionUp(t,e),this.standardMouseClick(function(n){for(;null!==n.panel&&(!n.isActionable||n!==e);)n=n.panel;return n},function(n){return n===e})}this.stopTool()},Ol.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.Xk;null!==e&&(t.targetObject=e,null!==e.actionCancel&&e.actionCancel(t,e),this.stopTool())},Ol.prototype.doStop=function(){this.Xk=null},Ol.className="ActionTool",Y(Rn,Rt),Rn.prototype.canStart=function(){if(!this.isEnabled||null===this.archetypeNodeData)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(1===t.lastInput.clickCount&&(this.yx=t.lastInput.viewPoint.copy()),2!==t.lastInput.clickCount||this.isBeyondDragSize(this.yx))return!1}else if(1!==t.lastInput.clickCount)return!1;return!(t.currentTool!==this&&null!==t.zm(t.lastInput.documentPoint,!0))},Rn.prototype.doMouseUp=function(){this.isActive&&this.insertPart(this.diagram.lastInput.documentPoint),this.stopTool()},Rn.prototype.insertPart=function(t){var e=this.diagram,n=this.archetypeNodeData;if(null===n)return null;var o=null;try{if(e.R("ChangingSelection",e.selection),this.xa(this.name),n instanceof wt)n.Pc()&&(Lr(n),null!==(o=n.copy())&&e.add(o));else if(null!==n){var a=e.model.copyNodeData(n);$t(a)&&(e.model.wf(a),o=e.zc(a))}if(null!==o){var u=A.allocAt(t.x,t.y);this.isGridSnapEnabled&&Sv(this.diagram,o,t,u),o.location=u,e.allowSelect&&(e.clearSelection(!0),o.isSelected=!0),A.free(u)}e.Oa(),this.transactionResult=this.name,e.R("PartCreated",o)}finally{this.Kg(),e.R("ChangedSelection",e.selection)}return o},L.Object.defineProperties(Rn.prototype,{archetypeNodeData:{get:function(){return this.Aj},set:function(t){this.Aj=t}},isDoubleClick:{get:function(){return this.v},set:function(t){this.v=t}},isGridSnapEnabled:{get:function(){return this.l},set:function(t){this.l=t}}}),Rn.className="ClickCreatingTool",Y(ss,Rt),ss.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||null!==t.zm(e.documentPoint,!0)))},ss.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},ss.prototype.doDeactivate=function(){var t=this.diagram;t.Lf(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},ss.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&null!==this.box){var e=this.computeBoxBounds(),n=this.box.ab("SHAPE");null===n&&(n=this.box.rb());var o=Nt.alloc().h(e.width,e.height);e=A.allocAt(e.x,e.y),n.desiredSize=o,this.box.position=e,Nt.free(o),A.free(e),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Ft(t.lastInput.viewPoint)}},ss.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.R("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},ss.prototype.computeBoxBounds=function(){var t=this.diagram;return new z(t.firstInput.documentPoint,t.lastInput.documentPoint)},ss.prototype.selectInRect=function(t){var e=this.diagram,n=e.lastInput;if(t=e.ty(t,this.isPartialInclusion),gu?n.meta:n.control)if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)(e=t.value).isSelected=!e.isSelected;else if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0);else{for(n=new lt,e=e.selection.iterator;e.next();){var o=e.value;t.contains(o)||n.add(o)}for(e=n.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0)}},L.Object.defineProperties(ss.prototype,{delay:{get:function(){return this.pl},set:function(t){this.pl=t}},isPartialInclusion:{get:function(){return this.v},set:function(t){this.v=t}},box:{get:function(){return this.l},set:function(t){this.l=t}}}),ss.className="DragSelectingTool",Y(Ts,Rt),Ts.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},Ts.prototype.doActivate=function(){var t=this.diagram;this.Qg?(t.lastInput.bubbles=!0,t.addEventListener(U.document,"scroll",this.Mx,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.jv.assign(t.position)),this.isActive=!0},Ts.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},Ts.prototype.doCancel=function(){var t=this.diagram;t.position=this.jv,t.isMouseCaptured=!1,this.stopTool()},Ts.prototype.doMouseMove=function(){this.move()},Ts.prototype.doMouseUp=function(){this.move(),this.stopTool()},Ts.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.Qg)t.lastInput.bubbles=!0;else{var e=t.position,n=t.firstInput.documentPoint,o=t.lastInput.documentPoint,a=e.x+n.x-o.x;n=e.y+n.y-o.y,t.allowHorizontalScroll||(a=e.x),t.allowVerticalScroll||(n=e.y),t.position=this.kz.h(a,n)}},L.Object.defineProperties(Ts.prototype,{bubbles:{get:function(){return this.Qg},set:function(t){this.Qg=t}},originalPosition:{get:function(){return this.jv}}}),Ts.className="PanningTool",qo("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.Xa("ClickCreating",t,this.mouseUpTools)}),qo("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.Xa("ClickSelecting",t,this.mouseUpTools)}),qo("panningTool",function(){return this.findTool("Panning")},function(t){this.Xa("Panning",t,this.mouseMoveTools)}),qo("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.Xa("DragSelecting",t,this.mouseMoveTools)}),qo("actionTool",function(){return this.findTool("Action")},function(t){this.Xa("Action",t,this.mouseDownTools)}),L.Object.defineProperties(jn.prototype,{mainElement:{get:function(){return this.I},set:function(t){this.I=t}},show:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t)}},hide:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}},valueFunction:{get:function(){return this.T},set:function(t){this.T=t}}}),jn.className="HTMLInfo",Oo.className="ContextMenuButtonInfo",Y($r,Rt),$r.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount||!(t.lastInput.isTouchEvent&&null!==this.defaultTouchContextMenu||null!==this.findObjectWithContextMenu()))},$r.prototype.doStart=function(){this.Ex.set(this.diagram.firstInput.documentPoint)},$r.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},$r.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.diagram,o=null;if(t instanceof V||(o=t instanceof Z?t:e.Vb(e.lastInput.documentPoint,null,function(a){return!a.layer.isTemporary})),null!==o){for(t=o;null!==t;){if(null!==t.contextMenu)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return o.part}else if(null!==e.contextMenu)return e;return null},$r.prototype.doActivate=function(){},$r.prototype.doMouseDown=function(){if(Rt.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof Gt){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&Qw(this)},$r.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof Gt){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}Qw(this)},$r.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},$r.prototype.showContextMenu=function(t,e){var n=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof Gt){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category=this.name,null!==t.placeholder&&(t.placeholder.scale=n.scale);var o=t.diagram;null!==o&&o!==n&&o.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.Ta(),this.positionContextMenu(t,e)}else t instanceof jn&&t.show(e,n,this);this.currentContextMenu=t},$r.prototype.positionContextMenu=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),o=t.measuredBounds,a=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=o.width),n.x+o.width>a.right&&(n.x-=o.width+5/e.scale),n.x<a.x&&(n.x=a.x),n.y+o.height>a.bottom&&(n.y-=o.height+5/e.scale),n.y<a.y&&(n.y=a.y),t.position=n}},$r.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;null!==e&&(e instanceof Gt?(t.remove(e),null!==this.Bu&&this.Bu.Jf(e.category),e.data=null,e.adornedObject=null):e instanceof jn&&(null!==e.hide?e.hide(t,this):null!==e.mainElement&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())},$r.prototype.showDefaultContextMenu=function(){var t=this.diagram;null===this.Cu&&(this.Cu=function Fc(t){var e=new lt;return e.add(new Oo("Copy",function(n){n.commandHandler.copySelection()},function(n){return n.commandHandler.canCopySelection()})),e.add(new Oo("Cut",function(n){n.commandHandler.cutSelection()},function(n){return n.commandHandler.canCutSelection()})),e.add(new Oo("Delete",function(n){n.commandHandler.deleteSelection()},function(n){return n.commandHandler.canDeleteSelection()})),e.add(new Oo("Paste",function(n){n.commandHandler.pasteSelection(t.mouseDownPoint)},function(n){return n.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new Oo("Select All",function(n){n.commandHandler.selectAll()},function(n){return n.commandHandler.canSelectAll()})),e.add(new Oo("Undo",function(n){n.commandHandler.undo()},function(n){return n.commandHandler.canUndo()})),e.add(new Oo("Redo",function(n){n.commandHandler.redo()},function(n){return n.commandHandler.canRedo()})),e.add(new Oo("Scroll To Part",function(n){n.commandHandler.scrollToPart()},function(n){return n.commandHandler.canScrollToPart()})),e.add(new Oo("Zoom To Fit",function(n){n.commandHandler.zoomToFit()},function(n){return n.commandHandler.canZoomToFit()})),e.add(new Oo("Reset Zoom",function(n){n.commandHandler.resetZoom()},function(n){return n.commandHandler.canResetZoom()})),e.add(new Oo("Group Selection",function(n){n.commandHandler.groupSelection()},function(n){return n.commandHandler.canGroupSelection()})),e.add(new Oo("Ungroup Selection",function(n){n.commandHandler.ungroupSelection()},function(n){return n.commandHandler.canUngroupSelection()})),e.add(new Oo("Edit Text",function(n){n.commandHandler.editTextBlock()},function(n){return n.commandHandler.canEditTextBlock()})),e}(this)),ad.innerHTML="",fh.addEventListener("click",this.vv,!1);var e=this,n=Ke("ul");n.className="goCXul",ad.appendChild(n),n.innerHTML="";for(var o=this.Cu.iterator;o.next();){var a=o.value,u=a.visible;if("function"==typeof a.ey&&("function"!=typeof u||u(t))){(u=Ke("li")).className="goCXli";var h=Ke("a");h.className="goCXa",h.href="#",h.ez=a.ey,h.addEventListener("click",function(f){return this.ez(t),e.stopTool(),f.preventDefault(),!1},!1),h.textContent=a.text,u.appendChild(h),n.appendChild(u)}}ad.style.display="block",fh.style.display="block"},$r.prototype.hideDefaultContextMenu=function(){if(null!==this.currentContextMenu&&this.currentContextMenu===br){ad.style.display="none",fh.style.display="none";var t=this.diagram;null!==t&&t.removeEventListener(fh,"click",this.vv,!1),this.currentContextMenu=null}},L.Object.defineProperties($r.prototype,{currentContextMenu:{get:function(){return this.l},set:function(t){this.l=t,this.Bu=t instanceof Gt?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return!1===mg&&null===br&&dr&&function pg(t){var e=new jn;e.show=function(a,u,h){h.showDefaultContextMenu()},e.hide=function(a,u){u.hideDefaultContextMenu()},br=e,t.vv=function(){t.stopTool()},e=Ke("div");var n=Ke("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var o=Ke("style");U.document.getElementsByTagName("head")[0].appendChild(o),o.sheet.insertRule(".goCXul { list-style: none; }",0),o.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),o.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),null!==(o=t.diagram)&&(o.addEventListener(e,"contextmenu",bo,!1),o.addEventListener(e,"selectstart",bo,!1),o.addEventListener(n,"contextmenu",bo,!1)),e.className="goCXforeground",n.className="goCXbackground",U.document.body&&(U.document.body.appendChild(e),U.document.body.appendChild(n)),ad=e,fh=n,mg=!0}(this),br},set:function(t){null===t&&(mg=!0),br=t}},currentObject:{get:function(){return this.v},set:function(t){this.v=t}},mouseDownPoint:{get:function(){return this.Ex}}});var br=null,mg=!1,fh=null,ad=null;function ae(){Rt.call(this),this.name="TextEditing",this.yh=new le,this.Ka=null,this.Ja=wg,this.Wi=null,this.ia=ld,this.I=1,this.T=!0,this.v=null,this.l=new jn,this.Gu=null,function qw(t,e){if(dr){var n=Ke("textarea");t.Gu=n,n.addEventListener("input",function(){if(null!==t.textBlock){var o=t.Ky(this.value);this.style.width=20+o.measuredBounds.width*this.cB+"px",this.rows=o.lineCount}},!1),n.addEventListener("keydown",function(o){if(null!==t.textBlock){var a=o.key;"Enter"===a?(!1===t.textBlock.isMultiline&&o.preventDefault(),t.acceptText(vg)):"Tab"===a?(t.acceptText(cv),o.preventDefault()):"Escape"===a&&(t.doCancel(),null!==t.diagram&&t.diagram.doFocus())}},!1),n.addEventListener("focus",function(){if(null!==t.currentTextEditor&&t.state!==ld){var o=t.Gu;t.ia===Tt&&(t.ia=Ze),"function"==typeof o.select&&t.selectsTextOnActivate&&(o.select(),o.setSelectionRange(0,9999))}},!1),n.addEventListener("blur",function(){if(null!==t.currentTextEditor&&t.state!==ld){var o=t.Gu;"function"==typeof o.focus&&o.focus(),"function"==typeof o.select&&t.selectsTextOnActivate&&(o.select(),o.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return n.value},e.mainElement=n,e.show=function(o,a,u){if(o instanceof le&&u instanceof ae)if(u.state===yi)n.style.border="3px solid red",n.focus();else{var h=o.da(ie),f=a.position,p=a.scale,g=o.Cf()*p;g<u.minimumEditorScale&&(g=u.minimumEditorScale);var y=o.naturalBounds.width*g+6,v=o.naturalBounds.height*g+2,x=(h.x-f.x)*p;h=(h.y-f.y)*p,n.value=o.text,a.div.style.font=o.font,n.style.position="absolute",n.style.zIndex="100",n.style.font="inherit",n.style.fontSize=100*g+"%",n.style.lineHeight="normal",n.style.width=y+"px",n.style.left=(x-y/2|0)-1+"px",n.style.top=(h-v/2|0)-1+"px",n.style.textAlign=o.textAlign,n.style.margin="0",n.style.padding="1px",n.style.border="0",n.style.outline="none",n.style.whiteSpace="pre-wrap",n.style.overflow="hidden",n.rows=o.lineCount,n.cB=g,n.className="goTXarea",a.div.appendChild(n),n.focus(),u.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},e.hide=function(o){o.div.removeChild(n)}}}(this,this.l)}function yg(t){var e=t.textBlock,n=t.diagram,o=t.currentTextEditor;if(null!==e&&null!==o){var a=e.text,u="";null!==o.valueFunction&&(u=o.valueFunction()),t.isValidText(e,a,u)?(t.xa(t.name),t.ia=xg,t.transactionResult=t.name,e.text=u,t.doSuccess(a,u),null!==n&&n.R("TextEdited",e,a),t.Kg(),t.stopTool(),null!==n&&n.doFocus()):(t.ia=yi,t.doError(a,u),o.show(e,n,t))}}$r.className="ContextMenuTool",qo("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.Xa("ContextMenu",t,this.mouseUpTools)}),Y(ae,Rt),ae.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||t.isReadOnly||na&&na!==this&&(na.acceptText(hv),na&&na!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.Vb(t.lastInput.documentPoint);return!!(null!==e&&e instanceof le&&e.editable&&e.part.canEdit())&&!(null===(e=e.part)||this.starting===wg&&!e.isSelected||this.starting===tx&&2>t.lastInput.clickCount)},ae.prototype.doStart=function(){na=this,null!==this.textBlock&&this.doActivate()},ae.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(null!==t){var e=this.textBlock;if(null===e&&(e=t.Vb(t.lastInput.documentPoint)),null!==e&&e instanceof le&&(this.textBlock=e,null!==e.part)){this.isActive=!0,this.ia=Tt;var n=this.defaultTextEditor;null!==e.textEditor&&(n=e.textEditor),this.yh=this.textBlock.copy();var o=new z(this.textBlock.da(Ue),this.textBlock.da(ns));t.Bw(o),n.show(e,t,this),this.currentTextEditor=n}}}},ae.prototype.doCancel=function(){this.stopTool()},ae.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},ae.prototype.doMouseDown=function(){this.isActive&&this.acceptText(hv)},ae.prototype.acceptText=function(t){switch(t){case hv:this.ia===xg?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.ia===Tt||this.ia===yi||this.ia===Ze)&&(this.ia=ud,yg(this));break;case we:case vg:case cv:(vg!==t||!0!==this.textBlock.isMultiline)&&(this.ia===Tt||this.ia===yi||this.ia===Ze)&&(this.ia=ud,yg(this))}},ae.prototype.doError=function(t,e){var n=this.textBlock;null!==n.errorFunction&&n.errorFunction(this,t,e)},ae.prototype.doSuccess=function(t,e){var n=this.textBlock;null!==n.textEdited&&n.textEdited(n,t,e)},ae.prototype.doDeactivate=function(){var t=this.diagram;null!==t&&(this.ia=ld,this.textBlock=null,null!==this.currentTextEditor&&this.currentTextEditor.hide(t,this),this.isActive=!1)},ae.prototype.doStop=function(){na=null},ae.prototype.isValidText=function(t,e,n){var o=this.textValidation;return!(null!==o&&!o(t,e,n)||null!==(o=t.textValidation)&&!o(t,e,n))},ae.prototype.Ky=function(t){var e=this.yh;return e.text=t,e.measure(this.textBlock.Di,1/0),e},L.Object.defineProperties(ae.prototype,{textBlock:{get:function(){return this.Ka},set:function(t){this.Ka=t}},currentTextEditor:{get:function(){return this.v},set:function(t){this.v=t}},defaultTextEditor:{get:function(){return this.l},set:function(t){this.l=t}},starting:{get:function(){return this.Ja},set:function(t){this.Ja=t}},textValidation:{get:function(){return this.Wi},set:function(t){this.Wi=t}},minimumEditorScale:{get:function(){return this.I},set:function(t){this.I=t}},selectsTextOnActivate:{get:function(){return this.T},set:function(t){this.T=t}},state:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}}}),ae.prototype.measureTemporaryTextBlock=ae.prototype.Ky;var we=new it(ae,"LostFocus",0),hv=new it(ae,"MouseDown",1),cv=new it(ae,"Tab",2),vg=new it(ae,"Enter",3),yM=new it(ae,"SingleClick",0),wg=new it(ae,"SingleClickSelected",1),tx=new it(ae,"DoubleClick",2),ld=new it(ae,"StateNone",0),Tt=new it(ae,"StateActive",1),Ze=new it(ae,"StateEditing",2),ud=new it(ae,"StateValidating",3),yi=new it(ae,"StateInvalid",4),xg=new it(ae,"StateValidated",5),na=null;function Yn(){hd||(Ka(),hd=!0),this.B=Ja,this.Al=this.ff=this.sc=this.qs=this.jc=!1,this.Rx=!0,this.Bl=Eg,this.rn=!1,this.yi=this.nd=!0,this.Yg=600,this.px=this.Qx=!1,this.Re=new nt,this.Qd=new ti,this.Qd.Wc=this,this.yj=new nt,this.sv=new nt,this.ot=new nt}function ia(t,e){Cg(t,e)&&(t.ff=!0)}function Cg(t,e){return!(!t.nd||!t.canStart(e))&&(t.Re.add(e),t.defaultAnimation.isAnimating&&t.Cc(),t.sc=!0)}function ex(t){if(t.nd&&t.sc){var e=t.Qd,n=t.B,o=t.Re.contains("Model");o&&(t.Al=!0,t.Bl===Eg?(e.isViewportUnconstrained=!0,e.mc.clear(),e.add(n,"position",n.position.copy().offset(0,-200),n.position),e.add(n,"opacity",0,1)):t.Bl===Tg&&e.mc.clear(),t.Rx=!(t.Bl!==ix||!n.Vs.w(n.la)),n.R("InitialAnimationStarting",t)),o&&!t.yi||0===e.mc.count?(t.Re.clear(),t.sc=!1,t.ff=!1,e.mc.clear(),cd(e,n),t.Al=!1,n.M()):(t.Re.clear(),n.Ee=!1,o=e.mc.get(n),n.autoScale!==Pn&&null!==o&&(delete o.start.scale,delete o.end.scale),U.requestAnimationFrame(function(){!1===t.sc||e.jc||(n.Je("temporaryPixelRatio")&&Cu(n),pd(n),t.sc=!1,t.ff=!1,e.start(),Ji(t),n.Oa(),dd(e,0),Ns(n,!0),Lo(t),n.R("AnimationStarting",t))}))}}function nx(t,e,n,o){e instanceof Q&&(null!==e.fromNode||null!==e.toNode)||t.Qd.add(e,"position",n,o,!1)}function Ji(t){if(!t.qs){var e=t.B;t.Qx=e.skipsUndoManager,t.px=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.qs=!0}}function Lo(t){var e=t.B;e.skipsUndoManager=t.Qx,e.skipsModelSourceBindings=t.px,t.qs=!1}function fv(t,e,n){t.ff&&!e.w(n)&&(t.B.pj||(e=n.copy()),fd(t.Qd,t.B,"position",e,n))}function bl(t,e,n,o,a){null===t&&(t=[0,0,0,0]),null===e&&(e=[0,0,0,0]);var u=t[0],h=t[1],f=t[2];t=t[3];var p=e[0],g=e[1],y=e[2];return e=e[3],0===f||100===f?(u=p,h=g):(0===y||100===y)&&(p=u,g=h),180<Math.abs(p-u)&&(p>u?u+=360:p+=360),"hsla("+(u=a(n,u,p-u,o)%360)+", "+(h=a(n,h,g-h,o))+"%, "+(f=a(n,f,y-f,o))+"%, "+(n=a(n,t,e-t,o))+")"}function Ka(){function t(n,o,a,u,h,f){n.position=new A(u(h,o.x,a.x-o.x,f),u(h,o.y,a.y-o.y,f))}var e=new Et;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(n,o,a,u,h,f){h<f?n.er(u(h,o.x,a.x-o.x,f),u(h,o.y,a.y-o.y,f),!1):n.position=new A(u(h,o.x,a.x-o.x,f),u(h,o.y,a.y-o.y,f))}),e.add("location",function(n,o,a,u,h,f){h<f?n.er(u(h,o.x,a.x-o.x,f),u(h,o.y,a.y-o.y,f),!0):n.location=new A(u(h,o.x,a.x-o.x,f),u(h,o.y,a.y-o.y,f))}),e.add("position:placeholder",function(n,o,a,u,h,f){h<f?n.er(u(h,o.x,a.x-o.x,f),u(h,o.y,a.y-o.y,f),!1):n.position=new A(u(h,o.x,a.x-o.x,f),u(h,o.y,a.y-o.y,f))}),e.add("position:nodeCollapse",function(n,o,a,u,h,f){var p=n.actualBounds,g=a.actualBounds;a=g.x+g.width/2-p.width/2,p=g.y+g.height/2-p.height/2,h<f?n.er(u(h,o.x,a-o.x,f),u(h,o.y,p-o.y,f),!1):n.position=new A(u(h,o.x,a-o.x,f),u(h,o.y,p-o.y,f))}),e.add("desiredSize",function(n,o,a,u,h,f){n.desiredSize=new z(u(h,o.width,a.width-o.width,f),u(h,o.height,a.height-o.height,f))}),e.add("width",function(n,o,a,u,h,f){n.width=u(h,o,a-o,f)}),e.add("height",function(n,o,a,u,h,f){n.height=u(h,o,a-o,f)}),e.add("fill",function(n,o,a,u,h,f){n.fill=bl(o,a,h,f,u)}),e.add("stroke",function(n,o,a,u,h,f){n.stroke=bl(o,a,h,f,u)}),e.add("strokeWidth",function(n,o,a,u,h,f){n.strokeWidth=u(h,o,a-o,f)}),e.add("strokeDashOffset",function(n,o,a,u,h,f){n.strokeDashOffset=u(h,o,a-o,f)}),e.add("background",function(n,o,a,u,h,f){n.background=bl(o,a,h,f,u)}),e.add("areaBackground",function(n,o,a,u,h,f){n.areaBackground=bl(o,a,h,f,u)}),e.add("opacity",function(n,o,a,u,h,f){n.opacity=u(h,o,a-o,f)}),e.add("scale",function(n,o,a,u,h,f){n.scale=u(h,o,a-o,f)}),e.add("angle",function(n,o,a,u,h,f){n.angle=u(h,o,a-o,f)}),Dg=e}ae.className="TextEditingTool",ae.LostFocus=we,ae.MouseDown=hv,ae.Tab=cv,ae.Enter=vg,ae.SingleClick=yM,ae.SingleClickSelected=wg,ae.DoubleClick=tx,ae.StateNone=ld,ae.StateActive=Tt,ae.StateEditing=Ze,ae.StateValidating=ud,ae.StateInvalid=yi,ae.StateValidated=xg,qo("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.Xa("TextEditing",t,this.mouseUpTools)}),Yn.prototype.ee=function(t){this.B=t},Yn.prototype.canStart=function(){return!0},(D=Yn.prototype).cu=function(t){return this.Qd.cu(t)},D.dw=function(t){return this.Qd.dw(t)},D.Cc=function(t){var e=this.Qd;if(!0===this.sc&&(this.Al=this.ff=this.sc=!1,this.Re.clear(),0<e.mc.count&&this.B.Eb()),this.jc){if(e.wm(!0),e.mc.clear(),cd(e,null),!0===t)for(t=this.yj.ma(),e=0;e<t.length;e++)t[e].wm(!0)}else e.mc.clear(),cd(e,this.B)},D.wm=function(t){t===this.defaultAnimation&&this.defaultAnimation.mc.clear(),this.yj.remove(t),0===this.yj.count&&(this.jc=!1,this.B.Eb()),t===this.defaultAnimation&&(this.defaultAnimation.mc.clear(),this.B.R("AnimationFinished",this))},D.lk=function(t,e){this.ff&&(this.Re.contains("Expand Tree")||this.Re.contains("Expand SubGraph"))&&this.Qd.lk(t,e)},D.jk=function(t,e){this.ff&&(this.Re.contains("Collapse Tree")||this.Re.contains("Collapse SubGraph"))&&(this.Qd.jk(t,e),fd(this.Qd,e,"position",e.position,e.position))},L.Object.defineProperties(Yn.prototype,{animationReasons:{get:function(){return this.Re}},isEnabled:{get:function(){return this.nd},set:function(t){(this.nd=t)&&this.yj.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.Yg},set:function(t){1>t&&qt(t,">= 1",Yn,"duration"),this.Yg=t}},isAnimating:{get:function(){return this.jc}},isTicking:{get:function(){return this.qs}},isInitial:{get:function(){return this.yi},set:function(t){this.yi=t}},defaultAnimation:{get:function(){return this.Qd}},activeAnimations:{get:function(){return this.yj}},initialAnimationStyle:{get:function(){return this.Bl},set:function(t){this.Bl=t}}}),Yn.prototype.stopAnimation=Yn.prototype.Cc;var Dg=null,hd=!1,Eg=new it(Yn,"Default",1),ix=new it(Yn,"AnimateLocations",2),Tg=new it(Yn,"None",3);function ti(){this.wv=this.Px=this.Wc=this.B=null,this.Jl=this.jc=this.l=!1,this.Xn=this.Dd=0,this.Jr=this.Ju=pv,this.Il=this.Ap=!1,this.mv=1,this.lv=0,this.vd=this.Yg=NaN,this.ux=0,this.Yn=null,this.v=Ga,this.mc=new Et,this.hv=new Et,this.pm=new nt,this.iv=new nt,this.qx=Nu}function cd(t,e){if(t.hv.clear(),t.Il=!1,t.lv=0,t.vd=NaN,0<t.pm.count&&t.pm.clear(),0<t.iv.count&&t.iv.clear(),null!==e)for(t=e.links;t.next();)t.value.sg=null}function fd(t,e,n,o,a,u){var h=t.mc;if(e instanceof V&&"position"===n&&(n="position:diagram"),("fill"===n||"stroke"===n||"background"===n||"areaBackground"===n)&&(ha(o),Mh(),o=[nr.l,nr.I,nr.v,nr.T],ha(a),Mh(),a=[nr.l,nr.I,nr.v,nr.T]),h.contains(e)){var f=h.H(e),p=f.start,g=f.end;void 0===p[n]&&(p[n]=Rc(o)),g[n]=Rc(a)}else g={},(p={})[n]=Rc(o),g[n]=Rc(a),f=p.position,e instanceof Z&&f instanceof A&&!f.u()&&e.diagram.animationManager.Re.contains("Expand SubGraph")&&f.assign(g.position),f=new mv(p,g,u),h.add(e,f);(h=p[n])instanceof A&&!h.u()&&h.assign(t.v),u&&0===n.indexOf("position:")&&e instanceof wt?f.Pv.location=Rc(e.location):u&&(f.Pv[n]=Rc(o))}function Rc(t){return t instanceof A||t instanceof Nt?t.copy():t}function dv(t,e){if(!t.Jl||e){var n=t.Wc;if(!1!==t.jc){var o=+new Date,a=o>t.Xn?t.vd:o-t.Dd;e&&((a=t.ux)<t.vd?(t.Dd=+new Date-a,t.Xn=t.Dd+t.vd):a=t.vd),Ji(n),dd(t,a),Ns(t.B,!0),Lo(n),o>t.Xn&&(t.Ap&&!t.Il?(t.Dd=+new Date,t.Xn=t.Dd+t.vd,t.Il=!0):t.wm(!1))}}}function dd(t,e){for(var n=t.vd,o=t.mc.iterator,a=t.Il;o.next();){var u=o.key;if(!(u instanceof Z&&null===u.diagram)){var h=o.value,f=a?h.end:h.start;h=a?h.start:h.end;var g,p=Dg;for(g in h)"position"===g&&(h["position:placeholder"]||h["position:nodeCollapse"])||null===p.get(g)||p.get(g)(u,f[g],h[g],t.Jr,e,n,t)}}}function pv(t,e,n,o){return 1>(t/=o/2)?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function gv(t,e,n,o){return t===o?e+n:n*(1-Math.pow(2,-10*t/o))+e}function mv(t,e,n){this.start=t,this.end=e,this.Pv={},this.Jv=n,this.rw=!1}function as(t,e,n){this.qd=null,this.hf=t,this.$p=n||rx,this.bl=null,void 0!==e&&(this.bl=e,void 0===n&&(this.$p=yv))}Yn.className="AnimationManager",Yn.defineAnimationEffect=function(t,e){hd||(Ka(),hd=!0),Dg.add(t,e)},Yn.Default=Eg,Yn.AnimateLocations=ix,Yn.None=Tg,ti.prototype.suspend=function(){this.Jl=!0},ti.prototype.advanceTo=function(t,e){e&&(this.Jl=!1),this.Ap&&t>=this.vd&&(this.Il=!0,t-=this.vd),this.ux=t,dv(this,!0),Ji(this.Wc),Ns(this.B),Lo(this.Wc),this.B.Me()},(D=ti.prototype).start=function(){if(0!==this.mc.count&&!this.jc){for(var t=this.B,e=this.mc.iterator;e.next();){var n=e.value.end,o=e.key;if(n["position:placeholder"]){var a=o.findVisibleNode();if(a instanceof Pt&&null!==a.placeholder){var u=a.placeholder;(a=u.da(Ue)).x+=(u=u.padding).left,a.y+=u.top,n["position:placeholder"]=a}}null===t&&(o instanceof V?t=o:o instanceof Z&&(t=o.diagram))}null!==t&&(this.B=t,!1!==(e=this.Wc=t.animationManager).isEnabled&&(this.vd=isNaN(this.Yg)?e.duration:this.Yg,this.Jr=this.Ju,e.Al&&e.Bl===Eg&&this===e.defaultAnimation&&(this.Jr=gv,this.vd=isNaN(this.Yg)?600===e.duration?900:e.duration:this.Yg),this.qx=t.scrollMode,this.isViewportUnconstrained&&(t.Ti=Vg),Ji(e),this.pm.each(function(h){h.data=null,t.add(h)}),Lo(e),this.jc=!0,this.Dd=+new Date,this.Xn=this.Dd+this.vd,function Mg(t,e){function n(){if(0<a.ot.count&&(o.addAll(a.ot),a.ot.clear(),a.jc=!0),!1!==a.jc&&0!==o.count){a.sv.addAll(o);for(var u=a.sv.iterator;u.next();){var h=u.value;if(!1!==h.jc){t:if(0<h.pm.count)var f=!0;else{for(f=h.mc.iterator;f.next();){var p=f.key;if(p instanceof Z&&null!==p.diagram||p instanceof V){f=!0;break t}}f=!1}f?dv(h,!1):h.Jl=!0}}a.sv.clear(),Ji(a),Ns(a.B),Lo(a),U.requestAnimationFrame(n)}}var o=t.yj,a=t;t.jc?t.ot.add(e):(t.jc=!0,o.add(e),U.requestAnimationFrame(function(){n()}))}(e,this)))}},D.sz=function(t,e){t.Pc()&&(this.pm.add(t),this.B=e)},D.add=function(t,e,n,o,a){if("position"!==e||!n.w(o)){if(null===this.B&&(t instanceof V?this.B=t:t instanceof Z&&null!==t.diagram&&(this.B=t.diagram)),t instanceof wt){if(!t.isAnimated)return;"position"===e&&(e="position:part")}fd(this,t,e,n,o,a)}},D.cu=function(t){return!!this.jc&&null!==(t=this.mc.H(t))&&t.rw},D.dw=function(t){return!!this.jc&&null!==(t=this.mc.H(t))&&(t.start.position||t.start.location)},D.stop=function(){this.jc&&this.wm(!0)},D.wm=function(t){if(null!==this.wv&&this.wv.Hp.remove(this.Px),this.jc){var e=this.B,n=this.Wc;this.Jl=this.jc=n.Al=!1,Ji(n);for(var o=this.mc,a=this.pm.iterator;a.next();)e.remove(a.value);for(a=this.iv.iterator;a.next();)a.value.o();a=this.Ap,o=o.iterator;for(var u=Dg;o.next();){var v,h=o.key,f=o.value,p=a?f.end:f.start,g=a?f.start:f.end,y=f.Pv;for(v in g)if(null!==u.get(v)){var x=v;!f.Jv||"position:nodeCollapse"!==x&&"position:placeholder"!==x||(x="position"),u.get(x)(h,p[v],void 0!==y[v]?y[v]:f.Jv?p[v]:g[v],this.Jr,this.vd,this.vd,this)}f.Jv&&void 0!==y.location&&h instanceof wt&&(h.location=y.location),f.rw&&h instanceof wt&&h.Pb(!1)}if(n.defaultAnimation===this)for(v=this.B.links;v.next();)null===(a=v.value).sg?null!==(o=a.path)&&(a.kd=!1,a.o(),o.o()):(a.points=a.sg,a.sg=null);e.Yt.clear(),dh(e,!1),e.Oa(),e.M(),Ns(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.qx),Lo(n),this.lv++,!t&&this.mv>this.lv?(this.Il=!1,this.start()):(this.Yn&&this.Yn(this),cd(this,null),n.wm(this),e.Eb())}},D.lk=function(t,e){var n=e.actualBounds,o=null;if(e instanceof Pt&&(o=e.placeholder),null!==o?((n=o.da(Ue)).x+=(o=o.padding).left,n.y+=o.top,this.add(t,"position",n,t.position,!1)):this.add(t,"position",new A(n.x+n.width/2,n.y+n.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof Pt)for(t=t.memberParts;t.next();)(o=t.value)instanceof ot&&this.lk(o,e)},D.jk=function(t,e){if(t.isVisible()){var n=null;if(e instanceof Pt&&(n=e.placeholder),null!==n?this.add(t,"position:placeholder",t.position,n,!0):this.add(t,"position:nodeCollapse",t.position,e,!0),this.add(t,"scale",t.scale,.01,!0),(n=this.mc).contains(t)&&(n.H(t).rw=!0),t instanceof Pt)for(t=t.memberParts;t.next();)(n=t.value)instanceof ot&&this.jk(n,e)}},D.pA=function(t){var e=this.hv.get(t);return null===e&&this.hv.add(t,e={}),e},L.Object.defineProperties(ti.prototype,{duration:{get:function(){return this.Yg},set:function(t){1>t&&qt(t,">= 1",ti,"duration"),this.Yg=t}},reversible:{get:function(){return this.Ap},set:function(t){this.Ap=t}},runCount:{get:function(){return this.mv},set:function(t){0<t?this.mv=t:W("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.Yn},set:function(t){this.Yn!==t&&(this.Yn=t)}},easing:{get:function(){return this.Ju},set:function(t){this.Ju=t}},isViewportUnconstrained:{get:function(){return this.l},set:function(t){this.l=t}},isAnimating:{get:function(){return this.jc}}}),ti.prototype.getTemporaryState=ti.prototype.pA,ti.prototype.stop=ti.prototype.stop,ti.prototype.add=ti.prototype.add,ti.prototype.addTemporaryPart=ti.prototype.sz,ti.className="Animation",ti.EaseLinear=function(t,e,n,o){return n*t/o+e},ti.EaseInOutQuad=pv,ti.EaseInQuad=function(t,e,n,o){return n*(t/=o)*t+e},ti.EaseOutQuad=function(t,e,n,o){return-n*(t/=o)*(t-2)+e},ti.EaseInExpo=function(t,e,n,o){return 0===t?e:n*Math.pow(2,10*(t/o-1))+e},ti.EaseOutExpo=gv,mv.className="AnimationState",as.prototype.copy=function(){var t=new as(this.hf);t.$p=this.$p;var e=this.bl;if(null!==e){var n={};void 0!==e.duration&&(n.ny=e.duration),void 0!==e.finished&&(n.ny=e.finished),void 0!==e.easing&&(n.ny=e.easing),t.bl=n}return t},L.Object.defineProperties(as.prototype,{propertyName:{get:function(){return this.hf},set:function(t){this.hf=t}},animationSettings:{get:function(){return this.bl},set:function(t){this.bl=t}},startCondition:{get:function(){return this.$p},set:function(t){this.$p=t}}});var rx=new it(as,"Default",1),yv=new it(as,"Immediate",2),no=new it(as,"Bundled",3);function Nn(){wn(this),this.B=null,this.Da=new lt,this.Qa="",this.hb=1,this.v=!1,this.l=this.Oi=this.I=this.hi=this.gi=this.fi=this.ei=this.ci=this.di=this.bi=this.ji=this.ai=this.ii=this.$h=this.Zh=!0,this.mp=[]}function Wn(t,e){var n=1;return 1!==t.hb&&(e.globalAlpha=(n=e.globalAlpha)*t.hb),n}function Ng(t,e,n){if(e=function vM(t,e,n){var o=n.zOrder;if(isNaN(o))return e;var a=(t=t.Da).count;if(1>=a)return e;if(0>e&&(e=t.indexOf(n)),0>e)return-1;for(var u=e-1,h=NaN;0<=u&&(h=t.J(u).zOrder,isNaN(h));)u--;for(var f=e+1,p=NaN;f<a&&(p=t.J(f).zOrder,isNaN(p));)f++;if(!isNaN(h)&&h>o)for(;;){if(-1===u||h<=o){if(++u===e)break;return t.cb(e),t.wb(u,n),u}for(h=NaN;0<=--u&&(h=t.J(u).zOrder,isNaN(h)););}else if(!isNaN(p)&&p<o)for(;;){if(f===a||p>=o){if(--f===e)break;return t.cb(e),t.wb(f,n),f}for(p=NaN;++f<a&&(p=t.J(f).zOrder,isNaN(p)););}return e}(t,e,n),n instanceof Pt&&null!==n&&isNaN(n.zOrder)){if(0!==n.memberParts.count){for(var o=-1,a=t.Da.j,u=a.length,h=0;h<u;h++){var f=a[h];if(f===n&&(e=h,0<=o)||0>o&&f.containingGroup===n&&(o=h,0<=e))break}!(0>o)&&o<e&&((a=t.Da).cb(e),a.wb(o,n))}null!==(n=n.containingGroup)&&Ng(t,-1,n)}}function V(t){if(1<arguments.length&&W("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),xx||(EM(),xx=!0),wn(this),Ja=this,ig=[],this.Sb=!0,this.Wc=new Yn,this.Wc.ee(this),this.pb=17,this.Hl=this.ov=!1,this.Us="default",this.Ea=null,dr){var e=this,n=function(){e.removeEventListener(U.document,"DOMContentLoaded",n,!1),e.setRTL()};null!==U.document.body?this.setRTL():e.addEventListener(U.document,"DOMContentLoaded",n,!1)}this.La=new lt,this.ua=this.va=0,this.Zl=this.ta=null,this.Lx=new Et,this.jf=this.Hb=null,this.yw(),this.Nj=null,this.xw(),this.hb=1,this.la=new A(NaN,NaN).freeze(),this.Vs=new A(NaN,NaN),this.On=this.ya=1,this.fs=new A(NaN,NaN).freeze(),this.gs=NaN,this.ys=1e-4,this.ws=100,this.qb=new Ht,this.xt=new A(NaN,NaN).freeze(),this.$r=new z(NaN,NaN,NaN,NaN).freeze(),this.Si=new te(0,0,0,0).freeze(),this.Ti=Nu,this.ct=!1,this.Ws=this.Ps=null,this.Pg=Pn,this.Dj=Ei,this.$f=Pn,this.po=Ei,this.hs=this.es=Ue,this.Fc=!0,this.Fl=!1,this.wd=new nt,this.Wg=new Et,this.rl=!0,this.on=250,this.Bj=-1,this.qn=new te(16,16,16,16).freeze(),this.Hj=this.Ee=!1,this.Kj=!0,this.Yf=new Qn,this.Yf.diagram=this,this.pd=new Qn,this.pd.diagram=this,this.hh=new Qn,this.hh.diagram=this,this.we=this.Qf=null,this.hk=!1,this.Qr=this.Rr=null,this.zj=U.PointerEvent&&(lh||Ua||zy)&&U.navigator&&!1!==U.navigator.msPointerEnabled,xM(this),this.Ch=new nt,this.rs=!0,this.rt=qi,this.Tu=!1,this.tt=vh,this.Ka=null,_v.add("Model",Zt),this.Kr=this.Nr=this.pt=null,this.Nn=this.Ir="auto",this.ig=this.Bs=this.kg=this.lg=this.ng=this.Sf=this.Wf=this.Rf=null,this.ds=!1,this.Tf=this.xg=this.mg=this.jg=null,this.Cs=!1,this.Ns={},this.bk=[null,null],this.Cr=null,this.Or=this.gt=this.qv=this.wg=!1,this.$u=!0,this.xi=this.kc=!1,this.bc=null;var o=this;this.Dc=function(a){var u=o.partManager;if(a.model===u.diagram.model&&u.diagram.Z){u.diagram.Z=!1;try{""===a.modelChange&&a.change===Me&&u.updateDataBindings(a.object,a.propertyName)}finally{u.diagram.Z=!0}}},this.Vc=function(a){o.partManager.doModelChanged(a)},this.yv=!0,this.Wd=-2,this.Pi=new Et,this.Ms=new lt,this.bg=!1,this.$h=this.Zh=this.pr=this.nd=!0,this.qr=!1,this.wr=this.ur=this.hi=this.gi=this.fi=this.ei=this.ci=this.di=this.bi=this.tr=this.ji=this.ai=this.ii=this.rr=!0,this.ag=this.Wu=!1,this.vr=this.sr=this.xl=this.wl=!0,this.bt=this.Ys=16,this.Xs=this.Jp=!1,this.Kp=this.$s=null,this.Zs=this.at=0,this.ib=new te(5).freeze(),this.pv=(new nt).freeze(),this.xs=999999999,this.Qu=(new nt).freeze(),this.wi=this.vi=this.ui=!0,this.Ze=this.pe=!1,this.lc=null,this.Og=!0,this.qe=!1,this.Cx=new nt,this.Ru=new nt,this.Ic=null,this.Wl=1,this.rv=0,this.Kc={scale:1,position:new A,bounds:new z,Fv:new Nt,jw:new Nt,gw:!1},this.Sx=new z(NaN,NaN,NaN,NaN).freeze(),this.rm=new Nt(NaN,NaN).freeze(),this.Pn=new z(NaN,NaN,NaN,NaN).freeze(),this.ss=!1,this.Go=this.no=this.fp=this.Eu=this.Du=this.Fu=this.dg=this.fh=this.ef=this.Ur=null,sx(this),this.Jb=null,this.mo=!1,this.Ej=null,this.partManager=new Zt,this.toolManager=new Fe,this.toolManager.initializeStandardTools(),this.currentTool=this.defaultTool=this.toolManager,this.Tr=null,this.kl=new Rl,this.Hs=this.Gs=null,this.bq=!1,this.commandHandler=vv(),this.model=Lm(),this.wg=!0,wv(this),this.layout=new Wt,this.wg=!1,this.vx=this.Iu=null,this.Tb=1,this.xh=null,this.So=1,this.Yo=0,this.gv=[0,0,0,0,0],this.Zo=0,this.xd=1,this.Sj=0,this.Bo=new A,this.qt=500,this.pn=new A,this.re=!1,this.Pk=this.Qk=this.Ok=this.Nk=this.Ik=this.Kk=this.Jk=this.Gk=this.Hk=this.Xw=this.Nw=this.Ow=this.Pw=null,this.Yq=function(){},this.preventDefault=null,this.ro=!1,this.ti=new Cx,this.cq=!1,void 0!==t&&Sd(this,t),this.Zn=null,this.$n=fn,this.Sb=!1}function ox(t,e){t.animationManager.Cc(!0),t.pv=(new nt).freeze(),t.Qu=(new nt).freeze();var n=t.skipsUndoManager;null!==t.model&&(t.skipsUndoManager=!0);var o=null;null!==t.Jb&&null!==(o=t.Jb.part)&&t.remove(o);var a=[],u=t.La.length;if(e){for(e=0;e<u;e++)for(var h=t.La.j[e].parts;h.next();){var f=h.value;f!==o&&null===f.data&&a.push(f)}for(e=0;e<a.length;e++)t.remove(a[e])}for(e=0;e<u;e++)t.La.j[e].clear();return t.partManager.clear(),t.wd.clear(),t.Wg.clear(),t.Ch.clear(),t.Ej=null,ng=[],null!==o&&(t.add(o),t.partManager.parts.remove(o)),null!==t.model&&(t.skipsUndoManager=n),a}function vv(){return null}function sx(t){t.ef=new Et;var e=new ot,n=new le;n.bind(new sn("text","",Pr)),e.add(n),t.Fu=e,t.ef.add("",e),e=new ot,(n=new le).stroke="brown",n.bind(new sn("text","",Pr)),e.add(n),t.ef.add("Comment",e),(e=new ot).selectable=!1,e.avoidable=!1,(n=new At).figure="Ellipse",n.fill="black",n.stroke=null,n.desiredSize=new Nt(3,3).ca(),e.add(n),t.ef.add("LinkLabel",e),t.fh=new Et,(e=new Pt).selectionObjectName="GROUPPANEL",e.type=X.Vertical,(n=new le).font="bold 12pt sans-serif",n.bind(new sn("text","",Pr)),e.add(n),(n=new X(X.Auto)).name="GROUPPANEL";var o=new At;o.figure="Rectangle",o.fill="rgba(128,128,128,0.2)",o.stroke="black",n.add(o),(o=new Ni).padding=new te(5,5,5,5).ca(),n.add(o),e.add(n),t.Du=e,t.fh.add("",e),t.dg=new Et,e=new Q,(n=new At).isPanelMain=!0,e.add(n),(n=new At).toArrow="Standard",n.fill="black",n.stroke=null,n.strokeWidth=0,e.add(n),t.Eu=e,t.dg.add("",e),e=new Q,(n=new At).isPanelMain=!0,n.stroke="brown",e.add(n),t.dg.add("Comment",e),(e=new Gt).type=X.Auto,(n=new At).fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),(n=new Ni).margin=new te(1.5,1.5,1.5,1.5).ca(),e.add(n),t.fp=e,t.no=e,(e=new Gt).type=X.Link,(n=new At).isPanelMain=!0,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),t.Go=e}function Cu(t){30<t.Yo&&(t.xh=1)}function dh(t,e){null!==t.xh&&(t.xh=null,e&&t.Yq(),og&&og.my||(t.Yo=0,t.gv=[0,0,0,0,0],t.Zo=0))}function pd(t){if(null!==t.ta){var e=t.Ea;if(0!==e.clientWidth&&0!==e.clientHeight){t.ov||t.setScrollWidth();var n=t.Ze?t.pb:0,o=t.pe?t.pb:0,a=t.Tb;t.Tb=t.computePixelRatio(),t.Tb!==a&&(t.Fl=!0,t.Eb()),(e.clientWidth!==t.va+n||e.clientHeight!==t.ua+o)&&(t.vi=!0,t.Fc=!0,null!==(e=t.layout)&&e.isViewportSized&&t.autoScale===Pn&&(t.Hj=!0,e.C()),t.kc||t.Eb())}}}function wv(t){var e=new Nn;e.name="Background",t.tm(e),(e=new Nn).name="",t.tm(e),(e=new Nn).name="Foreground",t.tm(e),(e=new Nn).name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.tm(e),(e=new Nn).name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.tm(e),(e=new Nn).name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.Vx(e,t.ym("Background"))}function ax(t){t.Jb=new X(X.Grid),t.Jb.name="GRID";var e=new At;e.figure="LineH",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Jb.add(e),(e=new At).figure="LineH",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Jb.add(e),(e=new At).figure="LineH",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Jb.add(e),(e=new At).figure="LineV",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Jb.add(e),(e=new At).figure="LineV",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Jb.add(e),(e=new At).figure="LineV",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Jb.add(e),(e=new wt).add(t.Jb),e.layerName="Grid",e.zOrder=0,e.isInDocumentBounds=!1,e.isAnimated=!1,e.pickable=!1,e.locationObjectName="GRID",t.add(e),t.partManager.parts.remove(e),t.Jb.visible=!1}function Mu(){this.B.Xs?this.B.Xs=!1:this.B.isEnabled?this.B.iy(this):Mv(this.B)}function jc(t){this.B.isEnabled?(this.B.at=t.target.scrollTop,this.B.Zs=t.target.scrollLeft):Mv(this.B)}function lx(t){if(t.fixedBounds.u()){var e=t.fixedBounds.copy();return e.rq(t.ib),e}for(var n=!0,o=t.La.j,a=o.length,u=0;u<a;u++){var h=o[u];if(h.visible&&h.isInDocumentBounds)for(var f=(h=h.Da.j).length,p=0;p<f;p++){var g=h[p];g.isInDocumentBounds&&g.isVisible()&&(g=g.actualBounds).u()&&(n?(n=!1,e=g.copy()):e.Tc(g))}}return n&&(e=new z(0,0,0,0)),e.rq(t.ib),e}function Fo(t,e){if((e||t.qe)&&!t.Sb&&null!==t.ta&&t.documentBounds.u()){if(e){var n=t.initialPosition;if(n.u())return void(t.position=n);(n=A.alloc()).tj(t.documentBounds,t.initialDocumentSpot);var o=t.viewportBounds;o=z.allocAt(0,0,o.width,o.height);var a=A.alloc();a.tj(o,t.initialViewportSpot),a.h(n.x-a.x,n.y-a.y),t.position=a,z.free(o),A.free(a),A.free(n)}t.Sb=!0,n=t.Pg,e&&t.$f!==Pn&&(n=t.$f),o=n!==Pn?Za(t,n):t.scale,n=t.viewportBounds.copy(),a=t.va/o;var u=t.ua/o,h=t.Dj,f=t.po;e&&!h.kb()&&(f.kb()||f.Nb())&&(h=f.Nb()?ie:f),gd(t,t.documentBounds,a,u,h,e),e=t.scale,t.scale=o,t.Sb=!1,(o=t.viewportBounds).Na(n)||t.Uq(n,o,e,!1),ra(t),Su(t,!0,!1)}}function Za(t,e){var n=t.On;if(null===t.ta)return n;t.Ta();var o=t.documentBounds;if(!o.u())return n;var a=o.width,u=t.va+(t.Ze?t.pb:0),h=t.ua+(t.pe?t.pb:0),f=u/a,p=h/(o=o.height);return e===wo?((e=Math.min(p,f))>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===Cd?((e=p>f?(h-t.pb)/o:(u-t.pb)/a)>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}function gd(t,e,n,o,a,u){var h=A.allocAt(t.la.x,t.la.y),f=h.x,p=h.y;if(null!==t.Zn){var g=A.alloc();f=(g=t.Zn.da(Ue,g)).x-t.$n.x/t.scale,p=g.y-t.$n.y/t.scale,a=gi,A.free(g)}(u||t.scrollMode===Nu)&&(a.kb()&&(n>e.width&&(f=e.x+(a.x*e.width+a.offsetX)-(a.x*n-a.offsetX)),o>e.height&&(p=e.y+(a.y*e.height+a.offsetY)-(a.y*o-a.offsetY))),u=n-e.width,n<e.width+(a=t.Si).left+a.right?(f=Math.min(f+n/2,e.right+Math.max(u,a.right)-n/2),f=Math.max(f,e.left-Math.max(u,a.left)+n/2),f-=n/2):f>e.left?f=e.left:f<e.right-n&&(f=e.right-n),n=o-e.height,o<e.height+a.top+a.bottom?(p=Math.min(p+o/2,e.bottom+Math.max(n,a.bottom)-o/2),p=Math.max(p,e.top-Math.max(n,a.top)+o/2),p-=o/2):p>e.top?p=e.top:p<e.bottom-o&&(p=e.bottom-o)),h.x=isFinite(f)?f:-t.ib.left,h.y=isFinite(p)?p:-t.ib.top,null!==t.positionComputation&&(e=t.positionComputation(t,h),h.x=e.x,h.y=e.y),t.Wc.sc&&fv(t.Wc,t.la,h),t.la.h(h.x,h.y),A.free(h)}function xv(t,e,n,o){for(void 0===n&&(n=null),void 0===o&&(o=null),Ti(t),t=t.La.iteratorBackwards;t.next();){var a=t.value;if(a.visible&&!a.isTemporary&&null!==(a=a.Vb(e,n,o)))return a}return null}function ls(t,e,n){var o=t.pd;return t.pd=t.hh,t.hh=o,o.diagram=t,o.event=e,n?_s(t,e,o):(o.viewPoint=t.pd.viewPoint,o.documentPoint=t.pd.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),o.modifiers=t,o.button=e.button,void 0===e.buttons||Gy||(o.buttons=e.buttons),gu&&0===e.button&&e.ctrlKey&&(o.button=2),o.down=!1,o.up=!1,o.clickCount=1,o.delta=0,o.handled=!1,o.bubbles=!1,o.timestamp=e.timeStamp,o.isMultiTouch=!1,o.targetDiagram=ph(e),o.targetObject=null,o}function ph(t){var e=t.target.B;if(!e){var n=t.path;n||"function"!=typeof t.composedPath||(n=t.composedPath()),n&&n[0]&&(e=n[0].B)}return e||null}function Ag(t,e,n,o){var a=yd(t,e,!0,!1,!0,o);return _s(t,n,a),a.targetDiagram=ph(e),a.targetObject=null,o||a.clone(t.Yf),a}function md(t,e,n,o){if(o=yd(t,e,!1,!1,!1,o),null!==n){var a=U.document.elementFromPoint(n.clientX,n.clientY);null!==a&&null!=a.shadowRoot&&(a=a.shadowRoot.elementFromPoint(n.clientX,n.clientY)),a&&a.B?(e=n,n=a.B):(e=void 0!==e.targetTouches?e.targetTouches[0]:e,n=t),o.targetDiagram=n,_s(t,e,o)}else null!==t.pd?(o.documentPoint=t.pd.documentPoint,o.viewPoint=t.pd.viewPoint,o.targetDiagram=t.pd.targetDiagram):null!==t.Yf&&(o.documentPoint=t.Yf.documentPoint,o.viewPoint=t.Yf.viewPoint,o.targetDiagram=t.Yf.targetDiagram);return o.targetObject=null,o}function yd(t,e,n,o,a,u){var h=t.pd;t.pd=t.hh,t.hh=h,h.diagram=t,h.clickCount=1;var f=h.delta=0;return e.ctrlKey&&(f+=1),e.altKey&&(f+=2),e.shiftKey&&(f+=4),e.metaKey&&(f+=8),h.modifiers=f,h.button=0,h.buttons=1,h.event=e,h.timestamp=e.timeStamp,t.zj&&e instanceof U.PointerEvent&&"touch"!==e.pointerType&&(h.button=e.button,void 0===e.buttons||Gy||(h.buttons=e.buttons),gu&&0===e.button&&e.ctrlKey&&(h.button=2)),h.down=n,h.up=o,h.handled=!1,h.bubbles=a,h.isMultiTouch=u,h}function vo(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),!1!==e.cancelable&&e.preventDefault(),e.cancelBubble=!0,!1)}function _s(t,e,n){var o=t.ta,a=t.va,u=t.ua,h=0,f=0;null!==o&&(o=o.getBoundingClientRect(),h=e.clientX-a/o.width*o.left,f=e.clientY-u/o.height*o.top),n.viewPoint.h(h,f),null!==t.qb?(e=A.allocAt(h,f),t.qb.Jd(e),n.documentPoint.assign(e),A.free(e)):n.documentPoint.h(h,f)}function ux(t,e,n,o){if(void 0!==e.targetTouches){if(2>e.targetTouches.length)return;e=e.targetTouches[n]}else{if(null===t.bk[0])return;e=t.bk[n]}null!==(n=t.ta)&&(n=n.getBoundingClientRect(),o.h(e.clientX-t.va/n.width*n.left,e.clientY-t.ua/n.height*n.top))}function Su(t,e,n){t.animationManager.defaultAnimation.isAnimating||t.Sb||!t.vi||Mv(t)||(e&&Ti(t),n&&Fo(t,!1))}function Ns(t,e){if(!t.kc&&(t.Ee=!1,null!==t.Ea||t.rm.u())){t.kc=!0;var n=t.animationManager,o=t.Ms;if(!n.isAnimating&&0!==o.length){for(var a=o.j,u=a.length,h=0;h<u;h++){var f=a[h];tr(f,!1),f.o()}o.clear()}0<(o=t.Ru).count&&(o.each(function(p){p.Ww()}),o.clear()),a=o=!1,n.isAnimating&&(a=!0,o=t.skipsUndoManager,t.skipsUndoManager=!0),n.sc||pd(t),Su(t,!1,!0),null!==t.Jb&&(t.Jb.visible&&!t.mo&&(aa(t),t.mo=!0),!t.Jb.visible&&t.mo&&(t.mo=!1)),Ti(t),u=!1,(!t.qe||t.Og)&&(t.qe?jg(t,!t.Hj):(t.xa("Initial Layout"),!1===n.isEnabled&&n.Cc(),jg(t,!1)),u=!0),t.Hj=!1,Ti(t),t.gt||function Bc(t){t.kc||Ti(t),t.Ta()}(t),Su(t,!0,!1),h=!1,u?((n=z.alloc()).assign(t.viewportBounds),t.qe||(h=t.qe=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,function tT(t){var e=t.ya;if(t.$f!==Pn)t.scale=Za(t,t.$f);else if(t.Pg!==Pn)t.scale=Za(t,t.Pg);else{var n=t.initialScale;isFinite(n)&&0<n&&(t.scale=n)}t.ya!==e&&(ra(t),Su(t,!0,!1)),Fo(t,!0),t.Nd(e=t.La.j,e.length,t),t.R("InitialLayoutCompleted"),t.Vs.assign(t.la),aa(t)}(t)),t.R("LayoutCompleted"),n.w(t.viewportBounds)||Su(t,!0,!1),z.free(n)):n.Al&&n.Rx&&(t.$f!==Pn?t.scale=Za(t,t.$f):t.Pg!==Pn?t.scale=Za(t,t.Pg):(n=t.initialScale,isFinite(n)&&0<n&&(t.scale=n)),Fo(t,!0)),Ti(t),u&&h&&t.Wa("Initial Layout"),t.Gv(),e||t.cc(t.Hb),a&&(t.skipsUndoManager=o),t.kc=!1}}function Ti(t){if((t.kc||!t.animationManager.isTicking)&&0!==t.wd.count){for(var e=0;23>e;e++){var n=t.wd.iterator;if(null===n||0===t.wd.count)break;t.wd=new nt,t.Ww(n,t.wd)}t.nodes.each(function(o){o instanceof Pt&&0!=(65536&o.P)&&(o.P=65536^o.P)})}}function kg(t,e){for(var n=ye(),o=ye(),a=e.memberParts;a.next();){var u=a.value;u.isVisible()&&(u instanceof Pt?(us(u)||Ri(u)||ma(u))&&kg(t,u):u instanceof Q?u.fromNode===e||u.toNode===e?o.push(u):n.push(u):(u.measure(1/0,1/0),u.arrange()))}for(t=n.length,a=0;a<t;a++)(u=n[a]).measure(1/0,1/0),u.arrange();for(Jt(n),e.measure(1/0,1/0),e.arrange(),t=o.length,e=0;e<t;e++)(n=o[e]).measure(1/0,1/0),n.arrange();Jt(o)}function Ig(t,e,n,o,a,u,h,f,p,g){if(null!==t.Ea){null===t.ta&&W("No canvas specified"),void 0===h&&(h=null),void 0===f&&(f=null),void 0===p&&(p=!1),void 0===g&&(g=!1),Du(t),t.Hb.uc(!0),oa(t),t.xi=!0;var y=t.ya;t.ya=a;var v=t.La.j,x=v.length;try{var S=new z(u.x,u.y,o.width/a,o.height/a),M=S.copy();M.rq(n),aa(t,M),Ti(t),t.Nd(v,x,t,S),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,o.width,o.height),null!==f&&""!==f&&(e.fillStyle=f,e.fillRect(0,0,o.width,o.height));var T=t.Tb;e.scale(T,T);var N=Ht.alloc();if(N.reset(),N.translate(n.left,n.top),N.scale(a),0===u.x&&0===u.y||N.translate(-u.x,-u.y),e.setTransform(N.m11,N.m12,N.m21,N.m22,N.dx,N.dy),Ht.free(N),Cv(t,e),e.globalAlpha=t.hb,null!==h){var P=new nt,I=h.iterator;for(I.reset();I.next();){var O=I.value;!1===g&&"Grid"===O.layer.name||null===O||P.add(O)}var b=function(rt){if(rt.visible&&0!==rt.hb&&(p||!rt.isTemporary)){var tt=rt.Da.j,mt=tt.length;if(0!==mt){var ht=Wn(rt,e),$=rt.mp;$.length=0;for(var zt=t.scale,Lt=z.alloc(),Kt=0;Kt<mt;Kt++){var _e=tt[Kt];P.contains(_e)&&rt.dj(e,_e,t,$,zt,Lt,!1)}z.free(Lt),e.globalAlpha=ht}}}}else if(!p&&g){var B=t.grid.part,K=B.layer;b=function(rt){rt===K?B.cc(e,t):rt.cc(e,t,p)}}else b=function(rt){rt.cc(e,t,p)};for(n=0;n<x;n++)b(v[n]);t.xi=!1,t.ti&&Gc(t.ti,t)&&t.Ur()}finally{t.ya=y,t.Hb.uc(!0),oa(t),t.Nd(v,x,t),aa(t)}}}function Cv(t,e){null!==(t=t.jf)&&(void 0!==t.imageSmoothingEnabled&&e.Ty(!!t.imageSmoothingEnabled),null!=(t=t.defaultFont)&&(e.font=t))}function Ll(t,e){var a,n=t instanceof X,o=t instanceof V;for(a in e){""===a&&W("Setting properties requires non-empty property names");var u=t,h=a;if(n||o){var f=a.indexOf(".");if(0<f){var p=a.substring(0,f);n?u=t.ab(p):null==(u=t[p])&&(u=t.toolManager[p]),$t(u)?h=a.substr(f+1):W("Unable to find object named: "+p+" in "+t.toString()+" when trying to set property: "+a)}}if("_"!==h[0]&&!dn(u,h)){if(o&&"ModelChanged"===h){t.Xx(e[h]);continue}if(o&&"Changed"===h){t.Gh(e[h]);continue}if(o&&dn(t.toolManager,h))u=t.toolManager;else{if(o&&hx(t,h)){t.kk(h,e[h]);continue}if(t instanceof dt&&"Changed"===h){t.Gh(e[h]);continue}W('Trying to set undefined property "'+h+'" on object: '+u.toString())}}u[h]=e[a],"_"===h[0]&&u instanceof Z&&u.Ux(h)}}function ra(t){!1===t.vi&&(t.vi=!0)}function oa(t){!1===t.wi&&(t.wi=!0)}function Du(t){!1!==t.Fl&&(t.Fl=!1,vd(t,t.va,t.ua))}function vd(t,e,n){var o=t.Tb;t.ta.resize(e*o,n*o,e,n)&&(t.Fc=!0,t.Hb.uc(!0))}function Mv(t){var e=t.ta;if(null===e)return!0;var n=t.Ea,o=t.va,a=t.ua,u=t.viewportBounds.copy();if(!u.u())return!0;var h=!1,f=t.Ze?t.pb:0,p=t.pe?t.pb:0,g=n.clientWidth||o+f,y=n.clientHeight||a+p;if((g!==o+f||y!==a+p)&&(t.Ze=!1,t.pe=!1,p=f=0,t.va=g,t.ua=y,h=t.Fl=!0),!(h||t.Ze||t.pe||t.wl||t.xl))return!0;t.vi=!1;var v=t.viewportBounds,x=t.documentBounds,S=0,M=0,T=0,N=0;n=v.width;var P=v.height,I=t.Si;t.contentAlignment.kb()?(x.width>n&&(S=I.left,M=I.right),x.height>P&&(T=I.top,N=I.bottom)):(S=I.left,M=I.right,T=I.top,N=I.bottom),I=x.width+S+M;var O=x.height+T+N;S=x.x-S;var b=v.x;M=x.right+M;var B=v.right+f;T=x.y-T;var K=v.y;x=x.bottom+N,v=v.bottom+p;var rt="1px",tt="1px";if(g=I>g/(N=t.scale),y=O>y/N,t.scrollMode===Nu&&(g||y)&&(g&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(g=1,S+1<b&&(g=Math.max((b-S)*N+t.va,g)),M>B+1&&(g=Math.max((M-B)*N+t.va,g)),n+f+1<I&&(g=Math.max((I-n)*N+t.va,g)),rt=g.toString()+"px"),y&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(g=1,T+1<K&&(g=Math.max((K-T)*N+t.ua,g)),x>v+1&&(g=Math.max((x-v)*N+t.ua,g)),P+p+1<O&&(g=Math.max((O-P)*N+t.ua,g)),tt=g.toString()+"px")),y="1px"!==tt,(g="1px"!==rt)&&y||!g&&!y||(y&&(B-=t.pb),g&&(v-=t.pb),I<n+f||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(f=1,S+1<b&&(f=Math.max((b-S)*N+t.va,f)),M>B+1&&(f=Math.max((M-B)*N+t.va,f)),n+1<I&&(f=Math.max((I-n)*N+t.va,f)),rt=f.toString()+"px"),f=t.ua,(g="1px"!==rt)!==t.pe&&(f=g?t.ua-t.pb:t.ua+t.pb),O<P+p||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(p=1,T+1<K&&(p=Math.max((K-T)*N+f,p)),x>v+1&&(p=Math.max((x-v)*N+f,p)),P+1<O&&(p=Math.max((O-P)*N+f,p)),tt=p.toString()+"px"),y="1px"!==tt),t.Jp&&g===t.pe&&y===t.Ze)return o===t.va&&a===t.ua||t.jd(),!1;if(g!==t.pe&&(t.ua="1px"===rt?t.ua+t.pb:Math.max(t.ua-t.pb,1),h=!0),t.pe=g,t.Kp.style.width=rt,y!==t.Ze&&(t.va="1px"===tt?t.va+t.pb:Math.max(t.va-t.pb,1),h=!0,t.Hl&&(p=A.alloc(),y?(e.style.left=t.pb+"px",t.position=p.h(t.la.x+t.pb/t.scale,t.la.y)):(e.style.left="0px",t.position=p.h(t.la.x-t.pb/t.scale,t.la.y)),A.free(p))),t.Ze=y,t.Kp.style.height=tt,t.Xs=!0,h&&(t.Fl=!0),p=(e=t.$s).scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(n+1<I?p=(t.position.x-S)*N:S+1<b?p=e.scrollWidth-e.clientWidth:M>B+1&&(p=t.position.x*N)),t.Hl)switch(t.Us){case"negative":p=-(e.scrollWidth-p-e.clientWidth);break;case"reverse":p=e.scrollWidth-p-e.clientWidth}return e.scrollLeft=p,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(P+1<O?e.scrollTop=(t.position.y-T)*N:T+1<K?e.scrollTop=e.scrollHeight-e.clientHeight:x>v+1&&(e.scrollTop=t.position.y*N)),y=t.ua,e.style.width=(g=t.va)+(t.Ze?t.pb:0)+"px",e.style.height=y+(t.pe?t.pb:0)+"px",o===g&&a===y&&!t.animationManager.sc||(t.Uq(u,t.viewportBounds,N,h),!1)}function Og(t,e,n){var o=e.layer;null!==o&&o.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.C(2),n&&e.uk(),0<=(n=o.Nc(-1,e,!1))&&t.bb(be,"parts",o,e,null,n,null),null!==(t=e.layerChanged)&&t(e,o,null))}function sa(t,e,n,o,a,u){if(!e.contains(n)&&(void 0===u&&(u=!1),!o||u||n.canMove()||n.canCopy()))if(void 0===a&&(a=Lg(t)),n instanceof ot){if(e.add(n,t.Cd(a,n,n.location)),n instanceof Pt&&(null!==n.placeholder||a.dragsMembers))for(u=n.memberParts;u.next();)sa(t,e,u.value,o,a,a.groupsAlwaysMove);for(u=n.linksConnected;u.next();){var h=u.value;if(!e.contains(h)){var f=h.fromNode,p=h.toNode;null!==f&&e.contains(f)&&null!==p&&e.contains(p)&&sa(t,e,h,o,a)}}if(a.dragsTree)for(n=n.Vv();n.next();)sa(t,e,n.value,o,a)}else if(n instanceof Q)for(e.add(n,t.Cd(a,n)),n=n.labelNodes;n.next();)sa(t,e,n.value,o,a);else n instanceof Gt||e.add(n,t.Cd(a,n,n.location))}function bg(t,e,n,o,a){if(null!==e&&0!==e.count){var u=A.alloc(),h=A.alloc();h.assign(n),isNaN(h.x)&&(h.x=0),isNaN(h.y)&&(h.y=0),(n=t.bq)||Fg(t,e);for(var f=ye(),p=ye(),g=e.iterator,y=A.alloc();g.next();){var v=g.key,x=g.value;if(v.Pc()){var S=Vc(t,v,e);null!==S?f.push(new zc(v,x,S)):(!a||v.canMove())&&(u.assign(S=x.point),t.computeMove(v,u.add(h),o,y),v.location=y,void 0===x.shifted&&(x.shifted=new A),x.shifted.assign(y.ge(S)))}else g.key instanceof Q&&p.push(g.ka)}for(A.free(y),a=f.length,g=0;g<a;g++)u.assign((v=f[g]).info.point),void 0===v.Zv.shifted&&(v.Zv.shifted=new A),v.node.location=u.add(v.Zv.shifted);for(a=A.alloc(),g=A.alloc(),v=p.length,x=0;x<v;x++){var M=p[x];if((S=M.key)instanceof Q)if(S.suspendsRouting){S.sg=null,y=S.fromNode;var T=S.toNode;if(null!==t.draggedLink&&o.dragsLink)if(T=M.value.point,null===S.dragComputation)e.add(S,t.Cd(o,S,h)),Hl(S,h.x-T.x,h.y-T.y);else{M=A.allocAt(0,0),(y=S.i(0))&&y.u()&&M.assign(y);var N=y=A.alloc().assign(M).add(h);o.isGridSnapEnabled&&(o.isGridSnapRealtime||t.lastInput.up)&&Sv(t,S,y,N=A.alloc(),o),y.assign(S.dragComputation(S,y,N)).ge(M),e.add(S,t.Cd(o,S,y)),Hl(S,y.x-T.x,y.y-T.y),A.free(M),A.free(y),N!==y&&A.free(N)}else null!==y&&(a.assign(y.location),null!==(N=e.H(y))&&a.ge(N.point)),null!==T&&(g.assign(T.location),null!==(N=e.H(T))&&g.ge(N.point)),null!==y&&null!==T?a.Na(g)?(y=M.value.point,(T=u).assign(a),T.ge(y),e.add(S,t.Cd(o,S,a)),Hl(S,T.x,T.y)):(S.suspendsRouting=!1,S.Ua()):(M=M.value.point,e.add(S,t.Cd(o,S,y=null!==y?a:null!==T?g:h)),Hl(S,y.x-M.x,y.y-M.y))}else(null===S.fromNode||null===S.toNode)&&(y=M.value.point,e.add(S,t.Cd(o,S,h)),Hl(S,h.x-y.x,h.y-y.y))}A.free(u),A.free(h),A.free(a),A.free(g),Jt(f),Jt(p),n||(Ti(t),Eu(t,e))}}function Lg(t){var e=t.toolManager.findTool("Dragging");return null!==e?e.dragOptions:t.kl}function Sv(t,e,n,o,a){if(void 0===a&&(a=Lg(t)),o.assign(n),null!==e){var u=t.grid;t=(e=a.gridSnapCellSize).width,e=e.height;var h=a.gridSnapOrigin,f=h.x;if(h=h.y,a=a.gridSnapCellSpot,null!==u){var p=u.gridCellSize;isNaN(t)&&(t=p.width),isNaN(e)&&(e=p.height),u=u.gridOrigin,isNaN(f)&&(f=u.x),isNaN(h)&&(h=u.y)}(u=A.allocAt(0,0)).Tk(0,0,t,e,a),R.Dq(n.x,n.y,f+u.x,h+u.y,t,e,o),A.free(u)}}function Fg(t,e){if(null!==e)for(t.bq=!0,t=e.iterator;t.next();)(e=t.key)instanceof Q&&(e.suspendsRouting=!0)}function Eu(t,e){if(null!==e){for(e=e.iterator;e.next();){var n=e.key;n instanceof Q&&(n.suspendsRouting=!1,qd(n)&&n.Ua())}t.bq=!1}}function Vc(t,e,n){return null===(e=e.containingGroup)||null===(t=Vc(t,e,n))&&null===(t=n.H(e))?null:t}function Dv(t,e,n){if(null!==e.diagram&&e.diagram!==t&&W("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),null===n?null!==e.diagram&&W("Cannot add an existing Layer to this Diagram again: "+e):(n.diagram!==t&&W("Existing Layer must be in this Diagram: "+n+" not in "+n.diagram),e===n&&W("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,n=(t=t.La).count;for(var o=0;o<n;o++)t.J(o).name===e&&W("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}function Ev(t,e,n){var o=t.animationManager;if(t.Sb||t.kc)t.ya=n,o.ff&&o.Qd.add(o.B,"scale",e,t.ya);else if(null===t.ta)t.ya=n;else{t.Sb=!0;var a=t.viewportBounds.copy(),u=t.va,h=t.ua;a.width=t.va/e,a.height=t.ua/e;var f=t.zoomPoint.x,p=t.zoomPoint.y,g=t.contentAlignment;isNaN(f)&&(g.Qc()?g.Gf(pe)?f=0:g.Gf(mu)&&(f=u-1):f=g.kb()?g.x*(u-1):u/2),isNaN(p)&&(g.Qc()?g.Gf(kc)?p=0:g.Gf(Ic)&&(p=h-1):p=g.kb()?g.y*(h-1):h/2),null===t.scaleComputation||t.animationManager.defaultAnimation.isAnimating||(n=t.scaleComputation(t,n)),n<t.minScale&&(n=t.minScale),n>t.maxScale&&(n=t.maxScale),u=A.allocAt(t.la.x+f/e-f/n,t.la.y+p/e-p/n),t.position=u,A.free(u),t.ya=n,t.Uq(a,t.viewportBounds,e,!1),t.Sb=!1,Fo(t,!1),o.ff&&o.Qd.add(o.B,"scale",e,t.ya),t.M(),ra(t)}}function aa(t,e){void 0===e&&(e=null);var n=t.Jb;if(null!==n&&n.visible){for(var o=Nt.alloc(),a=1,u=1,h=n.W.j,f=h.length,p=0;p<f;p++){var g=h[p],y=Math.abs(g.interval);2>y||(em(g.figure)?u=u*y/R.uy(u,y):a=a*y/R.uy(a,y))}if(o.h(u*(h=n.gridCellSize).width,a*h.height),null!==e)a=e.width,u=e.height,t=e.x,h=e.y;else{if((e=z.alloc()).h((t=t.viewportBounds).x,t.y,t.width,t.height),!e.u())return void z.free(e);a=e.width,u=e.height,t=e.x,h=e.y,z.free(e)}n.width=a+2*o.width,n.height=u+2*o.height,e=A.alloc(),R.Dq(t,h,0,0,o.width,o.height,e),e.offset(-o.width,-o.height),Nt.free(o),n.part.location=e,A.free(e)}}function gh(t){var e=t.isModified;t.yv!==e&&(t.yv=e,t.R("Modified"))}function Rg(t,e){for(var n=(e=e.W.j).length,o=0;o<n;o++)mh(t,e[o])}function mh(t,e){if(e instanceof Ho){var n=e.element;if(null!==n&&n instanceof HTMLImageElement){var o=e.Zg;if(null!==o&&(o.vl instanceof Event&&null!==e.Ec&&e.Ec(e,o.vl),!0===o.ms&&(null!==e.sf&&e.sf(e,o.nv),null!==e.diagram&&e.diagram.Ms.add(e))),n=n.getAttribute("src"),null===(o=t.Pi.H(n)))(o=[]).push(e),t.Pi.add(n,o);else{for(t=0;t<o.length;t++)if(o[t]===e)return;o.push(e)}}}}function Tu(t,e){if(e instanceof Ho){var n=e.element;if(null!==n&&n instanceof HTMLImageElement){n=n.getAttribute("src");var o=t.Pi.H(n);if(null!==o)for(var a=0;a<o.length;a++)if(o[a]===e){o.splice(a,1),0===o.length&&(t.Pi.remove(n),Hd(n));break}}}}function _u(t,e){t.ui=!1;var n=t.Pn;n.w(e)||(e=e.G(),t.Pn=e,Fo(t,!1),t.R("DocumentBoundsChanged",null,n.copy()),ra(t))}function Fl(t,e){for(var n=t.Ch.iterator;n.next();)Tv(t,n.value,e);null!==t.layout&&(e?t.layout.isValidLayout=!1:t.layout.C())}function Tv(t,e,n){if(null!==e){for(var o=e.Tl.iterator;o.next();)Tv(t,o.value,n);null!==e.layout&&(n?e.layout.isValidLayout=!1:e.layout.C())}}function jg(t,e){if(t.Og&&!t.Or){var n=t.Z;t.Z=!0;var o=t.undoManager.transactionLevel,a=t.layout,u=t.animationManager;try{0===o&&(t.undoManager.isInternalTransaction=!0,t.xa("Layout")),1>=o&&!u.defaultAnimation.isAnimating&&!u.sc&&(e||ia(u,"Layout")),t.Og=!1;for(var h=t.Ch.iterator;h.next();)yh(t,h.value,e,o);a.isValidLayout||(!e||a.isRealtime||null===a.isRealtime||0===o?(a.doLayout(t),Ti(t),a.isValidLayout=!0):t.Og=!0)}finally{e=t.undoManager.isInternalTransaction,0===o&&(t.Wa("Layout"),t.undoManager.isInternalTransaction=!1),!e||0!==o&&1!==o||ex(u),t.Z=n}}}function yh(t,e,n,o){if(null!==e){for(var a=e.Tl.iterator;a.next();)yh(t,a.value,n,o);null===(a=e.layout)||a.isValidLayout||(!n||a.isRealtime||0===o?(e.Qh=!e.location.u(),a.doLayout(e),e.C(32),kg(t,e),a.isValidLayout=!0):t.Og=!0)}}function xM(t){function e(a){var u=a.toLowerCase(),h=new lt;n.add(a,h),n.add(u,h),o.add(a,a),o.add(u,a)}var n=new Et,o=new Et;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.Rr=n,t.Qr=o}function hx(t,e){var n=t.Qr.H(e);return null!==n?n:t.Qr.H(e.toLowerCase())}function Se(t,e){var n=t.Rr.H(e);if(null!==n||null!==(n=t.Rr.H(e.toLowerCase())))return n;W("Unknown DiagramEvent name: "+e)}function cx(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e!==t.toolManager.findTool("Dragging")||!t.bq||e.isComplexRoutingRealtime}function fx(t,e,n,o){if(null===t.Ic&&(t.Ic=new mf),t.Ic.St||t.Ic.group!==n||t.Ic.Wy!==o){if(null===n){(e=t.computeOccupiedArea()).Lc(100,100),t.Ic.initialize(e),e=z.alloc();for(var a=t.nodes;a.next();){var u=a.value,h=u.layer;null!==h&&h.visible&&!h.isTemporary&&dx(t,u,o,e)}z.free(e)}else{for(0<n.memberParts.count&&((e=t.computePartsBounds(n.memberParts,!1)).Lc(20,20),t.Ic.initialize(e)),e=z.alloc(),a=n.memberParts;a.next();)(u=a.value)instanceof ot&&dx(t,u,o,e);z.free(e)}t.Ic.group=n,t.Ic.Wy=o,t.Ic.St=!1}else e&&f0(t.Ic);return t.Ic}function dx(t,e,n,o){if(e!==n)if(e.isVisible()&&e.avoidable&&!e.isLinkLabel){var a=(e=e.getAvoidableRect(o)).x,u=e.y;if(Yl(t=t.Ic,a,u))for(n=(u-t.Bd)/t.gc|0,o=Math.min((a+e.width-t.Ad)/t.fc|0,t.Zi),e=Math.min((u+e.height-t.Bd)/t.gc|0,t.$i),a=(a-t.Ad)/t.fc|0;a<=o;a++)if((u=t.Rb[a]).fill)u.fill(al,n,e+1);else for(var h=n;h<=e;h++)u[h]=al}else if(e instanceof Pt)for(e=e.memberParts;e.next();)(a=e.value)instanceof ot&&dx(t,a,n,o)}function px(t,e){null!==t.Ic&&!t.Ic.St&&(void 0===e&&(e=null),null===e||e.avoidable&&!e.isLinkLabel)&&(t.Ic.St=!0)}function CM(t){-1===t.Bj&&(t.Bj=he(function(){if(-1!==t.Bj&&(t.Lf(),null!==t.lastInput.event)){var e=t.computeAutoScrollPosition(t.pn);e.Na(t.position)||(t.position=e,t.lastInput.documentPoint=t.nu(t.pn),t.doMouseMove(),t.ui=!0,_u(t,t.documentBounds.copy().Tc(t.computeBounds())),t.Fc=!0,t.jd(),CM(t))}},t.on))}function MM(t,e,n){function o(){var y=+new Date;for(u=!0,h.reset();h.next();)if(!h.value[0].Pl){u=!1;break}u||y-g>p?e(n,a,f):U.requestAnimationFrame(o)}for(var a=n.callback,u=!0,h=t.Pi.iterator;h.next();)if(!h.value[0].Pl){u=!1;break}if("function"!=typeof a||u)return e(n,a,t);var f=t,p=n.callbackTimeout||300,g=+new Date;return U.requestAnimationFrame(function(){o()}),null}function SM(t,e,n,o){if(t.animationManager.Cc(),t.jd(),null===t.ta)return null;"object"!=typeof e&&W("properties argument must be an Object.");var a=e.size||null,u=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(u="NaN");var h=e.maxSize;void 0===e.maxSize&&(h="SVG"===n?new Nt(1/0,1/0):new Nt(2e3,2e3));var f=e.position||null,p=e.parts||null,g=void 0===e.padding?1:e.padding,y=e.background||null,v=e.omitTemporary;void 0===v&&(v=!0);var x=e.document||document,S=e.elementFinished||null,M=e.showTemporary;void 0===M&&(M=!v),void 0===(e=e.showGrid)&&(e=M),null!==a&&isNaN(a.width)&&isNaN(a.height)&&(a=null),"number"==typeof g?g=new te(g):g instanceof te||W("MakeImage padding must be a Margin or a number."),g.left=Math.max(g.left,0),g.right=Math.max(g.right,0),g.top=Math.max(g.top,0),g.bottom=Math.max(g.bottom,0),t.Hb.uc(!0);var T=(v=new ro(null,x)).context;if(!(a||u||p||f))return v.width=t.va+Math.ceil(g.left+g.right),v.height=t.ua+Math.ceil(g.top+g.bottom),"SVG"===n?null===o?null:(o.resize(v.width,v.height,v.width,v.height),o.ownerDocument=x,o.Aq=S,Ig(t,o.context,g,new Nt(v.width,v.height),t.ya,t.la,p,y,M,e),o.context):(t.rl=!1,Ig(t,T,g,new Nt(v.width,v.height),t.ya,t.la,p,y,M,e),t.rl=!0,v.context);var N=t.On,P=t.documentBounds.copy();if(P.Kw(t.ib),M)for(var I=t.La.j,O=I.length,b=0;b<O;b++){var B=I[b];if(B.visible&&B.isTemporary)for(var K=(B=B.Da.j).length,rt=0;rt<K;rt++){var tt=B[rt];tt.isInDocumentBounds&&tt.isVisible()&&(tt=tt.actualBounds).u()&&P.Tc(tt)}}if(I=new A(P.x,P.y),null!==p){for(O=!0,(b=p.iterator).reset();b.next();)if((B=b.value)instanceof wt&&(null===(K=B.layer)||K.visible)&&(null===K||M||!K.isTemporary)&&B.isVisible()&&(B=B.actualBounds).u())if(O){O=!1;var mt=B.copy()}else mt.Tc(B);O&&(mt=new z(0,0,0,0)),P.width=mt.width,P.height=mt.height,I.x=mt.x,I.y=mt.y}return null!==f&&f.u()&&(I=f,u||(u=N)),mt=f=0,null!==g&&(f=g.left+g.right,mt=g.top+g.bottom),O=b=0,null!==a&&(b=a.width,O=a.height,isFinite(b)&&(b=Math.max(0,b-f)),isFinite(O)&&(O=Math.max(0,O-mt))),null!==a&&null!==u?("NaN"===u&&(u=N),a.u()?(a=b,P=O):isNaN(O)?(a=b,P=P.height*u):(a=P.width*u,P=O)):null!==a?a.u()?(u=Math.min(b/P.width,O/P.height),a=b,P=O):isNaN(O)?(a=b,P=P.height*(u=b/P.width)):(a=P.width*(u=O/P.height),P=O):null!==u?"NaN"===u&&h.u()?(u=Math.min((h.width-f)/P.width,(h.height-mt)/P.height))>N?(u=N,a=P.width,P=P.height):(a=h.width,P=h.height):(a=P.width*u,P=P.height*u):(u=N,a=P.width,P=P.height),null!==g?(a+=f,P+=mt):g=new te(0),null!==h&&(N=h.width,h=h.height,isNaN(N)&&(N=2e3),isNaN(h)&&(h=2e3),isFinite(N)&&(a=Math.min(a,N)),isFinite(h)&&(P=Math.min(P,h))),v.width=Math.ceil(a),v.height=Math.ceil(P),"SVG"===n?null===o?null:(o.resize(v.width,v.height,v.width,v.height),o.ownerDocument=x,o.Aq=S,Ig(t,o.context,g,new Nt(Math.ceil(a),Math.ceil(P)),u,I,p,y,M,e),o.context):(t.rl=!1,Ig(t,T,g,new Nt(Math.ceil(a),Math.ceil(P)),u,I,p,y,M,e),t.rl=!0,v.context)}as.className="AnimationTrigger",as.Default=rx,as.Immediate=yv,as.Bundled=no,(D=Nn.prototype).clear=function(){this.Da.clear(),this.mp.length=0},D.ee=function(t){this.B=t},D.toString=function(t){void 0===t&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var n=0,o=0,a=0,u=0,h=0,f=this.Da.iterator;f.next();){var p=f.value;p instanceof Pt?a++:p instanceof ot?o++:p instanceof Q?u++:p instanceof Gt?h++:n++}if(f="",0<n&&(f+=n+" Parts "),0<o&&(f+=o+" Nodes "),0<a&&(f+=a+" Groups "),0<u&&(f+=u+" Links "),0<h&&(f+=h+" Adornments "),1<t)for(t=this.Da.iterator;t.next();)f+="\n    "+(n=t.value).toString(),null!==(o=n.data)&&En(o)&&(f+=" #"+En(o)),n instanceof ot?f+=" "+Pr(o):n instanceof Q&&(f+=" "+Pr(n.fromNode)+" "+Pr(n.toNode));return e+" "+this.Da.count+": "+f},D.Vb=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),!1===this.Oi)return null;var o=!1;null!==this.diagram&&this.diagram.viewportBounds.$(t)&&(o=!0);for(var a=A.alloc(),u=this.Da.j,h=u.length;h--;){var f=u[h];if((!0!==o||!1!==yr(f))&&f.isVisible()&&(a.assign(t),bi(a,f.Fd),null!==(f=f.Vb(a,e,n))&&(null!==e&&(f=e(f)),null!==f&&(null===n||n(f)))))return A.free(a),f}return A.free(a),null},D.hj=function(t,e,n,o){if(void 0===e&&(e=null),void 0===n&&(n=null),o instanceof lt||o instanceof nt||(o=new nt),!1===this.Oi)return o;var a=!1;null!==this.diagram&&this.diagram.viewportBounds.$(t)&&(a=!0);for(var u=A.alloc(),h=this.Da.j,f=h.length;f--;){var p=h[f];if((!0!==a||!1!==yr(p))&&p.isVisible()){u.assign(t),bi(u,p.Fd);var g=p;p.hj(u,e,n,o)&&(null!==e&&(g=e(g)),null===g||null!==n&&!n(g)||o.add(g))}}return A.free(u),o},D.Bf=function(t,e,n,o,a){if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=!1),a instanceof lt||a instanceof nt||(a=new nt),!1===this.Oi)return a;var u=!1;null!==this.diagram&&this.diagram.viewportBounds.Ge(t)&&(u=!0);for(var h=this.Da.j,f=h.length;f--;){var p=h[f];if((!0!==u||!1!==yr(p))&&p.isVisible()){var g=p;p.Bf(t,e,n,o,a)&&(null!==e&&(g=e(g)),null===g||null!==n&&!n(g)||a.add(g))}}return a},D.Uv=function(t,e,n,o,a,u,h){if(!1===this.Oi)return a;for(var f=this.Da.j,p=f.length;p--;){var g=f[p];if((!0!==h||!1!==yr(g))&&u(g)&&g.isVisible()){var y=g;g.Bf(t,e,n,o,a)&&(null!==e&&(y=e(y)),null===y||null!==n&&!n(y)||a.add(y))}}return a},D.Fg=function(t,e,n,o,a,u){if(void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=!0),!1!==a&&!0!==a&&((a instanceof lt||a instanceof nt)&&(u=a),a=!0),u instanceof lt||u instanceof nt||(u=new nt),!1===this.Oi)return u;var h=!1;null!==this.diagram&&this.diagram.viewportBounds.$(t)&&(h=!0);for(var f=A.alloc(),p=A.alloc(),g=this.Da.j,y=g.length;y--;){var v=g[y];if((!0!==h||!1!==yr(v))&&v.isVisible()){f.assign(t),bi(f,v.Fd),p.h(t.x+e,t.y),bi(p,v.Fd);var x=v;v.Fg(f,p,n,o,a,u)&&(null!==n&&(x=n(x)),null===x||null!==o&&!o(x)||u.add(x))}}return A.free(f),A.free(p),u},D.Nd=function(t,e){if(this.visible){var n=this.Da.j,o=n.length;if(0!==o){t=ye();for(var a=ye(),u=0;u<o;u++){var h=n[u];if(h.Bx=u,h instanceof Q){if(!1===h.kd)continue}else if(h instanceof Gt&&null!==h.adornedPart)continue;iM(h.actualBounds,e)?(h.Nd(!0),t.push(h)):(h.Nd(!1),null!==h.adornments&&0<h.adornments.count&&a.push(h))}for(e=0;e<t.length;e++)for(Ih(n=t[e]),n=n.adornments;n.next();)(o=n.value).measure(1/0,1/0),o.arrange(),o.Nd(!0);for(e=0;e<a.length;e++)Ih(a[e]);Jt(t),Jt(a)}}},D.cc=function(t,e,n){if(this.visible&&0!==this.hb&&(void 0===n&&(n=!0),n||!this.isTemporary)){var o=(n=this.Da.j).length;if(0!==o){var a=Wn(this,t),u=this.mp;u.length=0;for(var h=e.scale,f=z.alloc(),p=0;p<o;p++)this.dj(t,n[p],e,u,h,f,!0);z.free(f),t.globalAlpha=a}}},D.dj=function(t,e,n,o,a,u,h){if(!h||yr(e)){if(null!==o&&e instanceof Q&&(e.isOrthogonal&&o.push(e),!1===e.kd))return;for(h=!1,o=e.containingGroup;null!==o;)h?null!==o.Ya&&u.Dy(o.Ya):null!==o.Ya&&(h=!0,u.assign(o.Ya)),o=o.containingGroup;var f=e.actualBounds;if(o=!1,h&&e.isVisible()){if(!u.Oc(f))return;o=!u.Ge(f)}o&&(t.save(),t.beginPath(),t.rect(u.x,u.y,u.width,u.height),t.clip()),f.width*a>n.So||f.height*a>n.So?e.cc(t,n):(u=e.naturalBounds,0===(a=e.actualBounds).width||0===a.height||isNaN(a.x)||isNaN(a.y)||!e.isVisible()||(n=e.transform,null!==e.areaBackground&&(pr(e,t,e.areaBackground,!0,!0,u,a),t.fillRect(a.x,a.y,a.width,a.height)),null===e.areaBackground&&null===e.background&&(pr(e,t,"rgba(0,0,0,0.3)",!0,!1,u,a),t.fillRect(a.x,a.y,a.width,a.height)),null!==e.background&&(t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),pr(e,t,e.background,!0,!1,u,a),t.fillRect(0,0,u.width/2,u.height/2),n.Ut()||t.transform(n.m22*(e=1/(n.m11*n.m22-n.m12*n.m21)),-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy))))),o&&(t.restore(),t.uc(!0))}},D.g=function(t,e,n,o,a){var u=this.diagram;null!==u&&u.bb(Me,t,this,e,n,o,a)},D.oj=function(t,e,n){var o=this.Da;if(e.Ei=this,t>=o.count)t=o.count;else if(o.J(t)===e)return-1;return o.wb(t,e),e.Jq(n),null!==(o=this.diagram)&&(n?o.M():o.oj(e)),Ng(this,t,e),t},D.Nc=function(t,e,n){if(!n&&e.layer!==this&&null!==e.layer)return e.layer.Nc(t,e,n);var o=this.Da;if(0>t||t>=o.length){if(0>(t=o.indexOf(e)))return-1}else if(o.J(t)!==e&&0>(t=o.indexOf(e)))return-1;return e.Kq(n),o.cb(t),null!==(o=this.diagram)&&(n?o.M():o.Nc(e)),e.Ei=null,t},L.Object.defineProperties(Nn.prototype,{parts:{get:function(){return this.Da.iterator}},partsBackwards:{get:function(){return this.Da.iteratorBackwards}},diagram:{get:function(){return this.B}},name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;if(e!==t){var n=this.diagram;if(null!==n)for(""===e&&W("Cannot rename default Layer to: "+t),n=n.layers;n.next();)n.value.name===t&&W("Layer.name is already present in this diagram: "+t);for(this.Qa=t,this.g("name",e,t),t=this.Da.iterator;t.next();)t.value.layerName=this.Qa}}},opacity:{get:function(){return this.hb},set:function(t){var e=this.hb;e!==t&&((0>t||1<t)&&qt(t,"0 <= value <= 1",Nn,"opacity"),this.hb=t,this.g("opacity",e,t),null!==(t=this.diagram)&&t.M())}},isTemporary:{get:function(){return this.v},set:function(t){var e=this.v;e!==t&&(this.v=t,this.isInDocumentBounds=!1,this.g("isTemporary",e,t))}},visible:{get:function(){return this.I},set:function(t){var e=this.I;if(e!==t){for(this.I=t,this.g("visible",e,t),e=this.Da.iterator;e.next();)e.value.Pb(t);null!==(t=this.diagram)&&t.M()}}},pickable:{get:function(){return this.Oi},set:function(t){var e=this.Oi;e!==t&&(this.Oi=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t,null!==this.diagram&&this.diagram.Oa())}},allowCopy:{get:function(){return this.Zh},set:function(t){var e=this.Zh;e!==t&&(this.Zh=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.ii},set:function(t){var e=this.ii;e!==t&&(this.ii=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.ji},set:function(t){var e=this.ji;e!==t&&(this.ji=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.di},set:function(t){var e=this.di;e!==t&&(this.di=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.ci},set:function(t){var e=this.ci;e!==t&&(this.ci=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.ei},set:function(t){var e=this.ei;e!==t&&(this.ei=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.fi},set:function(t){var e=this.fi;e!==t&&(this.fi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.gi},set:function(t){var e=this.gi;e!==t&&(this.gi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.hi},set:function(t){var e=this.hi;e!==t&&(this.hi=t,this.g("allowSelect",e,t))}}}),Nn.prototype.findObjectsNear=Nn.prototype.Fg,Nn.prototype.findObjectsIn=Nn.prototype.Bf,Nn.prototype.findObjectsAt=Nn.prototype.hj,Nn.prototype.findObjectAt=Nn.prototype.Vb,Nn.className="Layer",V.prototype.clear=function(){this.animationManager.Cc(),this.model.clear(),wd=null,xd="",ox(this,!1),this.Oa(),this.Ta(),this.M()},V.prototype.reset=function(){this.clear(),this.Sb=!0,this.Wc=new Yn,this.Wc.ee(this),this.pb=17,this.Hl=this.ov=!1,this.Us="default",this.La=new lt,this.Lx=new Et,this.jf=null,this.yw(),this.Nj=null,this.xw(),this.hb=1,this.la=new A(NaN,NaN).freeze(),this.Vs=new A(NaN,NaN),this.On=this.ya=1,this.fs=new A(NaN,NaN).freeze(),this.gs=NaN,this.ys=1e-4,this.ws=100,this.qb=new Ht,this.xt=new A(NaN,NaN).freeze(),this.$r=new z(NaN,NaN,NaN,NaN).freeze(),this.Si=new te(0,0,0,0).freeze(),this.Ti=Nu,this.ct=!1,this.Ws=this.Ps=null,this.Pg=Pn,this.Dj=Ei,this.$f=Pn,this.po=Ei,this.hs=this.es=Ue,this.Fc=!0,this.Fl=!1,this.wd=new nt,this.Wg=new Et,this.rl=!0,this.on=250,this.Bj=-1,this.qn=new te(16,16,16,16).freeze(),this.Hj=this.Ee=!1,this.Kj=!0,this.Yf=new Qn,this.Yf.diagram=this,this.pd=new Qn,this.pd.diagram=this,this.hh=new Qn,this.hh.diagram=this,this.we=this.Qf=null,this.hk=!1,this.Qr=this.Rr=null,this.zj=U.PointerEvent&&(lh||Ua||zy)&&U.navigator&&!1!==U.navigator.msPointerEnabled,xM(this),this.Ch=new nt,this.rs=!0,this.rt=qi,this.Tu=!1,this.tt=vh,this.Kr=this.Nr=this.pt=null,this.Nn=this.Ir="auto",this.ig=this.Bs=this.kg=this.lg=this.ng=this.Sf=this.Wf=this.Rf=null,this.ds=!1,this.Tf=this.xg=this.mg=this.jg=null,this.Cs=!1,this.Ns={},this.bk=[null,null],this.Cr=null,this.Or=this.gt=this.qv=this.wg=!1,this.$u=!0,this.xi=this.kc=!1,this.yv=!0,this.Wd=-2,this.Pi=new Et,this.Ms=new lt,this.bg=!1,this.$h=this.Zh=this.pr=this.nd=!0,this.qr=!1,this.wr=this.ur=this.hi=this.gi=this.fi=this.ei=this.ci=this.di=this.bi=this.tr=this.ji=this.ai=this.ii=this.rr=!0,this.ag=this.Wu=!1,this.vr=this.sr=this.xl=this.wl=!0,this.bt=this.Ys=16,this.Xs=this.Jp=!1,this.Zs=this.at=0,this.ib=new te(5).freeze(),this.pv=(new nt).freeze(),this.xs=999999999,this.Qu=(new nt).freeze(),this.wi=this.vi=this.ui=!0,this.Ze=this.pe=!1,this.lc=null,this.Og=!0,this.qe=!1,this.Cx=new nt,this.Ru=new nt,this.Ic=null,this.Wl=1,this.rv=0,this.Kc={scale:1,position:new A,bounds:new z,Fv:new Nt,jw:new Nt,gw:!1},this.Sx=new z(NaN,NaN,NaN,NaN).freeze(),this.rm=new Nt(NaN,NaN).freeze(),this.Pn=new z(NaN,NaN,NaN,NaN).freeze(),this.ss=!1,this.Go=this.no=this.fp=this.Eu=this.Du=this.Fu=this.dg=this.fh=this.ef=null,sx(this),this.Jb=null,this.mo=!1,this.Ej=null,this.partManager=new Zt,this.toolManager=new Fe,this.toolManager.initializeStandardTools(),this.currentTool=this.defaultTool=this.toolManager,this.Tr=null,this.kl=new Rl,this.Hs=this.Gs=null,this.bq=!1,this.commandHandler=vv(),this.wg=!0,wv(this),this.layout=new Wt,this.wg=!1,this.model=Lm(),this.model.undoManager=new Le,this.qe=!1,this.Kj=!0,this.Ee=!1,this.Tb=1,this.xh=null,this.So=1,this.Yo=0,this.gv=[0,0,0,0,0],this.Zo=0,this.xd=1,this.Sj=0,this.Bo=new A,this.qt=500,this.pn=new A,this.cq=this.ro=this.re=!1,this.Zn=null,this.$n=fn,this.Sb=!1,this.M()},V.prototype.setRTL=function(t){null===(t=void 0===t?this.div:t)&&(t=U.document.body);var e=Ke("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var n="reverse";0<e.scrollLeft?n="default":(e.scrollLeft=1,0===e.scrollLeft&&(n="negative")),t.removeChild(e),this.Us=n},V.prototype.setScrollWidth=function(t){null===(t=void 0===t?this.div:t)&&(t=U.document.body);var e=0;if(dr){var n=Bg;e=Qi,null===n&&((n=Bg=Ke("p")).style.width="100%",n.style.height="200px",n.style.boxSizing="content-box",(e=Qi=Ke("div")).style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(n)),e.style.overflow="hidden",t.appendChild(e);var o=n.offsetWidth;e.style.overflow="scroll",o===(n=n.offsetWidth)&&(n=e.clientWidth),t.removeChild(e),0!=(e=o-n)||Lw||(e=11)}this.pb=e,this.ov=!0},V.prototype.jb=function(t){t.classType===V&&(this.autoScale=t)},V.prototype.toString=function(t){void 0===t&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var n=this.La.iterator;n.next();)e+="\n  "+n.value.toString(t-1);return e},V.prototype.addEventListener=function(t,e,n,o){t.addEventListener(e,n,{capture:o,passive:!1})},V.prototype.removeEventListener=function(t,e,n,o){t.removeEventListener(e,n,{capture:o})},V.prototype.computePixelRatio=function(){return null!==this.xh?this.xh:U.devicePixelRatio||1},V.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},V.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},V.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},V.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},V.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},V.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},V.prototype.doFocus=function(){this.focus()},V.prototype.focus=function(){if(this.ta)if(this.scrollsPageOnFocus)this.ta.focus();else{var t=U.scrollX||U.pageXOffset,e=U.scrollY||U.pageYOffset;this.ta.focus(),U.scrollTo(t,e)}},V.prototype.Bz=function(){this.B.R("GainedFocus")},V.prototype.Az=function(){this.B.R("LostFocus")},V.prototype.iy=function(t){if(null!==this.ta){this.Jp=!0;var e=this.documentBounds,n=this.viewportBounds,o=this.Si,a=e.x-o.left,u=e.y-o.top,h=e.width+o.left+o.right,f=e.height+o.top+o.bottom,p=e.right+o.right;o=e.bottom+o.bottom;var g=n.x;e=n.y;var y=n.width,v=n.height,x=n.right,S=n.bottom;n=this.scale;var M=t.scrollLeft;if(this.Hl)switch(this.Us){case"negative":M=M+t.scrollWidth-t.clientWidth;break;case"reverse":M=t.scrollWidth-M-t.clientWidth}var T=M;y<h||v<f?(M=A.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.Zs!==T&&(M.x=T/n+a,this.Zs=T),this.allowVerticalScroll&&this.at!==t.scrollTop&&(M.y=t.scrollTop/n+u,this.at=t.scrollTop),this.position=M,A.free(M),this.vi=this.Jp=!1):(M=A.alloc(),t.hz&&this.allowHorizontalScroll&&(a<g&&(this.position=M.h(T+a,this.position.y)),p>x&&(this.position=M.h(-(this.$s.scrollWidth-this.va)+T-this.va/n+p,this.position.y))),t.iz&&this.allowVerticalScroll&&(u<e&&(this.position=M.h(this.position.x,t.scrollTop+u)),o>S&&(this.position=M.h(this.position.x,-(this.$s.scrollHeight-this.ua)+t.scrollTop-this.ua/n+o))),A.free(M),oa(this),this.vi=this.Jp=!1,p=(e=this.documentBounds).right,x=(n=this.viewportBounds).right,o=e.bottom,S=n.bottom,a=e.x,g=n.x,u=e.y,e=n.y,y>=h&&a>=g&&p<=x&&(this.Kp.style.width="1px"),v>=f&&u>=e&&o<=S&&(this.Kp.style.height="1px"))}},V.prototype.computeBounds=function(){return 0<this.wd.count&&Ti(this),lx(this)},V.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);var n=null;if(Dn(t))for(var o=0;o<t.length;o++){var a=t[o];!e&&a instanceof Q||(a.Ta(),null===n?n=a.actualBounds.copy():n.Tc(a.actualBounds))}else for(t=t.iterator;t.next();)o=t.value,!e&&o instanceof Q||(o.Ta(),null===n?n=o.actualBounds.copy():n.Tc(o.actualBounds));return null===n?new z(NaN,NaN,0,0):n},V.prototype.zoomToFit=function(){var t=this.Ti;this.Ti=Nu,this.scale=Za(this,wo),t!==Nu&&(Fo(this,!1),gd(this,this.documentBounds,this.va/this.ya,this.ua/this.ya,this.Dj,!1)),this.Ti=t},(D=V.prototype).kB=function(t,e){void 0===e&&(e=wo);var n=t.width,o=t.height;if(!(0===n||0===o||isNaN(n)&&isNaN(o))){var a=1;if(e===wo||e===Cd)if(isNaN(n))a=this.viewportBounds.height*this.scale/o;else if(isNaN(o))a=this.viewportBounds.width*this.scale/n;else{a=this.va;var u=this.ua;a=e===Cd?u/o>a/n?(u-(this.pe?this.pb:0))/o:(a-(this.Ze?this.pb:0))/n:Math.min(u/o,a/n)}this.scale=a,this.position=new A(t.x,t.y)}},D.uz=function(t,e){this.Ta();var n=this.documentBounds,o=this.viewportBounds;this.position=new A(n.x+(t.x*n.width+t.offsetX)-(e.x*o.width-e.offsetX),n.y+(t.y*n.height+t.offsetY)-(e.y*o.height-e.offsetY))},D.kA=function(t){if(t instanceof Z){this.Zn=t;var e=A.alloc();this.$n=this.hr(t.da(Ue,e)),A.free(e)}else this.Zn=null,this.$n=fn},D.zm=function(t,e){if(void 0===e&&(e=!0),e){if((t=xv(this,t,function(n){return n.part},function(n){return n.canSelect()}))instanceof wt)return t}else if((t=xv(this,t,function(n){return n.part}))instanceof wt)return t;return null},D.Vb=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),Ti(this);for(var o=this.La.iteratorBackwards;o.next();){var a=o.value;if(a.visible&&null!==(a=a.Vb(t,e,n)))return a}return null},D.Zz=function(t,e,n){return void 0===e&&(e=!0),function wM(t,e,n,o,a){for(void 0===n&&(n=null),void 0===o&&(o=null),a instanceof lt||a instanceof nt||(a=new nt),Ti(t),t=t.La.iteratorBackwards;t.next();){var u=t.value;u.visible&&!u.isTemporary&&u.hj(e,n,o,a)}return a}(this,t,function(o){return o.part},e?function(o){return o instanceof wt&&o.canSelect()}:null,n)},D.hj=function(t,e,n,o){void 0===e&&(e=null),void 0===n&&(n=null),o instanceof lt||o instanceof nt||(o=new nt),Ti(this);for(var a=this.La.iteratorBackwards;a.next();){var u=a.value;u.visible&&u.hj(t,e,n,o)}return o},D.ty=function(t,e,n,o){return void 0===e&&(e=!1),void 0===n&&(n=!0),function QE(t,e,n,o,a){var u=null;for(void 0===u&&(u=null),void 0===n&&(n=null),void 0===o&&(o=!1),a instanceof lt||a instanceof nt||(a=new nt),Ti(t),t=t.La.iteratorBackwards;t.next();){var h=t.value;h.visible&&!h.isTemporary&&h.Bf(e,u,n,o,a)}return a}(this,t,function(a){return a instanceof wt&&(!n||a.canSelect())},e,o)},D.Bf=function(t,e,n,o,a){void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=!1),a instanceof lt||a instanceof nt||(a=new nt),Ti(this);for(var u=this.La.iteratorBackwards;u.next();){var h=u.value;h.visible&&h.Bf(t,e,n,o,a)}return a},D.Uv=function(t,e,n,o,a,u){var h=new nt;Ti(this);for(var f=this.La.iteratorBackwards;f.next();){var p=f.value;p.visible&&p.Uv(t,e,n,o,h,a,u)}return h},D.$z=function(t,e,n,o,a){return void 0===n&&(n=!0),void 0===o&&(o=!0),function qE(t,e,n,o,a,u){var h=null;for(void 0===h&&(h=null),void 0===o&&(o=null),void 0===a&&(a=!0),!1!==a&&!0!==a&&((a instanceof lt||a instanceof nt)&&(u=a),a=!0),u instanceof lt||u instanceof nt||(u=new nt),Ti(t),t=t.La.iteratorBackwards;t.next();){var f=t.value;f.visible&&!f.isTemporary&&f.Fg(e,n,h,o,a,u)}return u}(this,t,e,function(u){return u instanceof wt&&(!o||u.canSelect())},n,a)},D.Fg=function(t,e,n,o,a,u){void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=!0),!1!==a&&!0!==a&&((a instanceof lt||a instanceof nt)&&(u=a),a=!0),u instanceof lt||u instanceof nt||(u=new nt),Ti(this);for(var h=this.La.iteratorBackwards;h.next();){var f=h.value;f.visible&&f.Fg(t,e,n,o,a,u)}return u},V.prototype.acceptEvent=function(t){return ls(this,t,t instanceof MouseEvent)},V.prototype.BA=function(t){var e=this.B;if(!this.B.isEnabled)return!1;var n=ls(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.down=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del";break;case 48:n.key="0";break;case 187:case 61:case 107:n.key="Add";break;case 189:case 173:case 109:n.key="Subtract";break;case 27:n.key="Esc"}return e.doKeyDown(),vo(n,t)},V.prototype.CA=function(t){var e=this.B;if(!e.isEnabled)return!1;var n=ls(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.up=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del"}return e.doKeyUp(),vo(n,t)},V.prototype.Oz=function(t){var e=this.B;if(!e.isEnabled)return!1;var n=ls(e,t,!0);return null!==e.mouseEnter&&e.mouseEnter(n),vo(n,t)},V.prototype.Pz=function(t){var e=this.B;if(!e.isEnabled)return!1;var n=ls(e,t,!0);return null!==e.mouseLeave&&e.mouseLeave(n),vo(n,t)},V.prototype.getMouse=function(t){var e=this.ta;if(null===e)return new A(0,0);var n=e.getBoundingClientRect();return e=t.clientX-this.va/n.width*n.left,t=t.clientY-this.ua/n.height*n.top,null!==this.qb?bi(new A(e,t),this.qb):new A(e,t)},(D=V.prototype).Oa=function(){this.ui||(this.ui=!0,this.Eb(!0))},D.Me=function(){this.Sb||this.kc||(this.M(),ra(this),oa(this),this.Oa(),this.jd())},D.AA=function(){return this.Ee},D.Jz=function(t){void 0===t&&(t=null);var e=this.animationManager,n=e.isEnabled;e.Cc(),e.isEnabled=!1,Ns(this),this.qe=!1,this.Vs=new A(NaN,NaN),e.isEnabled=n,this.kc=!0;var o=this;null!==t&&he(function(){o.kc=!1,ia(e,"Model"),t()},1)},D.Eb=function(t){if(void 0===t&&(t=!1),!0!==this.Ee&&!(this.Sb||!1===t&&this.kc)){this.Ee=!0;var e=this;U.requestAnimationFrame(function(){e.Ee&&e.jd()})}},D.jd=function(){(!this.Kj||this.Ee)&&(this.Kj&&(this.Kj=!1),Ns(this))},D.Ww=function(t,e){for(t.reset();t.next();){var n=t.value;!n.Pc()||n instanceof Pt||(n.rj()?(n.measure(1/0,1/0),n.arrange()):e.add(n))}for(t.reset();t.next();)(n=t.value)instanceof Pt&&n.isVisible()&&kg(this,n);for(t.reset();t.next();)(n=t.value)instanceof Q&&n.isVisible()&&(n.rj()?(n.measure(1/0,1/0),n.arrange()):e.add(n));for(t.reset();t.next();)(n=t.value)instanceof Gt&&n.isVisible()&&(n.rj()?(n.measure(1/0,1/0),n.arrange()):e.add(n))},D.Nd=function(t,e,n,o){if(this.wi||this.animationManager.isAnimating){void 0===o&&(o=n.viewportBounds);for(var a=0;a<e;a++)t[a].Nd(n,o)}},D.cc=function(t,e){if(void 0===e&&(e=null),null!==this.Ea){null===this.ta&&W("No canvas specified");var n=this.animationManager;if(!n.sc&&(!n.isAnimating||n.isTicking)){var o=new Date;if(Du(this),"0"!==this.Ea.style.opacity){var a=t!==this.Hb,u=this.La.j,h=u.length,f=this;if(this.Nd(u,h,f),a)t.uc(!0),oa(this);else if(!this.Fc&&null===e&&!n.isAnimating)return;h=this.la;var p=this.ya,g=Math.round(h.x*p)/p,y=Math.round(h.y*p)/p;for((n=this.qb).reset(),1!==p&&n.scale(p),0===h.x&&0===h.y||n.translate(-g,-y),p=this.Tb,t.setTransform(1,0,0,1,0,0),t.scale(p,p),t.clearRect(0,0,this.va,this.ua),1!==this.hb&&(t.globalAlpha=this.hb),Cv(this,t),g=null!==e?function(v){var x=e;if(v.visible&&0!==v.hb){var S=v.Da.j,M=S.length;if(0!==M){var T=Wn(v,t),N=v.mp;N.length=0;for(var P=f.scale,I=z.alloc(),O=0;O<M;O++){var b=S[O];x.contains(b)||v.dj(t,b,f,N,P,I,!0)}z.free(I),t.globalAlpha=T}}}:function(v){v.cc(t,f)},h=u.length,y=0;y<h;y++)t.setTransform(1,0,0,1,0,0),t.scale(p,p),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),g(u[y]);if(u=!1,this.ti?Gc(this.ti,this)&&(u=this.Ur()):u=!0,u&&(Ht.prototype.Jd=Ht.prototype.$x),a?(this.Hb.uc(!0),oa(this)):this.Fc=this.wi=!1,u=+new Date-+o,o=this.gv,(a=og&&og.my)||null===this.xh){for(o[this.Zo]=u,this.Zo=(this.Zo+1)%o.length,n=u=0;n<o.length;n++)u+=o[n];this.Yo=u/o.length}if(1!==this.hb&&(t.globalAlpha=1),a)for(t.setTransform(1,0,0,1,0,0),a=0;a<o.length;a++)t.fillText(o[a].toString(),20,150+20*a)}}}},D.Je=function(t){return this.jf[t]},D.Uy=function(t,e){"minDrawingLength"===t&&(this.So=e),this.jf[t]=e,this.Me()},D.yw=function(){this.jf=new Ki,this.jf.drawShadows=!0,this.jf.textGreeking=!0,this.jf.viewportOptimizations=!(Lw||lh||Ua),this.jf.temporaryPixelRatio=!0,this.jf.pictureRatioOptimization=!0,this.So=this.jf.minDrawingLength=1},D.Bm=function(t){return this.Nj[t]},D.ZA=function(t,e){this.Nj[t]=e},D.xw=function(){this.Nj=new Ki,this.Nj.extraTouchArea=10,this.Nj.extraTouchThreshold=10,this.Nj.hasGestureZoom=!0},D.Gw=function(t){Ll(this,t)},D.Gv=function(){if(0===this.undoManager.transactionLevel&&0!==this.Wg.count){for(;0<this.Wg.count;){var t=this.Wg;for(this.Wg=new Et,t=t.iterator;t.next();){var e=t.key;e.Mq(t.value),e.dc()}}this.M()}},D.M=function(t){if(void 0===t&&(t=null),null===t)this.Fc=!0,this.Eb();else{var e=this.viewportBounds;null!==t&&t.u()&&e.Oc(t)&&(this.Fc=!0,this.Eb())}this.R("InvalidateDraw")},D.Fy=function(t,e){if(!0!==this.Fc){this.Fc=!0;var n=!0===this.Je("temporaryPixelRatio");if(!0===this.Je("viewportOptimizations")&&this.scrollMode!==Vg&&this.Si.fj(0,0,0,0)&&e.width===t.width&&e.height===t.height){var o=this.scale,a=Math.max(t.x,e.x),u=Math.max(t.y,e.y);if(o=z.allocAt(a,u,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-a)*o,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-u)*o),!this.cq&&0<o.width&&0<o.height){if(!(this.kc||(this.Ee=!1,null===this.Ea||(this.kc=!0,this.Gv(),this.documentBounds.u()||_u(this,this.computeBounds()),a=this.ta,null===a||a instanceof ua)))){var h=this.Tb;u=this.va*h;var f=this.ua*h,p=this.scale*h,g=Math.round(Math.round(e.x*p)-Math.round(t.x*p));e=Math.round(Math.round(e.y*p)-Math.round(t.y*p)),t=this.vx,(p=this.Iu).width!==u&&(p.width=u),p.height!==f&&(p.height=f),t.clearRect(0,0,u,f),p=190*h;var y=70*h,v=Math.max(g,0),x=Math.max(e,0),S=Math.floor(u-v),M=Math.floor(f-x);t.drawImage(a.Ga,v,x,S,M,0,0,S,M),Gc(this.ti,this)&&t.clearRect(0,0,p,y),a=ye(),t=ye(),M=Math.abs(g),S=Math.abs(e);var T=0===v?0:u-M;v=A.allocAt(T,0),M=A.allocAt(M+T,f),t.push(new z(Math.min(v.x,M.x),Math.min(v.y,M.y),Math.abs(v.x-M.x),Math.abs(v.y-M.y)));var N=this.qb;if(N.reset(),N.scale(h,h),1!==this.ya&&N.scale(this.ya),(0!==(h=this.la).x||0!==h.y)&&isFinite(h.x)&&isFinite(h.y)&&N.translate(-h.x,-h.y),bi(v,N),bi(M,N),a.push(new z(Math.min(v.x,M.x),Math.min(v.y,M.y),Math.abs(v.x-M.x),Math.abs(v.y-M.y))),v.h(0,T=0===x?0:f-S),M.h(u,S+T),t.push(new z(Math.min(v.x,M.x),Math.min(v.y,M.y),Math.abs(v.x-M.x),Math.abs(v.y-M.y))),bi(v,N),bi(M,N),a.push(new z(Math.min(v.x,M.x),Math.min(v.y,M.y),Math.abs(v.x-M.x),Math.abs(v.y-M.y))),Gc(this.ti,this)&&(v.h(u=0<g?0:-g,f=0<e?0:-e),M.h(p+u,y+f),t.push(new z(Math.min(v.x,M.x),Math.min(v.y,M.y),Math.abs(v.x-M.x),Math.abs(v.y-M.y))),bi(v,N),bi(M,N),a.push(new z(Math.min(v.x,M.x),Math.min(v.y,M.y),Math.abs(v.x-M.x),Math.abs(v.y-M.y)))),A.free(v),A.free(M),Su(this,!1,!0),null===this.Ea&&W("No div specified"),null===this.ta&&W("No canvas specified"),!this.animationManager.sc&&(u=this.Hb,this.Fc)){for(Du(this),f=this.Tb,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,this.va*f,this.ua*f),u.drawImage(this.Iu.Ga,0<g?0:Math.round(-g),0<e?0:Math.round(-e)),g=this.la,h=this.ya,p=Math.round(g.x*h)/h,y=Math.round(g.y*h)/h,(e=this.qb).reset(),1!==h&&e.scale(h),0===g.x&&0===g.y||e.translate(-p,-y),u.save(),u.beginPath(),g=t.length,h=0;h<g;h++)0!==(p=t[h]).width&&0!==p.height&&u.rect(Math.floor(p.x),Math.floor(p.y),Math.ceil(p.width),Math.ceil(p.height));for(u.clip(),u.setTransform(1,0,0,1,0,0),u.scale(f,f),u.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),this.Nd(e=this.La.j,g=e.length,this),Cv(this,u),u.globalAlpha=this.hb,f=0;f<g;f++)if(p=a,(h=e[f]).visible&&0!==h.hb){y=Wn(h,u),(x=h.mp).length=0,v=this.scale,S=z.alloc(),N=(M=h.Da.j).length,T=p.length;for(var P=0;P<N;P++){var I=M[P],O=Oh(I,I.actualBounds);t:{for(var b=2/v,B=4/v,K=0;K<T;K++){var rt=p[K];if(0!==rt.width&&0!==rt.height&&O.bw(rt.x-b,rt.y-b,rt.width+B,rt.height+B)){O=!0;break t}}O=!1}O&&h.dj(u,I,this,x,v,S,!0)}z.free(S),u.globalAlpha=y}u.restore(),u.uc(!0),this.ti&&Gc(this.ti,this)&&this.Ur(),this.Fc=this.wi=!1,this.Yq()}Jt(a),Jt(t),this.kc=!1}}else this.jd();z.free(o),n&&(Cu(this),this.jd(),dh(this,!0))}else n?(Cu(this),this.jd(),dh(this,!0)):this.jd()}},D.add=function(t){var e=t.diagram;if(e!==this&&(null!==e&&W("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),null===(e=this.ym(t.layerName))&&(e=this.ym("")),null===e&&W('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var n=e.oj(99999999,t,t.diagram===this);0<=n&&this.bb(rn,"parts",e,null,t,null,n),e.isTemporary||this.Oa(),t.C(1),null!==(n=t.layerChanged)&&n(t,null,e)}},D.oj=function(t){this.partManager.oj(t);var e=this;bs(t,function(n){Rg(e,n)}),(t instanceof Gt||t instanceof Pt&&null!==t.placeholder)&&t.o(),null!==t.data&&bs(t,function(n){Am(e.partManager,n)}),!0!==Ri(t)&&!0!==ma(t)||this.wd.add(t),Jv(t,!0,this),Rx(t)?(t.actualBounds.u()&&this.M(Oh(t,t.actualBounds)),this.Oa()):t.isVisible()&&t.actualBounds.u()&&this.M(Oh(t,t.actualBounds)),this.Eb()},D.Nc=function(t){t.nk(),this.partManager.Nc(t);var e=this;null!==t.data&&bs(t,function(n){km(e.partManager,n,e)}),this.wd.remove(t),Rx(t)?(t.actualBounds.u()&&this.M(Oh(t,t.actualBounds)),this.Oa()):t.isVisible()&&t.actualBounds.u()&&this.M(Oh(t,t.actualBounds)),this.Eb()},D.remove=function(t){Og(this,t,!0)},D.gu=function(t,e){if(void 0===e&&(e=!1),Dn(t))for(var n=t.length,o=0;o<n;o++){var a=t[o];e&&!a.canDelete()||this.remove(a)}else for((n=new nt).addAll(t),t=n.iterator;t.next();)n=t.value,e&&!n.canDelete()||this.remove(n)},D.tk=function(t,e,n){return void 0===n&&(n=!1),this.partManager.tk(t,e,n)},V.prototype.moveParts=function(t,e,n,o){if(void 0===n&&(n=!1),void 0===o&&(o=Lg(this)),null!==this.toolManager){var a=new Et;if(null!==t)if(Dn(t))for(var u=0;u<t.length;u++)sa(this,a,t[u],n,o);else for(t=t.iterator;t.next();)sa(this,a,t.value,n,o);else{for(t=this.parts;t.next();)sa(this,a,t.value,n,o);for(t=this.nodes;t.next();)sa(this,a,t.value,n,o);for(t=this.links;t.next();)sa(this,a,t.value,n,o)}bg(this,a,e,o,n)}},V.prototype.computeMove=function(t,e,n,o){if(void 0===o&&(o=new A),o.assign(e),null===t)return o;var a=e,u=n.isGridSnapEnabled;u&&(n.isGridSnapRealtime||this.lastInput.up)&&Sv(this,t,e,a=A.alloc(),n),n=null!==t.dragComputation?t.dragComputation(t,e,a):a;var h=t.minLocation,f=h.x;isNaN(f)&&(f=u?Math.round(1e3*t.location.x)/1e3:t.location.x),h=h.y,isNaN(h)&&(h=u?Math.round(1e3*t.location.y)/1e3:t.location.y);var p=t.maxLocation,g=p.x;return isNaN(g)&&(g=u?Math.round(1e3*t.location.x)/1e3:t.location.x),p=p.y,isNaN(p)&&(p=u?Math.round(1e3*t.location.y)/1e3:t.location.y),o.h(Math.max(f,Math.min(n.x,g)),Math.max(h,Math.min(n.y,p))),a!==e&&A.free(a),o},(D=V.prototype).Cd=function(t,e,n){if(void 0===n)return new Ps(Ga);var o=t.isGridSnapEnabled;return t.groupsSnapMembers||null===e.containingGroup||(o=!1),new Ps(o?new A(Math.round(1e3*n.x)/1e3,Math.round(1e3*n.y)/1e3):n.copy())},D.tm=function(t){Dv(this,t,null),t.ee(this);var e=this.La,n=e.count-1;if(!t.isTemporary)for(;0<=n&&e.J(n).isTemporary;)n--;e.wb(n+1,t),null!==this.bc&&this.bb(rn,"layers",this,null,t,null,n+1),this.M(),this.Oa()},D.Vx=function(t,e){Dv(this,t,e),t.ee(this);var n=this.La,o=n.indexOf(t);0<=o&&(n.remove(t),null!==this.bc&&this.bb(be,"layers",this,t,null,o,null));var u,a=n.count;for(u=0;u<a;u++)if(n.J(u)===e){n.wb(u,t);break}null!==this.bc&&this.bb(rn,"layers",this,null,t,null,u),this.M(),0>o&&this.Oa()},D.nz=function(t,e){Dv(this,t,e),t.ee(this);var n=this.La,o=n.indexOf(t);0<=o&&(n.remove(t),null!==this.bc&&this.bb(be,"layers",this,t,null,o,null));var u,a=n.count;for(u=0;u<a;u++)if(n.J(u)===e){n.wb(u+1,t);break}null!==this.bc&&this.bb(rn,"layers",this,null,t,null,u+1),this.M(),0>o&&this.Oa()},D.SA=function(t){if(t.diagram!==this&&W("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),""!==t.name){var e=this.La,n=e.indexOf(t);if(e.remove(t)){for(e=t.Da.copy().iterator;e.next();){var o=e.value,a=o.layerName;o.layerName=a!==t.name?a:""}null!==this.bc&&this.bb(be,"layers",this,t,null,n,null),this.M(),this.Oa()}}},D.ym=function(t){for(var e=this.layers;e.next();){var n=e.value;if(n.name===t)return n}return null},D.Xx=function(t){null===this.we&&(this.we=new lt),this.we.add(t),this.model.Gh(t)},D.UA=function(t){null!==this.we&&(this.we.remove(t),0===this.we.count&&(this.we=null)),this.model.Sk(t)},D.Gh=function(t){null===this.Qf&&(this.Qf=new lt),this.Qf.add(t)},D.Sk=function(t){null!==this.Qf&&(this.Qf.remove(t),0===this.Qf.count&&(this.Qf=null))},D.zt=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.$v(t),t.change!==cr&&(this.isModified=!0),null!==this.Qf)for(var e=this.Qf,n=e.length,o=0;o<n;o++)e.J(o)(t)},D.bb=function(t,e,n,o,a,u,h){void 0===u&&(u=null),void 0===h&&(h=null);var f=new De;f.diagram=this,f.change=t,f.propertyName=e,f.object=n,f.oldValue=o,f.oldParam=u,f.newValue=a,f.newParam=h,this.zt(f)},D.g=function(t,e,n,o,a){this.bb(Me,t,this,e,n,o,a)},V.prototype.changeState=function(t,e){if(null!==t&&t.diagram===this){var n=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var o=t.change;if(o===Me){var a=t.object;if(ce(a,t.propertyName,t.H(e)),a instanceof Z){var u=a.part;null!==u&&u.Mb()}this.isModified=!0}else if(o===rn){var h=t.object,f=t.newParam,p=t.newValue;if(h instanceof X){if("number"==typeof f&&p instanceof Z){e?h.Nc(f):h.wb(f,p);var g=h.part;null!==g&&g.Mb()}else if("number"==typeof f&&p instanceof gn)if(e)p.isRow?h.vw(f):h.tw(f);else{var y=p.isRow?h.getRowDefinition(p.index):h.getColumnDefinition(p.index);y.Dt(p)}}else if(h instanceof Nn){var v=!0===t.oldParam;"number"==typeof f&&p instanceof wt&&(e?(p.isSelected=!1,p.isHighlighted=!1,p.Mb(),h.Nc(v?f:-1,p,v)):h.oj(f,p,v))}else h instanceof V?"number"==typeof f&&p instanceof Nn&&(e?this.La.cb(f):(p.ee(this),this.La.wb(f,p))):W("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(o===be){var x=t.object,S=t.oldParam,M=t.oldValue;if(x instanceof X)"number"==typeof S&&M instanceof Z?e?x.wb(S,M):x.Nc(S):"number"==typeof S&&M instanceof gn&&(e?(y=M.isRow?x.getRowDefinition(M.index):x.getColumnDefinition(M.index)).Dt(M):M.isRow?x.vw(S):x.tw(S));else if(x instanceof Nn){var T=!0===t.newParam;"number"==typeof S&&M instanceof wt&&(e?0>x.Da.indexOf(M)&&x.oj(S,M,T):(M.isSelected=!1,M.isHighlighted=!1,M.Mb(),x.Nc(T?S:-1,M,T)))}else x instanceof V?"number"==typeof S&&M instanceof Nn&&(e?(M.ee(this),this.La.wb(S,M)):this.La.cb(S)):W("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else o!==cr&&W("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=n}}},V.prototype.xa=function(t){return this.undoManager.xa(t)},V.prototype.Wa=function(t){return this.undoManager.Wa(t)},V.prototype.Kf=function(){return this.undoManager.Kf()},V.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.xa(e);var o=!1;try{t(this),o=!0}finally{o?this.undoManager.Wa(e):this.undoManager.Kf(),this.skipsUndoManager=n}},V.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},V.prototype.jr=function(){this.partManager.jr()},V.prototype.Uq=function(t,e,n,o){if(!t.w(e)){void 0===o&&(o=!1),o||ra(this),oa(this);var a=this.layout;null===a||!a.isViewportSized||this.autoScale!==Pn||o||t.width===e.width&&t.height===e.height||a.C(),a=this.currentTool,!0===this.ag&&a instanceof Fe&&(this.lastInput.documentPoint=this.nu(this.lastInput.viewPoint),ea(a,this)),this.Sb||this.Fy(t,e),aa(this),this.Kc.scale=n,this.Kc.position.x=t.x,this.Kc.position.y=t.y,this.Kc.bounds.assign(t),this.Kc.Fv.width=Math.round(t.width*n),this.Kc.Fv.height=Math.round(t.height*n),this.Kc.jw.width=this.va,this.Kc.jw.height=this.ua,this.Kc.gw=o,this.R("ViewportBoundsChanged",this.Kc,t),this.isVirtualized&&this.links.each(function(u){u.isAvoiding&&u.actualBounds.Oc(e)&&u.Ua()})}},V.prototype.clearSelection=function(t){void 0===t&&(t=!1);var e=this.selection;if(0!==e.count){t||this.R("ChangingSelection",e);for(var n=e.ma(),o=n.length,a=0;a<o;a++)n[a].isSelected=!1;e.ea(),e.clear(),e.freeze(),t||this.R("ChangedSelection",e)}},V.prototype.select=function(t){null!==t&&t.layer.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.R("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.R("ChangedSelection",this.selection))},V.prototype.YA=function(t){if(this.R("ChangingSelection",this.selection),this.clearSelection(!0),Dn(t))for(var e=t.length,n=0;n<e;n++){var o=t[n];o instanceof wt||W("Diagram.selectCollection given something that is not a Part: "+o),o.isSelected=!0}else for(t=t.iterator;t.next();)(e=t.value)instanceof wt||W("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.R("ChangedSelection",this.selection)},V.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.ma(),n=e.length,o=0;o<n;o++)e[o].isHighlighted=!1;t.ea(),t.clear(),t.freeze()}},(D=V.prototype).uA=function(t){null!==t&&t.layer.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},D.vA=function(t){t=(new nt).addAll(t);for(var e=this.highlighteds.copy().Zq(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)(e=t.value)instanceof wt||W("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},D.scroll=function(t,e,n){void 0===n&&(n=1);var o="up"===e||"down"===e,a=0;if("pixel"===t)a=n;else if("line"===t)a=n*(o?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if("page"===t)t=o?this.viewportBounds.height:this.viewportBounds.width,0!=(t*=this.scale)&&(a=n*Math.max(t-(o?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if("document"===t)return a=this.documentBounds,n=this.viewportBounds,o=A.alloc(),"up"===e?this.position=o.h(n.x,a.y):"left"===e?this.position=o.h(a.x,n.y):"down"===e?this.position=o.h(n.x,a.bottom-n.height):"right"===e&&(this.position=o.h(a.right-n.width,n.y)),void A.free(o);W("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}a/=this.scale,n=this.position.copy(),"up"===e?n.y=this.position.y-a:"down"===e?n.y=this.position.y+a:"left"===e?n.x=this.position.x-a:"right"===e?n.x=this.position.x+a:W("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=n},D.Bw=function(t){var e=this.viewportBounds;e.Ge(t)||((t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t)},D.At=function(t){var e=this.viewportBounds;(t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t},D.hr=function(t){var e=this.qb;e.reset(),1!==this.ya&&e.scale(this.ya);var n=this.la;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),t.copy().transform(this.qb)},D.gB=function(t){var e=this.qb,n=t.x,o=t.y,a=n+t.width,u=o+t.height,h=e.m11,f=e.m12,p=e.m21,g=e.m22,y=e.dx,v=e.dy,x=n*h+o*p+y;e=n*f+o*g+v;var S=a*h+o*p+y;return t=a*f+o*g+v,o=n*h+u*p+y,n=n*f+u*g+v,h=a*h+u*p+y,a=a*f+u*g+v,u=Math.min(x,S),x=Math.max(x,S),S=Math.min(e,t),e=Math.max(e,t),u=Math.min(u,o),x=Math.max(x,o),S=Math.min(S,n),e=Math.max(e,n),u=Math.min(u,h),x=Math.max(x,h),new z(u,S=Math.min(S,a),x-u,(e=Math.max(e,a))-S)},D.nu=function(t){var e=this.qb;e.reset(),1!==this.ya&&e.scale(this.ya);var n=this.la;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),bi(t.copy(),this.qb)},V.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var n=t.change,o=t.propertyName;if(n===cr&&"S"===o[0])if("StartingFirstTransaction"===o){var a=this;(t=this.toolManager).mouseDownTools.each(function(p){p.diagram=a}),t.mouseMoveTools.each(function(p){p.diagram=a}),t.mouseUpTools.each(function(p){p.diagram=a}),this.kc||this.qe||(this.Hj=!0,this.Kj&&(this.Ee=!0))}else"StartingUndo"===o||"StartingRedo"===o?((t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Cc(),this.R("ChangingSelection",this.selection)):"StartedTransaction"===o&&(t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Cc();else if(this.Z){this.Z=!1;try{if(""===t.modelChange&&n===cr){("FinishedUndo"===o||"FinishedRedo"===o)&&(this.R("ChangedSelection",this.selection),Ti(this));var u=this.animationManager;"RolledBackTransaction"===o&&u.Cc(),this.Hj=!0,this.jd(),0!==this.undoManager.transactionLevel&&1!==this.undoManager.transactionLevel||ex(u),"CommittedTransaction"===o&&this.undoManager.isJustDiscarded&&(this.Wd=Math.min(this.Wd,this.undoManager.historyIndex-1)),"CommittedTransaction"!==o&&"RolledBackTransaction"!==o||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var h=t.isTransactionFinished;if(h&&(gh(this),this.Yt.clear(),function Sg(t){for(t=t.yj.iterator;t.next();)t.value.Jl=!1}(this.animationManager)),!this.Cs&&h&&this.lastInput.targetDiagram){this.Cs=!0;var f=this;he(function(){f.currentTool.standardMouseOver(),f.Cs=!1},10)}}}finally{this.Z=!0}}}},V.prototype.Md=function(){this.partManager.Md()},V.prototype.jk=function(t,e){this.Wc.jk(t,e)},V.prototype.lk=function(t,e){this.Wc.lk(t,e)},V.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},V.prototype.Db=function(t){return this.partManager.Db(t)},V.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},(D=V.prototype).zc=function(t){return this.partManager.zc(t)},D.gj=function(t){return this.partManager.gj(t)},D.yc=function(t){return this.partManager.yc(t)},D.Jt=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Jt.apply(this.partManager,e instanceof Array?e:St(yt(e)))},D.It=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.It.apply(this.partManager,e instanceof Array?e:St(yt(e)))},D.Ta=function(){this.ui&&_u(this,this.computeBounds())},D.dA=function(){for(var t=new nt,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&t.add(n)}for(e=this.links;e.next();)(n=e.value).isTopLevel&&t.add(n);return t.iterator},D.cA=function(){return this.Ch.iterator},D.EA=function(t){Ti(this),t&&Fl(this,!0),this.Hj=!0,Ns(this)},D.jA=function(){for(var t=new lt,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&null===n.jj()&&t.add(n)}return t.iterator},D.kk=function(t,e){null!==(t=Se(this,t))&&t.add(e)},D.Km=function(t,e){null!==(t=Se(this,t))&&t.remove(e)},D.R=function(t,e,n){var o=Se(this,t),a=new ve;if(a.diagram=this,null!==(t=hx(this,t))&&(a.name=t),void 0!==e&&(a.subject=e),void 0!==n&&(a.parameter=n),1===(e=o.length))o.J(0)(a);else if(0!==e)for(o=o.ma(),n=0;n<e;n++)(0,o[n])(a)},D.Dk=function(t,e){return void 0===e&&(e=null),fx(this,!1,null,e).Dk(t.x,t.y,t.width,t.height)},V.prototype.computeOccupiedArea=function(){return this.isVirtualized?this.viewportBounds.copy():this.ui?lx(this):this.documentBounds.copy()},V.prototype.Ft=function(t){this.pn.assign(t),this.computeAutoScrollPosition(this.pn).Na(this.position)?this.Lf():CM(this)},V.prototype.Lf=function(){-1!==this.Bj&&(U.clearTimeout(this.Bj),this.Bj=-1)},V.prototype.computeAutoScrollPosition=function(t){var e=this.position,n=this.qn;if(0>=n.top&&0>=n.left&&0>=n.right&&0>=n.bottom)return e;var o=this.viewportBounds,a=this.scale;o=z.allocAt(0,0,o.width*a,o.height*a);var u=A.allocAt(0,0);if(t.x>=o.x&&t.x<o.x+n.left&&this.allowHorizontalScroll){var h=Math.max(this.scrollHorizontalLineChange,1);u.x-=h|=0,t.x<o.x+n.left/2&&(u.x-=h),t.x<o.x+n.left/4&&(u.x-=4*h)}else t.x<=o.x+o.width&&t.x>o.x+o.width-n.right&&this.allowHorizontalScroll&&(h=Math.max(this.scrollHorizontalLineChange,1),u.x+=h|=0,t.x>o.x+o.width-n.right/2&&(u.x+=h),t.x>o.x+o.width-n.right/4&&(u.x+=4*h));return t.y>=o.y&&t.y<o.y+n.top&&this.allowVerticalScroll?(h=Math.max(this.scrollVerticalLineChange,1),u.y-=h|=0,t.y<o.y+n.top/2&&(u.y-=h),t.y<o.y+n.top/4&&(u.y-=4*h)):t.y<=o.y+o.height&&t.y>o.y+o.height-n.bottom&&this.allowVerticalScroll&&(h=Math.max(this.scrollVerticalLineChange,1),u.y+=h|=0,t.y>o.y+o.height-n.bottom/2&&(u.y+=h),t.y>o.y+o.height-n.bottom/4&&(u.y+=4*h)),u.Na(Ga)||(e=new A(e.x+u.x/a,e.y+u.y/a)),z.free(o),A.free(u),e},(D=V.prototype).$t=function(){return null},D.hw=function(){return null},D.rz=function(t,e){this.Lx.add(t,e)},D.GA=function(t){return dr?(void 0===t&&(t=new Ki),t.returnType="Image",this.Iy(t)):null},D.Iy=function(t){return void 0===t&&(t=new Ki),MM(this,this.HA,t)},D.HA=function(t,e,n){var o=SM(n,t,"canvas",null);if(null===o)return null;var a=null;if(null!==(n=o.Y.canvas))switch(a=t.returnType,a=void 0===a?"string":a.toLowerCase(),a){case Hc+"data":a=o.getImageData(0,0,n.width,n.height);break;case Hc:(o=(t.document||document).createElement("img")).src=n.toDataURL(t.type,t.details),a=o;break;case"blob":return"function"!=typeof e&&W('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),"function"==typeof n.toBlob?(n.toBlob(e,t.type,t.details),"toBlob"):"function"==typeof n.msToBlob?(e(n.msToBlob()),"msToBlob"):(e(null),null);default:a=n.toDataURL(t.type,t.details)}return"function"==typeof e?(e(a),null):a},L.Object.defineProperties(V.prototype,{div:{get:function(){return this.Ea},set:function(t){if(this.Ea!==t){ig=[];var e=this.Ea;null!==e?(e.B=void 0,e.goDiagram=void 0,e.innerHTML="",null!==this.ta&&(e=this.ta.Ga,this.zj?(this.removeEventListener(e,"pointermove",this.Ok,!1),this.removeEventListener(e,"pointerdown",this.Nk,!1),this.removeEventListener(e,"pointerup",this.Qk,!1),this.removeEventListener(e,"pointerout",this.Pk,!1)):(this.removeEventListener(e,"touchstart",this.Pw,!1),this.removeEventListener(e,"touchmove",this.Ow,!1),this.removeEventListener(e,"touchend",this.Nw,!1)),this.ta.ky()),this.Zl&&(this.Zl.disconnect(),this.Zl=null),null!==(e=this.toolManager)&&(e.mouseDownTools.each(function(n){n.cancelWaitAfter()}),e.mouseMoveTools.each(function(n){n.cancelWaitAfter()}),e.mouseUpTools.each(function(n){n.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Hb=this.ta=null,this.removeEventListener(U,"resize",this.Xw,!1),this.zj||(this.removeEventListener(U,"mousemove",this.Hk,!0),this.removeEventListener(U,"mousedown",this.Gk,!0),this.removeEventListener(U,"mouseup",this.Jk,!0),this.removeEventListener(U,"mouseout",this.Ik,!0)),this.removeEventListener(U,"wheel",this.Kk,!0),Ja===this&&(Ja=null)):this.qe=!1,this.Ea=null,null!==t&&((e=t.B)&&(e.div=null),Sd(this,t),this.Me())}}},Zx:{get:function(){return this.Yo}},pj:{get:function(){return this.qe}},draggedLink:{get:function(){return this.Tr},set:function(t){this.Tr!==t&&(this.Tr=t,null!==t&&(this.Gs=t.fromPort,this.Hs=t.toPort))}},Ly:{get:function(){return this.Gs},set:function(t){this.Gs=t}},My:{get:function(){return this.Hs},set:function(t){this.Hs=t}},animationManager:{get:function(){return this.Wc}},undoManager:{get:function(){return this.bc.undoManager}},skipsUndoManager:{get:function(){return this.wg},set:function(t){this.wg=t,this.bc.skipsUndoManager=t}},delaysLayout:{get:function(){return this.Or},set:function(t){this.Or=t}},opacity:{get:function(){return this.hb},set:function(t){var e=this.hb;e!==t&&((0>t||1<t)&&qt(t,"0 <= value <= 1",V,"opacity"),this.hb=t,this.g("opacity",e,t),this.M())}},validCycle:{get:function(){return this.tt},set:function(t){var e=this.tt;e!==t&&(this.tt=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.La.iterator}},isModelReadOnly:{get:function(){var t=this.bc;return null!==t&&t.isReadOnly},set:function(t){var e=this.bc;null!==e&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.bg},set:function(t){var e=this.bg;e!==t&&(this.bg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.nd},set:function(t){var e=this.nd;e!==t&&(this.nd=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.pr},set:function(t){var e=this.pr;e!==t&&(this.pr=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.Zh},set:function(t){var e=this.Zh;e!==t&&(this.Zh=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.qr},set:function(t){var e=this.qr;e!==t&&(this.qr=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.rr},set:function(t){var e=this.rr;e!==t&&(this.rr=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.ii},set:function(t){var e=this.ii;e!==t&&(this.ii=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.ji},set:function(t){var e=this.ji;e!==t&&(this.ji=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.tr},set:function(t){var e=this.tr;e!==t&&(this.tr=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.di},set:function(t){var e=this.di;e!==t&&(this.di=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.ci},set:function(t){var e=this.ci;e!==t&&(this.ci=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.ei},set:function(t){var e=this.ei;e!==t&&(this.ei=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.fi},set:function(t){var e=this.fi;e!==t&&(this.fi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.gi},set:function(t){var e=this.gi;e!==t&&(this.gi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.hi},set:function(t){var e=this.hi;e!==t&&(this.hi=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.ur},set:function(t){var e=this.ur;e!==t&&(this.ur=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.wr},set:function(t){var e=this.wr;e!==t&&(this.wr=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.xl},set:function(t){var e=this.xl;e!==t&&(this.xl=t,ra(this),this.M(),this.g("hasVerticalScrollbar",e,t),Fo(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.wl},set:function(t){var e=this.wl;e!==t&&(this.wl=t,ra(this),this.M(),this.g("hasHorizontalScrollbar",e,t),Fo(this,!1))}},allowHorizontalScroll:{get:function(){return this.sr},set:function(t){var e=this.sr;e!==t&&(this.sr=t,this.g("allowHorizontalScroll",e,t),Fo(this,!1))}},allowVerticalScroll:{get:function(){return this.vr},set:function(t){var e=this.vr;e!==t&&(this.vr=t,this.g("allowVerticalScroll",e,t),Fo(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.Ys},set:function(t){var e=this.Ys;e!==t&&(0>t&&qt(t,">= 0",V,"scrollHorizontalLineChange"),this.Ys=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.bt},set:function(t){var e=this.bt;e!==t&&(0>t&&qt(t,">= 0",V,"scrollVerticalLineChange"),this.bt=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.hh},set:function(t){this.hh=t}},previousInput:{get:function(){return this.pd},set:function(t){this.pd=t}},firstInput:{get:function(){return this.Yf},set:function(t){this.Yf=t}},currentCursor:{get:function(){return this.Ir},set:function(t){if(""===t&&(t=this.Nn),this.Ir!==t){var e=this.ta,n=this.Ea;if(null!==e){this.Ir=t;var o=e.style.cursor;e.style.cursor=t,n.style.cursor=t,e.style.cursor===o&&(e.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,e.style.cursor===o&&(e.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,e.style.cursor===o&&(e.style.cursor=t,n.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.Nn},set:function(t){""===t&&(t="auto");var e=this.Nn;e!==t&&(this.Nn=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.Rf},set:function(t){var e=this.Rf;e!==t&&(this.Rf=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Wf},set:function(t){var e=this.Wf;e!==t&&(this.Wf=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.Sf},set:function(t){var e=this.Sf;e!==t&&(this.Sf=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.ng},set:function(t){var e=this.ng;e!==t&&(this.ng=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.lg},set:function(t){var e=this.lg;e!==t&&(this.lg=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.kg},set:function(t){var e=this.kg;e!==t&&(this.kg=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.Bs},set:function(t){var e=this.Bs;e!==t&&(this.Bs=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.ig},set:function(t){var e=this.ig;e!==t&&(this.ig=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.ds},set:function(t){var e=this.ds;e!==t&&(this.ds=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.jg},set:function(t){var e=this.jg;e!==t&&(this.jg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.mg},set:function(t){var e=this.mg;e!==t&&(this.mg=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.xg},set:function(t){var e=this.xg;e!==t&&(this.xg=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.Tf},set:function(t){var e=this.Tf;e!==t&&(this.Tf=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.Cr},set:function(t){this.Cr!==t&&(this.Cr=t,t.ee(this))}},toolManager:{get:function(){return this.pt},set:function(t){this.pt!==t&&(this.pt=t,t.diagram=this)}},defaultTool:{get:function(){return this.Nr},set:function(t){var e=this.Nr;e!==t&&(this.Nr=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.Kr},set:function(t){var e=this.Kr;null!==e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.defaultTool),null!==t&&(this.Kr=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.pv}},maxSelectionCount:{get:function(){return this.xs},set:function(t){var e=this.xs;if(e!==t)if(0<=t&&!isNaN(t)){if(this.xs=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&0<(t=this.selection.count-t)){this.R("ChangingSelection",this.selection),e=this.selection.ma();for(var n=0;n<t;n++)e[n].isSelected=!1;this.R("ChangedSelection",this.selection)}}else qt(t,">= 0",V,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.fp},set:function(t){var e=this.fp;e!==t&&(this.fp=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.no},set:function(t){var e=this.no;e!==t&&(this.no=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.Go},set:function(t){var e=this.Go;e!==t&&(this.Go=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.Qu}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?null!==t.currentTransaction||this.ro&&this.Wd!==t.historyIndex:this.ro},set:function(t){if(this.ro!==t){this.ro=t;var e=this.undoManager;!t&&e.isEnabled&&(this.Wd=e.historyIndex),t||gh(this)}}},model:{get:function(){return this.bc},set:function(t){var e=this.bc;if(e!==t){this.currentTool.doCancel(),null!==e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&W("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.Cc(!0);var n=ox(this,!0);this.qe=!1,this.Kj=!0,this.Wd=-2,this.Ee=!1;var o=this.kc;this.kc=!0,ia(this.animationManager,"Model"),null!==e&&(null!==this.we&&this.we.each(function(u){e.Sk(u)}),e.Sk(this.Vc)),this.bc=t,this.partManager=function io(t){return null!==(t=_v.get(t))?new t:new Zt}(this.bc.type);for(var a=0;a<n.length;a++)this.add(n[a]);t.Gh(this.Dc),this.partManager.addAllModeledParts(),t.Sk(this.Dc),t.Gh(this.Vc),null!==this.we&&this.we.each(function(u){t.Gh(u)}),this.kc=o,this.Sb||this.M(),null!==e&&t.undoManager.copyProperties(e.undoManager)}}},Z:{get:function(){return this.$u},set:function(t){this.$u=t}},Yt:{get:function(){return this.Cx}},skipsModelSourceBindings:{get:function(){return this.qv},set:function(t){this.qv=t}},mu:{get:function(){return this.gt},set:function(t){this.gt=t}},nodeTemplate:{get:function(){return this.ef.H("")},set:function(t){var e=this.ef.H("");e!==t&&(this.ef.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Md())}},nodeTemplateMap:{get:function(){return this.ef},set:function(t){var e=this.ef;e!==t&&(this.ef=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Md())}},groupTemplate:{get:function(){return this.fh.H("")},set:function(t){var e=this.fh.H("");e!==t&&(this.fh.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Md())}},groupTemplateMap:{get:function(){return this.fh},set:function(t){var e=this.fh;e!==t&&(this.fh=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Md())}},linkTemplate:{get:function(){return this.dg.H("")},set:function(t){var e=this.dg.H("");e!==t&&(this.dg.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Md())}},linkTemplateMap:{get:function(){return this.dg},set:function(t){var e=this.dg;e!==t&&(this.dg=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Md())}},isMouseCaptured:{get:function(){return this.Wu},set:function(t){var e=this.ta;null!==e&&((e=e.Ga)instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.zj?(this.removeEventListener(e,"pointermove",this.Ok,!1),this.removeEventListener(e,"pointerdown",this.Nk,!1),this.removeEventListener(e,"pointerup",this.Qk,!1),this.removeEventListener(e,"pointerout",this.Pk,!1),this.addEventListener(U,"pointermove",this.Ok,!0),this.addEventListener(U,"pointerdown",this.Nk,!0),this.addEventListener(U,"pointerup",this.Qk,!0),this.addEventListener(U,"pointerout",this.Pk,!0)):(this.removeEventListener(e,"mousemove",this.Hk,!1),this.removeEventListener(e,"mousedown",this.Gk,!1),this.removeEventListener(e,"mouseup",this.Jk,!1),this.removeEventListener(e,"mouseout",this.Ik,!1),this.addEventListener(U,"mousemove",this.Hk,!0),this.addEventListener(U,"mousedown",this.Gk,!0),this.addEventListener(U,"mouseup",this.Jk,!0),this.addEventListener(U,"mouseout",this.Ik,!0)),this.removeEventListener(e,"wheel",this.Kk,!1),this.addEventListener(U,"wheel",this.Kk,!0),this.addEventListener(U,"selectstart",this.preventDefault,!1)):(this.zj?(this.removeEventListener(U,"pointermove",this.Ok,!0),this.removeEventListener(U,"pointerdown",this.Nk,!0),this.removeEventListener(U,"pointerup",this.Qk,!0),this.removeEventListener(U,"pointerout",this.Pk,!0),this.addEventListener(e,"pointermove",this.Ok,!1),this.addEventListener(e,"pointerdown",this.Nk,!1),this.addEventListener(e,"pointerup",this.Qk,!1),this.addEventListener(e,"pointerout",this.Pk,!1)):(this.removeEventListener(U,"mousemove",this.Hk,!0),this.removeEventListener(U,"mousedown",this.Gk,!0),this.removeEventListener(U,"mouseup",this.Jk,!0),this.removeEventListener(U,"mouseout",this.Ik,!0),this.addEventListener(e,"mousemove",this.Hk,!1),this.addEventListener(e,"mousedown",this.Gk,!1),this.addEventListener(e,"mouseup",this.Jk,!1),this.addEventListener(e,"mouseout",this.Ik,!1)),this.removeEventListener(U,"wheel",this.Kk,!0),this.removeEventListener(U,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.Kk,!1)),this.Wu=t))}},position:{get:function(){return this.la},set:function(t){var e=A.alloc().assign(this.la);if(!e.w(t)){var n=this.viewportBounds.copy();this.la.assign(t),fv(this.animationManager,e,this.la),this.Sb||null===this.ta&&!this.rm.u()||(this.Sb=!0,gd(this,this.Pn,this.va/(t=this.scale),this.ua/t,this.Dj,!1),this.Sb=!1),this.Sb||this.Uq(n,this.viewportBounds,this.ya,!1)}A.free(e)}},initialPosition:{get:function(){return this.fs},set:function(t){this.fs.w(t)||(this.fs=t.G())}},initialScale:{get:function(){return this.gs},set:function(t){this.gs!==t&&(this.gs=t)}},grid:{get:function(){return null===this.Jb&&ax(this),this.Jb},set:function(t){var e=this.Jb;if(e!==t){null===e&&(ax(this),e=this.Jb),t.type!==X.Grid&&W("Diagram.grid must be a Panel of type Panel.Grid");var n=e.panel;null!==n&&n.remove(e),this.Jb=t,t.name="GRID",null!==n&&n.add(t),aa(this),this.M(),this.g("grid",e,t)}}},viewportBounds:{get:function(){var t=this.Sx,e=this.la,n=this.ya;return null===this.ta?(this.rm.u()&&t.h(e.x,e.y,this.va/n,this.ua/n),t):(t.h(e.x,e.y,Math.max(this.va,0)/n,Math.max(this.ua,0)/n),t)}},viewSize:{get:function(){return this.rm},set:function(t){var e=this.viewSize;e.w(t)||(this.rm=t=t.G(),null===this.Ea&&(this.va=t.width,this.ua=t.height,this.Oa()),this.g("viewSize",e,t))}},fixedBounds:{get:function(){return this.$r},set:function(t){var e=this.$r;e.w(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||W("fixedBounds width/height must not be Infinity"),this.$r=t=t.G(),this.Oa(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.Si},set:function(t){"number"==typeof t&&(t=new te(t));var e=this.Si;e.w(t)||(this.Si=t=t.G(),this.g("scrollMargin",e,t),this.Yq())}},scrollMode:{get:function(){return this.Ti},set:function(t){var e=this.Ti;e!==t&&(this.Ti=t,t===Nu&&Fo(this,!1),this.g("scrollMode",e,t),this.M())}},scrollsPageOnFocus:{get:function(){return this.ct},set:function(t){var e=this.ct;e!==t&&(this.ct=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.Ps},set:function(t){var e=this.Ps;e!==t&&(this.Ps=t,Fo(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.Ws},set:function(t){var e=this.Ws;e!==t&&(this.Ws=t,Ev(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.Pn}},isVirtualized:{get:function(){return this.ss},set:function(t){var e=this.ss;e!==t&&(this.ss=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.ya},set:function(t){var e=this.ya;e!==t&&Ev(this,e,t)}},defaultScale:{get:function(){return this.On},set:function(t){this.On=t}},autoScale:{get:function(){return this.Pg},set:function(t){var e=this.Pg;e!==t&&(this.Pg=t,this.g("autoScale",e,t),t!==Pn&&Fo(this,!1))}},initialAutoScale:{get:function(){return this.$f},set:function(t){var e=this.$f;e!==t&&(this.$f=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.hs},set:function(t){var e=this.hs;e!==t&&(t.kb()||W("initialViewportSpot must be a specific Spot: "+t),this.hs=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.es},set:function(t){var e=this.es;e!==t&&(t.kb()||W("initialViewportSpot must be a specific Spot: "+t),this.es=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.ys},set:function(t){var e=this.ys;e!==t&&(0<t?(this.ys=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):qt(t,"> 0",V,"minScale"))}},maxScale:{get:function(){return this.ws},set:function(t){var e=this.ws;e!==t&&(0<t?(this.ws=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):qt(t,"> 0",V,"maxScale"))}},zoomPoint:{get:function(){return this.xt},set:function(t){this.xt.w(t)||(this.xt=t=t.G())}},contentAlignment:{get:function(){return this.Dj},set:function(t){var e=this.Dj;e.w(t)||(this.Dj=t=t.G(),this.g("contentAlignment",e,t),Fo(this,!1))}},initialContentAlignment:{get:function(){return this.po},set:function(t){var e=this.po;e.w(t)||(this.po=t=t.G(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.ib},set:function(t){"number"==typeof t&&(t=new te(t));var e=this.ib;e.w(t)||(this.ib=t=t.G(),this.Oa(),this.g("padding",e,t))}},partManager:{get:function(){return this.Ka},set:function(t){var e=this.Ka;e!==t&&(null!==t.diagram&&W("Cannot share PartManagers between Diagrams: "+t.toString()),null!==e&&e.ee(null),this.Ka=t,t.ee(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.lc},set:function(t){var e=this.lc;e!==t&&(this.lc=t,t.diagram=this,t.group=null,this.Og=!0,this.g("layout",e,t),this.Eb())}},isTreePathToChildren:{get:function(){return this.rs},set:function(t){var e=this.rs;if(e!==t&&(this.rs=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)Xd(t.value)}},treeCollapsePolicy:{get:function(){return this.rt},set:function(t){var e=this.rt;e!==t&&(t!==qi&&t!==Md&&t!==Pu&&W("Unknown Diagram.treeCollapsePolicy: "+t),this.rt=t,this.g("treeCollapsePolicy",e,t))}},Ke:{get:function(){return this.Tu},set:function(t){this.Tu=t}},autoScrollInterval:{get:function(){return this.on},set:function(t){var e=this.on;e!==t&&(this.on=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.qn},set:function(t){"number"==typeof t&&(t=new te(t));var e=this.qn;e.w(t)||(this.qn=t=t.G(),this.Oa(),this.g("autoScrollRegion",e,t))}}}),L.Object.defineProperties(V,{licenseKey:{get:function(){return yx.Xb()},set:function(t){yx.add(t)}},version:{get:function(){return vx}}}),V.prototype.makeImageData=V.prototype.Iy,V.prototype.makeImage=V.prototype.GA,V.prototype.addRenderer=V.prototype.rz,V.prototype.makeSVG=V.prototype.hw,V.prototype.makeSvg=V.prototype.$t,V.prototype.stopAutoScroll=V.prototype.Lf,V.prototype.doAutoScroll=V.prototype.Ft,V.prototype.isUnoccupied=V.prototype.Dk,V.prototype.raiseDiagramEvent=V.prototype.R,V.prototype.removeDiagramListener=V.prototype.Km,V.prototype.addDiagramListener=V.prototype.kk,V.prototype.findTreeRoots=V.prototype.jA,V.prototype.layoutDiagram=V.prototype.EA,V.prototype.findTopLevelGroups=V.prototype.cA,V.prototype.findTopLevelNodesAndLinks=V.prototype.dA,V.prototype.ensureBounds=V.prototype.Ta,V.prototype.findLinksByExample=V.prototype.It,V.prototype.findNodesByExample=V.prototype.Jt,V.prototype.findLinkForData=V.prototype.yc,V.prototype.findNodeForData=V.prototype.gj,V.prototype.findPartForData=V.prototype.zc,V.prototype.findLinkForKey=V.prototype.findLinkForKey,V.prototype.findNodeForKey=V.prototype.Db,V.prototype.findPartForKey=V.prototype.findPartForKey,V.prototype.rebuildParts=V.prototype.Md,V.prototype.transformViewToDoc=V.prototype.nu,V.prototype.transformRectDocToView=V.prototype.gB,V.prototype.transformDocToView=V.prototype.hr,V.prototype.centerRect=V.prototype.At,V.prototype.scrollToRect=V.prototype.Bw,V.prototype.scroll=V.prototype.scroll,V.prototype.highlightCollection=V.prototype.vA,V.prototype.highlight=V.prototype.uA,V.prototype.selectCollection=V.prototype.YA,V.prototype.select=V.prototype.select,V.prototype.updateAllRelationshipsFromData=V.prototype.jr,V.prototype.updateAllTargetBindings=V.prototype.updateAllTargetBindings,V.prototype.commit=V.prototype.commit,V.prototype.rollbackTransaction=V.prototype.Kf,V.prototype.commitTransaction=V.prototype.Wa,V.prototype.startTransaction=V.prototype.xa,V.prototype.raiseChanged=V.prototype.g,V.prototype.raiseChangedEvent=V.prototype.bb,V.prototype.removeChangedListener=V.prototype.Sk,V.prototype.addChangedListener=V.prototype.Gh,V.prototype.removeModelChangedListener=V.prototype.UA,V.prototype.addModelChangedListener=V.prototype.Xx,V.prototype.findLayer=V.prototype.ym,V.prototype.removeLayer=V.prototype.SA,V.prototype.addLayerAfter=V.prototype.nz,V.prototype.addLayerBefore=V.prototype.Vx,V.prototype.addLayer=V.prototype.tm,V.prototype.moveParts=V.prototype.moveParts,V.prototype.copyParts=V.prototype.tk,V.prototype.removeParts=V.prototype.gu,V.prototype.remove=V.prototype.remove,V.prototype.add=V.prototype.add,V.prototype.clearDelayedGeometries=V.prototype.Gv,V.prototype.setProperties=V.prototype.Gw,V.prototype.resetInputOptions=V.prototype.xw,V.prototype.setInputOption=V.prototype.ZA,V.prototype.getInputOption=V.prototype.Bm,V.prototype.resetRenderingHints=V.prototype.yw,V.prototype.setRenderingHint=V.prototype.Uy,V.prototype.getRenderingHint=V.prototype.Je,V.prototype.maybeUpdate=V.prototype.jd,V.prototype.requestUpdate=V.prototype.Eb,V.prototype.delayInitialization=V.prototype.Jz,V.prototype.isUpdateRequested=V.prototype.AA,V.prototype.redraw=V.prototype.Me,V.prototype.invalidateDocumentBounds=V.prototype.Oa,V.prototype.findObjectsNear=V.prototype.Fg,V.prototype.findPartsNear=V.prototype.$z,V.prototype.findObjectsIn=V.prototype.Bf,V.prototype.findPartsIn=V.prototype.ty,V.prototype.findObjectsAt=V.prototype.hj,V.prototype.findPartsAt=V.prototype.Zz,V.prototype.findObjectAt=V.prototype.Vb,V.prototype.findPartAt=V.prototype.zm,V.prototype.focusObject=V.prototype.kA,V.prototype.alignDocument=V.prototype.uz,V.prototype.zoomToRect=V.prototype.kB,V.prototype.zoomToFit=V.prototype.zoomToFit,V.prototype.diagramScroll=V.prototype.iy,V.prototype.focus=V.prototype.focus,V.prototype.reset=V.prototype.reset,V.useDOM=function(t){dr=!!t&&void 0!==U.document},V.isUsingDOM=function(){return dr};var Ja=null,_v=new Et,Qi=null,Bg=null,dr=void 0!==U.document,wd=null,xd="",Pn=new it(V,"None",0),wo=new it(V,"Uniform",1),Cd=new it(V,"UniformToFill",2),vh=new it(V,"CycleAll",10),Uc=new it(V,"CycleNotDirected",11),Nv=new it(V,"CycleNotDirectedFast",12),gx=new it(V,"CycleNotUndirected",13),mx=new it(V,"CycleDestinationTree",14),DM=new it(V,"CycleSourceTree",15),Nu=new it(V,"DocumentScroll",1),Vg=new it(V,"InfiniteScroll",2),qi=new it(V,"TreeParentCollapsed",21),Md=new it(V,"AllParentsCollapsed",22),Pu=new it(V,"AnyParentsCollapsed",23),yx=new lt,vx="2.1.43",Hc="image",wx=null,xx=!1;function EM(){if(dr){var t=U.document.createElement("canvas"),e=t.getContext("2d"),n=de("7ca11abfd022028846");e[n]=de("398c3597c01238");for(var o=["5da73c80a36455d5038e4972187c3cae51fd22",Bt.Dx+"4ae6247590da4bb21c324ba3a84e385776",Ht.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",R.za],a=1;5>a;a++)e[de("7ca11abfd7330390")](de(o[a-1]),10,15*a);for(e[n]=de("39f046ebb36e4b"),n=1;5>n;n++)e[de("7ca11abfd7330390")](de(o[n-1]),10,15*n);(4!==o.length||"5"!==o[0][0]||"7"!==o[3][0])&&(Ht.prototype.Jd=Ht.prototype.$x),wx=t}}function Cx(){this.jz=null,this.l="zz@orderNum",this.We="63ad05bbe23a1786468a4c741b6d2"===this._tk?this.l=!0:null}function Gc(t,e){if(e.Hb.setTransform(e.Tb,0,0,e.Tb,0,0),null===t.We){e="f";var n=U[de("76a715b2f73f148a")][de("72ba13b5")];if(t.We=!0,dr){var o=V[de("76a115b6ed251eaf4692")];if(o)for(var a=yx.iterator;a.next()&&!(6>(o=de(o=a.value).split(de("39e9"))).length);){var u=de(o[1]).split(".");if("7da71ca0"!==o[4])break;var h=de(Bt[de("6cae19")]).split(".");if(u[0]>h[0]||u[0]===h[0]&&u[1]>=h[1]){for(u=n[de("76ad18b4f73e")],h=n[de("73a612b6fb191d")](de("35e7"))+2;h<u;h++)e+=n[h];if(0>(u=e[de("73a612b6fb191d")](de(o[2])))&&de(o[2])!==de("7da71ca0ad381e90")&&(u=e[de("73a612b6fb191d")](de("76a715b2ef3e149757"))),0>u&&(u=e[de("73a612b6fb191d")](de("76a715b2ef3e149757"))),0>u&&(u=n[de("73a612b6fb191d")](de("7baa19a6f76c1988428554"))),t.We=!(0<=u&&u<e[de("73a612b6fb191d")](de("35"))||-1===e[de("73a612b6fb191d")](de("35"))),!t.We||"#"!==(u=de(o[2]))[0])break;h=U.document.createElement("div");for(var f=o[0].replace(/[A-Za-z]/g,"");4>f.length;)f+="9";if(f=f.substr(f.length-4),o="",o+=["gsh","gsf"][parseInt(f.substr(0,1),10)%2],o+=["Header","Background","Display","Feedback"][parseInt(f.substr(0,1),10)%4],h[de("79a417a0f0181a8946")]=o,U.document[de("78a712aa")]){if(U.document[de("78a712aa")][de("7bb806b6ed32388c4a875b")](h),f=U.getComputedStyle(h).getPropertyValue(de("78a704b7e62456904c9b12701b6532a8")),U.document[de("78a712aa")][de("68ad1bbcf533388c4a875b")](h),!f)break;if(-1!==f.indexOf(parseInt(u[1]+u[2],16))&&-1!==f.indexOf(parseInt(u[3]+u[4],16))){t.We=!1;break}if(Gy||lh||Ua||zy)for(o="."+o,u=0;u<document.styleSheets.length;u++)for(var p in h=document.styleSheets[u].rules||document.styleSheets[u].cssRules)if(o===h[p].selectorText){t.We=!1;break}}else t.We=null,t.We=!1}}else{for(p=n[de("76ad18b4f73e")],a=n[de("73a612b6fb191d")](de("35e7"))+2;a<p;a++)e+=n[a];n=e[de("73a612b6fb191d")](de("7da71ca0ad381e90")),t.We=!(0<=n&&n<e[de("73a612b6fb191d")](de("35")))}}}return 0<t.We&&t!==t.jz}function Sd(t,e){if(dr){if(null!=e||W("Diagram setup requires an argument DIV."),null!==t.Ea&&W("Diagram has already completed setup."),"string"==typeof e?t.Ea=U.document.getElementById(e):e instanceof HTMLDivElement?t.Ea=e:W("No DIV or DIV id supplied: "+e),null===t.Ea&&W("Invalid DIV id; could not get element with id: "+e),void 0!==t.Ea.B&&W("Invalid div id; div already has a Diagram associated with it."),!t.Zl&&U.ResizeObserver){var n=kt(function(){t.Eb()},250);t.Zl=new U.ResizeObserver(function(){n()}),t.Zl.observe(t.Ea)}"static"===U.getComputedStyle(t.Ea,null).position&&(t.Ea.style.position="relative");var o="rgba(2"+(e=5)+"5, 255, 255, 0)";e--,t.Ea.style["-webkit-tap-highlight-color"]=o,t.Ea.style["-ms-touch-action"]="none",t.Ea.innerHTML="",t.Ea.B=t,t.Ea.goDiagram=t,t.Ea.go=U.go;var a=t.cq?new ua(t):new ro(t);if(void 0!==a.style&&(a.style.position="absolute",a.style.top="0px",a.style.left="0px","rtl"===U.getComputedStyle(t.Ea,null).getPropertyValue("direction")&&(t.Hl=!0),a.style.zIndex="2",a.style.userSelect="none",a.style.MozUserSelect="none"),t.ta=a,t.Hb=a.context,o=t.Hb,t.Tb=t.computePixelRatio(),t.va=t.Ea.clientWidth||1,t.ua=t.Ea.clientHeight||1,vd(t,t.va,t.ua),t.Ea.insertBefore(a.Ga,t.Ea.firstChild),(a=new ro(null)).width=1,a.height=1,t.Iu=a,t.vx=a.context,dr){a=Ke("div");var u=Ke("div");a.style.position="absolute",a.style.overflow="auto",a.style.width=t.va+"px",a.style.height=t.ua+"px",a.style.zIndex="1",u.style.position="absolute",u.style.width="1px",u.style.height="1px",t.Ea.appendChild(a),a.appendChild(u),a.onscroll=Mu,a.addEventListener("mousedown",jc),a.addEventListener("touchstart",jc,{passive:!0}),a.B=t,a.hz=!0,a.iz=!0,t.$s=a,t.Kp=u}t.Yq=kt(function(){t.xh=null,t.M()},300),t.Xw=kt(function(){pd(t)},250),t.preventDefault=function(h){return h.preventDefault(),!1},t.Hk=function(h){if(t.isEnabled){t.ag=!0;var f=ls(t,h,!0);t.doMouseMove(),t.currentTool.isBeyondDragSize()&&(t.xd=0),vo(f,h)}},t.Gk=function(h){if(t.isEnabled)if(t.ag=!0,t.re)h.preventDefault();else{var f=ls(t,h,!0);f.down=!0,f.clickCount=h.detail,(lh||Ua)&&(h.timeStamp-t.Sj<t.qt&&!t.currentTool.isBeyondDragSize()?t.xd++:t.xd=1,t.Sj=h.timeStamp,f.clickCount=t.xd),f.clone(t.firstInput),t.doMouseDown(),1===h.button?h.preventDefault():vo(f,h)}},t.Jk=function(h){if(t.isEnabled)if(t.re&&2===h.button)h.preventDefault();else if(t.re&&0===h.button&&(t.re=!1),t.hk)h.preventDefault();else{t.ag=!0;var f=ls(t,h,!0);f.up=!0,f.clickCount=h.detail,(lh||Ua)&&(f.clickCount=t.xd),f.bubbles=h.bubbles,f.targetDiagram=ph(h),t.doMouseUp(),t.Lf(),vo(f,h)}},t.Kk=function(h){if(t.isEnabled){var f=ls(t,h,!0);f.bubbles=!0;var p=0,g=0;f.delta=0,void 0!==h.deltaX?(0!==h.deltaX&&(p=0<h.deltaX?1:-1),0!==h.deltaY&&(g=0<h.deltaY?1:-1),f.delta=Math.abs(h.deltaX)>Math.abs(h.deltaY)?-p:-g):void 0!==h.wheelDeltaX?(0!==h.wheelDeltaX&&(p=0<h.wheelDeltaX?-1:1),0!==h.wheelDeltaY&&(g=0<h.wheelDeltaY?-1:1),f.delta=Math.abs(h.wheelDeltaX)>Math.abs(h.wheelDeltaY)?-p:-g):void 0!==h.wheelDelta&&0!==h.wheelDelta&&(f.delta=0<h.wheelDelta?1:-1),t.doMouseWheel(),vo(f,h)}},t.Ik=function(h){t.isEnabled&&(t.ag=!1,ls(t,h,!0),(h=t.currentTool).cancelWaitAfter(),h.standardMouseOver())},t.Pw=function(h){if(t.isEnabled){t.hk=!1,t.re=!0;var f=Ag(t,h,h.targetTouches[0],1<h.touches.length),p=null;if(0<h.targetTouches.length?p=h.targetTouches[0]:0<h.changedTouches.length&&(p=h.changedTouches[0]),null!==p){var g=p.screenX;p=p.screenY;var y=t.Bo;h.timeStamp-t.Sj<t.qt&&!(25<Math.abs(y.x-g)||25<Math.abs(y.y-p))?t.xd++:t.xd=1,f.clickCount=t.xd,t.Sj=h.timeStamp,t.Bo.h(g,p)}t.doMouseDown(),vo(f,h)}},t.Ow=function(h){if(t.isEnabled){var f=null;0<h.targetTouches.length?f=h.targetTouches[0]:0<h.changedTouches.length&&(f=h.changedTouches[0]),f=md(t,h,f,1<h.touches.length),t.doMouseMove(),vo(f,h)}},t.Nw=function(h){if(t.isEnabled)if(t.hk)h.preventDefault();else if(!(1<h.touches.length)){var f=null,p=null;0<h.targetTouches.length?p=h.targetTouches[0]:0<h.changedTouches.length&&(p=h.changedTouches[0]);var g=yd(t,h,!1,!0,!1,!1);null!==p&&(null!==(f=U.document.elementFromPoint(p.clientX,p.clientY))&&void 0!==f.shadowRoot&&null!==f&&null!==f.shadowRoot&&(f=f.shadowRoot.elementFromPoint(p.clientX,p.clientY)),null!==f&&f.B instanceof V&&f.B!==t&&_s(f.B,p,g),_s(t,p,g),g.clickCount=t.xd),g.targetDiagram=null===f?ph(h):f.B?f.B:null,g.targetObject=null,t.doMouseUp(),vo(g,h),t.re=!1}},t.Nk=function(h){if(t.isEnabled){t.ag=!0;var f=t.Ns;void 0===f[h.pointerId]&&(f[h.pointerId]=h);var p=!1;if(null!==(f=t.bk)[0]&&f[0].pointerId===h.pointerId)f[0]=h;else if(null!==f[1]&&f[1].pointerId===h.pointerId)f[1]=h,p=!0;else if(null===f[0])f[0]=h;else{if(null!==f[1])return void h.preventDefault();f[1]=h,p=!0}("touch"===h.pointerType||"pen"===h.pointerType)&&(t.hk=!1,t.re=!0),f=Ag(t,h,h,p),p=t.Bo;var g="touch"===h.pointerType||"pen"===h.pointerType?25:10;h.timeStamp-t.Sj<t.qt&&!(Math.abs(p.x-h.screenX)>g||Math.abs(p.y-h.screenY)>g)?t.xd++:t.xd=1,f.clickCount=t.xd,t.Sj=h.timeStamp,t.Bo.Jg(h.screenX,h.screenY),t.doMouseDown(),1===h.button?h.preventDefault():vo(f,h)}},t.Ok=function(h){if(t.isEnabled){t.ag=!0;var f=t.bk;if(null!==f[0]&&f[0].pointerId===h.pointerId)f[0]=h;else{if(null!==f[1]&&f[1].pointerId===h.pointerId)return void(f[1]=h);if(null!==f[0])return;f[0]=h}f[0].pointerId===h.pointerId&&((f=md(t,h,h,null!==f[1])).targetDiagram=ph(h),t.doMouseMove(),vo(f,h))}},t.Qk=function(h){if(t.isEnabled){t.ag=!0;var f="touch"===h.pointerType||"pen"===h.pointerType,p=t.Ns;if(f&&t.hk)delete p[h.pointerId],h.preventDefault();else if(null!==(p=t.bk)[0]&&p[0].pointerId===h.pointerId){p[0]=null,p=yd(t,h,!1,!0,!0,!1);var g=U.document.elementFromPoint(h.clientX,h.clientY);null!==g&&g.B instanceof V&&g.B!==t&&_s(g.B,h,p),_s(t,h,p),p.clickCount=t.xd,p.targetDiagram=null===g?ph(h):g.B?g.B:null,p.targetObject=null,t.doMouseUp(),vo(p,h),f&&(t.re=!1)}else null!==p[1]&&p[1].pointerId===h.pointerId&&(p[1]=null)}},t.Pk=function(h){if(t.isEnabled){t.ag=!1;var f=t.Ns;f[h.pointerId]&&delete f[h.pointerId],null!==(f=t.bk)[0]&&f[0].pointerId===h.pointerId&&(f[0]=null),null!==f[1]&&f[1].pointerId===h.pointerId&&(f[1]=null),"touch"!==h.pointerType&&"pen"!==h.pointerType&&((h=t.currentTool).cancelWaitAfter(),h.standardMouseOver())}},t.Ur=o.Y["d"+TM[1]+TM[2]+"wI"+Hc.slice(1,5)]["b"+l1.slice(1,e)](o.Y,wx,e,e),o.uc(!0),function Pg(t){var e=t.ta.Ga;e instanceof HTMLCanvasElement&&(t.zj?(t.addEventListener(e,"pointerdown",t.Nk,!1),t.addEventListener(e,"pointermove",t.Ok,!1),t.addEventListener(e,"pointerup",t.Qk,!1),t.addEventListener(e,"pointerout",t.Pk,!1)):(t.addEventListener(e,"touchstart",t.Pw,!1),t.addEventListener(e,"touchmove",t.Ow,!1),t.addEventListener(e,"touchend",t.Nw,!1),t.addEventListener(e,"mousemove",t.Hk,!1),t.addEventListener(e,"mousedown",t.Gk,!1),t.addEventListener(e,"mouseup",t.Jk,!1),t.addEventListener(e,"mouseout",t.Ik,!1)),t.addEventListener(e,"mouseenter",t.Oz,!1),t.addEventListener(e,"mouseleave",t.Pz,!1),t.addEventListener(e,"wheel",t.Kk,!1),t.addEventListener(e,"keydown",t.BA,!1),t.addEventListener(e,"keyup",t.CA,!1),t.addEventListener(e,"blur",t.Az,!1),t.addEventListener(e,"focus",t.Bz,!1),t.addEventListener(e,"selectstart",function(n){return n.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(n){return n.preventDefault(),!1},!1),t.addEventListener(e,"gesturestart",function(n){t.toolManager.gestureBehavior!==rd&&(t.toolManager.gestureBehavior===eo?n.preventDefault():t.re&&t.lastInput.handled||(n.preventDefault(),t.Wl=t.scale,t.currentTool.doCancel()))},!1),t.addEventListener(e,"gesturechange",function(n){if(t.toolManager.gestureBehavior!==rd)if(t.toolManager.gestureBehavior===eo)n.preventDefault();else if(!t.re||!t.lastInput.handled){n.preventDefault();var o=n.scale;if(null!==t.Wl){var a=t.ta.getBoundingClientRect();if(n=new A(n.pageX-U.scrollX-t.va/a.width*a.left,n.pageY-U.scrollY-t.ua/a.height*a.top),a=t.commandHandler,(o*=t.Wl)!==t.scale&&a.canResetZoom(o)){var u=t.zoomPoint;t.zoomPoint=n,a.resetZoom(o),t.zoomPoint=u}}}},!1),t.addEventListener(U,"resize",t.Xw,!1))}(t)}}function Ps(t){this.l=void 0===t?new A:t,this.v=new A}V.className="Diagram",V.fromDiv=function(t){var e=t;return"string"==typeof t&&(e=U.document.getElementById(t)),e instanceof HTMLDivElement&&e.B instanceof V?e.B:null},V.inherit=function(t,e){function n(){}if(Object.getPrototypeOf(t).prototype)throw Error("Used go.Diagram.inherit defining already defined class \n"+t);n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},V.None=Pn,V.Uniform=wo,V.UniformToFill=Cd,V.CycleAll=vh,V.CycleNotDirected=Uc,V.CycleNotDirectedFast=Nv,V.CycleNotUndirected=gx,V.CycleDestinationTree=mx,V.CycleSourceTree=DM,V.DocumentScroll=Nu,V.InfiniteScroll=Vg,V.TreeParentCollapsed=qi,V.AllParentsCollapsed=Md,V.AnyParentsCollapsed=Pu,Cx.className="DiagramHelper",L.Object.defineProperties(Ps.prototype,{point:{get:function(){return this.l},set:function(t){this.l=t}},shifted:{get:function(){return this.v},set:function(t){this.v=t}}});var Je,un,xo,Yr,ei,li,Dd,jl,Ro,Yc,TM="DraggingInfo";function zc(t,e,n){this.node=t,this.info=e,this.Zv=n}function Rl(){this.reset()}function wh(t){1<arguments.length&&W("Palette constructor can only take one optional argument, the DIV HTML element or its id."),V.call(this,t),Mx(this)}function Mx(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=es,t.layout=new Hn}function Qa(t){1<arguments.length&&W("Overview constructor can only take one optional argument, the DIV HTML element or its id."),V.call(this,t);var e=this;this.animationManager.isEnabled=!1,this.Sb=!0,this.Ja=null,this.xl=this.wl=!1,this.v=this.I=!0,this.eb=0,this.T=!1,this.em=null,this.Uy("drawShadows",!1);var n=new wt,o=new At;o.stroke="magenta",o.strokeWidth=2,o.fill="transparent",o.name="BOXSHAPE",n.selectable=!0,n.selectionAdorned=!1,n.selectionObjectName="BOXSHAPE",n.locationObjectName="BOXSHAPE",n.resizeObjectName="BOXSHAPE",n.cursor="move",n.add(o),this.l=n,this.allowDelete=this.allowCopy=!1,this.allowSelect=!0,this.autoScrollRegion=new te(0,0,0,0),this.la.h(0,0),this.toolManager.Xa("Dragging",new xh,this.toolManager.mouseMoveTools),this.click=function(){var a=e.observed;if(null!==a){var u=a.viewportBounds,h=e.lastInput.documentPoint;a.position=new A(h.x-u.width/2,h.y-u.height/2)}},this.Wh=function(){e.Oa(),$c(e)},this.Vh=function(){null!==e.observed&&(e.Oa(),e.M())},this.Uc=function(){1>e.updateDelay?e.M():e.T||(e.T=!0,setTimeout(function(){e.T=!1;var a=e.ta,u=e.Hb;if(null!==a&&null!==u){if(Du(e),null===e.em){var h=new ro(null);h.width=a.width,h.height=a.height,e.em=h}try{e.ta=e.em,e.Hb=e.ta.context,e.Hb.uc(!0),e.Hb.setTransform(1,0,0,1,0,0),e.Hb.clearRect(0,0,e.ta.width,e.ta.height),Sx(e)}finally{e.ta=a,e.Hb=u}}e.M()},e.updateDelay))},this.Od=function(){null!==e.observed&&$c(e)},this.autoScale=wo,this.Sb=!1}function Sx(t){var e=t.observed;if(null!==e){var n=t.drawsTemporaryLayers,o=t.drawsGrid&&n,a=e.grid;o&&null!==a&&a.visible&&!isNaN(a.width)&&!isNaN(a.height)&&(aa(e,a=z.alloc().assign(t.viewportBounds).Tc(e.viewportBounds)),z.free(a),Ti(e));var u=t.qb;u.reset(),1!==t.scale&&u.scale(t.scale),0===t.position.x&&0===t.position.y||u.translate(-t.position.x,-t.position.y),(a=t.Hb).scale(t.Tb,t.Tb),a.transform(u.m11,u.m12,u.m21,u.m22,u.dx,u.dy),u=(e=e.La.j).length;for(var h=0;h<u;h++){var f=e[h],p=t;if(f.visible&&0!==f.opacity){var g=f.diagram.grid.part;if(!n&&f.isTemporary)o&&g.layer===f&&(f=Wn(f,a),g.cc(a,p),a.globalAlpha=f);else{for(var y=Wn(f,a),v=p.scale,x=z.alloc(),S=f.Da.j,M=S.length,T=0;T<M;T++){var N=S[T];(o||N!==g)&&f.dj(a,N,p,null,v,x,!1)}z.free(x),a.globalAlpha=y}}}}}function $c(t){var e=t.box;if(null!==e){var n=t.observed;if(null!==n){t.Fc=!0,n=n.viewportBounds;var o=e.selectionObject,a=Nt.alloc();a.h(n.width,n.height),o.desiredSize=a,Nt.free(a),t=2/t.scale,o instanceof At&&(o.strokeWidth=t),e.location=new A(n.x-t/2,n.y-t/2),e.isSelected=!0}}}function xh(){ze.call(this),this.l=null}function ne(){wn(this),this.B=Ja,this.eb=this.I=this.v=!0,this.T=this.Ja=this.Uc=this.Ka=!1,this.Ji=this.l=null,this.Od=1.05,this.av=NaN,this.Ax=null,this.Av=NaN,this.zv=ug,this.Dc=!0,this.tg=null,this.Vc=200}function Au(t,e,n){if(e.isVisible())return n;if(e instanceof Gt)Au(t,e.adornedPart,n);else if(e instanceof Q){var o=e.fromNode;null!==o&&Au(t,o,n),null!==(e=e.toNode)&&Au(t,e,n)}else e instanceof ot&&(null!==(o=e.labeledLink)&&Au(t,o,n),null!==(o=e.Gg())&&(o.isTreeExpanded||o.wasTreeExpanded||n.push(o),Au(t,o,n))),null!==(e=e.containingGroup)&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||n.push(e),Au(t,e,n));return n}function Pv(t){var e=ye();for(t=t.iterator;t.next();){var n=t.value;n instanceof Q||e.push(n)}t=new nt,n=e.length;for(var o=0;o<n;o++){for(var a=e[o],u=!0,h=0;h<n;h++)if(a.Kd(e[h])){u=!1;break}u&&t.add(a)}return Jt(e),t}function Z(){wn(this),this.F=4225027,this.hb=1,this.qg=null,this.Qa="",this.ec=this.mb=null,this.la=new A(NaN,NaN).freeze(),this.Zc=Ce,this.hg=xn,this.gg=lg,this.qb=new Ht,this.Yh=new Ht,this.eg=new Ht,this.ya=this.ql=1,this.Yb=0,this.De=Yr,this.jh=Qf,this.qc=new z(NaN,NaN,NaN,NaN).freeze(),this.yb=new z(NaN,NaN,NaN,NaN).freeze(),this.rc=new z(0,0,NaN,NaN).freeze(),this.O=this.rp=this.sp=null,this.$k=this.zb=Ei,this.Ep=0,this.Fp=1,this.Sg=0,this.xn=1,this.Yp=null,this.Lp=-1/0,this.$l=0,this.am=Ga,this.bm=Un,this.ni="",this.fb=this.N=null,this.dl=-1,this.dm=this.Ya=this.mi=this.hm=null,this.Qs=un,this.Hp=this.Ng=this.ak=null}function vi(t){null===t.N&&(t.N=new tl)}function ku(t,e,n){var o=t.ij();if(null!==o)for(var a=t.fb.iterator;a.next();){var u=a.value,h=null;if(null!==u.sourceName){if(null===(h=YM(u,o,t)))continue;u.kr(t,h,n,null)}else if(u.isToModel){var f=e.diagram;null===f||f.skipsModelSourceBindings||u.kr(t,f.model.modelData,n,o)}else{if(null===(f=o.data))continue;var p=e.diagram;null===p||p.skipsModelSourceBindings||u.kr(t,f,n,o)}h===t&&null!==(f=o.Ht(u.wj))&&u.Uw(f,h,n)}}function As(t,e,n,o,a){var u=t.qc,h=t.eg;h.reset(),Iu(t,h,e,n,o,a),t.eg=h,u.h(e,n,o,a),h.Ut()||h.Qw(u)}function Ug(t,e,n,o){return!1!==t.pickable&&(o.multiply(t.transform),n?t.Oc(e,o):t.Ih(e,o))}function Wc(t,e,n,o,a){if(t.yb.h(e,n,o,a),!t.desiredSize.u()){var u=t.qc,h=(n=t.jh).top+n.bottom;switch(n=u.width+(e=n.right+n.left),u=u.height+h,o+=e,a+=h,e=jo(t,!0),n===o&&u===a&&(e=un),e){case un:(n>o||u>a)&&(tr(t,!0),t.measure(n>o?o:n,u>a?a:u,0,0));break;case Je:tr(t,!0),t.measure(o,a,0,0);break;case ei:tr(t,!0),t.measure(o,u,0,0);break;case li:tr(t,!0),t.measure(n,a,0,0)}}}function Av(t,e,n){var o=t.yb,a=t.rc;null!==t.ec&&(pr(t,e,t.ec,!0,!0,a,o),t.ec instanceof Xt&&t.ec.type===mr?(e.beginPath(),e.rect(o.x,o.y,o.width,o.height),e.Ie(t.ec)):e.fillRect(o.x,o.y,o.width,o.height)),null!==t.mb&&(pr(t,e,t.mb,!0,!1,a,o),t.mb instanceof Xt&&t.mb.type===mr?(e.beginPath(),e.rect(o.x,o.y,o.width,o.height),e.Ie(t.mb)):e.fillRect(o.x,o.y,o.width,o.height)),t.ej(e,n)}function pr(t,e,n,o,a,u,h){if(null!==n){var f=1,p=1;if("string"==typeof n)o?e.fillStyle=n:e.strokeStyle=n;else if(n.type===nl)o?e.fillStyle=n.color:e.strokeStyle=n.color;else{var g=0;if(t instanceof At&&(g=t.strokeWidth),f=u.width,p=u.height,a?(f=h.width,p=h.height):o||(f+=g,p+=g),(u=e instanceof Lu)&&n.ke&&(n.type===qc||n.gl===f&&n.zu===p))var y=n.ke;else{var v=0,x=0,S=0,M=0,T=0,N=0;if(N=T=0,a?(T=h.x,N=h.y):o||(T-=g/2,N-=g/2),v=n.start.x*f+n.start.offsetX,x=n.start.y*p+n.start.offsetY,S=n.end.x*f+n.end.offsetX,M=n.end.y*p+n.end.offsetY,v+=T,S+=T,x+=N,M+=N,n.type===fa)y=e.createLinearGradient(v,x,S,M);else if(n.type===mr)N=isNaN(n.endRadius)?Math.max(f,p)/2:n.endRadius,isNaN(n.startRadius)?(T=0,N=Math.max(f,p)/2):T=n.startRadius,y=e.createRadialGradient(v,x,T,S,M,N);else if(n.type===qc)try{y=e.createPattern(n.pattern,"repeat")}catch(I){y=null}if(n.type!==qc&&null!==(a=n.colorStops))for(a=a.iterator;a.next();)y.addColorStop(a.key,a.value);if(u&&(n.ke=y,null!==y&&(n.gl=f,n.zu=p),null===y&&n.type===qc&&-1!==n.gl)){n.gl=-1;var P=t.diagram;null!==P&&-1===n.gl&&he(function(){P.Me()},600)}}o?e.fillStyle=y:e.strokeStyle=y}}}function Hg(t){if(0!=(2048&t.F)){var e=t.qb;if(e.reset(),!t.yb.u()||!t.qc.u())return void Kc(t,!1);if(e.translate(t.yb.x-t.qc.x,t.yb.y-t.qc.y),1!==t.scale||0!==t.angle){var n=t.naturalBounds;Iu(t,e,n.x,n.y,n.width,n.height)}Kc(t,!1),Bl(t,!0)}0!=(4096&t.F)&&(null===(e=t.panel)?(t.Yh.set(t.qb),t.ql=t.scale,Bl(t,!1)):null!==e.Fd&&((n=t.Yh).reset(),e.he()?n.multiply(e.Yh):null!==e.panel&&n.multiply(e.panel.Yh),n.multiply(t.qb),t.ql=t.scale*e.ql,Bl(t,!1)))}function Iu(t,e,n,o,a,u){if(1!==t.scale&&e.scale(t.scale),0!==t.Yb){var h=ie;t.Hf()&&t.locationSpot.kb()&&(h=t.locationSpot);var f=A.alloc();if(t instanceof wt&&t.locationObject!==t)for(f.Tk((o=(n=t.locationObject).naturalBounds).x,o.y,o.width,o.height,h),n.eg.sa(f),f.offset(-n.measuredBounds.x,-n.measuredBounds.y),h=n.panel;null!==h&&h!==t;)h.eg.sa(f),f.offset(-h.measuredBounds.x,-h.measuredBounds.y),h=h.panel;else f.Tk(n,o,a,u,h);e.rotate(t.Yb,f.x,f.y),A.free(f)}}function qa(t){if(!Ri(t)){var e=t.panel;null!==e?e.o():t.Hf()&&null!==(e=t.diagram)&&(e.wd.add(t),t instanceof ot&&t.td(),e.Eb()),Ou(t,!0)}}function jo(t,e){var n=t.stretch,o=t.panel;return null!==o&&o.type===X.Table?Gg(t,o.getRowDefinition(t.row),o.getColumnDefinition(t.column),e):null!==o&&o.type===X.Auto&&o.rb()===t?ks(t,Je,e):n===Yr?null!==o?o.type===X.Spot&&o.rb()===t?ks(t,Je,e):ks(t,(n=o.defaultStretch)===Yr?un:n,e):ks(t,un,e):ks(t,n,e)}function Gg(t,e,n,o){var a=t.stretch;if(a!==Yr)return ks(t,a,o);var u=a=null;switch(e.stretch){case li:case Je:u=!0}switch(n.stretch){case ei:case Je:a=!0}return e=t.panel.defaultStretch,null===a&&(a=e===ei||e===Je),null===u&&(u=e===li||e===Je),ks(t,!0===a&&!0===u?Je:!0===a?ei:!0===u?li:un,o)}function ks(t,e,n){if(n)return e;if(e===un||(n=t.desiredSize).u())return un;if(t=t.angle,!isNaN(n.width))if(90!==t&&270!==t){if(e===ei)return un;if(e===Je)return li}else{if(e===li)return un;if(e===Je)return ei}if(!isNaN(n.height))if(90!==t&&270!==t){if(e===li)return un;if(e===Je)return ei}else{if(e===ei)return un;if(e===Je)return li}return e}function zg(t,e){t.F=e?512|t.F:-513&t.F}function Xc(t){return 0!=(1024&t.F)}function kv(t,e){t.F=e?1024|t.F:-1025&t.F}function Kc(t,e){t.F=e?2048|t.F:-2049&t.F}function Bl(t,e){t.F=e?4096|t.F:-4097&t.F}function us(t){return 0!=(8192&t.F)}function tr(t,e){t.F=e?8192|t.F:-8193&t.F}function Ri(t){return 0!=(16384&t.F)}function Ou(t,e){t.F=e?16384|t.F:-16385&t.F}function bu(t){var e=t.part;if(e instanceof ot&&(null!==t.portId||t===e.port)){var n=e.diagram;null===n||n.undoManager.isUndoingRedoing||r0(e,t)}}function _M(t){var e=t.diagram;null===e||e.undoManager.isUndoingRedoing||(t instanceof X?t instanceof ot?t.td():t.Zm(t,function(n){bu(n)}):bu(t))}function er(t,e){for(var n=1;n<arguments.length;++n);n=arguments;var o=null,a=null;if("function"==typeof t)a=t;else if("string"==typeof t){var u=Zc.H(t);"function"==typeof u?$t(o=u(n=Pl(arguments)))||W('GraphObject.make invoked object builder "'+t+'", but it did not return an Object'):a=U.go[t]}if(null===o&&(null!=a&&a.constructor||W("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),o=new a),a=1,o instanceof V&&1<n.length){u=o;var h=n[1];("string"==typeof h||h instanceof HTMLDivElement)&&(Sd(u,h),a++)}for(;a<n.length;a++)void 0===(u=n[a])?W("Undefined value at argument "+a+" for object being constructed by GraphObject.make: "+o):$g(o,u);return o}function $g(t,e){if("string"==typeof e)if(t instanceof le)t.text=e;else if(t instanceof At)t.figure=e;else if(t instanceof Ho)t.source=e;else if(t instanceof X)null!==(e=Vo.H(e))&&(t.type=e);else if(t instanceof Xt){var n=Qs(Xt,e);null!==n?t.type=n:W("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof It?null!==(e=Qs(It,e))&&(t.type=e):t instanceof Ct&&null!==(e=Qs(Ct,e))&&(t.type=e);else if(e instanceof Z)t instanceof X||W("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof gn){var o;e.isRow&&"function"==typeof t.getRowDefinition?o=t.getRowDefinition(e.index):e.isRow||"function"!=typeof t.getColumnDefinition||(o=t.getColumnDefinition(e.index)),o instanceof gn?o.Dt(e):W("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof it)"function"==typeof t.jb&&t.jb(e);else if(e instanceof Bn)t.type=e;else if(e instanceof sn)t instanceof Z||t instanceof gn?t.bind(e):W("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof as)t instanceof Z?t.Rw(e):W("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof nn)t instanceof It?t.figures.add(e):W("A PathFigure can only be added to a Geometry, not to: "+t);else if(e instanceof Ct)t instanceof nn?t.segments.add(e):W("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof Wt)t instanceof V||t instanceof Pt?t.layout=e:W("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(n=0;n<e.length;n++)$g(t,e[n]);else if("object"==typeof e&&null!==e)if(t instanceof Xt){for(var a in n=new Ki,e)o=parseFloat(a),isNaN(o)?n[a]=e[a]:t.addColorStop(o,e[a]);Ll(t,n)}else if(t instanceof gn){for(n in void 0!==e.row?((null==(a=e.row)||a===1/0||isNaN(a)||0>a)&&W("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+a),t.isRow=!0,t.index=a):void 0!==e.column&&((null==(a=e.column)||a===1/0||isNaN(a)||0>a)&&W("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+a),t.isRow=!1,t.index=a),a=new Ki,e)"row"!==n&&"column"!==n&&(a[n]=e[n]);Ll(t,a)}else Ll(t,e);else W('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function la(t,e){Zc.add(t,e)}function Ed(t,e,n){void 0===n&&(n=null);var o=t[1];if("function"==typeof n?n(o):"string"==typeof o)return t.splice(1,1),o;if(void 0===e)throw Error("no "+("function"==typeof n?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}Ps.className="DraggingInfo",zc.className="DraggingNodeInfoPair",Rl.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new Nt(NaN,NaN).freeze(),this.gridSnapCellSpot=Ue,this.gridSnapOrigin=new A(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},Rl.className="DraggingOptions",Y(wh,V),wh.prototype.reset=function(){V.prototype.reset.call(this),Mx(this)},wh.className="Palette",Y(Qa,V),Qa.prototype.computePixelRatio=function(){return 1},Qa.prototype.cc=function(){if(null===this.Ea&&W("No div specified"),null===this.ta&&W("No canvas specified"),!(this.ta instanceof ua)&&(Ih(this.box),this.Fc)){var t=this.observed;if(null!==t&&!t.animationManager.defaultAnimation.isAnimating&&t.pj){Du(this);var e=this.ta;(t=this.Hb).uc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?Sx(this):null!==this.em&&(t.drawImage(this.em.Ga,0,0),(e=this.qb).reset(),1!==this.scale&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.position.x,-this.position.y),t.scale(this.Tb,this.Tb),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy));for(var n=(e=this.La.j).length,o=0;o<n;o++)e[o].cc(t,this);this.Fc=this.wi=!1}}},Qa.prototype.computeBounds=function(){var t=this.observed;if(null===t)return ug;var e=t.documentBounds.copy();return e.Tc(t.viewportBounds),e},Qa.prototype.Fy=function(){!0!==this.Fc&&(this.Fc=!0,this.Eb())},Qa.prototype.Uq=function(t,e,n,o){this.Sb||(oa(this),this.M(),ra(this),this.Oa(),$c(this),this.Kc.scale=n,this.Kc.position.x=t.x,this.Kc.position.y=t.y,this.Kc.bounds.assign(t),this.Kc.gw=o,this.R("ViewportBoundsChanged",this.Kc,t))},L.Object.defineProperties(Qa.prototype,{observed:{get:function(){return this.Ja},set:function(t){var e=this.Ja;if(t instanceof Qa&&W("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(null!==e&&(this.remove(this.box),e.Km("ViewportBoundsChanged",this.Wh),e.Km("DocumentBoundsChanged",this.Vh),e.Km("InvalidateDraw",this.Uc),e.Km("AnimationFinished",this.Od)),this.Ja=t,null!==t&&(t.kk("ViewportBoundsChanged",this.Wh),t.kk("DocumentBoundsChanged",this.Vh),t.kk("InvalidateDraw",this.Uc),t.kk("AnimationFinished",this.Od),this.add(this.box)),this.Oa(),null===t){this.em=null;var n=this.ta,o=this.Hb;n&&o&&(o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,n.width,n.height))}else this.Uc(null),$c(this),this.M();this.g("observed",e,t)}}},box:{get:function(){return this.l},set:function(t){var e=this.l;e!==t&&(this.l=t,this.remove(e),this.add(this.l),$c(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t,this.Me())}},drawsGrid:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t,this.Me())}},updateDelay:{get:function(){return this.eb},set:function(t){0>t&&(t=0),this.eb!==t&&(this.eb=t)}}}),Qa.className="Overview",Y(xh,ze),xh.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(null===e)return!1;var n=t.lastInput;return!(!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.isTouchEvent&&n.timestamp-t.firstInput.timestamp<this.delay)||(null===this.findDraggablePart()&&(this.l=new A((n=e.viewportBounds).width/2,n.height/2),e.position=new A((t=t.firstInput.documentPoint).x-this.l.x,t.y-this.l.y)),0))},xh.prototype.doActivate=function(){this.l=null,ze.prototype.doActivate.call(this)},xh.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;null!==e&&e.cursor&&(t.currentCursor=e.cursor)},xh.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(null!==e){var n=t.box;if(null!==n){if(null===this.l){var o=t.firstInput.documentPoint;this.l=new A(o.x-(n=n.location).x,o.y-n.y)}e.position=new A((t=t.lastInput.documentPoint).x-this.l.x,t.y-this.l.y)}}},xh.className="OverviewDraggingTool",ne.prototype.toString=function(){return"CommandHandler"},ne.prototype.ee=function(t){this.B=t},ne.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,n=gu?e.meta:e.control,o=e.shift,a=e.alt,u=e.key;!n||"C"!==u&&"Insert"!==u?n&&"X"===u||o&&"Del"===u?this.canCutSelection()&&this.cutSelection():n&&"V"===u||o&&"Insert"===u?this.canPasteSelection()&&this.pasteSelection():n&&"Y"===u||a&&o&&"Backspace"===u?this.canRedo()&&this.redo():n&&"Z"===u||a&&"Backspace"===u?this.canUndo()&&this.undo():"Del"===u||"Backspace"===u?this.canDeleteSelection()&&this.deleteSelection():n&&"A"===u?this.canSelectAll()&&this.selectAll():"Esc"===u?this.canStopCommand()&&this.stopCommand():"Up"===u?t.allowVerticalScroll&&t.scroll(n?"pixel":"line","up"):"Down"===u?t.allowVerticalScroll&&t.scroll(n?"pixel":"line","down"):"Left"===u?t.allowHorizontalScroll&&t.scroll(n?"pixel":"line","left"):"Right"===u?t.allowHorizontalScroll&&t.scroll(n?"pixel":"line","right"):"PageUp"===u?o&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):"PageDown"===u?o&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):"Home"===u?n&&t.allowVerticalScroll?t.scroll("document","up"):!n&&t.allowHorizontalScroll&&t.scroll("document","left"):"End"===u?n&&t.allowVerticalScroll?t.scroll("document","down"):!n&&t.allowHorizontalScroll&&t.scroll("document","right"):" "===u?this.canScrollToPart()&&this.scrollToPart():"Subtract"===u?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===u?this.canIncreaseZoom()&&this.increaseZoom():n&&"0"===u?this.canResetZoom()&&this.resetZoom():o&&"Z"===u?this.canZoomToFit()&&this.zoomToFit():n&&!o&&"G"===u?this.canGroupSelection()&&this.groupSelection():n&&o&&"G"===u?this.canUngroupSelection()&&this.ungroupSelection():e.event&&"F2"===e.event.key?this.canEditTextBlock()&&this.editTextBlock():e.event&&"ContextMenu"===e.event.key?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},ne.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},ne.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof Fe&&t.allowSelect&&t.clearSelection(),null!==e&&e.doCancel()},ne.prototype.canStopCommand=function(){return!0},ne.prototype.selectAll=function(){var t=this.diagram;t.M();try{t.currentCursor="wait",t.R("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var n=t.nodes;n.next();)n.value.isSelected=!0;for(var o=t.links;o.next();)o.value.isSelected=!0}finally{t.R("ChangedSelection",t.selection),t.currentCursor=""}},ne.prototype.canSelectAll=function(){return this.diagram.allowSelect},ne.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.xa("Delete"),t.R("SelectionDeleting",t.selection);for(var e=new nt,n=t.selection.iterator;n.next();)Ul(e,n.value,!0,this.deletesTree?1/0:0,!!this.deletesConnectedLinks&&null,function(o){return o.canDelete()});t.gu(e,!0),t.R("SelectionDeleted",e)}finally{t.Wa("Delete"),t.R("ChangedSelection",t.selection),t.currentCursor=""}},ne.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||0===t.selection.count)},ne.prototype.copySelection=function(){var t=this.diagram,e=new nt;for(t=t.selection.iterator;t.next();)Ul(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(n){return n.canCopy()});this.copyToClipboard(e)},ne.prototype.canCopySelection=function(){var t=this.diagram;return!(!t.allowCopy||!t.allowClipboard||0===t.selection.count)},ne.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},ne.prototype.canCutSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowCopy||!t.allowDelete||!t.allowClipboard||0===t.selection.count)},ne.prototype.copyToClipboard=function(t){var e=this.diagram,n=null;if(null===t)wd=null,xd="";else{n=e.model;var o=!1,a=!1,u=null;try{n.Dm()&&(o=n.sk,n.sk=this.copiesParentKey),n.Bk()&&(a=n.rk,n.rk=this.copiesGroupKey),u=e.tk(t,null,!0)}finally{n.Dm()&&(n.sk=o),n.Bk()&&(n.rk=a),(n=new lt).addAll(u),wd=n,xd=e.model.dataFormat}}e.R("ClipboardChanged",n)},ne.prototype.pasteFromClipboard=function(){var t=new nt,e=wd;if(null===e)return t;var n=this.diagram;if(xd!==n.model.dataFormat)return t;var o=n.model,a=!1,u=!1,h=null;try{o.Dm()&&(a=o.sk,o.sk=this.copiesParentKey),o.Bk()&&(u=o.rk,o.rk=this.copiesGroupKey),h=n.tk(e,n,!1)}finally{for(o.Dm()&&(o.sk=a),o.Bk()&&(o.rk=u),e=h.iterator;e.next();)o=e.key,(n=e.value).location.u()||(o.location.u()?n.location=o.location:!n.position.u()&&o.position.u()&&(n.position=o.position)),t.add(n)}return t},ne.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.xa("Paste");var n=this.pasteFromClipboard();0<n.count&&e.clearSelection(!0);for(var o=n.iterator;o.next();)o.value.isSelected=!0;if(null!==t){var a=e.computePartsBounds(e.selection);a.u()&&bg(e,this.computeEffectiveCollection(e.selection,e.kl),new A(t.x-a.centerX,t.y-a.centerY),e.kl,!1)}e.R("ClipboardPasted",n)}finally{e.Wa("Paste"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},ne.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||null===wd||0===wd.count||xd!==t.model.dataFormat)},ne.prototype.undo=function(){this.diagram.undoManager.undo()},ne.prototype.canUndo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canUndo()},ne.prototype.redo=function(){this.diagram.undoManager.redo()},ne.prototype.canRedo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canRedo()},ne.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===Pn&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},ne.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale===Pn&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},ne.prototype.increaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===Pn&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},ne.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale===Pn&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},ne.prototype.resetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},ne.prototype.canResetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;return!(t<e.minScale||t>e.maxScale)&&e.allowZoom},ne.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.Cc(),t.Me();var n=t.position,o=t.scale;ia(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&o===this.Av&&!isNaN(this.av)&&t.documentBounds.w(this.zv)?(t.scale=this.av,t.position=this.Ax,this.Av=NaN,this.zv=ug):(this.av=o,this.Ax=n.copy(),t.zoomToFit(),this.Av=t.scale,this.zv=t.documentBounds.copy()),ex(e)},ne.prototype.canZoomToFit=function(){return this.diagram.allowZoom},ne.prototype.scrollToPart=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.Ta(),null===t){try{null!==this.tg&&(this.tg.next()?t=this.tg.value:this.tg=null)}catch(p){this.tg=null}null===t&&(0<e.highlighteds.count?this.tg=e.highlighteds.iterator:0<e.selection.count&&(this.tg=e.selection.iterator),null!==this.tg&&this.tg.next()&&(t=this.tg.value))}if(null!==t){var n=e.animationManager;ia(n,"Scroll To Part");var o=this.scrollToPartPause;if(0<o){var a=Au(this,t,[t]);if(1===a.length)e.xa(),e.At(t.actualBounds),e.Wa("Scroll To Part");else{var u=function(){e.xa();for(var p=a.pop();0<a.length&&p instanceof ot&&p.isTreeExpanded&&(!(p instanceof Pt)||p.isSubGraphExpanded);)p=a.pop();0<a.length?(p instanceof wt&&e.Bw(p.actualBounds),p instanceof ot&&!p.isTreeExpanded&&(p.isTreeExpanded=!0),p instanceof Pt&&!p.isSubGraphExpanded&&(p.isSubGraphExpanded=!0)):(p instanceof wt&&e.At(p.actualBounds),e.Km("LayoutCompleted",h)),e.Wa("Scroll To Part")},h=function(){he(u,(n.isEnabled?n.duration:0)+o)};e.kk("LayoutCompleted",h),u()}}else{var f=e.position.copy();e.At(t.actualBounds),f.Na(e.position)&&n.Cc()}}},ne.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof wt)&&(0!==(t=this.diagram).selection.count||0!==t.highlighteds.count)&&t.allowHorizontalScroll&&t.allowVerticalScroll},ne.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.xa("Collapse Tree"),ia(e.animationManager,"Collapse Tree");var n=new lt;if(null!==t&&t.isTreeExpanded)t.collapseTree(),n.add(t);else if(null===t)for(var o=e.selection.iterator;o.next();){var a=o.value;a instanceof ot&&a.isTreeExpanded&&(a.collapseTree(),n.add(a))}e.R("TreeCollapsed",n)}finally{e.Wa("Collapse Tree")}},ne.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof ot&&t.isTreeExpanded))return!1;if(0<t.Eq().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof ot&&e.isTreeExpanded&&0<e.Eq().count)return!0;return!1},ne.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.xa("Expand Tree"),ia(e.animationManager,"Expand Tree");var n=new lt;if(null===t||t.isTreeExpanded){if(null===t)for(var o=e.selection.iterator;o.next();){var a=o.value;a instanceof ot&&!a.isTreeExpanded&&(a.expandTree(),n.add(a))}}else t.expandTree(),n.add(t);e.R("TreeExpanded",n)}finally{e.Wa("Expand Tree")}},ne.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof ot)||t.isTreeExpanded)return!1;if(0<t.Eq().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof ot&&!e.isTreeExpanded&&0<e.Eq().count)return!0;return!1},ne.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.Ck()){var n=this.archetypeGroupData;if(null!==n){var o=null;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.xa("Group");for(var a=new lt,u=t.selection.iterator;u.next();){var h=u.value;h.Pc()&&h.canGroup()&&a.add(h)}for(var f=new lt,p=a.iterator;p.next();){var g=p.value;u=!1;for(var y=a.iterator;y.next();)if(g.Kd(y.value)){u=!0;break}u||f.add(g)}if(0<f.count){var v=f.first().containingGroup;if(null!==v)for(;null!==v;){a=!1;for(var x=f.iterator;x.next();)if(!x.value.Kd(v)){a=!0;break}if(!a)break;v=v.containingGroup}if(n instanceof Pt)Lr(n),null!==(o=n.copy())&&t.add(o);else if(e.ew(n)){var S=e.copyNodeData(n);$t(S)&&(e.wf(S),o=t.gj(S))}if(null!==o){null!==v&&this.isValidMember(v,o)&&(o.containingGroup=v);for(var M=f.iterator;M.next();){var T=M.value;this.isValidMember(o,T)&&(T.containingGroup=o)}t.clearSelection(!0),o.isSelected=!0}}t.R("SelectionGrouped",o)}finally{t.Wa("Group"),t.R("ChangedSelection",t.selection),t.currentCursor=""}}}},ne.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.Ck()||null===this.archetypeGroupData)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Pc()&&e.canGroup())return!0}return!1},ne.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof Q)return!1;if(null!==t){if(t===e||t.Kd(e))return!1;var n=t.memberValidation;if(null!==n&&!n(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(n=this.memberValidation)||n(t,e)},ne.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.model;if(n.Ck())try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.xa("Ungroup");var o=new lt;if(null!==t)o.add(t);else for(var a=e.selection.iterator;a.next();){var u=a.value;u instanceof Pt&&u.canUngroup()&&o.add(u)}var h=new lt;if(0<o.count){e.clearSelection(!0);for(var f=o.iterator;f.next();){var p=f.value;p.expandSubGraph();var g=p.containingGroup,y=null!==g&&null!==g.data?n.ja(g.data):void 0;h.addAll(p.memberParts);for(var v=h.iterator;v.next();){var x=v.value;if(x.isSelected=!0,!(x instanceof Q)){var S=x.data;null!==S?n.dr(S,y):x.containingGroup=g}}e.remove(p)}}e.R("SelectionUngrouped",o,h)}finally{e.Wa("Ungroup"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},ne.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.Ck())return!1;if(null!==t){if(!(t instanceof Pt))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Pt&&e.canUngroup())return!0;return!1},ne.prototype.addTopLevelParts=function(t,e){var n=!0;for(t=Pv(t).iterator;t.next();){var o=t.value;null!==o.containingGroup&&(!e||this.isValidMember(null,o)?o.containingGroup=null:n=!1)}return n},ne.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.xa("Collapse SubGraph"),ia(e.animationManager,"Collapse SubGraph");var n=new lt;if(null!==t&&t.isSubGraphExpanded)t.collapseSubGraph(),n.add(t);else if(null===t)for(var o=e.selection.iterator;o.next();){var a=o.value;a instanceof Pt&&a.isSubGraphExpanded&&(a.collapseSubGraph(),n.add(a))}e.R("SubGraphCollapsed",n)}finally{e.Wa("Collapse SubGraph")}},ne.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!!(t instanceof Pt&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Pt&&e.isSubGraphExpanded)return!0;return!1},ne.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.xa("Expand SubGraph"),ia(e.animationManager,"Expand SubGraph");var n=new lt;if(null===t||t.isSubGraphExpanded){if(null===t)for(var o=e.selection.iterator;o.next();){var a=o.value;a instanceof Pt&&!a.isSubGraphExpanded&&(a.expandSubGraph(),n.add(a))}}else t.expandSubGraph(),n.add(t);e.R("SubGraphExpanded",n)}finally{e.Wa("Expand SubGraph")}},ne.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return t instanceof Pt&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Pt&&!e.isSubGraphExpanded)return!0;return!1},ne.prototype.editTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.toolManager.findTool("TextEditing");if(null!==n){if(null===t){t=null;for(var o=e.selection.iterator;o.next();){var a=o.value;if(a.canEdit()){t=a;break}}if(null===t)return;t=t.xm(function(u){return u instanceof le&&u.editable})}null!==t&&(e.currentTool=null,n.textBlock=t,e.currentTool=n)}},ne.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||null===e.toolManager.findTool("TextEditing"))return!1;if(null!==t){if(!(t instanceof le))return!1;if(null!==(t=t.part)&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if((t=e.value).canEdit()&&null!==(t=t.xm(function(n){return n instanceof le&&n.editable})))return!0;return!1},ne.prototype.showContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");if(null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==(t=n.findObjectWithContextMenu(t)))){var o=e.lastInput,a=null;t instanceof Z?a=t.da(ie):e.viewportBounds.$(o.documentPoint)||(a=new A((a=e.viewportBounds).x+a.width/2,a.y+a.height/2)),null!==a&&(o.viewPoint=e.hr(a),o.documentPoint=a,o.left=!1,o.right=!0,o.up=!0),e.currentTool=n,gg(n,!1,t)}},ne.prototype.canShowContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");return null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==n.findObjectWithContextMenu(t))},ne.prototype.computeEffectiveCollection=function(t,e){var n=this.diagram,o=n.toolManager.findTool("Dragging"),a=n.currentTool===o;if(void 0===e&&(e=a?o.dragOptions:n.kl),o=new Et,null===t)return o;for(var u=t.iterator;u.next();)sa(n,o,u.value,a,e);if(null!==n.draggedLink&&e.dragsLink)return o;for(u=t.iterator;u.next();)(t=u.value)instanceof Q&&((null===(e=t.fromNode)||o.contains(e))&&(null===(e=t.toNode)||o.contains(e))||o.remove(t));return o},L.Object.defineProperties(ne.prototype,{diagram:{get:function(){return this.B}},copiesClipboardData:{get:function(){return this.v},set:function(t){this.v=t}},copiesConnectedLinks:{get:function(){return this.I},set:function(t){this.I=t}},deletesConnectedLinks:{get:function(){return this.eb},set:function(t){this.eb=t}},copiesTree:{get:function(){return this.Ka},set:function(t){this.Ka=t}},deletesTree:{get:function(){return this.Uc},set:function(t){this.Uc=t}},copiesParentKey:{get:function(){return this.Ja},set:function(t){this.Ja=t}},copiesGroupKey:{get:function(){return this.T},set:function(t){this.T=t}},archetypeGroupData:{get:function(){return this.l},set:function(t){this.l=t}},memberValidation:{get:function(){return this.Ji},set:function(t){this.Ji=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Od},set:function(t){1<t||W("zoomFactor must be larger than 1.0, not: "+t),this.Od=t}},isZoomToFitRestoreEnabled:{get:function(){return this.Dc},set:function(t){this.Dc=t}},scrollToPartPause:{get:function(){return this.Vc},set:function(t){this.Vc=t}}}),ne.className="CommandHandler",vv=function(){return new ne},Z.prototype.cloneProtected=function(t){t.F=6144|this.F,t.hb=this.hb,t.Qa=this.Qa,t.mb=this.mb,t.ec=this.ec,t.Ng=this.Ng,t.la.assign(this.la),t.Zc=this.Zc.G(),t.hg=this.hg.G(),t.gg=this.gg.G(),t.eg=this.eg.copy(),t.ya=this.ya,t.Yb=this.Yb,t.De=this.De,t.jh=this.jh.G(),t.qc.assign(this.qc),t.yb.assign(this.yb),t.rc.assign(this.rc),t.rp=this.rp,null!==this.O&&(t.O=this.O.copy()),t.zb=this.zb.G(),t.$k=this.$k.G(),t.Ep=this.Ep,t.Fp=this.Fp,t.Sg=this.Sg,t.xn=this.xn,t.Yp=this.Yp,t.Lp=this.Lp,t.$l=this.$l,t.am=this.am.G(),t.bm=this.bm,t.ni=this.ni,null!==this.N&&(t.N=this.N.copy()),t.fb=this.fb,t.dl=this.dl,null!==this.mi&&(t.mi=Pl(this.mi)),null!==this.Ya&&(t.Ya=this.Ya.copy()),t.dm=this.dm},Z.prototype.Ux=function(t){var e=this.mi;if(Dn(e)){for(var n=0;n<e.length;n++)if(e[n]===t)return}else this.mi=e=[];e.push(t)},Z.prototype.Af=function(t){t.sp=null,t.ak=null,t.o()},Z.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.mi)for(var e=0;e<this.mi.length;e++){var n=this.mi[e];t[n]=this[n]}return t},Z.prototype.copy=function(){return this.clone()},(D=Z.prototype).jb=function(t){t.classType===Q?0===t.name.indexOf("Orient")?this.segmentOrientation=t:W("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===Z&&(this.stretch=t)},D.toString=function(){return Va(this.constructor)+"#"+En(this)},D.Mc=function(){if(null===this.O){var t=new ap;t.bh=gi,t.Bh=gi,t.$g=10,t.zh=10,t.ah=0,t.Ah=0,this.O=t}},D.bb=function(t,e,n,o,a,u,h){var f=this.part;if(null!==f&&(f.Rk(t,e,n,o,a,u,h),n===this&&t===Me&&Xc(this)&&ku(this,f,e),u=this.diagram,null===this.Ng||null===u||!u.pj||u.undoManager.isUndoingRedoing||u.currentTool!==u.toolManager||u.animationManager.rn||null!==(t=this.Ng.get(e))&&u.animationManager.isEnabled&&!u.animationManager.isTicking&&(null===this.Hp&&(this.Hp=new Et),h=0===u.undoManager.transactionLevel,t.startCondition===yv?h=!0:t.startCondition===no&&(h=!1),h?(function _g(t,e){null!==(t=t.bl)&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}(t,u=new ti),null!==(h=this.Hp.get(t))&&h.stop(),this.Hp.add(t,u),u.wv=this,u.Px=t,u.add(this,e,o,a),u.start()):(Cg(u.animationManager,"Trigger"),u.animationManager.defaultAnimation.add(this,e,o,a))),this instanceof X&&n===f&&0!=(16777216&f.F)&&null!==f.data))for(o=(n=this.W.j).length,a=0;a<o;a++)(f=n[a])instanceof X&&bs(f,function(p){null!==p.data&&0!=(16777216&p.F)&&p.Ca(e)})},D.Ht=function(t){return this.dl===t?this:null},D.g=function(t,e,n){this.bb(Me,t,this,e,n)},D.sy=function(t,e,n){if(!1===this.pickable)return!1;var o=this.naturalBounds;return e=t.He(e),n?Di(t.x,t.y,0,0,0,o.height)<=e||Di(t.x,t.y,0,o.height,o.width,o.height)<=e||Di(t.x,t.y,o.width,o.height,o.width,0)<=e||Di(t.x,t.y,o.width,0,0,0)<=e:t.rd(0,0)<=e&&t.rd(0,o.height)<=e&&t.rd(o.width,0)<=e&&t.rd(o.width,o.height)<=e},D.he=function(){return!0},D.$=function(t){var e=A.alloc();e.assign(t),this.transform.sa(e);var n=this.actualBounds;if(!n.u())return A.free(e),!1;var o=this.diagram;if(null!==o&&o.re){var a=o.Bm("extraTouchThreshold"),u=o.Bm("extraTouchArea"),h=u/2,f=this.naturalBounds,p=1/(o=this.Cf()*o.scale);if(f.width*o<a&&f.height*o<a)return t=ts(n.x-h*p,n.y-h*p,n.width+u*p,n.height+u*p,e.x,e.y),A.free(e),t}return a=!1,(this instanceof Gt||this instanceof At?ts(n.x-5,n.y-5,n.width+10,n.height+10,e.x,e.y):n.$(e))&&(a=!(this.Ya&&!this.Ya.$(e))&&(!!(null!==this.ec&&n.$(e)||null!==this.mb&&this.rc.$(t))||this.Jh(t))),A.free(e),a},D.Jh=function(t){var e=this.naturalBounds;return ts(0,0,e.width,e.height,t.x,t.y)},D.Ge=function(t){if(0===this.angle)return this.actualBounds.Ge(t);var e=this.naturalBounds;e=z.allocAt(0,0,e.width,e.height);var n=this.transform,o=!1,a=A.allocAt(t.x,t.y);return e.$(n.Jd(a))&&(a.h(t.x,t.bottom),e.$(n.Jd(a))&&(a.h(t.right,t.bottom),e.$(n.Jd(a))&&(a.h(t.right,t.y),e.$(n.Jd(a))&&(o=!0)))),A.free(a),z.free(e),o},D.Ih=function(t,e){if(void 0===e)return t.Ge(this.actualBounds);var n=this.naturalBounds,o=!1,a=A.allocAt(0,0);return t.$(e.sa(a))&&(a.h(0,n.height),t.$(e.sa(a))&&(a.h(n.width,n.height),t.$(e.sa(a))&&(a.h(n.width,0),t.$(e.sa(a))&&(o=!0)))),A.free(a),o},D.Oc=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Oc(this.actualBounds);var n=this.naturalBounds,o=A.allocAt(0,0),a=A.allocAt(0,n.height),u=A.allocAt(n.width,n.height),h=A.allocAt(n.width,0),f=!1;if(t.$(e.sa(o))||t.$(e.sa(a))||t.$(e.sa(u))||t.$(e.sa(h)))f=!0;else{n=z.allocAt(0,0,n.width,n.height);var p=A.allocAt(t.x,t.y);n.$(e.Jd(p))?f=!0:(p.h(t.x,t.bottom),n.$(e.Jd(p))?f=!0:(p.h(t.right,t.bottom),n.$(e.Jd(p))?f=!0:(p.h(t.right,t.y),n.$(e.Jd(p))&&(f=!0)))),A.free(p),z.free(n),!f&&(R.Rt(t,o,a)||R.Rt(t,a,u)||R.Rt(t,u,h)||R.Rt(t,h,o))&&(f=!0)}return A.free(o),A.free(a),A.free(u),A.free(h),f},D.da=function(t,e){if(void 0===e&&(e=new A),t instanceof at){var n=this.naturalBounds;e.h(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY)}else e.set(t);return this.Fd.sa(e),e},D.mj=function(t){void 0===t&&(t=new z);var e=this.naturalBounds,n=this.Fd,o=A.allocAt(0,0).transform(n);return t.h(o.x,o.y,0,0),o.h(e.width,0).transform(n),Kn(t,o.x,o.y,0,0),o.h(e.width,e.height).transform(n),Kn(t,o.x,o.y,0,0),o.h(0,e.height).transform(n),Kn(t,o.x,o.y,0,0),A.free(o),t},D.lj=function(){var t=this.Fd;return 1===t.m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},D.Cf=function(){if(0==(4096&this.F))return this.ql;var t=this.ya;return null!==this.panel?t*this.panel.Cf():t},D.Nt=function(t,e){return void 0===e&&(e=new A),e.assign(t),this.Fd.Jd(e),e},D.Ot=function(t,e,n){return this.yk(t.x,t.y,e.x,e.y,n)},D.yk=function(t,e,n,o,a){var u=this.transform,h=1/(u.m11*u.m22-u.m12*u.m21),f=u.m22*h,p=-u.m12*h,g=-u.m21*h,y=u.m11*h,v=h*(u.m21*u.dy-u.m22*u.dx),x=h*(u.m12*u.dx-u.m11*u.dy);return null!==this.areaBackground?R.Ef((u=this.actualBounds).left,u.top,u.right,u.bottom,t,e,n,o,a):(h=t*f+e*g+v,t=t*p+e*y+x,e=n*f+o*g+v,n=n*p+o*y+x,a.h(0,0),n=R.Ef(0,0,(o=this.naturalBounds).width,o.height,h,t,e,n,a),a.transform(u),n)},Z.prototype.measure=function(t,e,n,o){if(!1!==us(this)){var a=this.jh,u=a.right+a.left;a=a.top+a.bottom,t=Math.max(t-u,0),e=Math.max(e-a,0),n=Math.max((n||0)-u,0),o=Math.max((o||0)-a,0),a=this.desiredSize;var h=0;this instanceof At&&(h=this.strokeWidth),90===(u=this.angle)||270===u?(t=isFinite(a.height)?a.height+h:t,e=isFinite(a.width)?a.width+h:e):(t=isFinite(a.width)?a.width+h:t,e=isFinite(a.height)?a.height+h:e),a=n||0,h=o||0;var f=this instanceof X;switch(jo(this,!0)){case un:h=a=0,f&&(e=t=1/0);break;case Je:isFinite(t)&&t>n&&(a=t),isFinite(e)&&e>o&&(h=e);break;case ei:isFinite(t)&&t>n&&(a=t),h=0,f&&(e=1/0);break;case li:isFinite(e)&&e>o&&(h=e),a=0,f&&(t=1/0)}var p=this.minSize;a>(f=this.maxSize).width&&p.width<f.width&&(a=f.width),h>f.height&&p.height<f.height&&(h=f.height),n=Math.max(a/this.scale,p.width),o=Math.max(h/this.scale,p.height),f.width<n&&(n=Math.min(p.width,n)),f.height<o&&(o=Math.min(p.height,o)),t=Math.min(f.width,t),e=Math.min(f.height,e),t=Math.max(n,t),e=Math.max(o,e),(90===u||270===u)&&(u=t,t=e,e=u,u=n,n=o,o=u),this.qc.ea(),this.Gm(t,e,n,o),this.qc.freeze(),this.qc.u()||W("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.qc.toString()),tr(this,!1)}},Z.prototype.Gm=function(){},Z.prototype.Hf=function(){return!1},Z.prototype.arrange=function(t,e,n,o,a){this.Gl();var u=z.alloc();u.assign(this.yb),this.yb.ea(),!1===Ri(this)?this.yb.h(t,e,n,o):this.Hh(t,e,n,o),this.yb.freeze(),this.Ya=void 0===a?null:a,n=!1,void 0!==a?n=!0:(null===(a=this.panel)||a.type!==X.TableRow&&a.type!==X.TableColumn||(a=a.panel),null!==a&&(a=a.rc,o=this.measuredBounds,null!==this.areaBackground&&(o=this.yb),n=e+o.height,o=t+o.width,n=!(0<=t+.05&&o<=a.width+.05&&0<=e+.05&&n<=a.height+.05),this instanceof le&&(this.vs>(t=this.naturalBounds).height||this.ub>t.width))&&(n=!0)),this.F=n?256|this.F:-257&this.F,this.yb.u()||W("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.yb.toString()),this.Hm(u,this.yb),Ou(this,!1),z.free(u)},(D=Z.prototype).Hh=function(){},D.Hm=function(t,e){var n=this.part;null!==n&&null!==n.diagram&&(n.selectionObject!==this&&n.resizeObject!==this&&n.rotateObject!==this||t0(n,!0),this.M(),Xy(t,e)||(n.Nh(),this.hp(n)))},D.hp=function(t){null!==this.portId&&(t0(t,!0),t instanceof ot&&r0(t,this))},D.cc=function(t,e){if(this.visible){var n=this instanceof X&&(this.type===X.TableRow||this.type===X.TableColumn),o=this.yb;if(n||0!==o.width&&0!==o.height&&!isNaN(o.x)&&!isNaN(o.y)){var a=this.opacity;if(0!==a){var u=1;if(1!==a&&(t.globalAlpha=(u=t.globalAlpha)*a),!this.ly(t,e))if(n)Av(this,t,e);else{this instanceof Q&&this.Fk(!1),n=this.transform;var h=this.panel;0!=(4096&this.F)&&Hg(this);var f=this.part,p=!1,g=0;if(f&&e.Je("drawShadows")&&(p=f.isShadowed)){var y=f.shadowOffset;g=Math.max(y.y,y.x)*e.scale*e.Tb}if(!(y=e.xi||!this.Hf())){var I,v=this.naturalBounds,x=(y=this.Yh).m11,S=y.m21,M=y.dx,T=y.m12,N=y.m22,P=y.dy,O=I=0;y=I*x+O*S+M;var b=I*T+O*N+P,B=(I=v.width+g)*x+(O=0)*S+M;I=I*T+O*N+P,O=Math.min(y,B);var K=Math.min(b,I),rt=Math.max(y+0,B)-O,tt=Math.max(b+0,I)-K;y=O,b=K,B=(I=v.width+g)*x+(O=v.height+g)*S+M,I=I*T+O*N+P,O=Math.min(y,B),K=Math.min(b,I),rt=Math.max(y+rt,B)-O,tt=Math.max(b+tt,I)-K,y=O,b=K,B=(I=0)*x+(O=v.height+g)*S+M,I=I*T+O*N+P,O=Math.min(y,B),K=Math.min(b,I),rt=Math.max(y+rt,B)-O,tt=Math.max(b+tt,I)-K,b=K,x=(g=e.viewportBounds).y,y=!((y=O)>g.width+(v=g.x)||v>rt+y||b>g.height+x||x>tt+b)}if(y){if(y=0!=(256&this.F),t.clipInsteadOfFill&&(y=!1),this instanceof le&&(t.font=this.font),y){if(b=h.he()?h.naturalBounds:h.actualBounds,null!==this.Ya?(rt=(v=this.Ya).x,tt=v.y,g=v.width,v=v.height):(rt=Math.max(o.x,b.x),tt=Math.max(o.y,b.y),g=Math.min(o.right,b.right)-rt,v=Math.min(o.bottom,b.bottom)-tt),rt>o.width+o.x||o.x>b.width+b.x)return void(1!==a&&(t.globalAlpha=u));t.save(),t.beginPath(),t.rect(rt,tt,g,v),t.clip()}if(this.Hf()){if(!f.isVisible())return void(1!==a&&(t.globalAlpha=u));p&&(t.Jw((b=f.shadowOffset).x*e.scale*e.Tb,b.y*e.scale*e.Tb,f.shadowBlur),el(t),t.shadowColor=f.shadowColor)}p&&!0===this.shadowVisible?el(t):p&&!1===this.shadowVisible&&Is(t),f=this.naturalBounds,null!==this.ec&&(pr(this,t,this.ec,!0,!0,f,o),this.ec instanceof Xt&&this.ec.type===mr?(t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.Ie(this.ec)):t.fillRect(o.x,o.y,o.width,o.height)),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),p&&(null!==h&&0!=(512&h.F)||null!==h&&(h.type===X.Auto||h.type===X.Spot)&&h.rb()!==this)&&null===this.shadowVisible&&Is(t),null!==this.mb&&(rt=b=0,tt=(g=this.naturalBounds).width,g=g.height,v=0,this instanceof At&&(b=(g=this.na.bounds).x,rt=g.y,tt=g.width,g=g.height,v=this.strokeWidth),pr(this,t,this.mb,!0,!1,f,o),this.mb instanceof Xt&&this.mb.type===mr?(t.beginPath(),t.rect(b-v/2,rt-v/2,tt+v,g+v),t.Ie(this.mb)):t.fillRect(b-v/2,rt-v/2,tt+v,g+v)),p&&(null!==this.mb||null!==this.ec||null!==h&&0!=(512&h.F)||null!==h&&(h.type===X.Auto||h.type===X.Spot)&&h.rb()!==this)?(zg(this,!0),null===this.shadowVisible&&Is(t)):zg(this,!1),this.ej(t,e),p&&0!=(512&this.F)&&el(t),this.Hf()&&p&&Is(t),y?(t.restore(),t.uc(this instanceof X)):n.Ut()||t.transform(n.m22*(e=1/(n.m11*n.m22-n.m12*n.m21)),-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy))}}1!==a&&(t.globalAlpha=u)}}}},D.ly=function(){return!1},D.ej=function(){},D.Hg=function(t){if(t instanceof X)t:{if(this!==t&&null!==t)for(var e=this.panel;null!==e;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},D.If=function(){if(!this.visible)return!1;var t=this.panel;return null===t||t.If()},D.Ig=function(){for(var t=this instanceof X?this:this.panel;null!==t&&t.isEnabled;)t=t.panel;return null===t},D.o=function(t){if(!us(this)){void 0===t&&(t=!1),tr(this,!0),Ou(this,!0);var e=this.panel;null===e||t||e.o()}},D.Ak=function(){us(this)||(tr(this,!0),Ou(this,!0))},D.Gl=function(){0==(2048&this.F)&&(Kc(this,!0),Bl(this,!0))},D.cw=function(){Bl(this,!0)},D.M=function(){var t=this.part;null!==t&&t.M()},D.sj=function(t){this.qg=t},D.lu=function(){},D.Fw=function(t){return this.la.assign(t),qa(this),!0},D.er=function(t,e){(this.la.x!==t||this.la.y!==e)&&(this.la.h(t,e),this.Gl())},D.bind=function(t){t.qd=this;var e=this.ij();null!==e&&Px(e)&&W("Cannot add a Binding to a template that has already been copied: "+t),null===this.fb&&(this.fb=new lt),this.fb.add(t)},D.ij=function(){for(var t=this instanceof X?this:this.panel;null!==t;){if(null!==t.ki)return t;t=t.panel}return null},D.Gw=function(t){Ll(this,t)},D.Rw=function(t){t.qd=this,null===this.Ng&&(this.Ng=new Et),this.Ng.add(t.propertyName,t)},L.Object.defineProperties(Z.prototype,{shadowVisible:{get:function(){return this.dm},set:function(t){var e=this.dm;e!==t&&(this.dm=t,this.M(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return null!==this.N?this.N.Un:null},set:function(t){vi(this);var e=this.N.Un;e!==t&&(this.N.Un=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.bm},set:function(t){var e=this.bm;e!==t&&(this.bm=t,this.o(),this.g("segmentOrientation",e,t),t===Un&&(this.angle=0))}},segmentIndex:{get:function(){return this.Lp},set:function(t){t=Math.round(t);var e=this.Lp;e!==t&&(this.Lp=t,this.o(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.$l},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.$l;e!==t&&(this.$l=t,this.o(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.am},set:function(t){var e=this.am;e.w(t)||(this.am=t=t.G(),this.o(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.De},set:function(t){var e=this.De;e!==t&&(this.De=t,this.o(),this.g("stretch",e,t))}},name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;e!==t&&(this.Qa=t,null!==this.part&&(this.part.Xj=null),this.g("name",e,t))}},opacity:{get:function(){return this.hb},set:function(t){var e=this.hb;e!==t&&((0>t||1<t)&&qt(t,"0 <= value <= 1",Z,"opacity"),this.hb=t,this.g("opacity",e,t),e=this.part,null!==(t=this.diagram)&&null!==e&&t.M(Oh(e,e.actualBounds)))}},visible:{get:function(){return 0!=(1&this.F)},set:function(t){var e=0!=(1&this.F);e!==t&&(this.F^=1,this.g("visible",e,t),null!==(e=this.panel)?e.o():this.Hf()&&this.Pb(t),this.M(),_M(this))}},pickable:{get:function(){return 0!=(2&this.F)},set:function(t){var e=0!=(2&this.F);e!==t&&(this.F^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return 0!=(4&this.F)},set:function(t){var e=0!=(4&this.F);e!==t&&(this.F^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return 0!=(8&this.F)},set:function(t){var e=0!=(8&this.F);e!==t&&(this.F^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return 0!=(16&this.F)},set:function(t){var e=0!=(16&this.F);e!==t&&(this.F^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return 0!=(32&this.F)},set:function(t){var e=0!=(32&this.F);e!==t&&(this.F^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return 0!=(64&this.F)},set:function(t){var e=0!=(64&this.F);e!==t&&(this.F^=64,this.o(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return 0!=(128&this.F)},set:function(t){var e=0!=(128&this.F);e!==t&&(this.F^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.ec},set:function(t){var e=this.ec;e!==t&&(null!==t&&Fu(t,"GraphObject.areaBackground"),t instanceof Xt&&t.freeze(),this.ec=t,this.M(),this.g("areaBackground",e,t))}},background:{get:function(){return this.mb},set:function(t){var e=this.mb;e!==t&&(null!==t&&Fu(t,"GraphObject.background"),t instanceof Xt&&t.freeze(),this.mb=t,this.M(),this.g("background",e,t))}},part:{get:function(){if(this.Hf())return this;if(null!==this.ak)return this.ak;var t;for(t=this.panel;t;){if(t instanceof wt)return this.ak=t;t=t.panel}return null}},svg:{get:function(){return this.cq},set:function(t){this.cq=t}},panel:{get:function(){return this.qg}},layer:{get:function(){var t=this.part;return null!==t?t.layer:null}},diagram:{get:function(){var t=this.part;return null!==t?t.diagram:null}},position:{get:function(){return this.la},set:function(t){var e=t.x,n=t.y,o=this.la,a=o.x,u=o.y;(a===e||isNaN(a)&&isNaN(e))&&(u===n||isNaN(u)&&isNaN(n))?this.lu():(t=t.copy(),this.Fw(t,o)&&this.g("position",o.copy(),t.copy()))}},actualBounds:{get:function(){return this.yb}},scale:{get:function(){return this.ya},set:function(t){var e=this.ya;e!==t&&(0>=t&&W("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.ya=t,this.o(),this.g("scale",e,t))}},angle:{get:function(){return this.Yb},set:function(t){var e=this.Yb;e!==t&&(0>(t%=360)&&(t+=360),e!==t&&(this.Yb=t,_M(this),this.o(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.Zc},set:function(t){var e=t.width,n=t.height,o=this.Zc,a=o.width,u=o.height;(a===e||isNaN(a)&&isNaN(e))&&(u===n||isNaN(u)&&isNaN(n))||(this.Zc=t=t.G(),this.o(),this instanceof At&&this.dc(),this.g("desiredSize",o,t),Xc(this)&&null!==(t=this.part)&&(ku(this,t,"width"),ku(this,t,"height")))}},width:{get:function(){return this.Zc.width},set:function(t){var e=this.Zc.width;e===t||isNaN(e)&&isNaN(t)||(e=this.Zc,this.Zc=t=new Nt(t,this.Zc.height).freeze(),this.o(),this instanceof At&&this.dc(),this.g("desiredSize",e,t),Xc(this)&&null!==(t=this.part)&&ku(this,t,"width"))}},height:{get:function(){return this.Zc.height},set:function(t){var e=this.Zc.height;e===t||isNaN(e)&&isNaN(t)||(e=this.Zc,this.Zc=t=new Nt(this.Zc.width,t).freeze(),this.o(),this instanceof At&&this.dc(),this.g("desiredSize",e,t),Xc(this)&&null!==(t=this.part)&&ku(this,t,"height"))}},minSize:{get:function(){return this.hg},set:function(t){var e=this.hg;e.w(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.hg=t,this.o(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.gg},set:function(t){var e=this.gg;e.w(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.gg=t,this.o(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.qc}},naturalBounds:{get:function(){return this.rc}},margin:{get:function(){return this.jh},set:function(t){"number"==typeof t&&(t=new te(t));var e=this.jh;e.w(t)||(this.jh=t=t.G(),this.o(),this.g("margin",e,t))}},transform:{get:function(){return 0!=(2048&this.F)&&Hg(this),this.qb}},Fd:{get:function(){return 0!=(4096&this.F)&&Hg(this),this.Yh}},alignment:{get:function(){return this.zb},set:function(t){var e=this.zb;e.w(t)||(t.nc()&&!t.Nb()&&W("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.zb=t=t.G(),qa(this),this.g("alignment",e,t))}},column:{get:function(){return this.Sg},set:function(t){t=Math.round(t);var e=this.Sg;e!==t&&(0>t&&qt(t,">= 0",Z,"column"),this.Sg=t,this.o(),this.g("column",e,t))}},columnSpan:{get:function(){return this.xn},set:function(t){t=Math.round(t);var e=this.xn;e!==t&&(1>t&&qt(t,">= 1",Z,"columnSpan"),this.xn=t,this.o(),this.g("columnSpan",e,t))}},row:{get:function(){return this.Ep},set:function(t){t=Math.round(t);var e=this.Ep;e!==t&&(0>t&&qt(t,">= 0",Z,"row"),this.Ep=t,this.o(),this.g("row",e,t))}},rowSpan:{get:function(){return this.Fp},set:function(t){t=Math.round(t);var e=this.Fp;e!==t&&(1>t&&qt(t,">= 1",Z,"rowSpan"),this.Fp=t,this.o(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.Yp},set:function(t){var e=this.Yp;e!==t&&(this.Yp=t,this.o(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.$k},set:function(t){var e=this.$k;e.w(t)||(this.$k=t=t.G(),this.o(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.rp},set:function(t){var e=this.rp;if(e!==t){var n=this.part;null===n||n instanceof ot||(W("Cannot set portID on a Link: "+t),n=null),null!==e&&null!==n&&Kd(n,this),this.rp=t,null!==t&&null!==n&&(n.Mh=!0,il(n,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return null!==this.O?this.O.Bh:gi},set:function(t){this.Mc();var e=this.O.Bh;e.w(t)||(t=t.G(),this.O.Bh=t,this.g("toSpot",e,t),bu(this))}},toEndSegmentLength:{get:function(){return null!==this.O?this.O.zh:10},set:function(t){this.Mc();var e=this.O.zh;e!==t&&(0>t&&qt(t,">= 0",Z,"toEndSegmentLength"),this.O.zh=t,this.g("toEndSegmentLength",e,t),bu(this))}},toShortLength:{get:function(){return null!==this.O?this.O.Ah:0},set:function(t){this.Mc();var e=this.O.Ah;e!==t&&(this.O.Ah=t,this.g("toShortLength",e,t),bu(this))}},toLinkable:{get:function(){return null!==this.O?this.O.hq:null},set:function(t){this.Mc();var e=this.O.hq;e!==t&&(this.O.hq=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return null!==this.O?this.O.iq:1/0},set:function(t){this.Mc();var e=this.O.iq;e!==t&&(0>t&&qt(t,">= 0",Z,"toMaxLinks"),this.O.iq=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return null!==this.O?this.O.bh:gi},set:function(t){this.Mc();var e=this.O.bh;e.w(t)||(t=t.G(),this.O.bh=t,this.g("fromSpot",e,t),bu(this))}},fromEndSegmentLength:{get:function(){return null!==this.O?this.O.$g:10},set:function(t){this.Mc();var e=this.O.$g;e!==t&&(0>t&&qt(t,">= 0",Z,"fromEndSegmentLength"),this.O.$g=t,this.g("fromEndSegmentLength",e,t),bu(this))}},fromShortLength:{get:function(){return null!==this.O?this.O.ah:0},set:function(t){this.Mc();var e=this.O.ah;e!==t&&(this.O.ah=t,this.g("fromShortLength",e,t),bu(this))}},fromLinkable:{get:function(){return null!==this.O?this.O.ao:null},set:function(t){this.Mc();var e=this.O.ao;e!==t&&(this.O.ao=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return null!==this.O?this.O.bo:1/0},set:function(t){this.Mc();var e=this.O.bo;e!==t&&(0>t&&qt(t,">= 0",Z,"fromMaxLinks"),this.O.bo=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.ni},set:function(t){var e=this.ni;e!==t&&(this.ni=t,this.g("cursor",e,t))}},click:{get:function(){return null!==this.N?this.N.Rf:null},set:function(t){vi(this);var e=this.N.Rf;e!==t&&(this.N.Rf=t,this.g("click",e,t))}},doubleClick:{get:function(){return null!==this.N?this.N.Wf:null},set:function(t){vi(this);var e=this.N.Wf;e!==t&&(this.N.Wf=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return null!==this.N?this.N.Sf:null},set:function(t){vi(this);var e=this.N.Sf;e!==t&&(this.N.Sf=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return null!==this.N?this.N.jg:null},set:function(t){vi(this);var e=this.N.jg;e!==t&&(this.N.jg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return null!==this.N?this.N.mg:null},set:function(t){vi(this);var e=this.N.mg;e!==t&&(this.N.mg=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return null!==this.N?this.N.ng:null},set:function(t){vi(this);var e=this.N.ng;e!==t&&(this.N.ng=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return null!==this.N?this.N.lg:null},set:function(t){vi(this);var e=this.N.lg;e!==t&&(this.N.lg=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return null!==this.N?this.N.kg:null},set:function(t){vi(this);var e=this.N.kg;e!==t&&(this.N.kg=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return null!==this.N?this.N.Vo:null},set:function(t){vi(this);var e=this.N.Vo;e!==t&&(this.N.Vo=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return null!==this.N?this.N.Wo:null},set:function(t){vi(this);var e=this.N.Wo;e!==t&&(this.N.Wo=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return null!==this.N?this.N.ig:null},set:function(t){vi(this);var e=this.N.ig;e!==t&&(this.N.ig=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return null!==this.N?this.N.en:null},set:function(t){vi(this);var e=this.N.en;e!==t&&(this.N.en=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return null!==this.N?this.N.fn:null},set:function(t){vi(this);var e=this.N.fn;e!==t&&(this.N.fn=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return null!==this.N?this.N.gn:null},set:function(t){vi(this);var e=this.N.gn;e!==t&&(this.N.gn=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return null!==this.N?this.N.dn:null},set:function(t){vi(this);var e=this.N.dn;e!==t&&(this.N.dn=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return null!==this.N?this.N.xg:null},set:function(t){vi(this);var e=this.N.xg;e!==t&&(this.N.xg=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return null!==this.N?this.N.Tf:null},set:function(t){vi(this);var e=this.N.Tf;e!==t&&(this.N.Tf=t,this.g("contextMenu",e,t))}}}),Z.prototype.trigger=Z.prototype.Rw,Z.prototype.setProperties=Z.prototype.Gw,Z.prototype.findTemplateBinder=Z.prototype.ij,Z.prototype.bind=Z.prototype.bind,Z.prototype.isEnabledObject=Z.prototype.Ig,Z.prototype.isVisibleObject=Z.prototype.If,Z.prototype.isContainedBy=Z.prototype.Hg,Z.prototype.getNearestIntersectionPoint=Z.prototype.Ot,Z.prototype.getLocalPoint=Z.prototype.Nt,Z.prototype.getDocumentScale=Z.prototype.Cf,Z.prototype.getDocumentAngle=Z.prototype.lj,Z.prototype.getDocumentBounds=Z.prototype.mj,Z.prototype.getDocumentPoint=Z.prototype.da,Z.prototype.intersectsRect=Z.prototype.Oc,Z.prototype.containedInRect=Z.prototype.Ih,Z.prototype.containsRect=Z.prototype.Ge,Z.prototype.containsPoint=Z.prototype.$,Z.prototype.raiseChanged=Z.prototype.g,Z.prototype.raiseChangedEvent=Z.prototype.bb,Z.prototype.addCopyProperty=Z.prototype.Ux;var Zc=null;function tl(){this.Un=this.Tf=this.xg=this.dn=this.gn=this.fn=this.en=this.ig=this.Wo=this.Vo=this.kg=this.lg=this.ng=this.mg=this.jg=this.Sf=this.Wf=this.Rf=null}function Vl(){this.Ma=[1,0,0,1,0,0]}function Jc(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.by=[],this.pattern=null}function ua(t,e){this.ownerDocument=t=void 0===e?U.document:e,this.LA="http://www.w3.org/2000/svg",void 0!==t&&(this.Ga=this.xb("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.Ga.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Ga.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.Aq=null,this.context=new Ch(this)}function Ch(t){this.Uk=t,this.svg=t.Ga,this.stack=[],this.Ac=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.lf=this.Up=this.Tp=0,this.Nq=null,this.path=[],this.Uu=!1,this.uh=null,this.vh=0,this.ce=new Vl,gr(this,1,0,0,1,0,0);var e=Ha++,n=this.xb("clipPath",{id:"mainClip"+e});n.appendChild(this.xb("rect",{x:0,y:0,width:t.width,height:t.height})),this.cv=n,this.Uk.Ga.appendChild(n),this.Ac[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.NA={}}function Td(t,e,n,o,a){1!==t.globalAlpha&&(n.opacity=t.globalAlpha),"fill"===e?(t.fillStyle instanceof Jc?n.fill=Bo(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",n["fill-opacity"]=t[4]):n.fill=t.fillStyle,n.stroke="none"):"stroke"===e&&(n.fill="none",t.strokeStyle instanceof Jc?n.stroke=Bo(t,t.strokeStyle):/^rgba\(/.test(t.strokeStyle)?(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",n["stroke-opacity"]=e[4]):n.stroke=t.strokeStyle,n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),o="matrix("+(o=o.Ma)[0]+", "+o[1]+", "+o[2]+", "+o[3]+", "+o[4]+", "+o[5]+")",void 0!==a&&(o+=a),n.transform=o}function Bo(t,e){var n="GRAD"+Ha++;if("linear"===e.type)var o=t.xb("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else{if("radial"!==e.type)throw Error("invalid gradient");o=t.xb("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n})}var a=e.by;e=a.length;for(var u=[],h=0;h<e;h++){var f=a[h],p=f.color;f={offset:f.offset,"stop-color":p},/^rgba\(/.test(p)&&(p=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(p),f["stop-color"]="rgb("+p[1]+","+p[2]+","+p[3]+")",f["stop-opacity"]=p[4]),u.push(f)}for(u.sort(function(g,y){return g.offset>y.offset?1:-1}),a=0;a<e;a++)o.appendChild(t.xb("stop",u[a]));return t.svg.appendChild(o),"url(#"+n+")"}function gr(t,e,n,o,a,u,h){var f=new Vl;f.Ma=[e,n,o,a,u,h],Td(t,"g",e={},f),f=t.addElement("g",e),t.Ac.push(f)}function Is(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function el(t){t.shadowOffsetX=t.Tp,t.shadowOffsetY=t.Up,t.shadowBlur=t.lf}function ro(t,e){this.ownerDocument=e=void 0===e?U.document:e,this.Aq=null,(e=e.createElement("canvas")).tabIndex=0,this.Ga=e,this.Ga.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new Lu(e),e.B=t}function Lu(t){t.getContext&&t.getContext("2d")||W("Browser does not support HTML Canvas Element"),this.Y=t.getContext("2d"),this.wu=this.yu=this.xu="",this.wn=!1,this.lf=this.Up=this.Tp=0}Z.className="GraphObject",Zc=new Et,la("Button",function(){function t(n,o){return null!==n.diagram.Vb(n.documentPoint,function(a){for(;null!==a.panel&&!a.isActionable;)a=a.panel;return a},function(a){return a===o})}var e=er(X,X.Auto,{isActionable:!0,enabledChanged:function(n,o){if(n instanceof X){var a=n.ab("ButtonBorder");null!==a&&(a.fill=o?n._buttonFillNormal:n._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},er(At,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new at(0,0,2.76142374915397,2.761423749153969),spot2:new at(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(n,o){if(o.Ig()&&o instanceof X&&(n=o.ab("ButtonBorder"))instanceof At){var a=o._buttonFillOver;o._buttonFillNormal=n.fill,n.fill=a,a=o._buttonStrokeOver,o._buttonStrokeNormal=n.stroke,n.stroke=a}},e.mouseLeave=function(n,o){o.Ig()&&o instanceof X&&(n=o.ab("ButtonBorder"))instanceof At&&(n.fill=o._buttonFillNormal,n.stroke=o._buttonStrokeNormal)},e.actionDown=function(n,o){if(o.Ig()&&o instanceof X&&null!==o._buttonFillPressed&&0===n.button){var a=o.ab("ButtonBorder");if(a instanceof At){var u=(n=n.diagram).skipsUndoManager;n.skipsUndoManager=!0;var h=o._buttonFillPressed;o._buttonFillOver=a.fill,a.fill=h,h=o._buttonStrokePressed,o._buttonStrokeOver=a.stroke,a.stroke=h,n.skipsUndoManager=u}}},e.actionUp=function(n,o){if(o.Ig()&&o instanceof X&&null!==o._buttonFillPressed&&0===n.button){var a=o.ab("ButtonBorder");if(a instanceof At){var u=n.diagram,h=u.skipsUndoManager;u.skipsUndoManager=!0,t(n,o)?(a.fill=o._buttonFillOver,a.stroke=o._buttonStrokeOver):(a.fill=o._buttonFillNormal,a.stroke=o._buttonStrokeNormal),u.skipsUndoManager=h}}},e.actionCancel=function(n,o){if(o.Ig()&&o instanceof X&&null!==o._buttonFillPressed){var a=o.ab("ButtonBorder");if(a instanceof At){var u=n.diagram,h=u.skipsUndoManager;u.skipsUndoManager=!0,t(n,o)?(a.fill=o._buttonFillOver,a.stroke=o._buttonStrokeOver):(a.fill=o._buttonFillNormal,a.stroke=o._buttonStrokeNormal),u.skipsUndoManager=h}}},e.actionMove=function(n,o){if(o.Ig()&&o instanceof X&&null!==o._buttonFillPressed){var a=n.diagram;if(0===a.firstInput.button&&(a.currentTool.standardMouseOver(),t(n,o)&&(n=o.ab("ButtonBorder"))instanceof At)){var u=a.skipsUndoManager;a.skipsUndoManager=!0;var h=o._buttonFillPressed;n.fill!==h&&(n.fill=h),n.stroke!==(h=o._buttonStrokePressed)&&(n.stroke=h),a.skipsUndoManager=u}}},e}),la("TreeExpanderButton",function(){var t=er("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},er(At,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Pc},new sn("figure","isTreeExpanded",function(e,n){return n=n.panel,e?n._treeExpandedFigure:n._treeCollapsedFigure}).Tq()),{visible:!1},new sn("visible","isTreeLeaf",function(e){return!e}).Tq());return t.click=function(e,n){if((n=n.part)instanceof Gt&&(n=n.adornedPart),n instanceof ot){var o=n.diagram;if(null!==o){if(o=o.commandHandler,n.isTreeExpanded){if(!o.canCollapseTree(n))return}else if(!o.canExpandTree(n))return;e.handled=!0,n.isTreeExpanded?o.collapseTree(n):o.expandTree(n)}}},t}),la("SubGraphExpanderButton",function(){var t=er("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},er(At,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Pc},new sn("figure","isSubGraphExpanded",function(e,n){return n=n.panel,e?n._subGraphExpandedFigure:n._subGraphCollapsedFigure}).Tq()));return t.click=function(e,n){if((n=n.part)instanceof Gt&&(n=n.adornedPart),n instanceof Pt){var o=n.diagram;if(null!==o){if(o=o.commandHandler,n.isSubGraphExpanded){if(!o.canCollapseSubGraph(n))return}else if(!o.canExpandSubGraph(n))return;e.handled=!0,n.isSubGraphExpanded?o.collapseSubGraph(n):o.expandSubGraph(n)}}},t}),la("ToolTip",function(){return er(Gt,X.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new A(0,3),shadowBlur:5},er(At,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new at(0,0,4,6),spot2:new at(1,1,-4,-4)}))}),la("ContextMenu",function(){return er(Gt,X.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new A(0,3),shadowBlur:5},new sn("background","",function(t){return null!==t.adornedPart&&null!==t.placeholder?null:"#F5F5F5"}))}),la("ContextMenuButton",function(){var t=er("Button");t.stretch=ei;var e=t.ab("ButtonBorder");return e instanceof At&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new at(0,0,2,3),e.spot2=new at(1,1,-2,-2)),t}),la("PanelExpanderButton",function(t){var e=Ed(t,"COLLAPSIBLE"),n=er("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},er(At,{name:"ButtonIcon",strokeWidth:2},new sn("geometryString","visible",function(o){return o?n._buttonExpandedFigure:n._buttonCollapsedFigure}).Tq(e)));return(t=n.ab("ButtonBorder"))instanceof At&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),n.click=function(o,a){var u=a.diagram;if(null!==u&&!u.isReadOnly){var h=a.ij();null===h&&(h=a.part),null!==h&&null!==(a=h.ab(e))&&(o.handled=!0,u.xa("Collapse/Expand Panel"),a.visible=!a.visible,u.Wa("Collapse/Expand Panel"))}},n}),la("CheckBoxButton",function(t){var e=Ed(t);return(t=er("Button",{desiredSize:new Nt(14,14)},er(At,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:Je,geometryStretch:xo,visible:!1},""!==e?new sn("visible",e).Jy():[]))).click=function(n,o){if(o instanceof X){var a=n.diagram;if(!(null===a||a.isReadOnly||""!==e&&a.model.isReadOnly)){n.handled=!0;var u=o.ab("ButtonIcon");a.xa("checkbox"),u.visible=!u.visible,"function"==typeof o._doClick&&o._doClick(n,o),a.Wa("checkbox")}}},t}),la("CheckBox",function(t){t=er("CheckBoxButton",t=Ed(t),{name:"Button",isActionable:!1,margin:new te(0,1,0,0)});var e=er(X,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),Z.None=un=new it(Z,"None",0),Z.Default=Yr=new it(Z,"Default",0),Z.Vertical=li=new it(Z,"Vertical",4),Z.Horizontal=ei=new it(Z,"Horizontal",5),Z.Fill=Je=new it(Z,"Fill",3),Z.Uniform=xo=new it(Z,"Uniform",1),Z.UniformToFill=Dd=new it(Z,"UniformToFill",2),Z.FlipVertical=jl=new it(Z,"FlipVertical",1),Z.FlipHorizontal=Ro=new it(Z,"FlipHorizontal",2),Z.FlipBoth=Yc=new it(Z,"FlipBoth",3),Z.make=er,Z.getBuilders=function(){var e,t=new Et;for(e in Zc)if(e!==e.toLowerCase()){var n=Zc.H(e);"function"==typeof n&&t.add(e,n)}return t.freeze(),t},Z.defineBuilder=la,Z.takeBuilderArgument=Ed,tl.prototype.copy=function(){var t=new tl;return t.Rf=this.Rf,t.Wf=this.Wf,t.Sf=this.Sf,t.jg=this.jg,t.mg=this.mg,t.ng=this.ng,t.lg=this.lg,t.kg=this.kg,t.Vo=this.Vo,t.Wo=this.Wo,t.ig=this.ig,t.en=this.en,t.fn=this.fn,t.gn=this.gn,t.dn=this.dn,t.xg=this.xg,t.Tf=this.Tf,t.Un=this.Un,t},tl.className="GraphObjectEventHandlers",Vl.prototype.copy=function(){var t=new Vl;return t.Ma[0]=this.Ma[0],t.Ma[1]=this.Ma[1],t.Ma[2]=this.Ma[2],t.Ma[3]=this.Ma[3],t.Ma[4]=this.Ma[4],t.Ma[5]=this.Ma[5],t},Vl.prototype.translate=function(t,e){this.Ma[4]+=this.Ma[0]*t+this.Ma[2]*e,this.Ma[5]+=this.Ma[1]*t+this.Ma[3]*e},Vl.prototype.scale=function(t,e){this.Ma[0]*=t,this.Ma[1]*=t,this.Ma[2]*=e,this.Ma[3]*=e},Vl.className="STransform",Jc.prototype.addColorStop=function(t,e){this.by.push({offset:t,color:e})},Jc.className="SGradient",ua.prototype.resize=function(t,e,n,o){return(this.width!==t||this.height!==e)&&(this.style.width=n+"px",this.style.height=o+"px",this.Ga.setAttributeNS(null,"width",n+"px"),this.Ga.setAttributeNS(null,"height",o+"px"),this.Ga.setAttributeNS(null,"viewBox","0 0 "+n+" "+o),this.context.cv.firstElementChild.setAttributeNS(null,"width",n+"px"),this.context.cv.firstElementChild.setAttributeNS(null,"height",o+"px"),!0)},ua.prototype.xb=function(t,e,n){if(t=this.ownerDocument.createElementNS(this.LA,t),$t(e))for(var o in e)t.setAttributeNS("href"===o?"http://www.w3.org/1999/xlink":"",o,e[o]);return void 0!==n&&(t.textContent=n),t},ua.prototype.getBoundingClientRect=function(){return this.Ga.getBoundingClientRect()},ua.prototype.focus=function(){this.Ga.focus()},ua.prototype.ky=function(){this.ownerDocument=null},L.Object.defineProperties(ua.prototype,{width:{get:function(){return this.Ga.width.baseVal.value},set:function(t){this.Ga.width=t}},height:{get:function(){return this.Ga.height.baseVal.value},set:function(t){this.Ga.height=t}},style:{get:function(){return this.Ga.style}}}),ua.className="SVGSurface",(D=Ch.prototype).reset=function(){this.stack=[],this.Ac=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.lf=this.Up=this.Tp=0,this.Nq=null,this.path=[],this.ce=new Vl,gr(this,1,0,0,1,0,0);var t=Ha++,e=this.xb("clipPath",{id:"mainClip"+t});e.appendChild(this.xb("rect",{x:0,y:0,width:this.Uk.width,height:this.Uk.height})),this.cv=e,this.Uk.Ga.appendChild(e),this.Ac[0].setAttributeNS(null,"clip-path","url(#mainClip"+t+")")},D.arc=function(t,e,n,o,a,u,h,f){var p=2*Math.PI,g=p-1e-6,y=n*Math.cos(o),v=n*Math.sin(o),x=t+y,S=e+v,M=u?0:1;o=u?o-a:a-o,(1e-6<Math.abs(h-x)||1e-6<Math.abs(f-S))&&this.path.push(["L",x,+S]),0>o&&(o=o%p+p),o>g?(this.path.push(["A",n,n,0,1,M,t-y,e-v]),this.path.push(["A",n,n,0,1,M,x,S])):1e-6<o&&this.path.push(["A",n,n,0,+(o>=Math.PI),M,t+n*Math.cos(a),e+n*Math.sin(a)])},D.beginPath=function(){this.path=[]},D.bezierCurveTo=function(t,e,n,o,a,u){this.path.push(["C",t,e,n,o,a,u])},D.clearRect=function(){},D.clip=function(){this.addPath("clipPath",this.path,this.ce),this.addPath("clipPath",this.path,new Vl)},D.closePath=function(){this.path.push(["z"])},D.createLinearGradient=function(t,e,n,o){var a=new Jc("linear");return a.x1=t,a.y1=e,a.x2=n,a.y2=o,a},D.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var n=this.NA;if(n[e])return"url(#"+n[e]+")";var o="PATTERN"+Ha++,a={x:0,y:0,width:t.width,height:t.height,href:e};return(t=this.xb("pattern",{width:t.width,height:t.height,id:o,patternUnits:"userSpaceOnUse"})).appendChild(this.xb(Hc,a)),this.svg.appendChild(t),n[e]=o,"url(#"+o+")"},D.createRadialGradient=function(t,e,n,o,a,u){var h=new Jc("radial");return h.x1=t,h.y1=e,h.r1=n,h.x2=o,h.y2=a,h.r2=u,h},D.drawImage=function(t,e,n,o,a,u,h,f,p){var g="";t instanceof HTMLCanvasElement&&(g=t.toDataURL()),t instanceof HTMLImageElement&&(g=t.getAttribute("src"));var y=t instanceof HTMLImageElement?t.naturalWidth:t.width,v=t instanceof HTMLImageElement?t.naturalHeight:t.height;void 0===o&&(u=e,h=n,f=o=y,p=a=v),o=o||0,a=a||0,u=u||0,h=h||0,p=p||0,t={x:0,y:0,width:y||o,height:v||a,href:g},R.aa(o,f=f||0)&&R.aa(a,p)?-1===g.toLowerCase().indexOf(".svg")&&-1===g.toLowerCase().indexOf("data:image/svg")&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",g="",p/=a,(0!==u||0!==h)&&(g+=" translate("+u+", "+h+")"),(1!=(f/=o)||1!==p)&&(g+=" scale("+f+", "+p+")"),(0!==e||0!==n)&&(g+=" translate("+-e+", "+-n+")"),(0!==e||0!==n||o!==y||a!==v)&&(u="CLIP"+Ha++,(h=this.xb("clipPath",{id:u})).appendChild(this.xb("rect",{x:e,y:n,width:o,height:a})),this.svg.appendChild(h),t["clip-path"]="url(#"+u+")"),Td(this,Hc,t,this.ce,g),this.addElement(Hc,t)},D.fill=function(){this.addPath("fill",this.path,this.ce)},D.Ie=function(){this.clipInsteadOfFill?this.clip():this.fill()},D.fillRect=function(t,e,n,o){Td(this,"fill",t={x:(t=[t,e,n,o])[0],y:t[1],width:t[2],height:t[3]},this.ce),this.addElement("rect",t)},D.fillText=function(t,e,n){t=[t,e,n],"left"===(e=this.textAlign)?e="start":"right"===e?e="end":"center"===e&&(e="middle"),Td(this,"fill",e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},this.ce),this.addElement("text",e,t[0])},D.lineTo=function(t,e){this.path.push(["L",t,e])},D.moveTo=function(t,e){this.path.push(["M",t,e])},D.quadraticCurveTo=function(t,e,n,o){this.path.push(["Q",t,e,n,o])},D.rect=function(t,e,n,o){this.path.push(["M",t,e],["L",t+n,e],["L",t+n,e+o],["L",t,e+o],["z"])},D.restore=function(){this.ce=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},D.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.ce.copy())},D.setTransform=function(t,e,n,o,a,u){1===t&&0===e&&0===n&&1===o&&0===a&&0===u||gr(this,t,e,n,o,a,u)},D.scale=function(t,e){this.ce.scale(t,e)},D.translate=function(t,e){this.ce.translate(t,e)},D.transform=function(){},D.stroke=function(){this.addPath("stroke",this.path,this.ce)},D.vj=function(){this.clipInsteadOfFill||this.stroke()},D.xb=function(t,e,n){return this.Uk.xb(t,e,n)},D.addElement=function(t,e,n){return t=this.xb(t,e,n),0<this.Ac.length?this.Ac[this.Ac.length-1].appendChild(t):this.svg.appendChild(t),this.Nq=t},D.addPath=function(t,e,n){for(var o=[],a=0;a<e.length;a++){var u=Pl(e[a]),h=[u.shift()];if("A"===h[0])h.push(u.shift()+","+u.shift(),u.shift(),u.shift()+","+u.shift(),u.shift()+","+u.shift());else for(;u.length;)h.push(u.shift()+","+u.shift());o.push(h.join(" "))}e={d:o.join(" ")},"stroke"===t&&this.Uu&&(e["stroke-dasharray"]=this.uh.toString(),e["stroke-dashoffset"]=this.vh),Td(this,t,e,n),"clipPath"===t?(t="CLIP"+Ha++,(n=this.xb("clipPath",{id:t})).appendChild(this.xb("path",e)),this.svg.appendChild(n),0<this.Ac.length&&this.Ac[this.Ac.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)},D.fr=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var t="SHADOW"+Ha++,e=this.addElement("filter",{id:t,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),n=this.xb("feGaussianBlur",{in:"SourceAlpha",result:"blur",zB:this.shadowBlur/2}),o=this.xb("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),a=this.xb("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"}),u=this.xb("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),h=this.xb("feMerge",{});h.appendChild(this.xb("feMergeNode",{in:"offsetBlur"})),h.appendChild(this.xb("feMergeNode",{in:"SourceGraphic"})),e.appendChild(n),e.appendChild(o),e.appendChild(a),e.appendChild(u),e.appendChild(h),0<this.Ac.length&&this.Ac[this.Ac.length-1].setAttributeNS(null,"filter","url(#"+t+")")}},D.Jw=function(t,e,n){this.Tp=t,this.Up=e,this.lf=n},D.Gt=function(t,e){this.Uu=!0,this.uh=t,this.vh=e},D.Et=function(){this.Uu=!1},D.uc=function(){},D.Ty=function(){},Ch.prototype.rotate=function(){},Ch.prototype.getImageData=function(){return null},Ch.prototype.measureText=function(){return null},Ch.className="SVGContext",V.prototype.makeSvg=V.prototype.$t=function(t){var e=new ua(this,U.document);void 0===t&&(t=new Ki);var n=this;return MM(this,function(o,a){return o=null!==(o=SM(n,o,"SVG",e))?o.svg:null,"function"==typeof a?(a(o),null):o},t)},V.prototype.makeSVG=V.prototype.hw=function(t){return this.$t(t)},Z.prototype.ly=function(t,e){if(!(t instanceof Ch))return!1;if(!this.visible)return!0;var n=null,o=t.Nq;if(this instanceof X&&(this.type===X.TableRow||this.type===X.TableColumn))return Av(this,t,e),!0;var a=this.yb;if(0===a.width||0===a.height||isNaN(a.x)||isNaN(a.y))return!0;var u=this.transform,h=this.panel;0!=(4096&this.F)&&Hg(this);var f=0!=(256&this.F),p=!1;if(this instanceof le&&(t.font=this.font),f){if(p=h.he()?h.naturalBounds:h.actualBounds,null!==this.Ya){var g=this.Ya,y=g.x,v=g.y,x=g.width;g=g.height}else y=Math.max(a.x,p.x),v=Math.max(a.y,p.y),x=Math.min(a.right,p.right)-y,g=Math.min(a.bottom,p.bottom)-v;if(y>a.width+a.x||a.x>p.width+p.x||v>a.height+a.y||a.y>p.height+p.y)return!0;p=!0,gr(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(y,v,x,g),t.clip()}if(this.Hf()&&!this.isVisible())return!0;if(t.ce.Ma=[1,0,0,1,0,0],(this instanceof le&&1<this.lineCount||this instanceof At&&1<this.geometry.figures.length)&&gr(t,1,0,0,1,0,0),y=!1,this.Hf()&&this.isShadowed&&e.Je("drawShadows")&&(t.Jw((v=this.shadowOffset).x*e.scale*e.Tb,v.y*e.scale*e.Tb,this.shadowBlur),el(t),t.shadowColor=this.shadowColor),v=!1,this.part&&e.Je("drawShadows")&&(v=this.part.isShadowed),!0===this.shadowVisible?(el(t),!1===y&&v&&(gr(t,1,0,0,1,0,0),t.fr(),y=!0)):!1===this.shadowVisible&&Is(t),x=this.naturalBounds,null!==this.areaBackground&&(pr(this,t,this.areaBackground,!0,!0,x,a),!1===y&&v&&(gr(t,1,0,0,1,0,0),t.fr(),y=!0),this.areaBackground instanceof Xt&&this.areaBackground.type===mr?(t.beginPath(),t.rect(a.x,a.y,a.width,a.height),t.Ie(this.areaBackground)):t.fillRect(a.x,a.y,a.width,a.height)),this instanceof X?gr(t,u.m11,u.m12,u.m21,u.m22,u.dx,u.dy):t.ce.Ma=[u.m11,u.m12,u.m21,u.m22,u.dx,u.dy],null!==this.background){!1===y&&v&&(gr(t,1,0,0,1,0,0),t.fr(),y=!0);var S=this.naturalBounds;g=u=0;var M=S.width;S=S.height;var T=0;this instanceof At&&(u=(S=this.geometry.bounds).x,g=S.y,M=S.width,S=S.height,T=this.strokeWidth),pr(this,t,this.background,!0,!1,x,a),this.background instanceof Xt&&this.background.type===mr?(t.beginPath(),t.rect(u-T/2,g-T/2,M+T,S+T),t.Ie(this.background)):t.fillRect(u-T/2,g-T/2,M+T,S+T)}return v&&(null!==this.background||null!==this.areaBackground||null!==h&&0!=(512&h.F)||null!==h&&(h.type===X.Auto||h.type===X.Spot)&&h.rb()!==this)?(zg(this,!0),null===this.shadowVisible&&Is(t)):zg(this,!1),this.ej(t,e),v&&0!=(512&this.F)&&el(t),this.Hf()&&v&&Is(t),f&&(t.restore(),p&&t.Ac.pop()),this instanceof X&&(n=t.Ac.pop()),!0===y&&t.Ac.pop(),(this instanceof le&&1<this.lineCount||this instanceof At&&1<this.geometry.figures.length)&&(n=t.Ac.pop()),null!==t.Uk.Aq&&(null===n&&(o===t.Nq?(gr(t,1,0,0,1,0,0),n=t.Ac.pop()):n=t.Nq),t.Uk.Aq(this,n)),this.svg=n,!0},ro.prototype.resize=function(t,e,n,o){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=n+"px",this.style.height=o+"px",!0)},ro.prototype.toDataURL=function(t,e){return this.Ga.toDataURL(t,e)},ro.prototype.getBoundingClientRect=function(){return this.Ga.getBoundingClientRect()},ro.prototype.focus=function(){this.Ga.focus()},ro.prototype.ky=function(){this.ownerDocument=this.Ga.B=null},L.Object.defineProperties(ro.prototype,{width:{get:function(){return this.Ga.width},set:function(t){this.Ga.width=t}},height:{get:function(){return this.Ga.height},set:function(t){this.Ga.height=t}},style:{get:function(){return this.Ga.style}}}),ro.className="CanvasSurface",(D=Lu.prototype).Ty=function(t){this.Y.imageSmoothingEnabled=t},D.arc=function(t,e,n,o,a,u){this.Y.arc(t,e,n,o,a,u)},D.beginPath=function(){this.Y.beginPath()},D.bezierCurveTo=function(t,e,n,o,a,u){this.Y.bezierCurveTo(t,e,n,o,a,u)},D.clearRect=function(t,e,n,o){this.Y.clearRect(t,e,n,o)},D.clip=function(){this.Y.clip()},D.closePath=function(){this.Y.closePath()},D.createLinearGradient=function(t,e,n,o){return this.Y.createLinearGradient(t,e,n,o)},D.createPattern=function(t,e){return this.Y.createPattern(t,e)},D.createRadialGradient=function(t,e,n,o,a,u){return this.Y.createRadialGradient(t,e,n,o,a,u)},D.drawImage=function(t,e,n,o,a,u,h,f,p){void 0===o?this.Y.drawImage(t,e,n):this.Y.drawImage(t,e,n,o,a,u,h,f,p)},D.fill=function(){this.Y.fill()},D.fillRect=function(t,e,n,o){this.Y.fillRect(t,e,n,o)},D.fillText=function(t,e,n){this.Y.fillText(t,e,n)},D.getImageData=function(t,e,n,o){return this.Y.getImageData(t,e,n,o)},D.lineTo=function(t,e){this.Y.lineTo(t,e)},D.measureText=function(t){return this.Y.measureText(t)},D.moveTo=function(t,e){this.Y.moveTo(t,e)},D.quadraticCurveTo=function(t,e,n,o){this.Y.quadraticCurveTo(t,e,n,o)},D.rect=function(t,e,n,o){this.Y.rect(t,e,n,o)},D.restore=function(){this.Y.restore()},Lu.prototype.rotate=function(t){this.Y.rotate(t)},(D=Lu.prototype).save=function(){this.Y.save()},D.setTransform=function(t,e,n,o,a,u){this.Y.setTransform(t,e,n,o,a,u)},D.scale=function(t,e){this.Y.scale(t,e)},D.stroke=function(){this.Y.stroke()},D.transform=function(t,e,n,o,a,u){1===t&&0===e&&0===n&&1===o&&0===a&&0===u||this.Y.transform(t,e,n,o,a,u)},D.translate=function(t,e){this.Y.translate(t,e)},D.Ie=function(t){if(t instanceof Xt&&t.type===mr){var e=t.gl;(t=t.zu)>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.wn?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.wn?this.clip():this.fill()},D.vj=function(){this.wn||this.stroke()},D.Jw=function(t,e,n){this.Tp=t,this.Up=e,this.lf=n},D.Gt=function(t,e){var n=this.Y;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)},D.Et=function(){var t=this.Y;void 0!==t.setLineDash&&(t.setLineDash(NM),t.lineDashOffset=0)},D.uc=function(t){t&&(this.xu=""),this.wu=this.yu=""},L.Object.defineProperties(Lu.prototype,{fillStyle:{get:function(){return this.Y.fillStyle},set:function(t){this.wu!==t&&(this.wu=this.Y.fillStyle=t)}},font:{get:function(){return this.Y.font},set:function(t){this.xu!==t&&(this.xu=this.Y.font=t)}},globalAlpha:{get:function(){return this.Y.globalAlpha},set:function(t){this.Y.globalAlpha=t}},lineCap:{get:function(){return this.Y.lineCap},set:function(t){this.Y.lineCap=t}},lineDashOffset:{get:function(){return this.Y.lineDashOffset},set:function(t){this.Y.lineDashOffset=t}},lineJoin:{get:function(){return this.Y.lineJoin},set:function(t){this.Y.lineJoin=t}},lineWidth:{get:function(){return this.Y.lineWidth},set:function(t){this.Y.lineWidth=t}},miterLimit:{get:function(){return this.Y.miterLimit},set:function(t){this.Y.miterLimit=t}},shadowBlur:{get:function(){return this.Y.shadowBlur},set:function(t){this.Y.shadowBlur=t}},shadowColor:{get:function(){return this.Y.shadowColor},set:function(t){this.Y.shadowColor=t}},shadowOffsetX:{get:function(){return this.Y.shadowOffsetX},set:function(t){this.Y.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Y.shadowOffsetY},set:function(t){this.Y.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Y.strokeStyle},set:function(t){this.yu!==t&&(this.yu=this.Y.strokeStyle=t)}},textAlign:{get:function(){return this.Y.textAlign},set:function(t){this.Y.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Y.imageSmoothingEnabled},set:function(t){this.Y.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.wn},set:function(t){this.wn=t}}});var NM=Object.freeze([]);function _d(){this.T=this.v=this.I=this.l=0}function Xt(t){Dh||(Wg(),Dh=!0),wn(this),this.s=!1,void 0===t?(this.pa=nl,this.fl="black"):"string"==typeof t?(this.pa=nl,this.fl=t):(this.pa=t,this.fl="black"),(t=this.pa)===fa?(this.Dd=es,this.sl=Il):this.sl=this.Dd=t===mr?ie:gi,this.jt=0,this.Wr=NaN,this.ke=this.Ls=this.je=null,this.zu=this.gl=0}function Dx(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?Eh:n,ha(t),Nd(e,n)}function Ex(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?Eh:n,ha(t),Nd(-e,n)}function Iv(t,e,n){ha(t),t=oe.l;var o=oe.I,a=oe.v,u=oe.T;return ha(e),void 0===n&&(n=.5),"rgba("+Math.round((oe.l-t)*n+t)+", "+Math.round((oe.I-o)*n+o)+", "+Math.round((oe.v-a)*n+a)+", "+Math.round((oe.T-u)*n+u)+")"}function Qc(t){return!!t&&(t instanceof Xt?t.Gy():(ha(t),128>(299*oe.l+587*oe.I+114*oe.v)/1e3))}function Nd(t,e){switch(e){case Eh:e=100*Yg(oe.l);var n=100*Yg(oe.I),o=100*Yg(oe.v);return ji.l=.4124564*e+.3575761*n+.1804375*o,ji.I=.2126729*e+.7151522*n+.072175*o,ji.v=.0193339*e+.119192*n+.9503041*o,ji.T=oe.T,e=Sh(ji.l/Pd[0]),n=Sh(ji.I/Pd[1]),o=Sh(ji.v/Pd[2]),ca.l=116*n-16,ca.I=500*(e-n),ca.v=200*(n-o),ca.T=ji.T,ca.l=Math.min(100,Math.max(0,ca.l+100*t)),e=(t=(ca.l+16)/116)-ca.v/200,ji.l=Pd[0]*Ov(ca.I/500+t),ji.I=Pd[1]*(ca.l>bv*Tx?Math.pow(t,3):ca.l/bv),ji.v=Pd[2]*Ov(e),ji.T=ca.T,t=-.969266*ji.l+1.8760108*ji.I+.041556*ji.v,e=.0556434*ji.l+-.2040259*ji.I+1.0572252*ji.v,oe.l=255*Os((3.2404542*ji.l+-1.5371385*ji.I+-.4985314*ji.v)/100),oe.I=255*Os(t/100),oe.v=255*Os(e/100),oe.T=ji.T,oe.l=Math.round(oe.l),255<oe.l?oe.l=255:0>oe.l&&(oe.l=0),oe.I=Math.round(oe.I),255<oe.I?oe.I=255:0>oe.I&&(oe.I=0),oe.v=Math.round(oe.v),255<oe.v?oe.v=255:0>oe.v&&(oe.v=0),"rgba("+oe.l+", "+oe.I+", "+oe.v+", "+oe.T+")";case kd:return Mh(),nr.v=Math.min(100,Math.max(0,nr.v+100*t)),"hsla("+nr.l+", "+nr.I+"%, "+nr.v+"%, "+nr.T+")";default:return W("Unknown color space: "+e),"rgba(0, 0, 0, 1)"}}function ha(t){Dh||(Wg(),Dh=!0);var e=Ad;if(null!==e){e.clearRect(0,0,1,1),e.fillStyle="#000000";var n=e.fillStyle;e.fillStyle=t,e.fillStyle!==n?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,oe.l=t[0],oe.I=t[1],oe.v=t[2],oe.T=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,oe.l=0,oe.I=0,oe.v=0,oe.T=1)}}function Mh(){var t=oe.l/255,e=oe.I/255,n=oe.v/255,o=Math.max(t,e,n),a=Math.min(t,e,n),u=o-a;if(a=(o+a)/2,0===u)var h=t=0;else{switch(o){case t:h=(e-n)/u%6;break;case e:h=(n-t)/u+2;break;case n:h=(t-e)/u+4}0>(h*=60)&&(h+=360),t=u/(1-Math.abs(2*a-1))}nr.l=Math.round(h),nr.I=Math.round(100*t),nr.v=Math.round(100*a),nr.T=oe.T}function Yg(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Os(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Sh(t){return t>Tx?Math.pow(t,1/3):(bv*t+16)/116}function Ov(t){var e=t*t*t;return e>Tx?e:(116*t-16)/bv}function Fu(t,e){"string"!=typeof t&&(t instanceof Xt||W("Value for "+e+" must be a color string or a Brush, not "+t))}function Wg(){Ad=dr?new ro(null).context:null}Lu.className="CanvasSurfaceContext",_d.className="ColorNumbers",Xt.prototype.copy=function(){var t=new Xt;return t.pa=this.pa,t.fl=this.fl,t.Dd=this.Dd.G(),t.sl=this.sl.G(),t.jt=this.jt,t.Wr=this.Wr,null!==this.je&&(t.je=this.je.copy()),t.Ls=this.Ls,t},(D=Xt.prototype).freeze=function(){return this.s=!0,null!==this.je&&this.je.freeze(),this},D.ea=function(){return Object.isFrozen(this)&&W("cannot thaw constant: "+this),this.s=!1,null!==this.je&&this.je.ea(),this},D.jb=function(t){t.classType===Xt&&(this.type=t)},D.toString=function(){var t="Brush(";if(this.type===nl)t+=this.color;else if(t=this.type===fa?t+"Linear ":this.type===mr?t+"Radial ":this.type===qc?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.colorStops)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},D.addColorStop=function(t,e){return this.s&&Ft(this),("number"!=typeof t||!isFinite(t)||1<t||0>t)&&qt(t,"0 <= loc <= 1",Xt,"addColorStop:loc"),null===this.je&&(this.je=new Et),this.je.add(t,e),this.pa===nl&&(this.type=fa),this.ke=null,this},D.FA=function(t,e){if(this.s&&Ft(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?Eh:e,this.type===nl)ha(this.color),this.color=Nd(t,e);else if((this.type===fa||this.type===mr)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)ha(n.value),this.addColorStop(n.key,Nd(t,e));return this},D.Iz=function(t,e){if(this.s&&Ft(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?Eh:e,this.type===nl)ha(this.color),this.color=Nd(-t,e);else if((this.type===fa||this.type===mr)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)ha(n.value),this.addColorStop(n.key,Nd(-t,e));return this},D.Gy=function(){if(this.type===nl)return Qc(this.color);if((this.type===fa||this.type===mr)&&null!==this.colorStops){var t=this.colorStops;if(this.type===mr)return Qc(t.first().value);if(null!==t.get(.5))return Qc(t.get(.5));if(2===t.count)return Qc(Iv((t=t.ma())[0].value,t[1].value));for(var e=t.iterator,n=-1,o=-1,a=1,u=1;e.next();){var h=e.key,f=Math.abs(.5-e.key);a>u&&f<a?(n=h,a=f):u>=a&&f<u&&(o=h,u=f)}return n>o&&(u=n,n=o,o=u,u=a),a=o-n,Qc(Iv(t.get(n),t.get(o),1-u/a))}return!1},L.Object.defineProperties(Xt.prototype,{type:{get:function(){return this.pa},set:function(t){this.s&&Ft(this,t),this.pa=t,this.start.nc()&&(t===fa?this.start=es:t===mr&&(this.start=ie)),this.end.nc()&&(t===fa?this.end=Il:t===mr&&(this.end=ie)),this.ke=null}},color:{get:function(){return this.fl},set:function(t){this.s&&Ft(this,t),this.fl=t,this.ke=null}},start:{get:function(){return this.Dd},set:function(t){this.s&&Ft(this,t),this.Dd=t.G(),this.ke=null}},end:{get:function(){return this.sl},set:function(t){this.s&&Ft(this,t),this.sl=t.G(),this.ke=null}},startRadius:{get:function(){return this.jt},set:function(t){this.s&&Ft(this,t),0>t&&qt(t,">= zero",Xt,"startRadius"),this.jt=t,this.ke=null}},endRadius:{get:function(){return this.Wr},set:function(t){this.s&&Ft(this,t),0>t&&qt(t,">= zero",Xt,"endRadius"),this.Wr=t,this.ke=null}},colorStops:{get:function(){return this.je},set:function(t){this.s&&Ft(this,t),this.je=t,this.ke=null}},pattern:{get:function(){return this.Ls},set:function(t){this.s&&Ft(this,t),this.Ls=t,this.ke=null}}}),Xt.prototype.isDark=Xt.prototype.Gy,Xt.prototype.darkenBy=Xt.prototype.Iz,Xt.prototype.lightenBy=Xt.prototype.FA,Xt.prototype.addColorStop=Xt.prototype.addColorStop;var nl,fa,mr,qc,Eh,kd,Tx=216/24389,bv=24389/27,Pd=[95.047,100,108.883],Ad=null,oe=new _d,nr=new _d,ji=new _d,ca=new _d,Dh=!1;function Bn(){this.name="Base"}function tf(){this.name="Base"}function Xg(){this.name="Base"}function An(){this.name="Base"}function ef(){this.name="Base"}function Kg(){this.name="Base"}function nf(){this.name="Base",this.name="Table"}function Id(){this.name="Base"}function Zg(){this.name="Base"}function Jg(){this.name="Base"}function Od(){this.name="Base"}function Qg(t,e,n,o){if(0>e)return t%e===n;if(t%e!==n)return!1;e=o.length;for(var a=0;a<e;a++)if(t%o[a]===n)return!1;return!0}function bd(){this.name="Base"}function PM(t,e,n,o){if(!1!==us(o)){var a=o.strokeWidth;0===a&&t instanceof Gt&&t.type===X.Link&&t.adornedObject instanceof At&&(a=t.adornedObject.strokeWidth),a*=o.ya,t instanceof Q&&null!==t.na?As(o,(t=t.na.bounds).x-a/2,t.y-a/2,t.width+a,t.height+a):t instanceof Gt&&null!==t.adornedPart.na?As(o,(t=t.adornedPart.na.bounds).x-a/2,t.y-a/2,t.width+a,t.height+a):As(o,-a/2,-a/2,e+a,n+a),tr(o,!1)}}function qg(){this.name="Base"}function X(t){Z.call(this),this.pa=void 0===t?X.Position:t,null===this.pa&&W("Panel type not specified or PanelLayout not loaded: "+t),this.W=new lt,this.ib=Qf,this.pa===X.Grid&&(this.isAtomic=!0),this.Kn=Ei,this.Uf=Yr,this.pa===X.Table&&oo(this),this.mq=xo,this.ko=en,this.lo=Ga,this.ho=0,this.fo=100,this.jo=10,this.io=0,this.ki=this.nb=this.eh=this.dh=this.Mj=null,this.yo=NaN,this.te=this.Bi=null,this.Kl="category",this.Yd=null,this.yg=new z(NaN,NaN,NaN,NaN),this.yh=this.Gp=this.Ui=null,this.Mg=""}function oo(t){t.Fj=Qf,t.Vg=1,t.ri=null,t.pi=null,t.Ug=1,t.Tg=null,t.oi=null,t.vb=[],t.sb=[],t.dk=jd,t.Cj=jd,t.Xi=0,t.Fi=0}function tm(t,e,n,o){for(var a=o.length,u=t.actualBounds,h=t.naturalBounds,f=!0,p=0;p<a;p++){var g=o[p];if(void 0!==g)if(f)f=!1;else if(0!==g.actual){if(n){if(g.position>u.height)continue}else if(g.position>u.width)continue;var y=g.separatorStrokeWidth;isNaN(y)&&(y=n?t.Vg:t.Ug);var v=g.separatorStroke;if(null===v&&(v=n?t.ri:t.Tg),0!==y&&null!==v){pr(t,e,v,!1,!1,h,u),v=!1;var x=g.separatorDashArray;null===x&&(x=n?t.pi:t.oi),null!==x&&(v=!0,e.Gt(x,0)),e.beginPath(),x=g.position+y,n?x>u.height&&(y-=x-u.height):x>u.width&&(y-=x-u.width),g=g.position+y/2,e.lineWidth=y,y=t.ib,n?(x=u.width-y.right,e.moveTo(y.left,g+=y.top),e.lineTo(x,g)):(x=u.height-y.bottom,e.moveTo(g+=y.left,y.top),e.lineTo(g,x)),e.stroke(),v&&e.Et()}}}}function Ld(t,e,n,o,a){for(var u=o.length,h=t.actualBounds,f=t.naturalBounds,p=0;p<u;p++){var g=o[p];if(void 0!==g&&null!==g.background&&g.coversSeparators!==a&&0!==g.actual){var y=n?h.height:h.width;if(!(g.position>y)){var v=g.wc(),x=g.separatorStrokeWidth;isNaN(x)&&(x=n?t.Vg:t.Ug);var S=g.separatorStroke;null===S&&(S=n?t.ri:t.Tg),null===S&&(x=0),v-=x,(x=g.position+x)+(v+=g.actual)>y&&(v=y-x),0>=v||(y=t.ib,pr(t,e,g.background,!0,!1,f,h),n?e.fillRect(y.left,x+y.top,h.width-(y.left+y.right),v):e.fillRect(x+y.left,y.top,v,h.height-(y.top+y.bottom)))}}}}function em(t){return"LineV"===t||"BarV"===t}function Jn(t){return null!==t.part?t.part.locationObject:null}function bs(t,e){nm(t,t,e)}function nm(t,e,n){n(e);for(var o=(e=e.W.j).length,a=0;a<o;a++){var u=e[a];u instanceof X&&nm(t,u,n)}}function AM(t,e){_x(t,t,e)}function _x(t,e,n){if(n(e),e instanceof X)for(var o=(e=e.W.j).length,a=0;a<o;a++)_x(t,e[a],n)}function Lv(t,e,n){if(n(e))return e;if(e instanceof X)for(var o=(e=e.W.j).length,a=0;a<o;a++){var u=Lv(t,e[a],n);if(null!==u)return u}return null}function Nx(t){for(var e=(t=t.W.j).length,n=0,o=0;o<e;o++){var a=t[o];a instanceof X?n=Math.max(n,Nx(a)):a instanceof At&&(n=Math.max(n,a.wh/2*a.gk*a.Cf()))}return n}function im(t,e,n,o){for(var a=t.W.j,u=a.length;u--;){var h=a[u];if(h.visible){var f=h.actualBounds,p=t.naturalBounds;f.x>p.width||f.y>p.height||0>f.x+f.width||0>f.y+f.height||(h instanceof X&&im(h,e,n,o),null!==e&&(h=e(h)),null===h||null!==n&&!n(h)||o.add(h))}}}function Fv(t){var e=null;return t instanceof At&&((e=t.spot1)===Ei&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot1)),null===e&&(e=Ue),e}function rm(t){var e=null;return t instanceof At&&((e=t.spot2)===Ei&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot2)),null===e&&(e=ns),e}function Rv(t,e){t.F=e?16777216|t.F:-16777217&t.F}function Px(t){return null!==(t=t.ki)&&t.s}function Lr(t){var e=t.ki;if(null===e)null!==t.data&&W("Template cannot have .data be non-null: "+t),t.ki=e=new lt;else if(e.s)return;var n=new lt;Rv(t,!1),t.Zm(t,function(g,y){var v=y.fb;if(null!==v)for(kv(y,!1),v=v.iterator;v.next();){var x=v.value;x.mode===Rm&&kv(y,!0);var S=x.sourceName;null!==S&&("/"===S&&Rv(g,!0),null!==(S=YM(x,g,y))&&(n.add(S),null===S.hm&&(S.hm=new lt),S.hm.add(x))),e.add(x)}if(y instanceof X&&y.type===X.Table){if(0<y.vb.length)for(v=(g=y.vb).length,x=0;x<v;x++)if(void 0!==(S=g[x])&&null!==S.fb)for(var M=S.fb.iterator;M.next();){var T=M.value;T.qd=S,T.eq=2,T.nm=S.index,e.add(T)}if(0<y.sb.length)for(g=(y=y.sb).length,v=0;v<g;v++)if(void 0!==(x=y[v])&&null!==x.fb)for(S=x.fb.iterator;S.next();)(M=S.value).qd=x,M.eq=1,M.nm=x.index,e.add(M)}});for(var o=n.iterator;o.next();){var a=o.value;if(null!==a.hm){kv(a,!0);for(var u=a.hm.iterator;u.next();){var h=u.value;null===a.fb&&(a.fb=new lt),a.fb.add(h)}}a.hm=null}for(o=e.iterator;o.next();)if(null!==(u=(a=o.value).qd)){a.qd=null;var f=a.targetProperty,p=f.indexOf(".");0<p&&u instanceof X&&(h=f.substring(0,p),f=f.substr(p+1),null!==(p=u.ab(h))?(u=p,a.targetProperty=f):Ln('Warning: unable to find GraphObject named "'+h+'" for Binding: '+a.toString())),u instanceof gn?(h=En(u.panel),a.wj=void 0===h?-1:h,u.panel.dl=a.wj):u instanceof Z?(h=En(u),a.wj=void 0===h?-1:h,u.dl=a.wj):W("Unknown type of binding target: "+u)}e.freeze(),t instanceof wt&&t.Pc()&&t.Ta()}function om(t){if(t.type===X.Spot||t.type===X.Auto)return Math.min(t.W.length,1);if(t.type===X.Link){for(var e=(t=t.W).length,n=0;n<e;n++){var o=t.J(n);if(!(o instanceof At&&o.isPanelMain))break}return n}return t.type===X.Table&&0<t.W.length&&(t=t.W.J(0)).isPanelMain&&t instanceof X&&(t.type===X.TableRow||t.type===X.TableColumn)?1:0}function sm(t,e,n){if(!(null==e||0>n)){var o=function IM(t,e){if(null===e)return"";if("function"==typeof(t=t.Kl))t=t(e);else{if("string"!=typeof t||"object"!=typeof e)return"";if(""===t)return"";t=Qe(e,t)}return void 0===t?"":"string"==typeof t?t:(W("Panel.getCategoryForItemData found a non-string category for "+e+": "+t),"")}(t,e),a=t.itemTemplateMap,u=null;null!==a&&(u=a.H(o)),null===u&&(kx||(kx=!0,Ln('No item template Panel found for category "'+o+'" on '+t),Ln("  Using default item template."),o=new X,(a=new le).bind(new sn("text","",Pr)),o.add(a),Ix=o),u=Ix),null!==(o=u)&&(Lr(o),0!=(16777216&(o=o.copy()).F)&&null!==(a=t.ij())&&Rv(a,!0),"object"==typeof e&&(null===t.Yd&&(t.Yd=new Et),t.Yd.add(e,o)),a=n+om(t),t.wb(a,o),o.nb=e,Ax(t,a,n),o.nb=null,o.data=e)}}function Ax(t,e,n){for(t=t.W;e<t.length;){var o=t.J(e);if(o instanceof X){var a=e,u=n;o.type===X.TableRow?o.row=a:o.type===X.TableColumn&&(o.column=a),o.itemIndex=u}e++,n++}}function Ru(t,e,n){var o=e.enabledChanged;if(null!==o&&o(e,n),e instanceof X){o=(e=e.W.j).length;for(var a=0;a<o;a++){var u=e[a];n&&u instanceof X&&!u.isEnabled||Ru(t,u,n)}}}function hs(t,e){e.name=t,Vo.add(t,e)}Xt.className="Brush",Xt.Solid=nl=new it(Xt,"Solid",0),Xt.Linear=fa=new it(Xt,"Linear",1),Xt.Radial=mr=new it(Xt,"Radial",2),Xt.Pattern=qc=new it(Xt,"Pattern",4),Xt.Lab=Eh=new it(Xt,"Lab",5),Xt.HSL=kd=new it(Xt,"HSL",6),Xt.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var n=Math.abs(e-t);e=Math.floor(t+Math.random()*n).toString(16);var o=Math.floor(t+Math.random()*n).toString(16);return t=Math.floor(t+Math.random()*n).toString(16),2>e.length&&(e="0"+e),2>o.length&&(o="0"+o),2>t.length&&(t="0"+t),"#"+e+o+t},Xt.isValidColor=function(t){if("black"===t)return!0;if(""===t)return!1;Dh||(Wg(),Dh=!0);var e=Ad;if(null===e)return!0;e.fillStyle="#000000";var n=e.fillStyle;return e.fillStyle=t,e.fillStyle!==n||(e.fillStyle="#FFFFFF",n=e.fillStyle,e.fillStyle=t,e.fillStyle!==n)},Xt.lighten=function(t){return Dx(t)},Xt.lightenBy=Dx,Xt.darken=function(t){return Ex(t)},Xt.darkenBy=Ex,Xt.mix=Iv,Xt.isDark=Qc,Bn.prototype.measure=function(){},Bn.prototype.IA=function(t,e,n,o,a){t.measure(e,n,o,a)},Bn.prototype.arrange=function(){},Bn.prototype.wz=function(t,e,n,o,a,u){t.arrange(e,n,o,a,u)},Bn.prototype.RA=function(t){t.Ak()},Bn.prototype.cc=function(){},L.Object.defineProperties(Bn.prototype,{classType:{get:function(){return X}}}),Bn.prototype.remeasureObject=Bn.prototype.RA,Bn.prototype.arrangeElement=Bn.prototype.wz,Bn.prototype.measureElement=Bn.prototype.IA,Bn.className="PanelLayout",Y(tf,Bn),tf.prototype.measure=function(t,e,n,o,a,u,h){var f=o.length;t=Jn(t);for(var p=0;p<f;p++){var g=o[p];if(g.visible||g===t){var y=g.margin,v=y.right+y.left;y=y.top+y.bottom,g.measure(e,n,u,h);var x=g.measuredBounds;v=Math.max(x.width+v,0),y=Math.max(x.height+y,0),x=g.position.x;var S=g.position.y;isFinite(x)||(x=0),isFinite(S)||(S=0),g instanceof At&&g.isGeometryPositioned&&(x-=g=g.strokeWidth/2,S-=g),Kn(a,x,S,v,y)}}},tf.prototype.arrange=function(t,e,n){var o=e.length,a=t.padding;for(t=n.x-a.left,n=n.y-a.top,a=0;a<o;a++){var u=e[a],h=u.measuredBounds,f=u.margin,p=u.position.x,g=u.position.y;if(p=isNaN(p)?-t:p-t,g=isNaN(g)?-n:g-n,u instanceof At&&u.isGeometryPositioned){var y=u.strokeWidth/2;p-=y,g-=y}u.visible&&u.arrange(p+f.left,g+f.top,h.width,h.height)}},Y(Xg,Bn),Xg.prototype.measure=function(t,e,n,o,a,u,h){var f=o.length;e=ye(),u=Jn(t);for(var p=0;p<f;p++){var g=o[p];if(g.visible||g===u){var y=jo(g,!1);if(y!==un&&y!==ei)e.push(g);else{g.measure(1/0,n,0,h),y=g.margin,g=g.measuredBounds;var v=Math.max(g.height+y.top+y.bottom,0);a.width+=Math.max(g.width+y.right+y.left,0),a.height=Math.max(a.height,v)}}}for(o=e.length,t.desiredSize.height?n=Math.min(t.desiredSize.height,t.maxSize.height):0!==a.height&&(n=Math.min(a.height,t.maxSize.height)),t=0;t<o;t++)((p=e[t]).visible||p===u)&&(f=(y=p.margin).right+y.left,y=y.top+y.bottom,p.measure(1/0,n,0,h),p=p.measuredBounds,y=Math.max(p.height+y,0),a.width+=Math.max(p.width+f,0),a.height=Math.max(a.height,y));Jt(e)},Xg.prototype.arrange=function(t,e,n){for(var o=e.length,a=t.padding,u=a.top,h=t.isOpposite,f=h?n.width:a.left,p=0;p<o;p++){var g=u,y=e[p];if(y.visible){var v=y.measuredBounds,x=y.margin,S=x.top+x.bottom,M=u+a.bottom,T=v.height,N=jo(y,!1);(isNaN(y.desiredSize.height)&&N===Je||N===li)&&(T=Math.max(n.height-S-M,0)),S=T+S+M,(M=y.alignment).Nb()&&(M=t.defaultAlignment),M.kb()||(M=ie),h&&(f-=v.width+x.left+x.right),y.arrange(f+M.offsetX+x.left,g+M.offsetY+x.top+(n.height*M.y-S*M.y),v.width,T),h||(f+=v.width+x.left+x.right)}}},Y(An,Bn),An.prototype.measure=function(t,e,n,o,a,u){var h=o.length;n=ye();for(var f=Jn(t),p=0;p<h;p++){var g=o[p];if(g.visible||g===f){var y=jo(g,!1);if(y!==un&&y!==li)n.push(g);else{var v=g.margin;y=v.right+v.left,v=v.top+v.bottom,g.measure(e,1/0,u,0),g=g.measuredBounds,Ao(a,Math.max(a.width,Math.max(g.width+y,0)),a.height+Math.max(g.height+v,0))}}}if(0!==(o=n.length)){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):0!==a.width&&(e=Math.min(a.width,t.maxSize.width)),t=0;t<o;t++)((p=n[t]).visible||p===f)&&(h=(g=p.margin).right+g.left,g=g.top+g.bottom,p.measure(e,1/0,u,0),p=p.measuredBounds,g=Math.max(p.height+g,0),a.width=Math.max(a.width,Math.max(p.width+h,0)),a.height+=g);Jt(n)}},An.prototype.arrange=function(t,e,n){for(var o=e.length,a=t.padding,u=a.left,h=t.isOpposite,f=h?n.height:a.top,p=0;p<o;p++){var g=u,y=e[p];if(y.visible){var v=y.measuredBounds,x=y.margin,S=x.left+x.right,M=u+a.right,T=v.width,N=jo(y,!1);(isNaN(y.desiredSize.width)&&N===Je||N===ei)&&(T=Math.max(n.width-S-M,0)),S=T+S+M,(M=y.alignment).Nb()&&(M=t.defaultAlignment),M.kb()||(M=ie),h&&(f-=v.height+x.bottom+x.top),y.arrange(g+M.offsetX+x.left+(n.width*M.x-S*M.x),f+M.offsetY+x.top,T,v.height),h||(f+=v.height+x.bottom+x.top)}}},Y(ef,Bn),ef.prototype.measure=function(t,e,n,o,a,u,h){var f=o.length,p=t.rb(),g=p.margin,y=g.right+g.left,v=g.top+g.bottom;p.measure(e,n,u,h);var x=p.measuredBounds;u=x.width,h=x.height;for(var S=Math.max(u+y,0),M=Math.max(h+v,0),T=t.isClipping,N=z.allocAt(-g.left,-g.top,S,M),P=!0,I=Jn(t),O=0;O<f;O++){var b=o[O];if(b!==p&&(b.visible||b===I)){switch(S=(g=b.margin).right+g.left,M=g.top+g.bottom,x=jo(b,!1)){case Je:e=u,n=h;break;case ei:e=u;break;case li:n=h}b.measure(e,n,0,0),x=b.measuredBounds,S=Math.max(x.width+S,0),M=Math.max(x.height+M,0);var B=b.alignment;B.Nb()&&(B=t.defaultAlignment),B.kb()||(B=ie);var K=b.alignmentFocus;K.Nb()&&(K=ie);var rt=null;if(b instanceof X&&""!==b.Mg&&(b.arrange(0,0,x.width,x.height),(rt=b.ab(b.Mg))===b&&(rt=null)),null!==rt){for(g=A.allocAt(K.x*(g=rt.naturalBounds).width-K.offsetX-(x=rt.margin).left,K.y*g.height-K.offsetY-x.top);rt!==b;)rt.transform.sa(g),rt=rt.panel;b=B.x*u+B.offsetX-g.x,x=B.y*h+B.offsetY-g.y,A.free(g)}else b=B.x*u+B.offsetX-(K.x*x.width+K.offsetX)-g.left,x=B.y*h+B.offsetY-(K.y*x.height+K.offsetY)-g.top;P?(P=!1,a.h(b,x,S,M)):Kn(a,b,x,S,M)}}switch(P?a.assign(N):T?a.aw(N.x,N.y,N.width,N.height):Kn(a,N.x,N.y,N.width,N.height),z.free(N),(x=p.stretch)===Yr&&(x=jo(p,!1)),x){case un:return;case Je:if(!isFinite(e)&&!isFinite(n))return;break;case ei:if(!isFinite(e))return;break;case li:if(!isFinite(n))return}for(u=(x=p.measuredBounds).width,h=x.height,S=Math.max(u+y,0),M=Math.max(h+v,0),N=z.allocAt(-(g=p.margin).left,-g.top,S,M),e=0;e<f;e++)(n=o[e])===p||!n.visible&&n!==I||(S=(g=n.margin).right+g.left,M=g.top+g.bottom,x=n.measuredBounds,S=Math.max(x.width+S,0),M=Math.max(x.height+M,0),(y=n.alignment).Nb()&&(y=t.defaultAlignment),y.kb()||(y=ie),(n=n.alignmentFocus).Nb()&&(n=ie),P?(P=!1,a.h(y.x*u+y.offsetX-(n.x*x.width+n.offsetX)-g.left,y.y*h+y.offsetY-(n.y*x.height+n.offsetY)-g.top,S,M)):Kn(a,y.x*u+y.offsetX-(n.x*x.width+n.offsetX)-g.left,y.y*h+y.offsetY-(n.y*x.height+n.offsetY)-g.top,S,M));P?a.assign(N):T?a.aw(N.x,N.y,N.width,N.height):Kn(a,N.x,N.y,N.width,N.height),z.free(N)},ef.prototype.arrange=function(t,e,n){var o=e.length,a=t.rb(),u=a.measuredBounds,h=u.width,f=t.padding,p=f.left,g=p-n.x,y=(f=f.top)-n.y;a.arrange(g,y,h,u=u.height);for(var v=0;v<o;v++){var x=e[v];if(x!==a){var S=x.measuredBounds,M=S.width;S=S.height,(y=x.alignment).Nb()&&(y=t.defaultAlignment),y.kb()||(y=ie);var T=x.alignmentFocus;if(T.Nb()&&(T=ie),g=null,x instanceof X&&""!==x.Mg&&(g=x.ab(x.Mg))===x&&(g=null),null!==g){var N=g.naturalBounds;for(T=A.allocAt(T.x*N.width-T.offsetX,T.y*N.height-T.offsetY);g!==x;)g.transform.sa(T),g=g.panel;g=y.x*h+y.offsetX-T.x,y=y.y*u+y.offsetY-T.y,A.free(T)}else g=y.x*h+y.offsetX-(T.x*M+T.offsetX),y=y.y*u+y.offsetY-(T.y*S+T.offsetY);g-=n.x,y-=n.y,x.visible&&x.arrange(p+g,f+y,M,S)}}},Y(Kg,Bn),Kg.prototype.measure=function(t,e,n,o,a,u,h){var f=o.length,p=t.rb(),g=p.margin,y=e,v=n,x=g.right+g.left,S=g.top+g.bottom;p.measure(e,n,u,h),g=p.measuredBounds;var M=0,T=null;p instanceof At&&(M=(T=p).strokeWidth*T.scale);var N=Math.max(g.width+x,0);g=Math.max(g.height+S,0);var P=Fv(p),I=P.x*N+P.offsetX;P=P.y*g+P.offsetY;var O=rm(p),b=O.x*N+O.offsetX;for(O=O.y*g+O.offsetY,isFinite(e)&&(y=Math.max(Math.abs(I-b)-M,0)),isFinite(n)&&(v=Math.max(Math.abs(P-O)-M,0)),(M=Nt.alloc()).h(0,0),t=Jn(t),O=0;O<f;O++)(P=o[O])===p||!P.visible&&P!==t||(N=(g=P.margin).right+g.left,I=g.top+g.bottom,P.measure(y,v,0,0),g=P.measuredBounds,N=Math.max(g.width+N,0),g=Math.max(g.height+I,0),M.h(Math.max(N,M.width),Math.max(g,M.height)));if(1===f)a.width=N,a.height=g,Nt.free(M);else{switch(P=Fv(p),f=o=0,(O=rm(p)).x!==P.x&&O.y!==P.y&&(o=M.width/Math.abs(O.x-P.x),f=M.height/Math.abs(O.y-P.y)),Nt.free(M),M=0,null!==T&&(M=T.strokeWidth*T.scale,Bv(T)===xo&&(o=f=Math.max(o,f))),o+=Math.abs(P.offsetX)+Math.abs(O.offsetX)+M,f+=Math.abs(P.offsetY)+Math.abs(O.offsetY)+M,(T=p.stretch)===Yr&&(T=jo(p,!1)),T){case un:h=u=0;break;case Je:isFinite(e)&&(o=e),isFinite(n)&&(f=n);break;case ei:isFinite(e)&&(o=e),h=0;break;case li:u=0,isFinite(n)&&(f=n)}p.Ak(),p.measure(o,f,u,h),a.width=p.measuredBounds.width+x,a.height=p.measuredBounds.height+S}},Kg.prototype.arrange=function(t,e){var n=e.length,o=t.rb(),a=o.measuredBounds,u=z.alloc();u.h(0,0,1,1);var h=o.margin,f=h.left,p=t.padding,g=p.left;o.arrange(g+f,(p=p.top)+(h=h.top),a.width,a.height);var y=Fv(o),v=rm(o),x=y.y*a.height+y.offsetY,S=v.x*a.width+v.offsetX;for(v=v.y*a.height+v.offsetY,u.x=y.x*a.width+y.offsetX,u.y=x,Kn(u,S,v,0,0),u.x+=f+g,u.y+=h+p,a=0;a<n;a++)(f=e[a])!==o&&(g=f.measuredBounds,h=f.margin,p=Math.max(g.width+h.right+h.left,0),y=Math.max(g.height+h.top+h.bottom,0),(x=f.alignment).Nb()&&(x=t.defaultAlignment),x.kb()||(x=ie),p=u.width*x.x+x.offsetX-p*x.x+h.left+u.x,h=u.height*x.y+x.offsetY-y*x.y+h.top+u.y,f.visible&&(ts(u.x,u.y,u.width,u.height,p,h,g.width,g.height)?f.arrange(p,h,g.width,g.height):f.arrange(p,h,g.width,g.height,new z(u.x,u.y,u.width,u.height))));z.free(u)},Y(nf,Bn),nf.prototype.measure=function(t,e,n,o,a){for(var u=o.length,h=ye(),f=ye(),p=0;p<u;p++){var g=o[p],y=g instanceof X?g:null;if(null===y||y.type!==X.TableRow&&y.type!==X.TableColumn||!g.visible)h.push(g);else{f.push(y);for(var v=y.W.j,x=v.length,S=0;S<x;S++){var M=v[S];y.type===X.TableRow?M.row=g.row:y.type===X.TableColumn&&(M.column=g.column),h.push(M)}}}0===(u=h.length)&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var T=[],N=0;N<u;N++){var P=h[N];tr(P,!0),Ou(P,!0),T[P.row]||(T[P.row]=[]),T[P.row][P.column]||(T[P.row][P.column]=[]),T[P.row][P.column].push(P)}Jt(h);var I=ye(),O=ye(),b=ye(),B={count:0},K={count:0},rt=e,tt=n,mt=t.vb;u=mt.length;for(var ht=0;ht<u;ht++){var $=mt[ht];void 0!==$&&($.actual=0)}u=(mt=t.sb).length;for(var zt=0;zt<u;zt++)void 0!==($=mt[zt])&&($.actual=0);for(var Lt=T.length,Kt=0,_e=0;_e<Lt;_e++)T[_e]&&(Kt=Math.max(Kt,T[_e].length));var On=Math.min(t.topIndex,Lt-1),Ne=Math.min(t.leftIndex,Kt-1),Pe=0;Lt=T.length;for(var vs=Jn(t),zi=0;zi<Lt;zi++)if(T[zi]){Kt=T[zi].length;var $i=t.getRowDefinition(zi);$i.actual=0;for(var bn=$i.ac=0;bn<Kt;bn++)if(T[zi][bn]){var Wo=t.getColumnDefinition(bn);void 0===I[bn]&&(Wo.actual=0,Wo.ac=0,I[bn]=!0);for(var Ku=T[zi][bn],Zu=Ku.length,Sa=0;Sa<Zu;Sa++){var hi=Ku[Sa];if(hi.visible||hi===vs){var ec=1<hi.rowSpan||1<hi.columnSpan;ec&&(zi<On||bn<Ne||O.push(hi));var Ju=hi.margin,nc=Ju.right+Ju.left,ic=Ju.top+Ju.bottom,yn=Gg(hi,$i,Wo,!1),rc=hi.desiredSize,vl=!isNaN(rc.height),oc=!isNaN(rc.width)&&vl;if(ec||yn===un||oc||zi<On||bn<Ne||(void 0!==B[bn]||yn!==Je&&yn!==ei||(B[bn]=-1,B.count++),void 0!==K[zi]||yn!==Je&&yn!==li||(K[zi]=-1,K.count++),b.push(hi)),hi.measure(1/0,1/0,0,0),!(zi<On||bn<Ne)){var Xo=hi.measuredBounds,ci=Math.max(Xo.width+nc,0),sc=Math.max(Xo.height+ic,0);if(1===hi.rowSpan&&(yn===un||yn===ei)){var vn=($=t.getRowDefinition(zi)).wc();(Pe=Math.max(sc-$.actual,0))+vn>tt&&(Pe=Math.max(tt-vn,0));var Nf=0===$.ha;$.ac=$.ac+Pe,$.actual=$.ha+Pe,tt=Math.max(tt-(Pe+(Nf?vn:0)),0)}if(1===hi.columnSpan&&(yn===un||yn===li)){var ac=($=t.getColumnDefinition(bn)).wc();(Pe=Math.max(ci-$.actual,0))+ac>rt&&(Pe=Math.max(rt-ac,0));var ay=0===$.ha;$.ac=$.ac+Pe,$.actual=$.ha+Pe,rt=Math.max(rt-(Pe+(ay?ac:0)),0)}ec&&hi.Ak()}}}}}Jt(I);var Da=0,jt=0;u=t.columnCount;for(var lc=0;lc<u;lc++){var uc=t.sb[lc];void 0!==uc&&(Da+=uc.ac,0!==uc.ac&&(Da+=uc.wc()))}u=t.rowCount;for(var Eo=0;Eo<u;Eo++){var Ko=t.vb[Eo];void 0!==Ko&&(jt+=Ko.ac,0!==Ko.ac&&(jt+=Ko.wc()))}rt=Math.max(e-Da,0);var sr=tt=Math.max(n-jt,0),nu=rt;u=b.length;for(var iu=0;iu<u;iu++){var qe=b[iu],ly=t.getRowDefinition(qe.row),Us=t.getColumnDefinition(qe.column),ru=qe.measuredBounds,ws=qe.margin,uy=ws.top+ws.bottom;B[qe.column]=0===Us.ac&&void 0!==B[qe.column]?Math.max(ru.width+(ws.right+ws.left),B[qe.column]):null,K[qe.row]=0===ly.ac&&void 0!==K[qe.row]?Math.max(ru.height+uy,K[qe.row]):null}var Hs,ou=0,fi=0;for(Hs in K)"count"!==Hs&&(ou+=K[Hs]);for(Hs in B)"count"!==Hs&&(fi+=B[Hs]);for(var Gn=Nt.alloc(),Lp=0;Lp<u;Lp++){var ni=b[Lp];if(ni.visible||ni===vs){var jr=t.getRowDefinition(ni.row),Dr=t.getColumnDefinition(ni.column),Gs=0;isFinite(Dr.width)?Gs=Dr.width:(Gs=isFinite(rt)&&null!==B[ni.column]?0===fi?Dr.actual+rt:B[ni.column]/fi*nu:null!==B[ni.column]?rt:Dr.actual||rt,Gs=Math.max(0,Gs-Dr.wc()));var To=0;switch(isFinite(jr.height)?To=jr.height:(To=isFinite(tt)&&null!==K[ni.row]?0===ou?jr.actual+tt:K[ni.row]/ou*sr:null!==K[ni.row]?tt:jr.actual||tt,To=Math.max(0,To-jr.wc())),Gn.h(Math.max(Dr.minimum,Math.min(Gs,Dr.maximum)),Math.max(jr.minimum,Math.min(To,jr.maximum))),yn=Gg(ni,jr,Dr,!1)){case ei:Gn.height=Math.max(Gn.height,jr.actual+tt);break;case li:Gn.width=Math.max(Gn.width,Dr.actual+rt)}var Qu=ni.margin,Br=Qu.right+Qu.left,hc=Qu.top+Qu.bottom;ni.Ak(),ni.measure(Gn.width,Gn.height,Dr.minimum,jr.minimum);var cc=ni.measuredBounds,po=Math.max(cc.width+Br,0),wl=Math.max(cc.height+hc,0);isFinite(rt)&&(po=Math.min(po,Gn.width)),isFinite(tt)&&(wl=Math.min(wl,Gn.height));var su=0;su=jr.actual,jr.actual=Math.max(jr.actual,wl),jr.ac=Math.max(jr.ac,wl),Pe=jr.actual-su,tt=Math.max(tt-Pe,0),null===K[ni.row]&&(sr=Math.max(sr-Pe,0)),su=Dr.actual,Dr.actual=Math.max(Dr.actual,po),Dr.ac=Math.max(Dr.ac,po),Pe=Dr.actual-su,rt=Math.max(rt-Pe,0),null===B[ni.column]&&(nu=Math.max(nu-Pe,0))}}Jt(b);var xl=Nt.alloc(),zs=ye(),xs=ye();if(0!==(u=O.length))for(var Ea=0;Ea<Lt;Ea++)if(T[Ea]){Kt=T[Ea].length;var fc=t.getRowDefinition(Ea);zs[Ea]=fc.actual;for(var Ta=0;Ta<Kt;Ta++)if(T[Ea][Ta]){var hy=t.getColumnDefinition(Ta);xs[Ta]=hy.actual}}for(var ar=0;ar<u;ar++){var $e=O[ar];if($e.visible||$e===vs){var Er=t.getRowDefinition($e.row),_a=t.getColumnDefinition($e.column);switch(Gn.h(Math.max(_a.minimum,Math.min(e,_a.maximum)),Math.max(Er.minimum,Math.min(n,Er.maximum))),yn=Gg($e,Er,_a,!1)){case Je:0!==xs[_a.index]&&(Gn.width=Math.min(Gn.width,xs[_a.index])),0!==zs[Er.index]&&(Gn.height=Math.min(Gn.height,zs[Er.index]));break;case ei:0!==xs[_a.index]&&(Gn.width=Math.min(Gn.width,xs[_a.index]));break;case li:0!==zs[Er.index]&&(Gn.height=Math.min(Gn.height,zs[Er.index]))}isFinite(_a.width)&&(Gn.width=_a.width),isFinite(Er.height)&&(Gn.height=Er.height),xl.h(0,0);for(var au=_a.minimum,Fp=Er.minimum,Na=1;Na<$e.rowSpan&&!($e.row+Na>=t.rowCount);Na++)$=t.getRowDefinition($e.row+Na),Pe=0,Pe=yn===Je||yn===li?Math.max($.minimum,0===zs[$e.row+Na]?$.maximum:Math.min(zs[$e.row+Na],$.maximum)):Math.max($.minimum,isNaN($.cd)?$.maximum:Math.min($.cd,$.maximum)),xl.height+=Pe,Fp+=$.minimum;for(var Tr=1;Tr<$e.columnSpan&&!($e.column+Tr>=t.columnCount);Tr++)$=t.getColumnDefinition($e.column+Tr),Pe=0,Pe=yn===Je||yn===ei?Math.max($.minimum,0===xs[$e.column+Tr]?$.maximum:Math.min(xs[$e.column+Tr],$.maximum)):Math.max($.minimum,isNaN($.cd)?$.maximum:Math.min($.cd,$.maximum)),xl.width+=Pe,au+=$.minimum;Gn.width+=xl.width,Gn.height+=xl.height;var lu=$e.margin,Pf=lu.right+lu.left,cy=lu.top+lu.bottom;$e.measure(Gn.width,Gn.height,au,Fp);for(var Pa=$e.measuredBounds,Zo=Math.max(Pa.width+Pf,0),$s=Math.max(Pa.height+cy,0),Aa=0,ka=0;ka<$e.rowSpan&&!($e.row+ka>=t.rowCount);ka++)Aa+=($=t.getRowDefinition($e.row+ka)).total||0;if(Aa<$s){var Ys=$s-Aa,Ws=$s-Aa;if(null!==$e.spanAllocation)for(var fy=$e.spanAllocation,Cl=0;Cl<$e.rowSpan&&!(0>=Ys)&&!($e.row+Cl>=t.rowCount);Cl++){var Ml=($=t.getRowDefinition($e.row+Cl)).ha||0,Y0=fy($e,$,Ws);$.actual=Math.min($.maximum,Ml+Y0),$.ha!==Ml&&(Ys-=$.ha-Ml)}for(;0<Ys;){var _o=$.ha||0;if(isNaN($.height)&&$.maximum>_o&&($.actual=Math.min($.maximum,_o+Ys),$.ha!==_o&&(Ys-=$.ha-_o)),0===$.index)break;$=t.getRowDefinition($.index-1)}}for(var qu=0,dc=0;dc<$e.columnSpan&&!($e.column+dc>=t.columnCount);dc++)qu+=($=t.getColumnDefinition($e.column+dc)).total||0;if(qu<Zo){var pc=Zo-qu,_1=Zo-qu;if(null!==$e.spanAllocation)for(var rS=$e.spanAllocation,Af=0;Af<$e.columnSpan&&!(0>=pc)&&!($e.column+Af>=t.columnCount);Af++){var W0=($=t.getColumnDefinition($e.column+Af)).ha||0,N1=rS($e,$,_1);$.actual=Math.min($.maximum,W0+N1),$.ha!==W0&&(pc-=$.ha-W0)}for(;0<pc;){var Rp=$.ha||0;if(isNaN($.width)&&$.maximum>Rp&&($.actual=Math.min($.maximum,Rp+pc),$.ha!==Rp&&(pc-=$.ha-Rp)),0===$.index)break;$=t.getColumnDefinition($.index-1)}}}}Jt(O),Nt.free(xl),Nt.free(Gn),void 0!==zs&&Jt(zs),void 0!==xs&&Jt(xs);var gc=0,mc=0,dy=t.desiredSize,py=t.maxSize;yn=jo(t,!0);var jp=jt=Da=0,kf=0;u=t.columnCount;for(var gy=0;gy<u;gy++)void 0!==t.sb[gy]&&($=t.getColumnDefinition(gy),isFinite($.width)?(jp+=$.width,jp+=$.wc()):Fd($)===Rd?(jp+=$.ha,jp+=$.wc()):0!==$.ha&&(Da+=$.ha,Da+=$.wc()));gc=isFinite(dy.width)?Math.min(dy.width,py.width):yn!==un&&isFinite(e)?e:Da,gc=Math.max(gc,t.minSize.width),gc=Math.max(gc-jp,0);for(var oS=0===Da?1:Math.max(gc/Da,1),my=0;my<u;my++)void 0!==t.sb[my]&&($=t.getColumnDefinition(my),isFinite($.width)||Fd($)===Rd||($.actual=$.ha*oS),$.position=a.width,0!==$.ha&&(a.width+=$.ha,a.width+=$.wc()));u=t.rowCount;for(var yy=0;yy<u;yy++)void 0!==t.vb[yy]&&($=t.getRowDefinition(yy),isFinite($.height)?(kf+=$.height,kf+=$.wc()):Fd($)===Rd?(kf+=$.ha,kf+=$.wc()):0!==$.ha&&(jt+=$.ha,0!==$.ha&&(jt+=$.wc())));mc=isFinite(dy.height)?Math.min(dy.height,py.height):yn!==un&&isFinite(n)?n:jt,mc=Math.max(mc,t.minSize.height),mc=Math.max(mc-kf,0);for(var sS=0===jt?1:Math.max(mc/jt,1),vy=0;vy<u;vy++)void 0!==t.vb[vy]&&($=t.getRowDefinition(vy),isFinite($.height)||Fd($)===Rd||($.actual=$.ha*sS),$.position=a.height,0!==$.ha&&(a.height+=$.ha,0!==$.ha&&(a.height+=$.wc())));u=f.length;for(var X0=0;X0<u;X0++){var Jo=f[X0],wy=0,xy=0;Jo.type===X.TableRow?(wy=a.width,xy=($=t.getRowDefinition(Jo.row)).actual):(wy=($=t.getColumnDefinition(Jo.column)).actual,xy=a.height),Jo.measuredBounds.h(0,0,wy,xy),tr(Jo,!1),T[Jo.row]||(T[Jo.row]=[]),T[Jo.row][Jo.column]||(T[Jo.row][Jo.column]=[]),T[Jo.row][Jo.column].push(Jo)}Jt(f),t.Gp=T},nf.prototype.arrange=function(t,e,n){var o=e.length,a=t.padding,u=a.left;a=a.top;for(var f,p,h=t.Gp,g=h.length,y=0,v=0;v<g;v++)h[v]&&(y=Math.max(y,h[v].length));for(v=Math.min(t.topIndex,g-1);v!==g&&(void 0===t.vb[v]||0===t.vb[v].ha);)v++;for(v=Math.min(v,g-1),v=-t.vb[v].position,f=Math.min(t.leftIndex,y-1);f!==y&&(void 0===t.sb[f]||0===t.sb[f].ha);)f++;f=Math.min(f,y-1);for(var x=-t.sb[f].position,S=Nt.alloc(),M=0;M<g;M++)if(h[M]){y=h[M].length;var T=t.getRowDefinition(M);p=T.position+v+a,0!==T.ha&&(p+=T.Iv());for(var N=0;N<y;N++)if(h[M][N]){var P=t.getColumnDefinition(N);f=P.position+x+u,0!==P.ha&&(f+=P.Iv());for(var I=h[M][N],O=I.length,b=0;b<O;b++){var B=I[b],K=B.measuredBounds,rt=B instanceof X?B:null;if(null===rt||rt.type!==X.TableRow&&rt.type!==X.TableColumn){S.h(0,0);for(var tt=1;tt<B.rowSpan&&!(M+tt>=t.rowCount);tt++)rt=t.getRowDefinition(M+tt),S.height+=rt.total;for(tt=1;tt<B.columnSpan&&!(N+tt>=t.columnCount);tt++)rt=t.getColumnDefinition(N+tt),S.width+=rt.total;var mt=P.ha+S.width,ht=T.ha+S.height;tt=f,rt=p;var $=mt,zt=ht,Lt=f,Kt=p,_e=mt,On=ht;f+mt>n.width&&(_e=Math.max(n.width-f,0)),p+ht>n.height&&(On=Math.max(n.height-p,0));var Ne=B.alignment;if(Ne.Nb()){(Ne=t.defaultAlignment).kb()||(Ne=ie);var Pe=Ne.x,vs=Ne.y,zi=Ne.offsetX;Ne=Ne.offsetY;var $i=P.alignment,bn=T.alignment;$i.kb()&&(Pe=$i.x,zi=$i.offsetX),bn.kb()&&(vs=bn.y,Ne=bn.offsetY)}else Pe=Ne.x,vs=Ne.y,zi=Ne.offsetX,Ne=Ne.offsetY;(isNaN(Pe)||isNaN(vs))&&(vs=Pe=.5,Ne=zi=0),$i=K.width,bn=K.height;var Wo=B.margin,Ku=Wo.left+Wo.right,Zu=Wo.top+Wo.bottom,Sa=Gg(B,T,P,!1);!isNaN(B.desiredSize.width)||Sa!==Je&&Sa!==ei||($i=Math.max(mt-Ku,0)),!isNaN(B.desiredSize.height)||Sa!==Je&&Sa!==li||(bn=Math.max(ht-Zu,0)),mt=B.maxSize,ht=B.minSize,$i=Math.min(mt.width,$i),bn=Math.min(mt.height,bn),$i=Math.max(ht.width,$i),bn=Math.max(ht.height,bn),tt+=$*Pe-($i+Ku)*Pe+zi+Wo.left,rt+=zt*vs-(mt=bn+Zu)*vs+Ne+Wo.top,B.visible&&(ts(Lt,Kt,_e,On,tt,rt,K.width,K.height)?B.arrange(tt,rt,$i,bn):B.arrange(tt,rt,$i,bn,new z(Lt,Kt,_e,On)))}else B.Gl(),B.actualBounds.ea(),tt=z.allocAt(($=B.actualBounds).x,$.y,$.width,$.height),$.x=rt.type===X.TableRow?u:f,$.y=rt.type===X.TableColumn?a:p,$.width=K.width,$.height=K.height,B.actualBounds.freeze(),Ou(B,!1),Xy(tt,$)||null!==(K=B.part)&&(K.Nh(),B.hp(K)),z.free(tt)}}}for(Nt.free(S),t=0;t<o;t++)null===(u=(n=e[t])instanceof X?n:null)||u.type!==X.TableRow&&u.type!==X.TableColumn||(u=n.actualBounds,n.naturalBounds.ea(),n.naturalBounds.h(0,0,u.width,u.height),n.naturalBounds.freeze())},Y(Id,Bn),Id.prototype.measure=function(){},Id.prototype.arrange=function(){},Y(Zg,Bn),Zg.prototype.measure=function(){},Zg.prototype.arrange=function(){},Y(Jg,Bn),Jg.prototype.measure=function(t,e,n,o,a,u,h){1<o.length&&W("Viewbox Panel cannot contain more than one GraphObject."),(o=o[0]).ya=1,o.Ak(),o.measure(1/0,1/0,u,h);var f=o.measuredBounds,p=o.margin,g=p.right+p.left;if(p=p.top+p.bottom,isFinite(e)||isFinite(n)){var y=o.scale,v=f.width;f=f.height;var x=Math.max(e-g,0),S=Math.max(n-p,0),M=1;t.viewboxStretch===xo?0!==v&&0!==f&&(M=Math.min(x/v,S/f)):0!==v&&0!==f&&(M=Math.max(x/v,S/f)),0===M&&(M=1e-4),o.ya*=M,y!==o.scale&&(tr(o,!0),o.measure(1/0,1/0,u,h))}f=o.measuredBounds,a.width=isFinite(e)?e:Math.max(f.width+g,0),a.height=isFinite(n)?n:Math.max(f.height+p,0)},Jg.prototype.arrange=function(t,e,n){var o=(e=e[0]).measuredBounds,a=e.margin,u=Math.max(o.width+(a.right+a.left),0);a=Math.max(o.height+(a.top+a.bottom),0);var h=e.alignment;h.Nb()&&(h=t.defaultAlignment),h.kb()||(h=ie),e.arrange(n.width*h.x-u*h.x+h.offsetX,n.height*h.y-a*h.y+h.offsetY,o.width,o.height)},Y(Od,Bn),Od.prototype.measure=function(){},Od.prototype.arrange=function(){},Od.prototype.cc=function(t,e,n){0>=(n=t.Cf()*n.scale)&&(n=1);var o=t.gridCellSize,a=o.width;o=o.height;var u=t.naturalBounds,h=t.actualBounds,f=u.width,p=u.height,g=Math.ceil(f/a),y=Math.ceil(p/o),v=t.gridOrigin,x=v.x;v=v.y,e.save(),e.beginPath(),e.rect(0,0,f,p),e.clip();for(var S=[],M=t.W.j,T=M.length,N=0;N<T;N++){var P=M[N],I=[];if(S.push(I),P.visible){var O=P.interval;if(!(0>O)){P=em(P.figure);for(var b=0;b<T;b++)if(b!==N){var B=M[b];B.visible&&em(B.figure)===P&&(B=B.interval)>O&&I.push(B)}}}}for(T=(M=t.W.j).length,N=0;N<T;N++){var K=M[N];if(K.visible&&(I=K.interval||1,!(2>a*(P=Math.abs(I))*n))){if(O=K.segmentIndex,(!isFinite(O)||isNaN(O))&&(O=0),0>O&&(O=P-Math.min(-O,P)),O=Math.round(O%P),b=1,1!==(P=K.opacity)){if(0===P)continue;e.globalAlpha=(b=e.globalAlpha)*P}B=S[N];var rt=!1,tt=K.strokeDashArray;if(null!==tt&&(rt=!0,e.Gt(tt,K.strokeDashOffset)),"LineV"===K.figure&&null!==K.stroke&&0<K.strokeWidth){for(e.lineWidth=K.strokeWidth,pr(t,e,K.stroke,!1,!1,u,h),e.beginPath(),tt=K=Math.floor((x-a)/a);tt<=K+g;tt++){var mt=tt*a+x;0<=mt&&mt<=f&&Qg(tt,I,O,B)&&(e.moveTo(mt,0),e.lineTo(mt,p))}e.stroke()}else if("LineH"===K.figure&&null!==K.stroke&&0<K.strokeWidth){for(e.lineWidth=K.strokeWidth,pr(t,e,K.stroke,!1,!1,u,h),e.beginPath(),tt=K=Math.floor((v-o)/o);tt<=K+y;tt++)0<=(mt=tt*o+v)&&mt<=p&&Qg(tt,I,O,B)&&(e.moveTo(0,mt),e.lineTo(f,mt));e.stroke()}else if("BarV"===K.figure&&null!==K.fill)for(pr(t,e,K.fill,!0,!1,u,h),K=K.width,isNaN(K)&&(K=a),mt=tt=Math.floor((x-a)/a);mt<=tt+g;mt++){var ht=mt*a+x;0<=ht+K&&ht<=f&&Qg(mt,I,O,B)&&e.fillRect(ht,0,K,p)}else if("BarH"===K.figure&&null!==K.fill)for(pr(t,e,K.fill,!0,!1,u,h),K=K.height,isNaN(K)&&(K=o),mt=tt=Math.floor((v-o)/o);mt<=tt+y;mt++)0<=(ht=mt*o+v)+K&&ht<=p&&Qg(mt,I,O,B)&&e.fillRect(0,ht,f,K);rt&&e.Et(),1!==P&&(e.globalAlpha=b)}}e.restore(),e.uc(!1)},Y(bd,Bn),bd.prototype.measure=function(t,e,n,o,a){if(n=o.length,t instanceof Gt||t instanceof Q){var u=null,h=null,f=null;if(t instanceof Q&&(h=u=t),t instanceof Gt&&(u=(f=t).adornedPart),u instanceof Q){var p=u;if(0===n)Ao(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var g=t instanceof Gt?null:u.path,y=u.routeBounds;(e=t.yg).h(0,0,y.width,y.height);var v=p.points;u=u.pointsCount,null!==f?f.Fk(!1):null!==h&&h.Fk(!1);var x=y.width,S=y.height;t.location.h(y.x,y.y),t.l.length=0,null!==g&&(PM(t,x,S,g),e.Tc(f=g.measuredBounds),t.l.push(f)),f=Ht.alloc();for(var M=A.alloc(),T=A.alloc(),N=0;N<n;N++){var P=o[N];if(P!==g)if(P.isPanelMain&&P instanceof At){PM(t,x,S,P);var I=P.measuredBounds;e.Tc(I),t.l.push(I)}else if(2>u)P.measure(1/0,1/0,0,0),e.Tc(I=P.measuredBounds),t.l.push(I);else{var O=P.segmentIndex,b=P.segmentFraction,B=P.alignmentFocus;B.nc()&&(B=ie);var K=P.segmentOrientation,rt=P.segmentOffset;if(isNaN(O)){var tt=p.na;I=ye(),tt.Xv(b,I);var mt=A.allocAt(I[0],I[1]);if(mt.add(p.i(0)),tt.type===Tn||(tt=tt.figures.first()),mt.offset(-tt.startX,-tt.startY),tt=I[2],K!==Un){var ht=p.computeAngle(P,K,tt);P.Yb=ht}ht=mt.x-y.x;var $=mt.y-y.y;A.free(mt),Jt(I)}else if(O<-u||O>=u)$=p.midPoint,tt=p.midAngle,K!==Un&&(ht=p.computeAngle(P,K,tt),P.Yb=ht),ht=$.x-y.x,$=$.y-y.y;else{if(ht=0,0<=O?($=v.J(O),I=O<u-1?v.J(O+1):$):($=v.J(ht=u+O),I=0<ht?v.J(ht-1):$),$.Na(I)){0<=O?(tt=0<O?v.J(O-1):$,ht=O<u-2?v.J(O+2):I):(tt=ht<u-1?v.J(ht+1):$,ht=1<ht?v.J(ht-2):I),mt=tt.He($);var zt=I.He(ht);tt=mt>zt+10?0<=O?tt.Sa($):$.Sa(tt):zt>mt+10?0<=O?I.Sa(ht):ht.Sa(I):0<=O?tt.Sa(ht):ht.Sa(tt)}else tt=0<=O?$.Sa(I):I.Sa($);K!==Un&&(ht=p.computeAngle(P,K,tt),P.Yb=ht),ht=$.x+(I.x-$.x)*b-y.x,$=$.y+(I.y-$.y)*b-y.y}P.measure(1/0,1/0,0,0),I=P.measuredBounds;var Lt=0;P instanceof At&&(Lt=P.strokeWidth),zt=(mt=P.naturalBounds).width+Lt;var Kt=mt.height+Lt;f.reset(),f.translate(-I.x,-I.y),f.scale(P.scale,P.scale),f.rotate(K===Un?P.angle:tt,zt/2,Kt/2),K!==Gl&&K!==$l||f.rotate(90,zt/2,Kt/2),K!==ol&&K!==sl||f.rotate(-90,zt/2,Kt/2),K===Em&&(45<tt&&135>tt||225<tt&&315>tt)&&f.rotate(-tt,zt/2,Kt/2),mt=new z(0,0,zt,Kt),M.tj(mt,B),f.sa(M),B=Lt/2*P.scale-M.x,P=Lt/2*P.scale-M.y,T.assign(rt),Lt=isNaN(rt.x);var _e=isNaN(rt.y);if(Lt||_e){zt=zt/2+3,Kt=Kt/2+3;var On=45<=tt&&135>=tt,Ne=225<=tt&&315>=tt;K===Un&&(On||Ne)?(T.x=_e?zt:rt.y,T.y=Lt?Kt:rt.x,On?0<=O||isNaN(O)&&.5>b||!Lt||(T.y=-Kt):Ne&&((0<=O||isNaN(O)&&.5>b)&&Lt&&(T.y=-Kt),_e&&(T.x=-zt))):(Lt&&(T.x=0<=O||isNaN(O)&&.5>b?zt:-zt),_e&&(T.y=-Kt),T.rotate(tt))}else T.rotate(tt);ht+=T.x,$+=T.y,mt.set(I),mt.h(ht+B,$+P,I.width,I.height),t.l.push(mt),e.Tc(mt)}}if(null!==h)for(o=h.labelNodes;o.next();)o.value.measure(1/0,1/0);t.yg=e,(t=t.location).h(t.x+e.x,t.y+e.y),Ao(a,e.width||0,e.height||0),Ht.free(f),A.free(M),A.free(T)}}}},bd.prototype.arrange=function(t,e){var n=e.length;if(t instanceof Gt||t instanceof Q){var o=null,a=null,u=null;t instanceof Q&&(a=o=t),t instanceof Gt&&(o=(u=t).adornedPart);var h=t instanceof Gt?null:o.path;if(0!==t.l.length){var f=t.l,p=0;if(null!==h&&p<t.l.length){var g=f[p];p++,h.arrange(g.x-t.yg.x,g.y-t.yg.y,g.width,g.height)}for(g=0;g<n;g++){var y=e[g];if(y!==h&&p<t.l.length){var v=f[p];p++,y.arrange(v.x-t.yg.x,v.y-t.yg.y,v.width,v.height)}}}if(2<=(n=(e=o.points).count)&&t instanceof Q)for(o=t.labelNodes;o.next();){var x=t;f=(h=o.value).segmentIndex,p=h.segmentFraction;var S=h.alignmentFocus;if(g=h.segmentOrientation,y=h.segmentOffset,isNaN(f)){v=x.na;var M=ye();v.Xv(p,M);var T=A.allocAt(M[0],M[1]);T.add(x.i(0)),v.type===Tn||(v=v.figures.first()),T.offset(-v.startX,-v.startY),v=M[2],g!==Un&&(x=x.computeAngle(h,g,v),h.angle=x),x=T.x;var N=T.y;A.free(T),Jt(M)}else if(f<-n||f>=n)N=x.midPoint,v=x.midAngle,g!==Un&&(x=x.computeAngle(h,g,v),h.angle=x),x=N.x,N=N.y;else{if(T=0,0<=f?(M=e.j[f],N=f<n-1?e.j[f+1]:M):(M=e.j[T=n+f],N=0<T?e.j[T-1]:M),M.Na(N)){0<=f?(v=0<f?e.j[f-1]:M,T=f<n-2?e.j[f+2]:N):(v=T<n-1?e.j[T+1]:M,T=1<T?e.j[T-2]:N);var P=v.He(M),I=N.He(T);v=P>I+10?0<=f?v.Sa(M):M.Sa(v):I>P+10?0<=f?N.Sa(T):T.Sa(N):0<=f?v.Sa(T):T.Sa(v)}else v=0<=f?M.Sa(N):N.Sa(M);g!==Un&&(x=x.computeAngle(h,g,v),h.angle=x),x=M.x+(N.x-M.x)*p,N=M.y+(N.y-M.y)*p}if(S.Wt())h.location=new A(x,N);else{S.nc()&&(S=ie),(M=Ht.alloc()).reset(),M.scale(h.scale,h.scale),M.rotate(h.angle,0,0);var O=h.naturalBounds;T=z.allocAt(0,0,O.width,O.height),(P=A.alloc()).tj(T,S),M.sa(P),S=-P.x,I=-P.y;var b=O.width,B=O.height;(O=A.alloc()).assign(y);var K=isNaN(y.x),rt=isNaN(y.y);if(K||rt){b=b/2+3,B=B/2+3;var tt=45<=v&&135>=v,mt=225<=v&&315>=v;g===Un&&(tt||mt)?(O.x=rt?b:y.y,O.y=K?B:y.x,tt?0<=f||isNaN(f)&&.5>p||!K||(O.y=-B):mt&&((0<=f||isNaN(f)&&.5>p)&&K&&(O.y=-B),rt&&(O.x=-b))):(K&&(O.x=0<=f||isNaN(f)&&.5>p?b:-b),rt&&(O.y=-B),O.rotate(v))}else O.rotate(v);x+=O.x,N+=O.y,M.Qw(T),f=A.allocAt(x+(S+=T.x),N+(I+=T.y)),h.move(f),A.free(f),A.free(O),A.free(P),z.free(T),Ht.free(M)}}null!==u?u.Fk(!1):null!==a&&a.Fk(!1)}},Y(qg,Bn),qg.prototype.measure=function(t,e,n,o,a,u,h){var f=t.rb();t.dh=[];var p=f.margin,g=p.right+p.left,y=p.top+p.bottom;f.measure(e,n,u,h);var v=f.measuredBounds,x=new z(-p.left,-p.top,Math.max(v.width+g,0),Math.max(v.height+y,0));t.dh.push(x),a.assign(x);for(var S=f.geometry,M=f.strokeWidth,T=S.flattenedSegments,N=S.flattenedLengths,P=S.flattenedTotalLength,I=T.length,O=0,b=0,B=ye(),K=0;K<I;K++){var rt=T[K],tt=[];b=O=0;for(var mt=rt.length,ht=0;ht<mt;ht+=2){var $=rt[ht],zt=rt[ht+1];if(0!==ht){var Lt=180*Math.atan2(zt-b,$-O)/Math.PI;0>Lt&&(Lt+=360),tt.push(Lt)}O=$,b=zt}B.push(tt)}if(null===t.eh){for(var Kt=[],_e=t.W.j,On=_e.length,Ne=0;Ne<On;Ne++){var Pe=_e[Ne],vs=[];if(Kt.push(vs),Pe.visible){var zi=Pe.interval;if(!(0>zi))for(var $i=0;$i<On;$i++)if($i!==Ne){var bn=_e[$i];if(bn.visible&&Pe.constructor===bn.constructor){var Wo=bn.interval;Wo>zi&&vs.push(Wo)}}}}t.eh=Kt}var Ku=t.eh,Zu=t.W.j,Sa=Zu.length,hi=0,ec=0,Ju=P;t.Mj=[];for(var nc,ic=0;ic<Sa;ic++){var yn=Zu[ic];if(nc=[],yn.visible&&yn!==f){var rc=Math.abs(yn.interval),vl=t.graduatedTickUnit;if(!(2>vl*rc*P/t.graduatedRange)){var oc=N[0][0],Xo=0,ci=0;ec=P*yn.graduatedStart-1e-4,Ju=P*yn.graduatedEnd+1e-4;var sc=vl*rc,vn=t.graduatedTickBase;if(vn<t.graduatedMin){var Nf=(t.graduatedMin-vn)/sc;vn+=(Nf=Nf%1==0?Nf:Math.floor(Nf+1))*sc}else vn>t.graduatedMin+sc&&(vn-=Math.floor((vn-t.graduatedMin)/sc)*sc);for(var ac=Ku[ic],ay=vn,Da=1;vn<t.graduatedMax+5e-8;Da++){t:{for(var jt=ac.length,lc=0;lc<jt;lc++)if(R.aa((vn-t.graduatedTickBase)%(ac[lc]*t.graduatedTickUnit),0)){var uc=!1;break t}uc=!0}if(uc&&(null===yn.graduatedSkip||!yn.graduatedSkip(vn))&&((hi=(vn-t.graduatedMin)*P/t.graduatedRange)>P&&(hi=P),ec<=hi&&hi<=Ju)){for(var Eo=B[Xo][ci],Ko=N[Xo][ci];Xo<N.length;){for(;hi>oc&&ci<N[Xo].length-1;)ci++,Eo=B[Xo][ci],oc+=Ko=N[Xo][ci];if(hi<=oc)break;Eo=B[++Xo][ci=0],oc+=Ko=N[Xo][ci]}var sr=T[Xo],nu=sr[2*ci],iu=sr[2*ci+1],qe=(hi-(oc-Ko))/Ko,ly=new A(nu+(sr[2*ci+2]-nu)*qe+M/2-S.bounds.x,iu+(sr[2*ci+3]-iu)*qe+M/2-S.bounds.y);ly.scale(f.scale,f.scale);var Us=Eo,ru=B[Xo];if(1e-4>qe?0<ci?Us=ru[ci-1]:R.aa(sr[0],sr[sr.length-2])&&R.aa(sr[1],sr[sr.length-1])&&(Us=ru[ru.length-1]):.9999<qe&&(ci+1<ru.length?Us=ru[ci+1]:R.aa(sr[0],sr[sr.length-2])&&R.aa(sr[1],sr[sr.length-1])&&(Us=ru[0])),Eo!==Us&&(180<Math.abs(Eo-Us)&&(Eo<Us?Eo+=360:Us+=360),Eo=(Eo+Us)/2%360),yn instanceof le){var ws="";""!==(ws=null!==yn.graduatedFunction?null!=(ws=yn.graduatedFunction(vn))?ws.toString():"":(+vn.toFixed(2)).toString())&&nc.push({Jm:ly,angle:Eo,text:ws})}else nc.push({Jm:ly,angle:Eo})}vn=ay+Da*sc}}}t.Mj.push(nc)}Jt(B);var bp=t.Mj;if(null!==bp)for(var uy=o.length,ou=0;ou<uy;ou++){var fi=o[ou],Hs=bp[ou];if(fi.visible&&fi!==f&&0!==Hs.length){if(fi instanceof At){var Gn=t,Lp=a,ni=fi.alignmentFocus;ni.nc()&&(ni=es);var jr=fi.angle;fi.Yb=0,fi.measure(1/0,1/0,0,0),fi.Yb=jr;var Dr=fi.measuredBounds,Gs=Dr.width,To=Dr.height,Qu=z.allocAt(0,0,Gs,To),Br=A.alloc();Br.tj(Qu,ni),z.free(Qu);for(var hc=-Br.x,cc=-Br.y,po=new z,wl=Hs.length,su=0;su<wl;su++)for(var xl=Hs[su],zs=xl.Jm.x,xs=xl.Jm.y,Ea=xl.angle,fc=0;4>fc;fc++){switch(fc){case 0:Br.h(hc,cc);break;case 1:Br.h(hc+Gs,cc);break;case 2:Br.h(hc,cc+To);break;case 3:Br.h(hc+Gs,cc+To)}Br.rotate(Ea+fi.angle),Br.offset(zs,xs),0===su&&0===fc?po.h(Br.x,Br.y,0,0):po.Oe(Br),Br.offset(-zs,-xs),Br.rotate(-Ea-fi.angle)}A.free(Br),null!==Gn.dh&&Gn.dh.push(po),Kn(Lp,po.x,po.y,po.width,po.height)}else if(fi instanceof le){var Ta=t,hy=a;null===Ta.yh&&(Ta.yh=new le);var ar=Ta.yh;Uo(ar,fi);var $e=fi.alignmentFocus;$e.nc()&&($e=es);for(var Er=fi.segmentOrientation,_a=fi.segmentOffset,au=new z,Fp=0,Na=0,Tr=0,lu=0,Pf=0,cy=Hs.length,Pa=0;Pa<cy;Pa++){var Zo=Hs[Pa];Fp=Zo.Jm.x,Na=Zo.Jm.y,Tr=Zo.angle,Pf=lu=fi.angle,Er!==Un&&(lu=Q.computeAngle(Er,Pf=Er===ip||Er===zl?Tr+fi.angle:Tr)),ar.Yb=lu,ar.text=Zo.text||"",ar.measure(1/0,1/0,0,0);var $s=ar.measuredBounds,Aa=ar.naturalBounds,ka=Aa.width,Ys=Aa.height,Ws=Ht.alloc();Ws.reset(),Ws.translate(-$s.x,-$s.y),Ws.scale(ar.scale,ar.scale),Ws.rotate(Pf,ka/2,Ys/2),Er!==Gl&&Er!==$l||Ws.rotate(90,ka/2,Ys/2),Er!==ol&&Er!==sl||Ws.rotate(-90,ka/2,Ys/2),Er===Em&&(45<Tr&&135>Tr||225<Tr&&315>Tr)&&Ws.rotate(-Tr,ka/2,Ys/2);var fy=z.allocAt(0,0,ka,Ys),Cl=A.alloc();Cl.tj(fy,$e),Ws.sa(Cl);var Ml=-Cl.x,Y0=-Cl.y,_o=A.alloc();_o.assign(_a),isNaN(_o.x)&&(_o.x=ka/2+3),isNaN(_o.y)&&(_o.y=-(Ys/2+3)),_o.rotate(Tr);var qu=new z(Fp+=_o.x+Ml,Na+=_o.y+Y0,$s.width,$s.height),dc=new z($s.x,$s.y,$s.width,$s.height),pc=new z(Aa.x,Aa.y,Aa.width,Aa.height);Zo.DA=lu,Zo.lineCount=ar.lineCount,Zo.lines=[ar.ub,ar.Di,ar.oe,ar.Be,ar.Qb,ar.lb,ar.me],Zo.actualBounds=qu,Zo.measuredBounds=dc,Zo.naturalBounds=pc,0===Pa?au.assign(qu):au.Tc(qu),A.free(_o),A.free(Cl),z.free(fy),Ht.free(Ws)}null!==Ta.dh&&Ta.dh.push(au),Kn(hy,au.x,au.y,au.width,au.height)}tr(fi,!1)}}},qg.prototype.arrange=function(t,e,n){if(null!==t.dh){var o=t.rb(),a=t.Mj;if(null!==a){var u=t.dh,h=0,f=u[h];h++,null!==o&&o.arrange(f.x-n.x,f.y-n.y,f.width,f.height);for(var p=e.length,g=0;g<p;g++){var y=e[g];f=a[g],y.visible&&y!==o&&0!==f.length&&(f=u[h],h++,y.arrange(f.x-n.x,f.y-n.y,f.width,f.height))}t.dh=null}}},qg.prototype.cc=function(t,e,n){var o=n.xi;n.xi=!0;var a=t.naturalBounds,u=a.width;a=a.height,e.save(),e.beginPath(),e.rect(-1,-1,u+1,a+1),e.clip(),(u=t.rb()).cc(e,n),0>=(a=t.Cf()*n.scale)&&(a=1);for(var h=u.actualBounds,f=t.W.j,p=t.Mj,g=f.length,y=0;y<g;y++){var v=f[y],x=p[y],S=x.length;if(v.visible&&v!==u&&0!==x.length)if(v instanceof At){if(!(2>t.graduatedTickUnit*v.interval*u.geometry.flattenedTotalLength/t.graduatedRange*a)){var M=v.measuredBounds,T=v.strokeWidth*v.scale,N=v.alignmentFocus;N.nc()&&(N=es);for(var P=0;P<S;P++){var I=x[P].Jm,O=x[P].angle,b=N,B=v.qb;B.reset(),B.translate(I.x+h.x,I.y+h.y),B.rotate(O+v.angle,0,0),B.translate(-M.width*b.x+b.offsetX+T/2,-M.height*b.y+b.offsetY+T/2),B.scale(v.scale,v.scale),Kc(v,!1),v.Yh.set(v.qb),v.ql=v.scale,Bl(v,!1),v.cc(e,n),v.qb.reset()}}}else if(v instanceof le)for(null===t.yh&&(t.yh=new le),Uo(M=t.yh,v),v=0;v<S;v++)(T=x[v]).actualBounds&&T.measuredBounds&&T.naturalBounds&&(M.Ub=T.text||"",M.Yb=T.DA||0,M.ad=T.lineCount||0,void 0!==(N=T.lines)&&(M.ub=N[0],M.Di=N[1],M.oe=N[2],M.Be=N[3],M.Qb=N[4],M.lb=N[5],M.me=N[6]),T.naturalBounds&&(M.rc=T.naturalBounds),T.actualBounds&&M.arrange((N=T.actualBounds).x,N.y,N.width,N.height),M.arrange((N=T.actualBounds).x,N.y,N.width,N.height),P=T.measuredBounds,T=T.naturalBounds,(I=M.qb).reset(),I.translate(N.x+h.x,N.y+h.y),I.translate(-P.x,-P.y),Iu(M,I,T.x,T.y,T.width,T.height),Kc(M,!1),M.Yh.set(M.qb),M.ql=M.scale,Bl(M,!1),M.cc(e,n))}n.xi=o,e.restore(),e.uc(!0)},Y(X,Z),X.prototype.cloneProtected=function(t){if(Z.prototype.cloneProtected.call(this,t),t.pa=this.pa,t.ib=this.ib.G(),t.Kn=this.Kn.G(),t.Uf=this.Uf,t.pa===X.Table){t.Fj=this.Fj.G(),t.Vg=this.Vg,t.ri=this.ri,t.pi=this.pi,t.Ug=this.Ug,t.Tg=this.Tg,t.oi=this.oi;var e=[];if(0<this.vb.length)for(var n=this.vb,o=n.length,a=0;a<o;a++)if(void 0!==n[a]){var u=n[a].copy();u.sj(t),e[a]=u}if(t.vb=e,e=[],0<this.sb.length)for(o=(n=this.sb).length,a=0;a<o;a++)void 0!==n[a]&&((u=n[a].copy()).sj(t),e[a]=u);t.sb=e,t.dk=this.dk,t.Cj=this.Cj,t.Xi=this.Xi,t.Fi=this.Fi}t.mq=this.mq,t.ko=this.ko.G(),t.lo=this.lo.G(),t.ho=this.ho,t.fo=this.fo,t.jo=this.jo,t.io=this.io,t.Mj=this.Mj,t.eh=this.eh,t.nb=this.nb,t.ki=this.ki,t.yo=this.yo,t.Bi=this.Bi,t.te=this.te,t.Kl=this.Kl,t.yg.assign(this.yg),t.Mg=this.Mg,null!==this.Gp&&(t.Gp=this.Gp)},X.prototype.Af=function(t){Z.prototype.Af.call(this,t),t.W=this.W;for(var e=t.W.j,n=e.length,o=0;o<n;o++)e[o].qg=t;t.Ui=null},X.prototype.copy=function(){var t=Z.prototype.copy.call(this);if(null!==t){for(var e=this.W.j,n=e.length,o=0;o<n;o++){var a=e[o].copy();a.sj(t),a.ak=null;var u=t.W,h=u.count;if(u.wb(h,a),null!==(u=t.part)){u.Xj=null,null!==a.portId&&u instanceof ot&&(u.Mh=!0);var f=t.diagram;null!==f&&f.undoManager.isUndoingRedoing||u.bb(rn,"elements",t,null,a,null,h)}}return t}return null},(D=X.prototype).toString=function(){return"Panel("+this.type+")#"+En(this)},D.hp=function(t){Z.prototype.hp.call(this,t);for(var e=this.W.j,n=e.length,o=0;o<n;o++)e[o].hp(t)},D.ej=function(t,e){if(this.pa===X.Grid)this.pa.cc(this,t,e);else if(this.pa===X.Graduated)this.pa.cc(this,t,e);else{this.pa===X.Table&&(t.lineCap="butt",Ld(this,t,!0,this.vb,!0),Ld(this,t,!1,this.sb,!0),tm(this,t,!0,this.vb),tm(this,t,!1,this.sb),Ld(this,t,!0,this.vb,!1),Ld(this,t,!1,this.sb,!1));var n=this.isClipping&&this.pa===X.Spot;n&&t.save();for(var o=this.rb(),a=this.W.j,u=a.length,h=0;h<u;h++){var f=a[h];n&&f===o&&(t.clipInsteadOfFill=!0),f.cc(t,e),n&&f===o&&(t.clipInsteadOfFill=!1)}n&&(t.restore(),t.uc(!0))}},D.yk=function(t,e,n,o,a){var u=this.he(),h=this.transform,f=1/(h.m11*h.m22-h.m12*h.m21),p=h.m22*f,g=-h.m12*f,y=-h.m21*f,v=h.m11*f,x=f*(h.m21*h.dy-h.m22*h.dx),S=f*(h.m12*h.dx-h.m11*h.dy);if(null!==this.areaBackground)return R.Ef((h=this.actualBounds).left,h.top,h.right,h.bottom,t,e,n,o,a);if(null!==this.background)return u=t*p+e*y+x,f=t*g+e*v+S,t=n*p+o*y+x,p=n*g+o*v+S,a.h(0,0),u=R.Ef(0,0,(n=this.naturalBounds).width,n.height,u,f,t,p,a),a.transform(h),u;u||(p=1,y=g=0,v=1,S=x=0),f=t*p+e*y+x,t=t*g+e*v+S,a.h(p=n*p+o*y+x,n=n*g+o*v+S),o=(p-f)*(p-f)+(n-t)*(n-t),g=!1,S=(v=this.W.j).length,y=A.alloc(),x=null,e=1/0;var M=null,T=this.isClipping&&this.pa===X.Spot;T&&(M=A.alloc(),(g=(x=this.rb()).yk(f,t,p,n,M))&&(e=(f-M.x)*(f-M.x)+(t-M.y)*(t-M.y)));for(var N=0;N<S;N++){var P=v[N];P.visible&&P!==x&&P.yk(f,t,p,n,y)&&(g=!0,(P=(f-y.x)*(f-y.x)+(t-y.y)*(t-y.y))<o&&(o=P,a.set(y)))}return T&&(e>o&&a.set(M),A.free(M)),A.free(y),u&&a.transform(h),g},D.o=function(t){if(!us(this)){Z.prototype.o.call(this,t),t=null,(this.pa===X.Auto||this.pa===X.Link)&&(t=this.rb());for(var e=this.W.j,n=e.length,o=0;o<n;o++){var a=e[o];if((a===t||a.isPanelMain)&&a.o(!0),!a.desiredSize.u()){var u=jo(a,!1);(a instanceof Ni||a instanceof X||a instanceof le||u!==un)&&a.o(!0)}}}},D.Ak=function(){if(!us(this)){tr(this,!0),Ou(this,!0);for(var t=this.W.j,e=t.length,n=0;n<e;n++)t[n].Ak()}},D.Gl=function(){if(0==(2048&this.F)){Kc(this,!0),Bl(this,!0);for(var t=this.W.j,e=t.length,n=0;n<e;n++)t[n].cw()}},D.cw=function(){Bl(this,!0);for(var t=this.W.j,e=t.length,n=0;n<e;n++)t[n].cw()},D.Gm=function(t,e,n,o){var a=this.yg;a.h(0,0,0,0);var u=this.desiredSize,h=this.minSize;void 0===n&&(n=h.width,o=h.height),n=Math.max(n,h.width),o=Math.max(o,h.height);var f=this.maxSize;isNaN(u.width)||(t=Math.min(u.width,f.width)),isNaN(u.height)||(e=Math.min(u.height,f.height)),t=Math.max(n,t),e=Math.max(o,e);var p=this.ib;t=Math.max(t-p.left-p.right,0),e=Math.max(e-p.top-p.bottom,0);var g=this.W.j;0!==g.length&&this.pa.measure(this,t,e,g,a,n,o),t=a.width+p.left+p.right,p=a.height+p.top+p.bottom,isFinite(u.width)&&(t=u.width),isFinite(u.height)&&(p=u.height),t=Math.min(f.width,t),p=Math.min(f.height,p),t=Math.max(h.width,t),p=Math.max(h.height,p),Ao(a,t=Math.max(n,t),p=Math.max(o,p)),Ao(this.naturalBounds,t,p),As(this,0,0,t,p)},D.rb=function(){if(null===this.Ui){var t=this.W.j,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var o=t[n];if(!0===o.isPanelMain)return this.Ui=o}this.Ui=t[0]}return this.Ui},D.Hh=function(t,e,n,o){var a=this.W.j;if(this.actualBounds.h(t,e,n,o),0!==a.length){if(!this.desiredSize.u()){t=jo(this,!0);var u=this.measuredBounds;e=u.width,u=u.height;var h=this.jh,f=h.left+h.right;switch(h=h.top+h.bottom,e===n&&u===o&&(t=un),t){case un:(e>n||u>o)&&(this.o(),this.measure(e>n?n:e,u>o?o:u,0,0));break;case Je:this.o(!0),this.measure(n+f,o+h,0,0);break;case ei:this.o(!0),this.measure(n+f,u+h,0,0);break;case li:this.o(!0),this.measure(e+f,o+h,0,0)}}this.pa.arrange(this,a,this.yg)}},D.Jh=function(t){var e=this.naturalBounds,n=Jn(this);if(ts(0,0,e.width,e.height,t.x,t.y)){for(var o=(e=this.W.j).length,a=A.allocAt(0,0);o--;){var u=e[o];if((u.visible||u===n)&&(bi(a.set(t),u.transform),u.$(a)))return A.free(a),!0}return A.free(a),!(null===this.mb&&null===this.ec)}return!1},D.Ht=function(t){if(this.dl===t)return this;for(var e=this.W.j,n=e.length,o=0;o<n;o++){var a=e[o].Ht(t);if(null!==a)return a}return null},D.Zm=function(t,e){if(e(this,t),t instanceof X)for(var n=(t=t.W.j).length,o=0;o<n;o++)this.Zm(t[o],e)},D.xm=function(t){return Lv(this,this,t)},D.ab=function(t){if(this.name===t)return this;var e=this.W.j,n=e.length;null===this.Bi&&null===this.te||(n=om(this));for(var o=0;o<n;o++){var a=e[o];if(a instanceof X){var u=a.ab(t);if(null!==u)return u}if(a.name===t)return a}return null},D.he=function(){return!(this.type===X.TableRow||this.type===X.TableColumn)},D.Vb=function(t,e,n){if(!1===this.pickable||(void 0===e&&(e=null),void 0===n&&(n=null),Ri(this)))return null;var o=this.naturalBounds,a=1/this.Cf(),u=this.he(),h=u?t:bi(A.allocAt(t.x,t.y),this.transform),f=this.diagram,p=10,g=5;if(null!==f&&(g=(p=f.Bm("extraTouchArea"))/2),ts(-g*a,-g*a,o.width+p*a,o.height+p*a,h.x,h.y)){if(!this.isAtomic){var y=(a=this.W.j).length;if(f=A.alloc(),g=(p=this.isClipping&&this.pa===X.Spot)?this.rb():null,p&&(g.he()?bi(f.set(t),g.transform):f.set(t),!g.$(f)))return A.free(f),u||A.free(h),null;for(var v=Jn(this);y--;){var x=a[y];if((x.visible||x===v)&&(x.he()?bi(f.set(t),x.transform):f.set(t),!p||x!==g)){var S=null;if(x instanceof X?S=x.Vb(f,e,n):!0===x.pickable&&x.$(f)&&(S=x),null!==S&&(null!==e&&(S=e(S)),null!==S&&(null===n||n(S))))return A.free(f),u||A.free(h),S}}A.free(f)}return null===this.background&&null===this.areaBackground?(u||A.free(h),null):(t=ts(0,0,o.width,o.height,h.x,h.y)?this:null,u||A.free(h),t)}return u||A.free(h),null},D.hj=function(t,e,n,o){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var a=this.naturalBounds,u=this.he(),h=u?t:bi(A.allocAt(t.x,t.y),this.transform);if(a=ts(0,0,a.width,a.height,h.x,h.y),this.type===X.TableRow||this.type===X.TableColumn||a){if(!this.isAtomic){for(var f=this.W.j,p=f.length,g=A.alloc(),y=Jn(this);p--;){var v=f[p];if(v.visible||v===y){v.he()?bi(g.set(t),v.transform):g.set(t);var x=v;(null!==(v=v instanceof X?v:null)?v.hj(g,e,n,o):x.$(g))&&!1!==x.pickable&&(null!==e&&(x=e(x)),null===x||null!==n&&!n(x)||o.add(x))}}A.free(g)}return u||A.free(h),a&&(null!==this.background||null!==this.areaBackground)}return u||A.free(h),!1},D.Bf=function(t,e,n,o,a,u){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var h=u;if(void 0===u&&(h=Ht.alloc()).reset(),h.multiply(this.transform),this.Ih(t,h))return im(this,e,n,a),void 0===u&&Ht.free(h),!0;if(this.Oc(t,h)){if(!this.isAtomic)for(var f=Jn(this),p=this.W.j,g=p.length;g--;){var y=p[g];if(y.visible||y===f){var v=y.actualBounds,x=this.naturalBounds;v.x>x.width||v.y>x.height||0>v.x+v.width||0>v.y+v.height||(v=y,y=y instanceof X?y:null,(x=Ht.alloc()).set(h),(null!==y?y.Bf(t,e,n,o,a,x):Ug(v,t,o,x))&&(null!==e&&(v=e(v)),null===v||null!==n&&!n(v)||a.add(v)),Ht.free(x))}}return void 0===u&&Ht.free(h),o}return void 0===u&&Ht.free(h),!1},D.Fg=function(t,e,n,o,a,u){if(!1===this.pickable)return!1;void 0===n&&(n=null),void 0===o&&(o=null);var h=this.naturalBounds,f=this.he(),p=f?t:bi(A.allocAt(t.x,t.y),this.transform),g=f?e:bi(A.allocAt(e.x,e.y),this.transform),y=p.He(g),v=0<p.x&&p.x<h.width&&0<p.y&&p.y<h.height||Di(p.x,p.y,0,0,0,h.height)<=y||Di(p.x,p.y,0,h.height,h.width,h.height)<=y||Di(p.x,p.y,h.width,h.height,h.width,0)<=y||Di(p.x,p.y,h.width,0,0,0)<=y;if(h=p.rd(0,0)<=y&&p.rd(0,h.height)<=y&&p.rd(h.width,0)<=y&&p.rd(h.width,h.height)<=y,f||(A.free(p),A.free(g)),v){if(!this.isAtomic){p=A.alloc(),g=A.alloc(),y=Jn(this);for(var x=this.W.j,S=x.length;S--;){var M=x[S];if(M.visible||M===y){var T=M.actualBounds,N=this.naturalBounds;(!f||!(T.x>N.width||T.y>N.height||0>T.x+T.width||0>T.y+T.height))&&(M.he()?(T=M.transform,bi(p.set(t),T),bi(g.set(e),T)):(p.set(t),g.set(e)),T=M,(null!==(M=M instanceof X?M:null)?M.Fg(p,g,n,o,a,u):T.sy(p,g,a))&&(null!==n&&(T=n(T)),null===T||null!==o&&!o(T)||u.add(T)))}}A.free(p),A.free(g)}return a?v:h}return!1},D.add=function(t){this.wb(this.W.count,t)},D.J=function(t){return this.W.J(t)},D.wb=function(t,e){e instanceof wt&&W("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.Hg(e))&&(this===e&&W("Cannot make a Panel contain itself: "+this.toString()),W("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var n=e.panel;if(null!==n&&n!==this&&W("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.pa!==X.Grid||e instanceof At||W("Can only add Shapes to a Grid Panel, not: "+e),this.pa!==X.Graduated||e instanceof At||e instanceof le||W("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.sj(this),e.ak=null,null!==this.itemArray){var o=e.data;null!==o&&"object"==typeof o&&(null===this.Yd&&(this.Yd=new Et),this.Yd.add(o,e))}var a=this.W;if(o=-1,n===this){for(var u=-1,h=this.W.j,f=h.length,p=0;p<f;p++)if(h[p]===e){u=p;break}if(-1!==u){if(u===t||u+1>=a.count&&t>=a.count)return;a.cb(u),o=u}else W("element "+e.toString()+" has panel "+n.toString()+" but is not contained by it.")}(0>t||t>a.count)&&(t=a.count),a.wb(t,e),(0===t||e.isPanelMain)&&(this.Ui=null),us(this)||this.o(),e.o(!1),(null!==e.portId||e instanceof X&&!0===e.Mh)&&(this.Mh=!0),this.eh=null,null!==(n=this.part)&&(n.Xj=null,n.kh=NaN,this.Mh&&n instanceof ot&&(n.Mh=!0),n.Mh&&n instanceof ot&&(n.tc=null),null!==(a=this.diagram)&&a.undoManager.isUndoingRedoing||(-1!==o&&n.bb(be,"elements",this,e,null,o,null),n.bb(rn,"elements",this,null,e,null,t),this.Ig()||Ru(this,e,!1)))},D.remove=function(t){for(var e=this.W.j,n=e.length,o=-1,a=0;a<n;a++)if(e[a]===t){o=a;break}-1!==o&&this.Nc(o,!0)},D.cb=function(t){0<=t&&this.Nc(t,!0)},D.Nc=function(t,e){var n=this.W,o=n.J(t);if(o.ak=null,o.sj(null),null!==this.Yd){var a=o.data;"object"==typeof a&&this.Yd.remove(a)}n.cb(t),tr(this,!1),this.o(),this.Ui===o&&(this.Ui=null),this.eh=null;var u=this.part;null!==u&&(u.Xj=null,u.kh=NaN,u.Mb(),u instanceof ot&&(o instanceof X?o.Zm(o,function(h,f){Kd(u,f,e)}):Kd(u,o,e)),null!==(n=this.diagram)&&n.undoManager.isUndoingRedoing||u.bb(be,"elements",this,o,null,t,null))},X.prototype.getRowDefinition=function(t){0>t&&qt(t,">= 0",X,"getRowDefinition:idx"),t=Math.round(t);var e=this.vb;if(void 0===e)return null;if(void 0===e[t]){var n=new gn;n.sj(this),n.isRow=!0,n.index=t,e[t]=n}return e[t]},X.prototype.vw=function(t){0>t&&qt(t,">= 0",X,"removeRowDefinition:idx"),t=Math.round(t);var e=this.vb;void 0!==e&&(this.bb(be,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.o())},X.prototype.getColumnDefinition=function(t){0>t&&qt(t,">= 0",X,"getColumnDefinition:idx"),t=Math.round(t);var e=this.sb;if(void 0===e)return null;if(void 0===e[t]){var n=new gn;n.sj(this),n.isRow=!1,n.index=t,e[t]=n}return e[t]},(D=X.prototype).tw=function(t){0>t&&qt(t,">= 0",X,"removeColumnDefinition:idx"),t=Math.round(t);var e=this.sb;void 0!==e&&(this.bb(be,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.o())},D.aA=function(t){if(0>t||this.type!==X.Table)return-1;for(var e=0,n=this.vb,o=n.length,a=this.Xi;a<o;a++){var u=n[a];if(void 0!==u&&t<(e+=u.total))break}return a},D.Tz=function(t){if(0>t||this.type!==X.Table)return-1;for(var e=0,n=this.sb,o=n.length,a=this.Fi;a<o;a++){var u=n[a];if(void 0!==u&&t<(e+=u.total))break}return a},D.qA=function(t,e){if(void 0===e&&(e=new A(NaN,NaN)),this.type!==X.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var n=this.rb();return n.geometry.Wv((t-this.graduatedMin)/this.graduatedRange,e),n.transform.sa(e)},D.rA=function(t){if(this.type!==X.Graduated)return NaN;var e=this.rb();return e.transform.Jd(t),e.geometry.wy(t)*this.graduatedRange+this.graduatedMin},D.Gz=function(t){void 0===t&&(t=!1);var e=this.copy();return AM(e,function(n){n instanceof X&&(n.ki=null,n.nb=null);var o=n.fb;null!==o&&(n.fb=null,o.each(function(a){n.bind(a.copy())})),null!==(o=n.Ng)&&(n.Ng=null,o.each(function(a){n.Rw(a.value.copy())}))}),t&&Lr(e),e},D.Ca=function(t){var e=this.ki;if(null!==e)for(void 0===t&&(t=""),e=e.iterator;e.next();){var n=e.value,o=n.sourceProperty;if((""===t||""===o||o===t)&&(o=n.targetProperty,null!==n.converter||""!==o)){o=this.data;var a=n.sourceName;if(null!==a)o=""===a||"/"===a||"."===a||".."===a?this:this.ab(a);else{var u=this.diagram;null!==u&&n.isToModel&&(o=u.model.modelData)}if(null!==o){u=this;var h=n.wj;if(-1!==h){if(null===(u=this.Ht(h)))continue}else null!==n.qd&&(u=n.qd);if("/"===a?o=u.part:"."===a?o=u:".."===a&&(o=u.panel),0!==(a=n.eq)){if(!(u instanceof X))continue;1===a?u=u.getColumnDefinition(n.nm):2===a&&(u=u.getRowDefinition(n.nm))}void 0!==u&&n.Uw(u,o)}}}},D.eu=function(){for(var t=om(this);this.W.length>t;)this.Nc(this.W.length-1,!1);if(null!==(t=this.itemArray))for(var e=t.length,n=0;n<e;n++)sm(this,t[n],n)},D.qy=function(t){return null==t||null===this.Yd?null:this.Yd.H(t)},L.Object.defineProperties(X.prototype,{type:{get:function(){return this.pa},set:function(t){var e=this.pa;e!==t&&(this.pa=t,this.pa===X.Grid?this.isAtomic=!0:this.pa===X.Table&&oo(this),this.o(),this.g("type",e,t))}},elements:{get:function(){return this.W.iterator}},naturalBounds:{get:function(){return this.rc}},padding:{get:function(){return this.ib},set:function(t){"number"==typeof t?(0>t&&qt(t,">= 0",X,"padding"),t=new te(t)):(0>t.left&&qt(t.left,">= 0",X,"padding:value.left"),0>t.right&&qt(t.right,">= 0",X,"padding:value.right"),0>t.top&&qt(t.top,">= 0",X,"padding:value.top"),0>t.bottom&&qt(t.bottom,">= 0",X,"padding:value.bottom"));var e=this.ib;e.w(t)||(this.ib=t=t.G(),this.o(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.Kn},set:function(t){var e=this.Kn;e.w(t)||(this.Kn=t=t.G(),this.o(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Uf},set:function(t){var e=this.Uf;e!==t&&(this.Uf=t,this.o(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return void 0===this.Fj?Qf:this.Fj},set:function(t){if(void 0!==this.Fj){"number"==typeof t&&(t=new te(t));var e=this.Fj;e.w(t)||(this.Fj=t=t.G(),this.o(),this.g("defaultSeparatorPadding",e,t))}}},defaultRowSeparatorStroke:{get:function(){return void 0===this.ri?null:this.ri},set:function(t){var e=this.ri;e!==t&&(null===t||"string"==typeof t||t instanceof Xt)&&(t instanceof Xt&&t.freeze(),this.ri=t,this.M(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return void 0===this.Vg?1:this.Vg},set:function(t){if(void 0!==this.Vg){var e=this.Vg;e!==t&&isFinite(t)&&0<=t&&(this.Vg=t,this.o(),this.g("defaultRowSeparatorStrokeWidth",e,t))}}},defaultRowSeparatorDashArray:{get:function(){return void 0===this.pi?null:this.pi},set:function(t){if(void 0!==this.pi){var e=this.pi;if(e!==t){if(null!==t){for(var n=t.length,o=0,a=0;a<n;a++){var u=t[a];"number"==typeof u&&0<=u&&isFinite(u)||W("defaultRowSeparatorDashArray value "+u+" at index "+a+" must be a positive number or zero."),o+=u}if(0===o){if(null===e)return;t=null}}this.pi=t,this.M(),this.g("defaultRowSeparatorDashArray",e,t)}}}},defaultColumnSeparatorStroke:{get:function(){return void 0===this.Tg?null:this.Tg},set:function(t){if(void 0!==this.Tg){var e=this.Tg;e!==t&&(null===t||"string"==typeof t||t instanceof Xt)&&(t instanceof Xt&&t.freeze(),this.Tg=t,this.M(),this.g("defaultColumnSeparatorStroke",e,t))}}},defaultColumnSeparatorStrokeWidth:{get:function(){return void 0===this.Ug?1:this.Ug},set:function(t){if(void 0!==this.Ug){var e=this.Ug;e!==t&&isFinite(t)&&0<=t&&(this.Ug=t,this.o(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}}},defaultColumnSeparatorDashArray:{get:function(){return void 0===this.oi?null:this.oi},set:function(t){if(void 0!==this.oi){var e=this.oi;if(e!==t){if(null!==t){for(var n=t.length,o=0,a=0;a<n;a++){var u=t[a];"number"==typeof u&&0<=u&&isFinite(u)||W("defaultColumnSeparatorDashArray value "+u+" at index "+a+" must be a positive number or zero."),o+=u}if(0===o){if(null===e)return;t=null}}this.oi=t,this.M(),this.g("defaultColumnSeparatorDashArray",e,t)}}}},viewboxStretch:{get:function(){return this.mq},set:function(t){var e=this.mq;e!==t&&(this.mq=t,this.o(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.ko},set:function(t){var e=this.ko;if(!e.w(t)){t.u()&&0!==t.width&&0!==t.height||W("Invalid Panel.gridCellSize: "+t),this.ko=t.G();var n=this.diagram;null!==n&&this===n.grid&&aa(n),this.M(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.lo},set:function(t){var e=this.lo;if(!e.w(t)){t.u()||W("Invalid Panel.gridOrigin: "+t),this.lo=t.G();var n=this.diagram;null!==n&&this===n.grid&&aa(n),this.M(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.ho},set:function(t){var e=this.ho;e!==t&&(this.ho=t,this.o(),this.g("graduatedMin",e,t),Xc(this)&&null!==(t=this.part)&&ku(this,t,"graduatedRange"))}},graduatedMax:{get:function(){return this.fo},set:function(t){var e=this.fo;e!==t&&(this.fo=t,this.o(),this.g("graduatedMax",e,t),Xc(this)&&null!==(t=this.part)&&ku(this,t,"graduatedRange"))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.jo},set:function(t){var e=this.jo;e!==t&&0<t&&(this.jo=t,this.o(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.io},set:function(t){var e=this.io;e!==t&&(this.io=t,this.o(),this.g("graduatedTickBase",e,t))}},Mh:{get:function(){return 0!=(8388608&this.F)},set:function(t){0!=(8388608&this.F)!==t&&(this.F^=8388608)}},rowCount:{get:function(){return void 0===this.vb?0:this.vb.length}},columnCount:{get:function(){return void 0===this.sb?0:this.sb.length}},rowSizing:{get:function(){return void 0===this.dk?jd:this.dk},set:function(t){if(void 0!==this.dk){var e=this.dk;e!==t&&(this.dk=t,this.o(),this.g("rowSizing",e,t))}}},columnSizing:{get:function(){return void 0===this.Cj?jd:this.Cj},set:function(t){if(void 0!==this.Cj){var e=this.Cj;e!==t&&(this.Cj=t,this.o(),this.g("columnSizing",e,t))}}},topIndex:{get:function(){return void 0===this.Xi?0:this.Xi},set:function(t){if(void 0!==this.Xi){var e=this.Xi;e!==t&&((!isFinite(t)||0>t)&&W("Panel.topIndex must be greater than zero and a real number, not: "+t),this.Xi=t,this.o(),this.g("topIndex",e,t))}}},leftIndex:{get:function(){return void 0===this.Fi?0:this.Fi},set:function(t){if(void 0!==this.Fi){var e=this.Fi;e!==t&&((!isFinite(t)||0>t)&&W("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.Fi=t,this.o(),this.g("leftIndex",e,t))}}},data:{get:function(){return this.nb},set:function(t){var e=this.nb;if(e!==t){var n=this instanceof wt&&!(this instanceof Gt);Lr(this),this.nb=t;var o=this.diagram;null!==o&&(n?(n=o.partManager,this instanceof Q?(null!==e&&n.Ue.remove(e),null!==t&&n.Ue.add(t,this)):this instanceof wt&&(null!==e&&n.Ve.remove(e),null!==t&&n.Ve.add(t,this))):null!==(n=this.panel)&&null!==n.Yd&&(null!==e&&n.Yd.remove(e),null!==t&&n.Yd.add(t,this))),this.g("data",e,t),null!==o&&o.undoManager.isUndoingRedoing||null!==t&&this.Ca()}}},itemIndex:{get:function(){return this.yo},set:function(t){var e=this.yo;e!==t&&(this.yo=t,this.g("itemIndex",e,t))}},itemArray:{get:function(){return this.Bi},set:function(t){var e=this.Bi;if(e!==t||null!==t&&function kM(t,e){for(var n=(t=t.W.j).length,o=e.length,a=0,u=null;a<n&&!((u=t[a])instanceof X&&null!==u.data);)u=t[++a];if(n-a!==o)return!0;if(null===u)return 0<o;for(var h=0;a<n&&h<o;){if(!((u=t[a])instanceof X)||u.data!==e[h])return!0;a++,h++}return!1}(this,t)){var n=this.diagram;e!==t&&(null!==n&&null!==e&&km(n.partManager,this,n),this.Bi=t,null!==n&&null!==t&&Am(n.partManager,this)),this.g("itemArray",e,t),null!==n&&n.undoManager.isUndoingRedoing||this.eu()}}},itemTemplate:{get:function(){return null===this.te?null:this.te.H("")},set:function(t){if(null===this.te){if(null===t)return;this.te=new Et}var e=this.te.H("");e!==t&&((t instanceof wt||t.isPanelMain)&&W("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.te.add("",t),this.g("itemTemplate",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.eu())}},itemTemplateMap:{get:function(){return this.te},set:function(t){var e=this.te;if(e!==t){for(var n=t.iterator;n.next(););this.te=t,this.g("itemTemplateMap",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.eu()}}},itemCategoryProperty:{get:function(){return this.Kl},set:function(t){var e=this.Kl;e!==t&&(this.Kl=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return 0!=(1048576&this.F)},set:function(t){var e=0!=(1048576&this.F);e!==t&&(this.F^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return 0!=(2097152&this.F)},set:function(t){var e=0!=(2097152&this.F);e!==t&&(!t||this.type===X.Spot||this instanceof Pt||Ln("Warning: Panel.isClipping set on non-Spot Panel: "+this.toString()),this.F^=2097152,this instanceof Pt&&(this.Ya=null),this.o(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return 0!=(33554432&this.F)},set:function(t){var e=0!=(33554432&this.F);e!==t&&(this.F^=33554432,this.o(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return 0!=(4194304&this.F)},set:function(t){var e=0!=(4194304&this.F);if(e!==t){var n=null===this.panel||this.panel.Ig();this.F^=4194304,this.g("isEnabled",e,t),null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing||n&&Ru(this,this,t)}}},alignmentFocusName:{get:function(){return this.Mg},set:function(t){var e=this.Mg;e!==t&&(this.Mg=t,this.o(),this.g("alignmentFocusName",e,t))}}}),L.Object.defineProperties(X,{Position:{get:function(){return Vo.H("Position")}},Horizontal:{get:function(){return Vo.H("Horizontal")}},Vertical:{get:function(){return Vo.H("Vertical")}},Spot:{get:function(){return Vo.H("Spot")}},Auto:{get:function(){return Vo.H("Auto")}},Table:{get:function(){return Vo.H("Table")}},Viewbox:{get:function(){return Vo.H("Viewbox")}},TableRow:{get:function(){return Vo.H("TableRow")}},TableColumn:{get:function(){return Vo.H("TableColumn")}},Link:{get:function(){return Vo.H("Link")}},Grid:{get:function(){return Vo.H("Grid")}},Graduated:{get:function(){return Vo.H("Graduated")}}}),X.prototype.findItemPanelForData=X.prototype.qy,X.prototype.rebuildItemElements=X.prototype.eu,X.prototype.updateTargetBindings=X.prototype.Ca,X.prototype.copyTemplate=X.prototype.Gz,X.prototype.graduatedValueForPoint=X.prototype.rA,X.prototype.graduatedPointForValue=X.prototype.qA,X.prototype.findColumnForLocalX=X.prototype.Tz,X.prototype.findRowForLocalY=X.prototype.aA,X.prototype.removeColumnDefinition=X.prototype.tw,X.prototype.removeRowDefinition=X.prototype.vw,X.prototype.removeAt=X.prototype.cb,X.prototype.remove=X.prototype.remove,X.prototype.insertAt=X.prototype.wb,X.prototype.elt=X.prototype.J,X.prototype.add=X.prototype.add,X.prototype.findObject=X.prototype.ab,X.prototype.findInVisualTree=X.prototype.xm,X.prototype.walkVisualTreeFrom=X.prototype.Zm,X.prototype.findMainElement=X.prototype.rb;var kx=!1,Ix=null,Vo=new Et;function gn(){wn(this),this.qg=null,this.os=!0,this.Pa=0,this.cd=NaN,this.nh=0,this.lh=1/0,this.zb=Ei,this.la=this.ac=this.ha=0,this.fb=null,this.Vp=jv,this.De=Yr,this.Pp=this.ug=null,this.Qp=NaN,this.mb=this.fk=null,this.Gn=!1}function Fd(t){if(t.sizing===jv){var e=t.qg;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}X.className="Panel",X.definePanelLayout=hs,hs("Position",new tf),hs("Vertical",new An),hs("Auto",new Kg),hs("Link",new bd),gn.prototype.copy=function(){var t=new gn;return t.os=this.os,t.Pa=this.Pa,t.cd=this.cd,t.nh=this.nh,t.lh=this.lh,t.zb=this.zb,t.ha=this.ha,t.ac=this.ac,t.la=this.la,t.De=this.De,t.Vp=this.Vp,t.ug=null===this.ug?null:this.ug.G(),t.Pp=this.Pp,t.Qp=this.Qp,t.fk=null,null!==this.fk&&(t.separatorDashArray=Pl(this.separatorDashArray)),t.mb=this.mb,t.Gn=this.Gn,t.fb=this.fb,t},(D=gn.prototype).Dt=function(t){t.isRow?this.height=t.height:this.width=t.width,this.minimum=t.minimum,this.maximum=t.maximum,this.alignment=t.alignment,this.stretch=t.stretch,this.sizing=t.sizing,this.ug=null===t.separatorPadding?null:t.separatorPadding.G(),this.separatorStroke=t.separatorStroke,this.separatorStrokeWidth=t.separatorStrokeWidth,this.fk=null,t.separatorDashArray&&(this.fk=Pl(t.separatorDashArray)),this.background=t.background,this.coversSeparators=t.coversSeparators,this.fb=t.fb},D.jb=function(t){t.classType===gn&&(this.sizing=t)},D.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+En(this)},D.sj=function(t){this.qg=t},D.Iv=function(){var t=0,e=0,n=this.qg,o=this.isRow;if(null!==n&&n.type===X.Table)for(var a=o?n.vb.length:n.sb.length,u=0;u<a;u++){var h=o?n.vb[u]:n.sb[u];if(void 0!==h){e=h.index;break}}if(this.index!==e&&(null===(e=this.separatorStroke)&&null!==n&&(e=this.isRow?n.defaultRowSeparatorStroke:n.defaultColumnSeparatorStroke),null!==e&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==n?this.isRow?n.defaultRowSeparatorStrokeWidth:n.defaultColumnSeparatorStrokeWidth:0))),null===(e=this.ug)){if(null===n)return t;e=n.defaultSeparatorPadding}return t+(this.isRow?e.top:e.left)},D.wc=function(){var t=0,e=this.qg,n=0,o=this.isRow;if(null!==e&&e.type===X.Table)for(var a=o?e.vb.length:e.sb.length,u=0;u<a;u++){var h=o?e.vb[u]:e.sb[u];if(void 0!==h){n=h.index;break}}if(this.index!==n&&(null===(n=this.separatorStroke)&&null!==e&&(n=o?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),null!==n&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==e?o?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:0))),null===(o=this.ug)){if(null===e)return t;o=e.defaultSeparatorPadding}return t+(this.isRow?o.top+o.bottom:o.left+o.right)},D.Cb=function(t,e,n){var o=this.qg;if(null!==o&&(o.bb(Me,t,this,e,n,void 0,void 0),null!==this.fb&&null!==(e=o.diagram)&&!e.skipsModelSourceBindings&&null!==(o=o.ij())&&null!==(e=o.data)))for(n=this.fb.iterator;n.next();)n.value.kr(this,e,t,o)},D.bind=function(t){t.qd=this;var e=this.panel;if(null!==e){var n=e.ij();null!==n&&Px(n)&&W("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t+" on "+e)}null===this.fb&&(this.fb=new lt),this.fb.add(t)},L.Object.defineProperties(gn.prototype,{panel:{get:function(){return this.qg}},isRow:{get:function(){return this.os},set:function(t){this.os=t}},index:{get:function(){return this.Pa},set:function(t){this.Pa=t}},height:{get:function(){return this.cd},set:function(t){var e=this.cd;e!==t&&(0>t&&qt(t,">= 0",gn,"height"),this.cd=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.Cb("height",e,t))}},width:{get:function(){return this.cd},set:function(t){var e=this.cd;e!==t&&(0>t&&qt(t,">= 0",gn,"width"),this.cd=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.Cb("width",e,t))}},minimum:{get:function(){return this.nh},set:function(t){var e=this.nh;e!==t&&((0>t||!isFinite(t))&&qt(t,">= 0",gn,"minimum"),this.nh=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.Cb("minimum",e,t))}},maximum:{get:function(){return this.lh},set:function(t){var e=this.lh;e!==t&&(0>t&&qt(t,">= 0",gn,"maximum"),this.lh=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.Cb("maximum",e,t))}},alignment:{get:function(){return this.zb},set:function(t){var e=this.zb;e.w(t)||(this.zb=t.G(),null!==this.panel&&this.panel.o(),this.Cb("alignment",e,t))}},stretch:{get:function(){return this.De},set:function(t){var e=this.De;e!==t&&(this.De=t,null!==this.panel&&this.panel.o(),this.Cb("stretch",e,t))}},separatorPadding:{get:function(){return this.ug},set:function(t){"number"==typeof t&&(t=new te(t));var e=this.ug;null!==t&&null!==e&&e.w(t)||(null!==t&&(t=t.G()),this.ug=t,null!==this.panel&&this.panel.o(),this.Cb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.Pp},set:function(t){var e=this.Pp;e!==t&&(null!==t&&Fu(t,"RowColumnDefinition.separatorStroke"),t instanceof Xt&&t.freeze(),this.Pp=t,null!==this.panel&&this.panel.o(),this.Cb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.Qp},set:function(t){var e=this.Qp;e!==t&&(this.Qp=t,null!==this.panel&&this.panel.o(),this.Cb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.fk},set:function(t){var e=this.fk;if(e!==t){if(null!==t){for(var n=t.length,o=0,a=0;a<n;a++){var u=t[a];"number"==typeof u&&0<=u&&isFinite(u)||W("separatorDashArray value "+u+" at index "+a+" must be a positive number or zero."),o+=u}if(0===o){if(null===e)return;t=null}}this.fk=t,null!==this.panel&&this.panel.M(),this.Cb("separatorDashArray",e,t)}}},background:{get:function(){return this.mb},set:function(t){var e=this.mb;e!==t&&(null!==t&&Fu(t,"RowColumnDefinition.background"),t instanceof Xt&&t.freeze(),this.mb=t,null!==this.panel&&this.panel.M(),this.Cb("background",e,t))}},coversSeparators:{get:function(){return this.Gn},set:function(t){var e=this.Gn;e!==t&&(this.Gn=t,null!==this.panel&&this.panel.M(),this.Cb("coversSeparators",e,t))}},sizing:{get:function(){return this.Vp},set:function(t){var e=this.Vp;e!==t&&(this.Vp=t,null!==this.panel&&this.panel.o(),this.Cb("sizing",e,t))}},actual:{get:function(){return this.ha},set:function(t){this.ha=isNaN(this.cd)?Math.max(Math.min(this.lh,t),this.nh):Math.max(Math.min(this.lh,this.cd),this.nh)}},measured:{get:function(){return this.ac},set:function(t){this.ac=t}},total:{get:function(){return this.ha+this.wc()},set:function(t){this.ha=isNaN(this.cd)?Math.max(Math.min(this.lh,t),this.nh):Math.max(Math.min(this.lh,this.cd),this.nh),this.ha=Math.max(0,this.ha-this.wc())}},position:{get:function(){return this.la},set:function(t){this.la=t}}}),gn.prototype.bind=gn.prototype.bind,gn.prototype.computeEffectiveSpacing=gn.prototype.wc,gn.prototype.computeEffectiveSpacingTop=gn.prototype.Iv;var jv=new it(gn,"Default",0),Rd=new it(gn,"None",1),jd=new it(gn,"ProportionalExtra",2);function At(){Z.call(this),this.Ed=this.na=null,this.Wn="None",this.eo=Yr,this.Jc=this.tl="black",this.wh=1,this.jm="butt",this.km="miter",this.gk=10,this.uh=null,this.vh=0,this.rf=this.qf=Ei,this.op=this.np=NaN,this.qo=!1,this.qp=null,this.ul=this.qm="None",this.Xd=1,this.Vd=0,this.Td=1,this.Ud=null}function Th(t,e,n,o){var a=n.length;if(!(4>a)){var u=o.measuredBounds,h=Math.max(1,u.width);u=u.height;for(var g,y,v,x,S,M,f=n[0],p=n[1],T=0,N=ye(),P=2;P<a;P+=2)0==(v=(g=n[P])-f)&&(v=.001),x=(f=(y=n[P+1])-p)/v,S=Math.atan2(f,v),M=Math.sqrt(v*v+f*f),N.push([v,S,x,M]),T+=M,f=g,p=y;f=n[0],p=n[1],v=o.measuredBounds.width,o instanceof At&&(v-=o.strokeWidth),1>v&&(v=1),a=n=v,y=0!=(g=h/2),v=(M=N[P=0])[0],S=M[1],x=M[2],M=M[3];for(var I=0;.1<=T;){if(0===I&&(y?(a=n,a-=g,T-=g,y=!1):a=n,0===a&&(a=1)),a>T)return void Jt(N);a>M?(I=a-M,a=M):I=0;var O=Math.sqrt(a*a/(1+x*x));if(0>v&&(O=-O),t.translate(f+=O,p+=x*O),t.rotate(S),t.translate(-h/2,-u/2),0===I&&o.ej(t,e),t.translate(h/2,u/2),t.rotate(-S),t.translate(-f,-p),T-=a,M-=a,0!==I){if(++P===N.length)return void Jt(N);v=(M=N[P])[0],S=M[1],x=M[2],M=M[3],a=I}}Jt(N)}}function Bv(t){var e=t.geometryStretch;return null!==t.Ed?e===Yr?Je:e:e===Yr?lm[t.figure].defaultStretch:e}function Bd(t,e,n,o,a){return(e=(t=n.x-t)*t+(e=n.y-e)*e)<o?(a.x=n.x,a.y=n.y,e):o}function am(t,e,n,o,a,u,h,f,p){var g=!1,y=(a-h)*(e-o)-(u-f)*(t-n);return 0!==y&&(p.x=((a*f-u*h)*(t-n)-(a-h)*(t*o-e*n))/y,p.y=((a*f-u*h)*(e-o)-(u-f)*(t*o-e*n))/y,(t>n?t-n:n-t)<(e>o?e-o:o-e)?(t=e<o?e:o,e=e<o?o:e,(p.y>t||R.aa(p.y,t))&&(p.y<e||R.aa(p.y,e))&&(g=!0)):(e=t<n?t:n,t=t<n?n:t,(p.x>e||R.aa(p.x,e))&&(p.x<t||R.aa(p.x,t))&&(g=!0)),g)}function cs(t,e,n,o){if(!t.Ot(e,n,o))return!1;t=e.x,e=e.y;var a=n.x,u=n.y;return n=o.x,o=o.y,t===a?(e<u?(t=e,e=u):t=u,o>=t&&o<=e):(t<a?(o=t,t=a):o=a,n>=o&&n<=t)}function da(t){var e=t.diagram;null!==e&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=ip,"None"!==t.qm?(t.segmentIndex=-1,t.alignmentFocus=Li):"None"!==t.ul&&(t.segmentIndex=0,t.alignmentFocus=new at(1-Li.x,Li.y)))}function OM(t){var e=pa[t];if(void 0===e){var n=t.toLowerCase();if("none"===n)return"None";if(void 0===(e=pa[n])){var a,o=null;for(a in R.bn)if(a.toLowerCase()===n){o=a;break}if(null!==o)return t=se(R.bn[o],!1),pa[o]=t,n!==o&&(pa[n]=o),o}}return"string"==typeof e?e:e instanceof It?t:null}gn.className="RowColumnDefinition",gn.Default=jv,gn.None=Rd,gn.ProportionalExtra=jd,Y(At,Z),At.prototype.cloneProtected=function(t){Z.prototype.cloneProtected.call(this,t),t.na=this.na,t.Wn=this.Wn,t.eo=this.eo,t.Ed=this.Ed,t.tl=this.tl,t.Jc=this.Jc,t.wh=this.wh,t.jm=this.jm,t.km=this.km,t.gk=this.gk,null!==this.uh&&(t.uh=Pl(this.uh)),t.vh=this.vh,t.qf=this.qf.G(),t.rf=this.rf.G(),t.np=this.np,t.op=this.op,t.qo=this.qo,t.qp=this.qp,t.qm=this.qm,t.ul=this.ul,t.Xd=this.Xd,t.Vd=this.Vd,t.Td=this.Td,t.Ud=this.Ud},(D=At.prototype).jb=function(t){t===un||t===xo||t===Dd||t===Yr?this.geometryStretch=t:Z.prototype.jb.call(this,t)},D.toString=function(){return"Shape("+("None"!==this.figure?this.figure:"None"!==this.toArrow?this.toArrow:this.fromArrow)+")#"+En(this)},D.ej=function(t,e){var n=this.Jc,o=this.tl;if(null!==n||null!==o){var a=this.actualBounds,u=this.naturalBounds;null!==o&&pr(this,t,o,!0,!1,u,a);var h=this.part,f=this.wh;null===n||0!==f||null===h||!this.isPanelMain&&h.rb()!==this||(f=h.type===X.Link&&h instanceof Gt&&"Selection"===h.category&&h.adornedObject instanceof At&&h.adornedPart.rb()===h.adornedObject?h.adornedObject.strokeWidth:0),0===f&&(n=null),null!==n&&0!==f&&(pr(this,t,n,!1,!1,u,a),t.lineWidth=f,t.lineJoin=this.km,t.lineCap=this.jm,t.miterLimit=this.gk),a=!1,h&&e.Je("drawShadows")&&(a=h.isShadowed),h=!0,null===n||null!==o&&"transparent"!==o||(h=!1),u=!1,null!==(f=this.strokeDashArray)&&(u=!0,t.Gt(f,this.vh));var p=this.na;if(null!==p){if(p.type===Tn)t.beginPath(),t.moveTo(p.startX,p.startY),t.lineTo(p.endX,p.endY),null!==n&&t.vj();else if(p.type===kr){var g=p.startX;f=p.startY;var y=p.endX,v=p.endY;p=Math.min(g,y);var x=Math.min(f,v);g=Math.abs(y-g),f=Math.abs(v-f),t.beginPath(),t.rect(p,x,g,f),null!==o&&t.Ie(o),null!==n&&(h&&a&&Is(t),(0===g||0===f)&&(t.beginPath(),t.rect(p,x,Math.max(g,.1),Math.max(f,.1))),t.vj(),h&&a&&el(t))}else if(p.type===ur)g=p.startX,f=p.startY,y=p.endX,v=p.endY,p=Math.abs(y-g)/2,x=Math.abs(v-f)/2,g=Math.min(g,y)+p,f=Math.min(f,v)+x,t.beginPath(),t.moveTo(g,f-x),t.bezierCurveTo(g+R.Lg*p,f-x,g+p,f-R.Lg*x,g+p,f),t.bezierCurveTo(g+p,f+R.Lg*x,g+R.Lg*p,f+x,g,f+x),t.bezierCurveTo(g-R.Lg*p,f+x,g-p,f+R.Lg*x,g-p,f),t.bezierCurveTo(g-p,f-R.Lg*x,g-R.Lg*p,f-x,g,f-x),t.closePath(),null!==o&&t.Ie(o),null!==n&&(h&&a?(Is(t),t.vj(),el(t)):t.vj());else if(p.type===pn)for(p=(f=p.figures).length,x=0;x<p;x++){g=f.j[x],t.beginPath(),t.moveTo(g.startX,g.startY),v=(y=g.segments.j).length;for(var S=null,M=0;M<v;M++){var T=y[M];switch(T.type){case $n:t.moveTo(T.endX,T.endY);break;case He:t.lineTo(T.endX,T.endY);break;case ln:t.bezierCurveTo(T.point1X,T.point1Y,T.point2X,T.point2Y,T.endX,T.endY);break;case hr:t.quadraticCurveTo(T.point1X,T.point1Y,T.endX,T.endY);break;case Oe:if(T.radiusX===T.radiusY){var N=Math.PI/180;t.arc(T.point1X,T.point1Y,T.radiusX,T.startAngle*N,(T.startAngle+T.sweepAngle)*N,0>T.sweepAngle,null!==S?S.endX:g.startX,null!==S?S.endY:g.startY)}else if(0===(N=(S=ge(T,g)).length))t.lineTo(T.centerX,T.centerY);else for(var P=0;P<N;P++){var I=S[P];0===P&&t.lineTo(I[0],I[1]),t.bezierCurveTo(I[2],I[3],I[4],I[5],I[6],I[7])}break;case Ir:if(P=N=0,null!==S&&S.type===Oe){if(0===(I=(S=ge(S,g)).length)){t.lineTo(T.centerX,T.centerY);break}null!==(S=S[I-1]||null)&&(N=S[6],P=S[7])}else N=null!==S?S.endX:g.startX,P=null!==S?S.endY:g.startY;if(0===(N=(S=Cn(T,g,N,P)).length)){t.lineTo(T.centerX,T.centerY);break}for(P=0;P<N;P++)t.bezierCurveTo((I=S[P])[2],I[3],I[4],I[5],I[6],I[7]);break;default:W("Segment not of valid type: "+T.type)}T.isClosed&&t.closePath(),S=T}y=g.isFilled,a?g.isShadowed?(!0===y&&"transparent"!==o&&null!==o&&t.Ie(o),null!==n&&(y&&h&&Is(t),t.vj(),y&&h&&el(t))):(Is(t),y&&"transparent"!==o&&null!==o&&t.Ie(o),null!==n&&t.vj(),el(t)):(y&&null!==o&&t.Ie(o),null!==n&&t.vj())}if(u&&t.Et(),null!==this.pathPattern){if((n=this.pathPattern).measure(1/0,1/0),n.arrange(0,0,(o=n.measuredBounds).width,o.height),a=this.geometry,t.save(),t.beginPath(),o=ye(),a.type===Tn)o.push(a.startX),o.push(a.startY),o.push(a.endX),o.push(a.endY),Th(t,e,o,n);else if(a.type===pn)for(a=a.figures.iterator;a.next();){for(h=a.value,o.length=0,o.push(h.startX),o.push(h.startY),p=u=h.startX,x=f=h.startY,y=(g=h.segments.j).length,v=0;v<y;v++){switch((M=g[v]).type){case $n:Th(t,e,o,n),o.length=0,o.push(M.endX),o.push(M.endY),p=u=M.endX,x=f=M.endY;break;case He:o.push(M.endX),o.push(M.endY),u=M.endX,f=M.endY;break;case ln:R.Fe(u,f,M.point1X,M.point1Y,M.point2X,M.point2Y,M.endX,M.endY,.5,o),u=M.endX,f=M.endY;break;case hr:R.Vq(u,f,M.point1X,M.point1Y,M.endX,M.endY,.5,o),u=M.endX,f=M.endY;break;case Oe:if(0===(S=(T=ge(M,h)).length)){o.push(M.centerX),o.push(M.centerY),u=M.centerX,f=M.centerY;break}for(N=0;N<S;N++)R.Fe(u,f,(P=T[N])[2],P[3],P[4],P[5],P[6],P[7],.5,o),u=P[6],f=P[7];break;case Ir:if(0===(S=(T=Cn(M,h,u,f)).length)){o.push(M.centerX),o.push(M.centerY),u=M.centerX,f=M.centerY;break}for(N=0;N<S;N++)R.Fe(u,f,(P=T[N])[2],P[3],P[4],P[5],P[6],P[7],.5,o),u=P[6],f=P[7];break;default:W("Segment not of valid type: "+M.type)}M.isClosed&&(o.push(p),o.push(x),Th(t,e,o,n))}Th(t,e,o,n)}else if(a.type===kr)o.push(a.startX),o.push(a.startY),o.push(a.endX),o.push(a.startY),o.push(a.endX),o.push(a.endY),o.push(a.startX),o.push(a.endY),o.push(a.startX),o.push(a.startY),Th(t,e,o,n);else if(a.type===ur){if((f=new nn).startX=a.endX,f.startY=(a.startY+a.endY)/2,(u=new Ct(Oe)).startAngle=0,u.sweepAngle=360,u.centerX=(a.startX+a.endX)/2,u.centerY=(a.startY+a.endY)/2,u.radiusX=Math.abs(a.startX-a.endX)/2,u.radiusY=Math.abs(a.startY-a.endY)/2,f.add(u),0===(h=(a=ge(u,f)).length))o.push(u.centerX),o.push(u.centerY);else for(u=f.startX,f=f.startY,p=0;p<h;p++)R.Fe(u,f,(x=a[p])[2],x[3],x[4],x[5],x[6],x[7],.5,o),u=x[6],f=x[7];Th(t,e,o,n)}Jt(o),t.restore(),t.uc(!1)}}}},D.da=function(t,e){if(void 0===e&&(e=new A),t instanceof at){t.nc()&&W("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var n=this.naturalBounds,o=this.strokeWidth;e.h(t.x*(n.width+o)-o/2+n.x+t.offsetX,t.y*(n.height+o)-o/2+n.y+t.offsetY)}else e.set(t);return this.Fd.sa(e),e},D.mj=function(t){void 0===t&&(t=new z);var e=this.naturalBounds,n=this.Fd;e=z.allocAt(e.x,e.y,e.width,e.height);var o=this.strokeWidth;return e.Lc(o/2,o/2),o=A.allocAt(e.x,e.y).transform(n),t.h(o.x,o.y,0,0),o.h(e.right,e.y).transform(n),Kn(t,o.x,o.y,0,0),o.h(e.right,e.bottom).transform(n),Kn(t,o.x,o.y,0,0),o.h(e.x,e.bottom).transform(n),Kn(t,o.x,o.y,0,0),z.free(e),A.free(o),t},D.Jh=function(t,e){var n=this.geometry;if(null===n||null===this.fill&&null===this.stroke)return!1;var o=n.bounds,a=this.strokeWidth/2;n.type!==Tn||e||(a+=2);var u=z.alloc();if(u.assign(o),u.Lc(a+2,a+2),!u.$(t))return z.free(u),!1;if(o=a+1e-4,n.type===Tn)return!(null===this.stroke||(o=(n.endX-n.startX)*(t.x-n.startX)+(n.endY-n.startY)*(t.y-n.startY),0>(n.startX-n.endX)*(t.x-n.endX)+(n.startY-n.endY)*(t.y-n.endY)||0>o))&&(z.free(u),R.Ob(n.startX,n.startY,n.endX,n.endY,a,t.x,t.y));if(n.type===kr){e=n.startX;var h=n.startY,f=n.endX;if(n=n.endY,u.x=Math.min(e,f),u.y=Math.min(h,n),u.width=Math.abs(f-e),u.height=Math.abs(n-h),null===this.fill){if(u.Lc(-o,-o),u.$(t))return z.free(u),!1;u.Lc(o,o)}return null!==this.stroke&&u.Lc(a,a),t=u.$(t),z.free(u),t}if(n.type===ur){h=n.startX,a=n.startY,f=n.endX;var p=n.endY;if(n=Math.min(h,f),e=Math.min(a,p),h=Math.abs(f-h)/2,a=Math.abs(p-a)/2,n=t.x-(n+h),e=t.y-(e+a),null===this.fill){if(a-=o,0>=(h-=o)||0>=a||1>=n*n/(h*h)+e*e/(a*a))return z.free(u),!1;h+=o,a+=o}return null!==this.stroke&&(h+=o,a+=o),z.free(u),!(0>=h||0>=a)&&1>=n*n/(h*h)+e*e/(a*a)}return n.type===pn?(z.free(u),null===this.fill?os(n,t.x,t.y,a):Wa(n,t,a,1<this.strokeWidth,e)):(W("Unknown Geometry type: "+n.type),!1)},D.Gm=function(t,e,n,o){var a=this.desiredSize,u=this.wh;if(t=Math.max(t,0),e=Math.max(e,0),null!==this.Ed)var h=this.geometry.bounds;else{var f=this.figure,p=lm[f];if(void 0===p){var g=R.Qe[f];"string"==typeof g&&(g=R.Qe[g]),"function"==typeof g?(p=g(null,100,100),lm[f]=p):W("Unsupported Figure: "+f)}h=p.bounds}f=h.width,p=h.height,g=h.width;var y=h.height;switch(jo(this,!0)){case un:o=n=0;break;case Je:g=Math.max(t-u,0),y=Math.max(e-u,0);break;case ei:g=Math.max(t-u,0),o=0;break;case li:n=0,y=Math.max(e-u,0)}switch(isFinite(a.width)&&(g=a.width),isFinite(a.height)&&(y=a.height),a=this.maxSize,h=this.minSize,n=Math.max(n-u,h.width),o=Math.max(o-u,h.height),g=Math.min(a.width,g),y=Math.min(a.height,y),g=isFinite(g)?Math.max(n,g):Math.max(f,n),y=isFinite(y)?Math.max(o,y):Math.max(p,o),n=Bv(this)){case un:break;case Je:f=g,p=y;break;case xo:n=Math.min(g/f,y/p),isFinite(n)||(n=1),f*=n,p*=n;break;default:W(n+" is not a valid geometryStretch.")}null!==this.Ed?(0===f&&(f=.001),0===p&&(p=.001),o=f/(a=(n=null!==this.Ed?this.Ed:this.na).bounds).width,a=p/a.height,isFinite(o)||(o=1),isFinite(a)||(a=1),this.na=1===o&&1===a?n:n.copy().scale(o,a)):null!==this.na&&R.aa(this.na.El,t-u)&&R.aa(this.na.Dl,e-u)||(this.na=At.makeGeometry(this,f,p)),h=this.na.bounds,t===1/0||e===1/0?As(this,h.x-u/2,h.y-u/2,0===t&&0===f?0:h.width+u,0===e&&0===p?0:h.height+u):As(this,-u/2,-u/2,g+u,y+u)},D.Hh=function(t,e,n,o){Wc(this,t,e,n,o)},D.Ot=function(t,e,n){return this.yk(t.x,t.y,e.x,e.y,n)},D.yk=function(t,e,n,o,a){var u=this.transform,h=1/(u.m11*u.m22-u.m12*u.m21),f=u.m22*h,p=-u.m12*h,g=-u.m21*h,y=u.m11*h,v=h*(u.m21*u.dy-u.m22*u.dx),x=h*(u.m12*u.dx-u.m11*u.dy);u=t*f+e*g+v,h=t*p+e*y+x,f=n*f+o*g+v,p=n*p+o*y+x,v=this.wh/2,null===(g=this.na)&&(this.measure(1/0,1/0),g=this.na);var S=g.bounds;if(y=!1,g.type===Tn)if(1.5>=this.strokeWidth)y=R.Le(g.startX,g.startY,g.endX,g.endY,u,h,f,p,a);else{if(g.startX===g.endX?(o=v,y=0):(e=(g.endY-g.startY)/(g.endX-g.startX),o=(y=v/Math.sqrt(1+e*e))*e),e=ye(),t=new A,R.Le(g.startX+o,g.startY+y,g.endX+o,g.endY+y,u,h,f,p,t)&&e.push(t),t=new A,R.Le(g.startX-o,g.startY-y,g.endX-o,g.endY-y,u,h,f,p,t)&&e.push(t),t=new A,R.Le(g.startX+o,g.startY+y,g.startX-o,g.startY-y,u,h,f,p,t)&&e.push(t),t=new A,R.Le(g.endX+o,g.endY+y,g.endX-o,g.endY-y,u,h,f,p,t)&&e.push(t),0===(f=e.length))return Jt(e),!1;for(y=!0,p=1/0,o=0;o<f;o++)(n=((t=e[o]).x-u)*(t.x-u)+(t.y-h)*(t.y-h))<p&&(p=n,a.x=t.x,a.y=t.y);Jt(e)}else if(g.type===kr)y=R.Ef(S.x-v,S.y-v,S.x+S.width+v,S.y+S.height+v,u,h,f,p,a);else if(g.type===ur){t:if(0===(e=z.allocAt(S.x,S.y,S.width,S.height).Lc(v,v)).width)y=R.Le(e.x,e.y,e.x,e.y+e.height,u,h,f,p,a);else if(0===e.height)y=R.Le(e.x,e.y,e.x+e.width,e.y,u,h,f,p,a);else{if(o=e.x+(t=e.width/2),y=e.y+(g=e.height/2),n=9999,u!==f&&(n=(h-p)/(u-f)),9999>Math.abs(n)){if(0>t*t*n*n+g*g-(p=h-y-n*(u-o))*p){a.x=NaN,a.y=NaN,y=!1;break t}f=(-t*t*n*p+t*g*(v=Math.sqrt(t*t*n*n+g*g-p*p)))/(g*g+t*t*n*n)+o,t=(-t*t*n*p-t*g*v)/(g*g+t*t*n*n)+o,g=n*(f-o)+p+y,p=n*(t-o)+p+y,Math.abs((u-f)*(u-f))+Math.abs((h-g)*(h-g))<Math.abs((u-t)*(u-t))+Math.abs((h-p)*(h-p))?(a.x=f,a.y=g):(a.x=t,a.y=p)}else{if(f=g*g,0>(f-=f/(t*t)*(p=u-o)*p)){a.x=NaN,a.y=NaN,y=!1;break t}f=y+(p=Math.sqrt(f)),p=y-p,Math.abs(f-h)<Math.abs(p-h)?(a.x=u,a.y=f):(a.x=u,a.y=p)}y=!0}z.free(e)}else if(g.type===pn){x=A.alloc();var M=f-u,T=p-h,N=M*M+T*T,P=u,I=h;if(0<N&&S.contains(P,I)&&(x.x=P,x.y=I,this.$(x)))for(P-=M,I-=T;S.contains(P,I);)P-=M,I-=T;for(a.x=f,a.y=p,T=0;T<g.figures.count;T++)for(var O=g.figures.j[T],b=O.isFilled?P:u,B=O.isFilled?I:h,K=O.segments,rt=S=O.startX,tt=M=O.startY,mt=0;mt<K.count;mt++){var ht=K.j[mt],$=ht.type,zt=ht.endX,Lt=ht.endY,Kt=!1;switch($){case $n:rt=zt,tt=Lt;break;case He:Kt=am(S,M,zt,Lt,b,B,f,p,x);break;case ln:Kt=R.tq(S,M,ht.point1X,ht.point1Y,ht.point2X,ht.point2Y,zt,Lt,b,B,f,p,.6,x);break;case hr:Kt=R.tq(S,M,S+2/3*(ht.point1X-S),M+2/3*(ht.point1Y-M),zt+2/3*(ht.point1X-zt),Lt+2/3*(ht.point1Y-Lt),zt,Lt,b,B,f,p,.6,x);break;case Oe:case Ir:var _e=($=ht.type===Oe?ge(ht,O):Cn(ht,O,S,M)).length;if(0===_e){Kt=am(S,M,ht.centerX,ht.centerY,b,B,f,p,x);break}for(Lt=null,zt=0;zt<_e;zt++){if(Lt=$[zt],0===zt&&am(S,M,Lt[0],Lt[1],b,B,f,p,x)){var On=Bd(b,B,x,N,a);On<N&&(N=On,y=!0)}R.tq(Lt[0],Lt[1],Lt[2],Lt[3],Lt[4],Lt[5],Lt[6],Lt[7],b,B,f,p,.6,x)&&(On=Bd(b,B,x,N,a))<N&&(N=On,y=!0)}zt=Lt[6],Lt=Lt[7];break;default:W("Unknown Segment type: "+$)}S=zt,M=Lt,Kt&&(Kt=Bd(b,B,x,N,a))<N&&(N=Kt,y=!0),ht.isClosed&&am(S,M,zt=rt,Lt=tt,b,B,f,p,x)&&(ht=Bd(b,B,x,N,a))<N&&(N=ht,y=!0)}u=n-t,h=o-e,0!==(f=Math.sqrt(u*u+h*h))&&(u/=f,h/=f),a.x-=u*v,a.y-=h*v,A.free(x)}else W("Unknown Geometry type: "+g.type);return!!y&&(this.transform.sa(a),!0)},D.Ih=function(t,e){if(void 0===e)return t.Ge(this.actualBounds);var n=this.na;null===n&&(this.measure(1/0,1/0),n=this.na),n=n.bounds;var o=this.strokeWidth/2,a=!1,u=A.alloc();return u.h(n.x-o,n.y-o),t.$(e.sa(u))&&(u.h(n.x-o,n.bottom+o),t.$(e.sa(u))&&(u.h(n.right+o,n.bottom+o),t.$(e.sa(u))&&(u.h(n.right+o,n.y-o),t.$(e.sa(u))&&(a=!0)))),A.free(u),a},D.Oc=function(t,e){if(this.Ih(t,e)||void 0===e&&(e=this.transform,t.Ge(this.actualBounds)))return!0;var n=Ht.alloc();n.set(e),n.Tt();var o=t.left,a=t.right,u=t.top;t=t.bottom;var h=A.alloc();if(h.h(o,u),n.sa(h),this.Jh(h,!0)||(h.h(a,u),n.sa(h),this.Jh(h,!0))||(h.h(o,t),n.sa(h),this.Jh(h,!0))||(h.h(a,t),n.sa(h),this.Jh(h,!0)))return A.free(h),!0;var f=A.alloc(),p=A.alloc();return n.set(e),n.iw(this.transform),n.Tt(),f.x=a,f.y=u,f.transform(n),h.x=o,h.y=u,h.transform(n),e=!1,cs(this,h,f,p)?e=!0:(h.x=a,h.y=t,h.transform(n),cs(this,h,f,p)?e=!0:(f.x=o,f.y=t,f.transform(n),cs(this,h,f,p)?e=!0:(h.x=o,h.y=u,h.transform(n),cs(this,h,f,p)&&(e=!0)))),A.free(h),Ht.free(n),A.free(f),A.free(p),e},D.sy=function(t,e,n){function o(N,P){for(var I=N.length,O=0;O<I;O+=2)if(P.rd(N[O],N[O+1])>a)return!0;return!1}if(n&&null!==this.fill&&this.Jh(t,!0))return!0;var a=t.He(e),u=a;if(1.5<this.strokeWidth&&(a=this.strokeWidth/2+Math.sqrt(a),a*=a),null===(e=this.na)&&(this.measure(1/0,1/0),null===(e=this.na)))return!1;if(!n){var h=e.bounds,f=h.x,p=h.y,g=h.x+h.width;if(h=h.y+h.height,qs(t.x,t.y,f,p)<=a&&qs(t.x,t.y,g,p)<=a&&qs(t.x,t.y,f,h)<=a&&qs(t.x,t.y,g,h)<=a)return!0}if(f=e.startX,p=e.startY,g=e.endX,h=e.endY,e.type===Tn){if(n=(f-g)*(t.x-g)+(p-h)*(t.y-h),Di(t.x,t.y,f,p,g,h)<=(0<=(g-f)*(t.x-f)+(h-p)*(t.y-p)&&0<=n?a:u))return!0}else{if(e.type===kr)return e=!1,n&&(e=Di(t.x,t.y,f,p,f,h)<=a||Di(t.x,t.y,f,p,g,p)<=a||Di(t.x,t.y,g,p,g,h)<=a||Di(t.x,t.y,f,h,g,h)<=a),e;if(e.type===ur){e=t.x-(f+g)/2,u=t.y-(p+h)/2;var y=Math.abs(g-f)/2,v=Math.abs(h-p)/2;if(0===y||0===v)return Di(t.x,t.y,f,p,g,h)<=a;if(!n)return!(qs(e,u,-y,0)>=a||qs(e,u,0,-v)>=a||qs(e,u,0,v)>=a||qs(e,u,y,0)>=a);if((t=R.Mz(y,v,e,u))*t<=a)return!0}else if(e.type===pn){if(u=(g=e.bounds).x,f=g.y,p=g.x+g.width,g=g.y+g.height,t.x>p&&t.x<u&&t.y>g&&t.y<f&&Di(t.x,t.y,u,f,u,g)>a&&Di(t.x,t.y,u,f,p,f)>a&&Di(t.x,t.y,p,g,u,g)>a&&Di(t.x,t.y,p,g,p,f)>a)return!1;if(u=Math.sqrt(a),!n){for(n=e.figures,e=0;e<n.count;e++){if(t.rd(h=(u=n.j[e]).startX,y=u.startY)>a)return!1;for(p=(f=u.segments.j).length,g=0;g<p;g++)switch(v=f[g],v.type){case $n:case He:if(t.rd(h=v.endX,y=v.endY)>a)return!1;break;case ln:var x=ye();if(R.Fe(h,y,v.point1X,v.point1Y,v.point2X,v.point2Y,v.endX,v.endY,.8,x),h=o(x,t),Jt(x),h||t.rd(h=v.endX,y=v.endY)>a)return!1;break;case hr:if(x=ye(),R.Vq(h,y,v.point1X,v.point1Y,v.endX,v.endY,.8,x),h=o(x,t),Jt(x),h||t.rd(h=v.endX,y=v.endY)>a)return!1;break;case Oe:case Ir:var S=(x=v.type===Oe?ge(v,u):Cn(v,u,h,y)).length;if(0===S){if(t.rd(h=v.centerX,y=v.centerY)>a)return!1;break}v=null;for(var M=ye(),T=0;T<S;T++)if(v=x[T],M.length=0,R.Fe(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],.8,M),o(M,t))return Jt(M),!1;Jt(M),null!==v&&(h=v[6],y=v[7]);break;default:W("Unknown Segment type: "+v.type)}}return!0}if(null===this.fill?os(e,t.x,t.y,u):Wa(e,t,u,!0,!1))return!0}}return!1},D.dc=function(){this.na=null},At.makeGeometry=function(t,e,n){if("None"!==t.toArrow)var o=pa[t.toArrow];else"None"!==t.fromArrow?o=pa[t.fromArrow]:("string"==typeof(o=R.Qe[t.figure])&&(o=R.Qe[o]),void 0===o&&W("Unknown Shape.figure: "+t.figure),(o=o(t,e,n)).El=e,o.Dl=n);if(null===o){var a=R.Qe.Rectangle;"function"==typeof a&&(o=a(t,e,n))}return o},L.Object.defineProperties(At.prototype,{geometry:{get:function(){return null!==this.na?this.na:this.Ed},set:function(t){var e=this.na,n=this.Ed;if(e!==t){this.Ed=this.na=null!==t?t.freeze():null;var o=this.part;null!==o&&(o.kh=NaN),this.o(),this.g("geometry",e||n,t),Xc(this)&&null!==(t=this.part)&&ku(this,t,"geometryString")}}},geometryString:{get:function(){return null===this.geometry?"":this.geometry.toString()},set:function(t){var e=(t=se(t)).normalize();this.geometry=t,this.position=t=A.allocAt(-e.x,-e.y),A.free(t)}},isGeometryPositioned:{get:function(){return this.qo},set:function(t){var e=this.qo;e!==t&&(this.qo=t,this.o(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.tl},set:function(t){var e=this.tl;e!==t&&(null!==t&&Fu(t,"Shape.fill"),t instanceof Xt&&t.freeze(),this.tl=t,this.M(),this.g("fill",e,t))}},stroke:{get:function(){return this.Jc},set:function(t){var e=this.Jc;e!==t&&(null!==t&&Fu(t,"Shape.stroke"),t instanceof Xt&&t.freeze(),this.Jc=t,this.M(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.wh},set:function(t){var e=this.wh;if(e!==t)if(0<=t){this.wh=t,this.o();var n=this.part;null!==n&&(n.kh=NaN),this.g("strokeWidth",e,t)}else qt(t,"value >= 0",At,"strokeWidth:value")}},strokeCap:{get:function(){return this.jm},set:function(t){var e=this.jm;e!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?qt(t,'"butt", "round", or "square"',At,"strokeCap"):(this.jm=t,this.M(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.km},set:function(t){var e=this.km;e!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?qt(t,'"miter", "bevel", or "round"',At,"strokeJoin"):(this.km=t,this.M(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.gk},set:function(t){var e=this.gk;if(e!==t&&1<=t){this.gk=t,this.M();var n=this.part;null!==n&&(n.kh=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.uh},set:function(t){var e=this.uh;if(e!==t){if(null!==t){for(var n=t.length,o=0,a=0;a<n;a++){var u=t[a];0<=u&&isFinite(u)||W("strokeDashArray:value "+u+" at index "+a+" must be a positive number or zero."),o+=u}if(0===o){if(null===e)return;t=null}}this.uh=t,this.M(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.vh},set:function(t){var e=this.vh;e!==t&&0<=t&&(this.vh=t,this.M(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.Wn},set:function(t){var e=this.Wn;if(e!==t){var n=R.Qe[t];"function"==typeof n?n=t:(n=R.Qe[t.toLowerCase()])||W("Unknown Shape.figure: "+t),e!==n&&(null!==(t=this.part)&&(t.kh=NaN),this.Wn=n,this.Ed=null,this.dc(),this.o(),this.g("figure",e,n))}}},toArrow:{get:function(){return this.qm},set:function(t){var e=this.qm;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=OM(t);null===n?W("Unknown Shape.toArrow: "+t):e!==n&&(this.qm=n,this.Ed=null,this.dc(),this.o(),da(this),this.g("toArrow",e,n))}}},fromArrow:{get:function(){return this.ul},set:function(t){var e=this.ul;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=OM(t);null===n?W("Unknown Shape.fromArrow: "+t):e!==n&&(this.ul=n,this.Ed=null,this.dc(),this.o(),da(this),this.g("fromArrow",e,n))}}},spot1:{get:function(){return this.qf},set:function(t){var e=this.qf;e.w(t)||(this.qf=t=t.G(),this.o(),this.g("spot1",e,t))}},spot2:{get:function(){return this.rf},set:function(t){var e=this.rf;e.w(t)||(this.rf=t=t.G(),this.o(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.np},set:function(t){var e=this.np;e!==t&&(this.np=t,this.dc(),this.o(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.op},set:function(t){var e=this.op;e!==t&&(this.op=t,this.dc(),this.o(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){if(null!==this.na)return this.rc.assign(this.na.bounds),this.rc;var t=this.desiredSize;return new z(0,0,t.width,t.height)}},pathPattern:{get:function(){return this.qp},set:function(t){var e=this.qp;e!==t&&(this.qp=t,this.M(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.eo},set:function(t){var e=this.eo;e!==t&&(this.eo=t,this.g("geometryStretch",e,t))}},interval:{get:function(){return this.Xd},set:function(t){var e=this.Xd;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){this.Xd=t;var n=this.diagram;null!==n&&this.panel===n.grid&&aa(n),this.o(),null!==(n=this.panel)&&(n.eh=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Vd},set:function(t){var e=this.Vd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Vd=t,this.o(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Td},set:function(t){var e=this.Td;e!==t&&(0>t?t=0:1<t&&(t=1),this.Td=t,this.o(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.Ud},set:function(t){var e=this.Ud;e!==t&&(this.Ud=t,this.o(),this.g("graduatedSkip",e,t))}}}),At.prototype.intersectsRect=At.prototype.Oc,At.prototype.containedInRect=At.prototype.Ih,At.prototype.getNearestIntersectionPoint=At.prototype.Ot,At.prototype.getDocumentBounds=At.prototype.mj,At.prototype.getDocumentPoint=At.prototype.da;var pa=new Ki,lm=new Ki;function le(){Z.call(this),lf||(_i=dr?new ro(null).context:null,lf=!0),this.Kx=this.Ub="",this.Jc="black",this.ne="13px sans-serif",this.Vi="start",this.Sd=un,this.aj=Hw,this.Pj=!0,this.zi=this.Ai=!1,this.og=Hv,this.Ag=Nh,this.vs=this.ub=this.ad=0,this.dv=this.ev=null,this.Tn=!1,this.Ec=this.vn=this.fq=this.Wi=this.gq=null,this.pf=this.nf=0,this.si=Ud,this.ve=1/0,this.Di=0,this.oe=null,this.Be=0,this.me=this.lb=this.Qb=null,this.Xd=1,this.Vd=0,this.Td=1,this.Ud=this.Lj=null}function Uo(t,e){t.F=6144|e.F,t.hb=e.opacity,t.mb=e.background,t.ec=e.areaBackground,t.Zc=e.desiredSize.G(),t.hg=e.minSize.G(),t.gg=e.maxSize.G(),t.eg=e.eg.copy(),t.ya=e.scale,t.Yb=e.angle,t.De=e.stretch,t.jh=e.margin.G(),t.zb=e.alignment.G(),t.$k=e.alignmentFocus.G(),t.$l=e.segmentFraction,t.am=e.segmentOffset.G(),t.bm=e.segmentOrientation,null!==e.Ya&&(t.Ya=e.Ya.copy()),t.dm=e.shadowVisible,e instanceof le&&(t.Ub=e.Ub,t.Jc=e.Jc,t.ne=e.ne,t.Vi=e.Vi,t.Sd=e.Sd,t.aj=e.aj,t.Pj=e.Pj,t.Ai=e.Ai,t.zi=e.zi,t.og=e.og,t.Ag=e.Ag,t.oe=null,t.nf=e.nf,t.pf=e.pf,t.ve=e.ve,t.Di=e.Di,t.Xd=e.Xd,t.Vd=e.Vd,t.Td=e.Td,t.Lj=e.Lj,t.Ud=e.Ud)}function _h(t,e,n){null===t.me?(t.me=e,t.ub=n):((null===t.lb||null===t.Qb)&&(t.lb=[],t.Qb=[],t.lb.push(t.me),t.Qb.push(t.ub)),t.lb.push(e),t.Qb.push(n))}function Vd(t,e,n,o){var a=t.si===Ud;a&&(e=e.trim());var u=0,h=t.ne,f=t.nf+t.pf;f=Math.max(0,ju(t)+f);var p=t.og===cm?Vv(h):0;if(t.ad>=t.ve)null!==o&&o.h(0,f);else if(h=e,t.Ag===um){t.Be=1;var g=so(e);if(0===p||g<=n)t.ub=Math.max(t.ub,g),_h(t,e,t.ub),null!==o&&o.h(g,f);else{for(g=so((u=rf(t,h))+(e=rf(t,h=h.substr(u.length))));0<e.length&&g<=n;)g=(u+=e)+(e=rf(t,h=h.substr(e.length))),a&&(g=g.trim()),g=so(g);for(a&&(e=e.trim()),u+=e,n=Math.max(1,n-p);so(u)>n&&1<u.length;)u=u.substr(0,u.length-1);var y=so(u+=af);t.ub=y,_h(t,u,y),null!==o&&o.h(y,f)}}else{for(p=0,0===h.length&&(p=1,_h(t,h,0));0<h.length;){for(e=rf(t,h),h=h.substr(e.length);so(e)>n;){var v=1;for(g=so(e.substr(0,v)),y=0;g<=n;)v++,y=g,g=so(e.substr(0,v));if(1===v){var x=g;u=Math.max(u,g)}else x=y,u=Math.max(u,y);if(1>--v&&(v=1),_h(t,e.substr(0,v),x),p++,e=e.substr(v),t.ad+p>t.ve)break}for(g=so(e+(y=rf(t,h)));0<y.length&&g<=n;)g=(e+=y)+(y=rf(t,h=h.substr(y.length))),a&&(g=g.trim()),g=so(g);if(a&&(e=e.trim()),""!==e&&("\xad"===e[e.length-1]&&(e=e.substring(0,e.length-1)+"\u2010"),0===y.length?(v=g,u=Math.max(u,g)):(v=y=so(e),u=Math.max(u,y)),_h(t,e,v),p++,t.ad+p>t.ve))break}t.Be=Math.min(t.ve,p),t.ub=Math.max(t.ub,u),null!==o&&o.h(t.ub,f*t.Be)}}function rf(t,e){if(t.Ag===hm)return e.substr(0,1);for(var n=e.length,o=0,a=FM;o<n&&!a.test(e.charAt(o));)o++;for(t.si===LM&&(n=Math.min(n,o+1));o<n&&a.test(e.charAt(o));)o++;return o>=e.length?e:e.substr(0,o)}function so(t){return null===_i?8*t.length:_i.measureText(t).width}function ju(t){if(null!==t.oe)return t.oe;var e=t.ne;if(null===_i){var n=16;return t.oe=n}return void 0!==Gv[e]&&5e3>Ox?n=Gv[e]:(n=1.3*_i.measureText("M").width,Gv[e]=n,Ox++),t.oe=n}function Vv(t){if(null===_i)return 6;if(void 0!==fm[t]&&5e3>zv)var e=fm[t];else e=_i.measureText(af).width,fm[t]=e,zv++;return e}function Uv(t,e){var n=t.Ub.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),o=t.nf+t.pf;if(o=Math.max(0,ju(t)+o),0===n.length)return t.ub=0,t.ad=1,o;if(!t.isMultiline){var a=n.indexOf("\n",0);0<=a&&(n=n.substr(0,a))}a=0;for(var h,u=t.ad=0,f=!1;!f;){if(-1===(h=n.indexOf("\n",u))&&(h=n.length,f=!0),u<=h){if(u=n.substr(u,h-u),t.Ag!==um){t.Be=0;var p=Nt.alloc();Vd(t,u,e,p),a+=p.height,Nt.free(p),t.ad+=t.Be}else Vd(t,u,e,null),a+=o,t.ad++;t.ad===t.ve&&(f=!0)}u=h+1}return t.vs=a}At.className="Shape",At.getFigureGenerators=function(){var e,t=new Et;for(e in R.Qe)e!==e.toLowerCase()&&t.add(e,R.Qe[e]);return t.freeze(),t},At.defineFigureGenerator=function(t,e){var n=t.toLowerCase(),o=R.Qe;o[t]=e,o[n]=t},At.getArrowheadGeometries=function(){var t=new Et;for(o in R.bn)if(void 0===pa[o]){var e=se(R.bn[o],!1);pa[o]=e,(e=o.toLowerCase())!==o&&(pa[e]=o)}for(var n in pa)if(n!==n.toLowerCase()){var o=pa[n];o instanceof It&&t.add(n,o)}return t.freeze(),t},At.defineArrowheadGeometry=function(t,e){var n;n="string"==typeof e?se(e,!1):e,"none"!==(e=t.toLowerCase())&&t!==e||W("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var o=pa;o[t]=n,o[e]=t},Y(le,Z),le.prototype.cloneProtected=function(t){Z.prototype.cloneProtected.call(this,t),t.Ub=this.Ub,t.Kx=this.Kx,t.Jc=this.Jc,t.ne=this.ne,t.Vi=this.Vi,t.Sd=this.Sd,t.aj=this.aj,t.Pj=this.Pj,t.Ai=this.Ai,t.zi=this.zi,t.og=this.og,t.Ag=this.Ag,t.ad=this.ad,t.vs=this.vs,t.ub=this.ub,t.ev=this.ev,t.dv=this.dv,t.Tn=this.Tn,t.gq=this.gq,t.Wi=this.Wi,t.fq=this.fq,t.vn=this.vn,t.Ec=this.Ec,t.nf=this.nf,t.pf=this.pf,t.si=this.si,t.ve=this.ve,t.oe=this.oe,t.Be=this.Be,t.Qb=this.Qb,t.lb=this.lb,t.me=this.me,t.Di=this.Di,t.Xd=this.Xd,t.Vd=this.Vd,t.Td=this.Td,t.Lj=this.Lj,t.Ud=this.Ud},(D=le.prototype).jb=function(t){t.classType===le?this.wrap=t:Z.prototype.jb.call(this,t)},D.toString=function(){return 22<this.Ub.length?'TextBlock("'+this.Ub.substring(0,20)+'"...)':'TextBlock("'+this.Ub+'")'},D.o=function(){Z.prototype.o.call(this),this.dv=this.ev=null},D.ej=function(t,e){if(null!==this.Jc&&0!==this.Ub.length&&null!==this.ne){var n=this.naturalBounds,o=this.actualBounds,a=n.width,u=n.height,h=ju(this),f=t.textAlign=this.Vi,p=e.Hl;"start"===f?f=p?"right":"left":"end"===f&&(f=p?"left":"right"),p=this.Ai;var g=this.zi;pr(this,t,this.Jc,!0,!1,n,o),(p||g)&&pr(this,t,this.Jc,!1,!1,n,o),o=0,n=!1;var y=A.allocAt(0,0);this.Fd.sa(y);var v=A.allocAt(0,h);this.Fd.sa(v);var x=y.He(v);switch(A.free(y),A.free(v),8>x*(y=e.scale)*y&&(n=!0),e.Hb!==t&&(n=!1),!1===e.Je("textGreeking")&&(n=!1),e=this.nf,x=this.pf,this.flip){case Ro:t.translate(a,0),t.scale(-1,1);break;case jl:t.translate(0,u),t.scale(1,-1);break;case Yc:t.translate(a,u),t.scale(-1,-1)}if(u>(v=(e+h+x)*(y=this.ad))&&(o=(o=this.aj).y*u-o.y*v+o.offsetY),1===y&&null!==this.me)(x=this.ub)>a&&(x=a),this.dj(this.me,t,0,o+e,a,h,x,n,f,p,g);else if(null!==this.Qb&&null!==this.lb)for(v=0;v<y;v++){var S=this.Qb[v];S>a&&(S=a),this.dj(this.lb[v],t,0,o+=e,a,h,S,n,f,p,g),o+=h+x}switch(this.flip){case Ro:t.scale(-1,1),t.translate(-a,0);break;case jl:t.scale(1,-1),t.translate(0,-u);break;case Yc:t.scale(-1,-1),t.translate(-a,-u)}}},D.dj=function(t,e,n,o,a,u,h,f,p,g,y){var v=0;f?("left"===p?v=0:"right"===p?v=a-h:"center"===p&&(v=(a-h)/2),e.fillRect(n+v,o+.25*u,h,1)):("left"===p?v=0:"right"===p?v=a:"center"===p&&(v=a/2),a=null!==of?of(this,u):.75*u,e.fillText(t,n+v,o+a),0==(t=u/20|0)&&(t=1),"right"===p?v-=h:"center"===p&&(v-=h/2),g&&(p=null!==sf?sf(this,u):.8*u,e.beginPath(),e.lineWidth=t,e.moveTo(n+v,o+p),e.lineTo(n+v+h,o+p),e.stroke()),y&&(e.beginPath(),e.lineWidth=t,o=o+u-u/2.2|0,t%2!=0&&(o+=.5),e.moveTo(n+v,o),e.lineTo(n+v+h,o),e.stroke()))},D.Gm=function(t,e,n,o){this.Di=t;var u,a=this.ne;if(null!==_i&&dm!==a&&(dm=_i.font=a),this.ub=this.Be=0,this.me=this.lb=this.Qb=this.oe=null,isNaN(this.desiredSize.width)){if(0===(a=this.Ub.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length)a=0;else if(this.isMultiline){for(var h=u=0,f=!1;!f;){var p=a.indexOf("\n",h);-1===p&&(p=a.length,f=!0),h=a.substr(h,p-h),this.si===Ud&&(h=h.trim()),u=Math.max(u,so(h)),h=p+1}a=u}else 0<=(u=a.indexOf("\n",0))&&(a=a.substr(0,u)),a=so(a);a=Math.min(a,t/this.scale),a=Math.max(8,a)}else a=this.desiredSize.width;if(null!==this.panel&&(a=Math.min(a,this.panel.maxSize.width)),u=Uv(this,a),f=u=isNaN(this.desiredSize.height)?Math.min(u,e/this.scale):this.desiredSize.height,0!==this.ub&&null!==this.Qb&&null!==this.lb&&this.og===cm&&(e=this.ne,e=this.og===cm?Vv(e):0,p=this.nf+this.pf,p=Math.max(0,ju(this)+p),!((f=Math.min(this.maxLines-1,Math.max(Math.floor(f/p+.01)-1,0)))+1>=this.lb.length))){for(p=this.lb[f],e=Math.max(1,t-e);so(p)>e&&1<p.length;)p=p.substr(0,p.length-1);e=so(p+=af),this.lb[f]=p,this.lb=this.lb.slice(0,f+1),this.Qb[f]=e,this.Qb=this.Qb.slice(0,f+1),this.Be=this.lb.length,this.ub=Math.max(this.ub,e),this.ad=this.Be,1===this.ad&&(this.me=this.lb[0])}(this.wrap===bM||isNaN(this.desiredSize.width))&&(a=isNaN(t)?this.ub:Math.min(t,this.ub),isNaN(this.desiredSize.width)&&(a=Math.max(8,a))),a=Math.max(n,a),u=Math.max(o,u),Ao(this.rc,a,u),As(this,0,0,a,u)},D.Hh=function(t,e,n,o){Wc(this,t,e,n,o)},L.Object.defineProperties(le.prototype,{font:{get:function(){return this.ne},set:function(t){var e=this.ne;e!==t&&(this.ne=t,this.oe=null,this.o(),this.g("font",e,t))}},text:{get:function(){return this.Ub},set:function(t){var e=this.Ub;e!==(t=null!=t?t.toString():"")&&(this.Ub=t,this.o(),this.g("text",e,t))}},textAlign:{get:function(){return this.Vi},set:function(t){var e=this.Vi;e===t||"start"!==t&&"end"!==t&&"left"!==t&&"right"!==t&&"center"!==t||(this.Vi=t,this.M(),this.g("textAlign",e,t))}},flip:{get:function(){return this.Sd},set:function(t){var e=this.Sd;e!==t&&(this.Sd=t,this.M(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.aj},set:function(t){var e=this.aj;e.w(t)||(this.aj=t=t.G(),qa(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.rc.u()){var t=Nt.alloc();Vd(this,this.Ub,999999,t);var e=t.width;Nt.free(t),t=Uv(this,e);var n=this.desiredSize;isNaN(n.width)||(e=n.width),isNaN(n.height)||(t=n.height),Ao(this.rc,e,t)}return this.rc}},isMultiline:{get:function(){return this.Pj},set:function(t){var e=this.Pj;e!==t&&(this.Pj=t,this.o(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e!==t&&(this.Ai=t,this.M(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return this.zi},set:function(t){var e=this.zi;e!==t&&(this.zi=t,this.M(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.Ag},set:function(t){var e=this.Ag;e!==t&&(this.Ag=t,this.o(),this.g("wrap",e,t))}},overflow:{get:function(){return this.og},set:function(t){var e=this.og;e!==t&&(this.og=t,this.o(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Jc},set:function(t){var e=this.Jc;e!==t&&(null!==t&&Fu(t,"TextBlock.stroke"),t instanceof Xt&&t.freeze(),this.Jc=t,this.M(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.ad}},editable:{get:function(){return this.Tn},set:function(t){var e=this.Tn;e!==t&&(this.Tn=t,this.g("editable",e,t))}},textEditor:{get:function(){return this.gq},set:function(t){var e=this.gq;e!==t&&(this.gq=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.Ec},set:function(t){var e=this.Ec;e!==t&&(this.Ec=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.Xd},set:function(t){var e=this.Xd;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){this.Xd=t,this.o();var n=this.panel;null!==n&&(n.eh=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Vd},set:function(t){var e=this.Vd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Vd=t,this.o(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Td},set:function(t){var e=this.Td;e!==t&&(0>t?t=0:1<t&&(t=1),this.Td=t,this.o(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.Lj},set:function(t){var e=this.Lj;e!==t&&(this.Lj=t,this.o(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.Ud},set:function(t){var e=this.Ud;e!==t&&(this.Ud=t,this.o(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.Wi},set:function(t){var e=this.Wi;e!==t&&(this.Wi=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.fq},set:function(t){var e=this.fq;e!==t&&(this.fq=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.nf},set:function(t){var e=this.nf;e!==t&&(this.nf=t,this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.pf},set:function(t){var e=this.pf;e!==t&&(this.pf=t,this.g("spacingBelow",e,t))}},formatting:{get:function(){return this.si},set:function(t){var e=this.si;e!==t&&(this.si=t,this.g("formatting",e,t))}},maxLines:{get:function(){return this.ve},set:function(t){var e=this.ve;e!==t&&(0>=(t=Math.floor(t))&&qt(t,"> 0",le,"maxLines"),this.ve=t,this.g("maxLines",e,t),this.o())}},metrics:{get:function(){return{arrSize:null!==this.Qb?this.Qb:[this.ub],arrText:null!==this.lb?this.lb:[this.me],maxLineWidth:this.ub,fontHeight:this.oe}}},choices:{get:function(){return this.vn},set:function(t){var e=this.vn;e!==t&&(this.vn=t,this.g("choices",e,t))}}});var of=null,sf=null,um=new it(le,"None",0),bM=new it(le,"WrapFit",1),Nh=new it(le,"WrapDesiredSize",2),hm=new it(le,"WrapBreakAll",3),Hv=new it(le,"OverflowClip",0),cm=new it(le,"OverflowEllipsis",1),Ud=new it(le,"FormatTrim",0),LM=new it(le,"FormatNone",0),FM=/[ \u200b\u00ad]/,Gv=new Ki,Ox=0,fm=new Ki,zv=0,af="...",dm="",_i=null,lf=!1;function pm(){this.Qb=[],this.lb=[]}function Ho(){Z.call(this),this.Zg=null,this.Xp="",this.th=oM,this.zl=Je,this.sf=this.Ec=null,this.yl=ie,this.Sd=un,this.mm=null,this.Su=!1,this.Zr=!0,this.Pl=!1,this.fm=null}function Hd(t){void 0===t&&(t=""),""!==t?Ph[t]&&(delete Ph[t],Gd--):(Ph=new Ki,Gd=0)}function $v(t,e){t.ms=!0,t.vl=!1;for(var n,o=eg(),a=o.length,u=0;u<a;u++){var h=o[u];n=t.getAttribute("src");var f=h.Pi.H(n);if(null!==f)for(var p=f.length,g=0;g<p;g++)h.Ms.add(n=f[g]),h.Eb(),void 0===t.nv&&(t.nv=e,null!==n.sf&&n.sf(n,e))}}function Bu(t,e){t.vl=e;for(var n,o=eg(),a=o.length,u=0;u<a;u++){var h=o[u],f=t.getAttribute("src");if(null!==(n=h.Pi.H(f))){h=n.length,f=ye();for(var p=0;p<h;p++)f.push(n[p]);for(p=0;p<h;p++)null!==(n=f[p]).Ec&&n.Ec(n,e);Jt(f)}}}le.className="TextBlock",le.getEllipsis=function(){return af},le.setEllipsis=function(t){af=t,fm=new Ki,zv=0},le.getBaseline=function(){return of},le.setBaseline=function(t){of=t;for(var e=(t=eg()).length,n=0;n<e;n++)t[n].Me()},le.getUnderline=function(){return sf},le.setUnderline=function(t){sf=t;for(var e=(t=eg()).length,n=0;n<e;n++)t[n].Me()},le.isValidFont=function(t){if(lf||(_i=dr?new ro(null).context:null,lf=!0),null===_i)return!0;var e=_i.font;if(t===e||"10px sans-serif"===t)return!0;_i.font="10px sans-serif",_i.font=t;var n=_i.font;if("10px sans-serif"!==n)return _i.font=e,!0;_i.font="19px serif";var o=_i.font;return _i.font=t,n=_i.font,_i.font=e,n!==o},le.None=um,le.WrapFit=bM,le.WrapDesiredSize=Nh,le.WrapBreakAll=hm,le.OverflowClip=Hv,le.OverflowEllipsis=cm,pm.prototype.reset=function(){this.Qb=[],this.lb=[]},pm.prototype.Dt=function(t){this.Qb=Pl(t.Qb),this.lb=Pl(t.lb)},pm.className="TextBlockMetrics",Y(Ho,Z),Ho.prototype.cloneProtected=function(t){Z.prototype.cloneProtected.call(this,t),t.element=this.Zg,t.Xp=this.Xp,t.th=this.th.G(),t.zl=this.zl,t.Sd=this.Sd,t.Ec=this.Ec,t.sf=this.sf,t.yl=this.yl.G(),t.Zr=this.Zr,t.fm=this.fm},(D=Ho.prototype).jb=function(t){t===un||t===xo||t===Dd?this.imageStretch=t:Z.prototype.jb.call(this,t)},D.toString=function(){return"Picture("+this.source+")#"+En(this)},D.QA=function(){if(""!==this.source){Hd(this.source);var t=this.source;this.source="",this.source=t}},D.Me=function(){this.M()},D.ej=function(t,e){var n=this.Zg;if(null!==n){var o=n.getAttribute("src");if(!(n instanceof HTMLImageElement&&(null===o||""===o)||n.vl instanceof Event&&t instanceof Lu)){o=this.naturalBounds;var a=0,u=0,h=this.Su,f=h?+n.width:n.naturalWidth;if(void 0===f&&n.videoWidth&&(f=n.videoWidth),void 0===(h=h?+n.height:n.naturalHeight)&&n.videoHeight&&(h=n.videoHeight),h=h||o.height,0!==(f=f||o.width)&&0!==h){var p=f,g=h;this.sourceRect.u()&&(a=this.th.x,u=this.th.y,f=this.th.width,h=this.th.height);var y=f,v=h,x=this.zl,S=this.yl;switch(x){case un:if(this.sourceRect.u())break;y>=o.width&&(a=a+S.offsetX+(y*S.x-o.width*S.x)),v>=o.height&&(u=u+S.offsetY+(v*S.y-o.height*S.y)),f=Math.min(o.width,y),h=Math.min(o.height,v);break;case Je:y=o.width,v=o.height;break;case xo:case Dd:x===xo?(y*=x=Math.min(o.height/v,o.width/y),v*=x):x===Dd&&((y*=x=Math.max(o.height/v,o.width/y))>=o.width&&(a=(a+S.offsetX+(y*S.x-o.width*S.x)/y)*f),(v*=x)>=o.height&&(u=(u+S.offsetY+(v*S.y-o.height*S.y)/v)*h),f*=1/(y/o.width),h*=1/(v/o.height),y=o.width,v=o.height)}var M=y*(x=this.Cf()*e.scale)*v*x,T=f*h/M,N=n.__goCache;if(x=null,n.ms&&void 0!==N&&4<M&&T>RM*RM)for(null===N.cj&&(bx(N,4,p,g,n),bx(N,16,p,g,n)),g=(p=N.cj).length,M=0;M<g&&p[M].ratio*p[M].ratio<T;M++)x=p[M];if(!e.rl){if(null===this.mm)if(null===this.Zg)this.mm=!1;else{(p=new ro(null).context).drawImage(this.Zg,0,0);try{p.getImageData(0,0,1,1).data[3]&&(this.mm=!1),this.mm=!1}catch(I){this.mm=!0}}if(this.mm)return}switch(p=0,y<o.width&&(p=S.offsetX+(o.width*S.x-y*S.x)),g=0,v<o.height&&(g=S.offsetY+(o.height*S.y-v*S.y)),this.flip){case Ro:t.translate(Math.min(o.width,y),0),t.scale(-1,1);break;case jl:t.translate(0,Math.min(o.height,v)),t.scale(1,-1);break;case Yc:t.translate(Math.min(o.width,y),Math.min(o.height,v)),t.scale(-1,-1)}if(e.Je("pictureRatioOptimization")&&!e.xi&&void 0!==N&&null!==x&&1!==x.ratio){t.save(),e=x.ratio;try{t.drawImage(x.source,a/e,u/e,Math.min(x.source.width,f/e),Math.min(x.source.height,h/e),p,g,Math.min(o.width,y),Math.min(o.height,v))}catch(I){this.Zr=!1}t.restore()}else try{t.drawImage(n,a,u,f,h,p,g,Math.min(o.width,y),Math.min(o.height,v))}catch(I){this.Zr=!1}switch(this.flip){case Ro:t.scale(-1,1),t.translate(-Math.min(o.width,y),0);break;case jl:t.scale(1,-1),t.translate(0,-Math.min(o.height,v));break;case Yc:t.scale(-1,-1),t.translate(-Math.min(o.width,y),-Math.min(o.height,v))}}}}},D.Gm=function(t,e,n,o){var a=this.desiredSize,u=jo(this,!0),h=this.Zg,f=this.Su;(f||!this.Pl&&h&&h.complete)&&(this.Pl=!0),null===h&&(isFinite(a.width)||(t=0),isFinite(a.height)||(e=0)),isFinite(a.width)||u===Je||u===ei?(isFinite(t)||(t=this.sourceRect.u()?this.sourceRect.width:f?+h.width:h.naturalWidth),n=0):null!==h&&!1!==this.Pl&&(t=this.sourceRect.u()?this.sourceRect.width:f?+h.width:h.naturalWidth),isFinite(a.height)||u===Je||u===li?(isFinite(e)||(e=this.sourceRect.u()?this.sourceRect.height:f?+h.height:h.naturalHeight),o=0):null!==h&&!1!==this.Pl&&(e=this.sourceRect.u()?this.sourceRect.height:f?+h.height:h.naturalHeight),isFinite(a.width)&&(t=a.width),isFinite(a.height)&&(e=a.height),a=this.maxSize,u=this.minSize,n=Math.max(n,u.width),o=Math.max(o,u.height),t=Math.min(a.width,t),e=Math.min(a.height,e),t=Math.max(n,t),e=Math.max(o,e),null===h||h.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),Ao(this.rc,t,e),As(this,0,0,t,e)},D.Hh=function(t,e,n,o){Wc(this,t,e,n,o)},L.Object.defineProperties(Ho.prototype,{element:{get:function(){return this.Zg},set:function(t){var e=this.Zg;if(e!==t){if(null===t||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||W("Picture.element must be an instance of Image, Canvas, or Video, not: "+t),this.Su=t instanceof HTMLCanvasElement,this.Zg=t,null!==t)if(t instanceof HTMLCanvasElement||!0===t.complete)t.vl instanceof Event&&null!==this.Ec&&this.Ec(this,t.vl),!0===t.ms&&null!==this.sf&&this.sf(this,t.nv),t.ms=!0,this.desiredSize.u()||(tr(this,!1),this.o());else{var n=this;t.zx||(t.addEventListener("load",function(o){$v(t,o),n.desiredSize.u()||(tr(n,!1),n.o())}),t.addEventListener("error",function(o){Bu(t,o)}),t.zx=!0)}this.g("element",e,t),this.M()}}},source:{get:function(){return this.Xp},set:function(t){var e=this.Xp;if(e!==t){this.Xp=t;var n=Ph,o=this.diagram;if(dr){var a=null;if(void 0!==n[t])a=n[t];else if(""!==t){30<Gd&&(Hd(),n=Ph),a=Ke("img");var u=this;a.addEventListener("load",function(f){$v(a,f),u.desiredSize.u()||(tr(u,!1),u.o())}),a.addEventListener("error",function(f){Bu(a,f)}),a.zx=!0;var h=this.fm;null!==h&&(a.crossOrigin=h(this)),a.src=t,n[t]=a,Gd++}null!==o&&Tu(o,this),this.element=a,null!==o&&null!==a&&mh(o,this),null!==a&&void 0===a.__goCache&&(a.__goCache=new zd),this.o(),this.M()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.fm},set:function(t){if(this.fm!==t&&(this.fm=t,null!==this.element)){var e=this.element.getAttribute("src");null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.th},set:function(t){var e=this.th;e.w(t)||(this.th=t=t.G(),this.M(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.zl},set:function(t){var e=this.zl;e!==t&&(this.zl=t,this.M(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Sd},set:function(t){var e=this.Sd;e!==t&&(this.Sd=t,this.M(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.yl},set:function(t){var e=this.yl;e.w(t)||(this.yl=t=t.G(),this.o(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.Ec},set:function(t){var e=this.Ec;e!==t&&(this.Ec=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.sf},set:function(t){var e=this.sf;e!==t&&(this.sf=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.rc}}}),Ho.prototype.redraw=Ho.prototype.Me,Ho.prototype.reloadSource=Ho.prototype.QA;var Ph=null,Gd=0,RM=4;function zd(){this.cj=null}function bx(t,e,n,o,a){null===t.cj&&(t.cj=[]);var u=new ro(null),h=u.context,f=1/e;u.width=n/e,u.height=o/e,0!==u.width&&0!==u.height&&(e=new Yv(u.Ga,e),n=1,0<t.cj.length&&(a=(n=t.cj[t.cj.length-1]).source,n=n.ratio),h.setTransform(f*n,0,0,f*n,0,0),h.drawImage(a,0,0),t.cj.push(e))}function Yv(t,e){this.source=t,this.ratio=e}function gm(){this.Lt=new It,this.ic=null}function Ah(t,e,n,o,a){t.ic=new nn,t.ic.startX=e,t.ic.startY=n,t.ic.isFilled=o,t.Lt.figures.add(t.ic),void 0!==a&&(t.ic.isShadowed=a)}function Wv(t){var e=t.ic.segments.length;0<e&&t.ic.segments.J(e-1).close()}function ga(t,e,n,o,a,u,h){var f;void 0===f&&(f=!1);var p=new Ct(ln);p.point1X=e,p.point1Y=n,p.point2X=o,p.point2Y=a,p.endX=u,p.endY=h,f&&p.close(),t.ic.segments.add(p)}function kh(t,e,n,o,a){var u;void 0===u&&(u=!1);var h=new Ct(hr);h.point1X=e,h.point1Y=n,h.endX=o,h.endY=a,u&&h.close(),t.ic.segments.add(h)}function mm(t,e,n,o,a,u,h,f){var p;void 0===p&&(p=!1),e=new Ct(Ir,h,f,e,n,o,a,u),p&&e.close(),t.ic.segments.add(e)}function Xv(t){var e=uf;return null!==e?(uf=null,e.reset(t),e):((e=new gm).reset(t),e)}Ho.className="Picture",Ph=new Ki,Ho.clearCache=Hd,zd.className="PictureCacheArray",Yv.className="PictureCacheInstance",(D=gm.prototype).reset=function(t){null!==t?(t.ea(),this.Lt=t,t.figures.clear()):this.Lt=new It,this.ic=null},D.fr=function(t){this.ic.isShadowed=t},D.moveTo=function(t,e,n){void 0===n&&(n=!1);var o=new Ct($n);o.endX=t,o.endY=e,n&&o.close(),this.ic.segments.add(o)},D.lineTo=function(t,e,n){void 0===n&&(n=!1);var o=new Ct(He);o.endX=t,o.endY=e,n&&o.close(),this.ic.segments.add(o)},D.arcTo=function(t,e,n,o,a,u,h){void 0===u&&(u=0),void 0===h&&(h=!1);var f=new Ct(Oe);f.startAngle=t,f.sweepAngle=e,f.centerX=n,f.centerY=o,f.radiusX=a,f.radiusY=0!==u?u:a,h&&f.close(),this.ic.segments.add(f)};var uf=null;function Bi(t,e){var n=t.toLowerCase(),o=R.Qe;o[t]=e,o[n]=t}function wt(t){X.call(this,t),this.D=2408959,this.ih=this.Pf="",this.Bp=this.xp=this.Mp=this.Co=null,this.Op="",this.Nf=this.oo=this.Np=this.sh=null,this.zp="",this.yp=Ce,this.Ub=this.Cp="",this.Ei=this.yn=this.li=null,this.fg=new A(NaN,NaN).freeze(),this.Jo="",this.df=null,this.Ko=Ue,this.Dp=Ei,this.To=Wy,this.Lo=Vn,this.Qn=null,this.Do=127,this.Sp=sg,this.Rp="gray",this.lf=4,this.Bx=-1,this.qq=NaN,this.fz=new z,this.Xj=null,this.kh=NaN}function Ih(t){0!=(16384&t.D)&&(t.updateAdornments(),t.D&=-16385)}function $d(t){if(!1===ma(t)){qv(t,!0),t.Gl();var e=t.diagram;null!==e&&(e.wd.add(t),e.Eb())}}function Lx(t){if(t.D|=2097152,!1!==ma(t)){var e=t.position,n=t.location;n.u()&&e.u()||ym(t,e,n),n=t.yb;var o=z.alloc().assign(n);n.ea(),n.x=e.x,n.y=e.y,n.freeze(),t.Hm(o,n),z.free(o),qv(t,!1)}}function Oh(t,e){var n=t.fz;isNaN(t.kh)&&(t.kh=Nx(t));var o=t.kh,a=2*o;if(!t.isShadowed)return n.h(e.x-1-o,e.y-1-o,e.width+2+a,e.height+2+a),n;o=e.x,a=e.y;var u=e.width;e=e.height;var h=t.shadowBlur;return u+=h,e+=h,o-=h/2,a-=h/2,0<(t=t.shadowOffset).x?u+=t.x:(o+=t.x,u-=t.x),0<t.y?e+=t.y:(a+=t.y,e-=t.y),n.h(o-1,a-1,u+2,e+2),n}function Kv(t,e,n,o){null===e||t instanceof Gt||(e=e.animationManager).ff&&nx(e,t,o.copy(),n.copy())}function ym(t,e,n){var o=A.alloc(),a=t.locationSpot,u=t.locationObject;a.nc()&&W("determineOffset: Part's locationSpot must be real: "+a.toString());var h=u.naturalBounds,f=u instanceof At?u.strokeWidth:0;if(o.Tk(0,0,h.width+f,h.height+f,a),u!==t)for(o.offset(-f/2,-f/2),u.transform.sa(o),a=u.panel;null!==a&&a!==t;)a.transform.sa(o),a=a.panel;t.eg.sa(o),o.offset(-t.qc.x,-t.qc.y),a=t.diagram,u=n.u(),h=e.u(),u&&h?0!=(2097152&t.D)?Zv(t,e,n,a,o):BM(t,e,n,a,o):u?Zv(t,e,n,a,o):h&&BM(t,e,n,a,o),t.D|=2097152,A.free(o),t.Gl()}function Zv(t,e,n,o,a){var u=e.x,h=e.y;e.h(n.x-a.x,n.y-a.y),null!==o&&((o=(n=o.animationManager).defaultAnimation.isAnimating)||!n.ff||t instanceof Gt||nx(n,t,new A(u,h),e),o||e.x===u&&e.y===h||t.g("position",new A(u,h),e.copy()))}function BM(t,e,n,o,a){var u=n.copy();n.h(e.x+a.x,e.y+a.y),n.w(u)||null===o||t.g("location",u,n.copy())}function Jv(t,e,n){t0(t,!1),t instanceof ot&&px(n,t),t.layer.isTemporary||e||n.Oa(),e=t.yb;var o=n.viewportBounds;o.u()?yr(t)?(iM(e,o)||t.Nd(!1),t.updateAdornments()):e.Oc(o)?(t.Nd(!0),t.updateAdornments()):t.Mb():n.wi=!0}function Qv(t,e,n,o){e.constructor===t.constructor||n0||(n0=!0,Ln('Should not change the class of the Part when changing category from "'+n+'" to "'+o+'"'),Ln("  Old class: "+Va(t.constructor)+", new class: "+Va(e.constructor)+", part: "+t.toString())),t.nk();var a=t.data;n=t.layerName;var u=t.isSelected,h=t.isHighlighted,f=!0,p=!0,g=!1;t instanceof ot&&(f=t.isTreeLeaf,p=t.isTreeExpanded,g=t.wasTreeExpanded),e.Af(t),e.cloneProtected(t),t.Pf=o,t.o(),t.M(),o=!0,null!==(e=t.diagram)&&(o=e.skipsUndoManager,e.skipsUndoManager=!0),t.nb=a,t.D=u?4096|t.D:-4097&t.D,t.D=h?524288|t.D:-524289&t.D,t instanceof ot&&(t.P=f?4|t.P:-5&t.P,t.P=p?1|t.P:-2&t.P,t.P=g?2|t.P:-3&t.P),null!==a&&t.Ca(),(a=t.layerName)!==n&&(t.ih=n,t.layerName=a),null!==e&&(e.skipsUndoManager=o),t.Pc()&&t.C(64)}function ma(t){return 0!=(32768&t.D)}function qv(t,e){t.D=e?32768|t.D:-32769&t.D}function t0(t,e){t.D=e?65536|t.D:-65537&t.D}function yr(t){return 0!=(131072&t.D)}function vm(t,e){t.D=e?1048576|t.D:-1048577&t.D}function wm(t,e){var n=e.containingGroup;return null!==n?1+wm(t,n):e instanceof ot&&null!==(e=e.labeledLink)?wm(t,e):0}function Fx(t,e){var n=e.containingGroup;return null!==n||e instanceof ot&&null!==(n=e.labeledLink)?Fx(t,n):e}function e0(t,e,n){if(e===n||null===n)return!1;var o=e.containingGroup;return!(null===o||o!==n&&!e0(t,o,n))||e instanceof ot&&null!==(e=e.labeledLink)&&e0(t,e,n)}function Rx(t){return!(!t.isVisible()||null!==(t=t.layer)&&t.isTemporary)}function Ul(t,e,n,o,a,u){if(void 0===u&&(u=null),!(t.contains(e)||null!==u&&!u(e)||e instanceof Gt))if(t.add(e),e instanceof ot){if(n&&e instanceof Pt)for(var h=e.memberParts;h.next();)Ul(t,h.value,n,o,a,u);if(!1!==a)for(h=e.linksConnected;h.next();){var f=h.value;if(!t.contains(f)){var p=f.fromNode,g=f.toNode;p=null===p||t.contains(p),g=null===g||t.contains(g),(a?p&&g:p||g)&&Ul(t,f,n,o,a,u)}}if(1<o)for(e=e.Vv();e.next();)Ul(t,e.value,n,o-1,a,u)}else if(e instanceof Q)for(e=e.labelNodes;e.next();)Ul(t,e.value,n,o,a,u)}gm.className="StreamGeometryContext",Bi("Rectangle",function(t,e,n){var o=R.Th[t="r"+e+","+n];return void 0!==o||((o=new It(kr)).endX=e,o.endY=n,50>R.Uh&&(R.Th[t]=o,R.Uh++)),o}),Bi("Square",function(t,e,n){var o=R.Th[t="s"+e+","+n];return void 0!==o||((o=new It(kr)).endX=e,o.endY=n,o.defaultStretch=xo,50>R.Uh&&(R.Th[t]=o,R.Uh++)),o}),Bi("RoundedRectangle",function(t,e,n){var o=t?t.parameter1:NaN;return(isNaN(o)||0>o)&&(o=5),o=Math.min(o,e/3),t=(o=Math.min(o,n/3))*R.Lg,e=(new It).add(new nn(o,0,!0).add(new Ct(He,e-o,0)).add(new Ct(ln,e,o,e-t,0,e,t)).add(new Ct(He,e,n-o)).add(new Ct(ln,e-o,n,e,n-t,e-t,n)).add(new Ct(He,o,n)).add(new Ct(ln,0,n-o,t,n,0,n-t)).add(new Ct(He,0,o)).add(new Ct(ln,o,0,0,t,t,0).close())),1<t&&(e.spot1=new at(0,0,t,t),e.spot2=new at(1,1,-t,-t)),e}),Bi("Border","RoundedRectangle"),Bi("Ellipse",function(t,e,n){var o=R.Th[t="e"+e+","+n];return void 0!==o||((o=new It(ur)).endX=e,o.endY=n,o.spot1=cg,o.spot2=ta,50>R.Uh&&(R.Th[t]=o,R.Uh++)),o}),Bi("Circle",function(t,e,n){var o=R.Th[t="c"+e+","+n];return void 0!==o||((o=new It(ur)).endX=e,o.endY=n,o.spot1=cg,o.spot2=ta,o.defaultStretch=xo,50>R.Uh&&(R.Th[t]=o,R.Uh++)),o}),Bi("TriangleRight",function(t,e,n){return(new It).add(new nn(0,0).add(new Ct(He,e,.5*n)).add(new Ct(He,0,n).close())).Xm(0,.25,.5,.75)}),Bi("TriangleDown",function(t,e,n){return(new It).add(new nn(0,0).add(new Ct(He,e,0)).add(new Ct(He,.5*e,n).close())).Xm(.25,0,.75,.5)}),Bi("TriangleLeft",function(t,e,n){return(new It).add(new nn(e,n).add(new Ct(He,0,.5*n)).add(new Ct(He,e,0).close())).Xm(.5,.25,1,.75)}),Bi("TriangleUp",function(t,e,n){return(new It).add(new nn(e,n).add(new Ct(He,0,n)).add(new Ct(He,.5*e,0).close())).Xm(.25,.5,.75,1)}),Bi("Triangle","TriangleUp"),Bi("Diamond",function(t,e,n){return(new It).add(new nn(.5*e,0).add(new Ct(He,0,.5*n)).add(new Ct(He,.5*e,n)).add(new Ct(He,e,.5*n).close())).Xm(.25,.25,.75,.75)}),Bi("LineH",function(t,e,n){return(t=new It(Tn)).startX=0,t.startY=n/2,t.endX=e,t.endY=n/2,t}),Bi("LineV",function(t,e,n){return(t=new It(Tn)).startX=e/2,t.startY=0,t.endX=e/2,t.endY=n,t}),Bi("None","Rectangle"),Bi("BarH","Rectangle"),Bi("BarV","Rectangle"),Bi("MinusLine","LineH"),Bi("PlusLine",function(t,e,n){return(new It).add(new nn(0,n/2,!1).add(new Ct(He,e,n/2)).add(new Ct($n,e/2,0)).add(new Ct(He,e/2,n)))}),Bi("XLine",function(t,e,n){return(new It).add(new nn(0,n,!1).add(new Ct(He,e,0)).add(new Ct($n,0,0)).add(new Ct(He,e,n)))}),R.bn={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},Y(wt,X),wt.prototype.cloneProtected=function(t){X.prototype.cloneProtected.call(this,t),t.D=-4097&this.D|49152,t.Pf=this.Pf,t.ih=this.ih,t.Co=this.Co,t.Mp=this.Mp,t.xp=this.xp,t.Bp=this.Bp,t.Op=this.Op,t.Np=this.Np,t.oo=this.oo,t.Nf=null,t.zp=this.zp,t.yp=this.yp.G(),t.Cp=this.Cp,t.Dp=this.Dp.G(),t.Ub=this.Ub,t.yn=this.yn,t.fg.assign(this.fg),t.Jo=this.Jo,t.Ko=this.Ko.G(),t.To=this.To.G(),t.Lo=this.Lo.G(),t.Qn=this.Qn,t.Do=this.Do,t.Sp=this.Sp.G(),t.Rp=this.Rp,t.lf=this.lf,t.qq=this.qq},wt.prototype.Af=function(t){X.prototype.Af.call(this,t),t.Nh(),t.sh=null,t.df=null,t.Xj=null},wt.prototype.toString=function(){var t=Va(this.constructor)+"#"+En(this);return null!==this.data&&(t+="("+Pr(this.data)+")"),t},wt.prototype.Rk=function(t,e,n,o,a,u,h){var f=this.diagram;null!==f&&(t===rn&&"elements"===e?a instanceof X?bs(a,function(p){Am(f.partManager,p),Rg(f,p)}):mh(f,a):t===be&&"elements"===e&&(a instanceof X?bs(a,function(p){km(f.partManager,p,f)}):Tu(f,a)),f.bb(t,e,n,o,a,u,h))},wt.prototype.Ca=function(t){if(X.prototype.Ca.call(this,t),null!==this.data){for(var e=this.W.j,n=e.length,o=0;o<n;o++){var a=e[o];a instanceof X&&bs(a,function(u){null!==u.data&&u.Ca()})}for(e=this.adornments;e.next();)e.value.Ca(t)}},wt.prototype.updateRelationshipsFromData=function(){null!==this.data&&this.diagram.partManager.updateRelationshipsFromData(this)},wt.prototype.wk=function(t){var e=this.Nf;return null===e?null:e.H(t)},wt.prototype.Fh=function(t,e){if(null!==e){var n=null,o=this.Nf;if(null!==o&&(n=o.H(t)),n!==e){if(null!==n){var a=n.diagram;null!==a&&a.remove(n)}null===o&&(this.Nf=o=new Et),e.Pf!==t&&(e.category=t),o.add(t,e),null!==(t=this.diagram)&&(t.add(e),null!==(t=e.adornedObject)&&null!==(t=t.ij())&&(e.data=t.data))}}},wt.prototype.Jf=function(t){var e=this.Nf;if(null!==e){var n=e.H(t);if(null!==n){var o=n.diagram;null!==o&&o.remove(n)}e.remove(t),0===e.count&&(this.Nf=null)}},wt.prototype.nk=function(){var t=this.Nf;if(null!==t){var e=ye();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var n=0;n<t;n++)this.Jf(e[n]);Jt(e)}},wt.prototype.updateAdornments=function(){var t=this.diagram;if(null!==t){for(var e=this.adornments;e.next();){var n=e.value;n.o(),n.placeholder&&n.placeholder.o()}t:{if(this.isSelected&&this.selectionAdorned&&null!==(e=this.selectionObject)&&this.actualBounds.u()&&this.isVisible()&&e.If()&&e.actualBounds.u()){if(null===(n=this.wk("Selection"))){if(null===(n=this.selectionAdornmentTemplate)&&(n=this.Oh()?t.linkSelectionAdornmentTemplate:this instanceof Pt?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(n instanceof Gt))break t;Lr(n),null!==(n=n.copy())&&(this.Oh()&&this.selectionObject===this.path&&(n.type=X.Link),n.adornedObject=e)}if(null!==n){n.type===X.Link&&n.o(),this.Fh("Selection",n);break t}}this.Jf("Selection")}for(function jM(t,e){e.toolManager.mouseDownTools.each(function(n){n.isEnabled&&n.updateAdornments(t)}),e.toolManager.updateAdornments(t)}(this,t),e=this.adornments;e.next();)e.value.Ca()}},wt.prototype.Mb=function(){var t=this.diagram;null!==t&&(oa(t),0==(16384&this.D)&&(this.D|=16384,t.Eb()))},wt.prototype.move=function(t,e){!0===e?this.location=t:this.position=t},wt.prototype.moveTo=function(t,e,n){t=A.allocAt(t,e),this.move(t,n),A.free(t)},wt.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(null!==t){if(!t.visible)return!1;if(null!==(t=t.diagram)&&t.animationManager.cu(this))return!0}return!!(null===(t=this.containingGroup)||t.isSubGraphExpanded&&t.isVisible())},(D=wt.prototype).Pb=function(t){var e=this.diagram;t?(this.C(4),this.Mb(),null!==e&&e.wd.add(this)):(this.C(8),this.nk()),this.Nh(),null!==e&&(e.Oa(),e.M())},D.ab=function(t){if(this.name===t)return this;var e=this.Xj;if(null===e&&(this.Xj=e=new Et),null!==e.H(t))return e.H(t);var n=X.prototype.ab.call(this,t);return null!==n?(e.set(t,n),n):(e.set(t,null),null)},D.Ff=function(t,e,n){void 0===n&&(n=new A),e=e.nc()?ie:e;var o=t.naturalBounds;if(n.h(o.width*e.x+e.offsetX,o.height*e.y+e.offsetY),null===t||t===this)return n;for(t.transform.sa(n),t=t.panel;null!==t&&t!==this;)t.transform.sa(n),t=t.panel;return this.eg.sa(n),n.offset(-this.qc.x,-this.qc.y),n},D.mj=function(t){return void 0===t&&(t=new z),t.assign(this.actualBounds)},D.Ta=function(){!0===us(this)&&this.measure(1/0,1/0),this.arrange()},wt.prototype.arrange=function(){if(!1===Ri(this))Lx(this);else{Ou(this,!1);var t=this.yb,e=z.alloc();e.assign(t);var n=yr(this);this.Hh(0,0,this.qc.width,this.qc.height);var o=this.position;ym(this,o,this.location),t.ea(),t.x=o.x,t.y=o.y,t.freeze(),this.Hm(e,t),e.w(t)?this.Nd(n):!this.Pc()||R.A(e.width,t.width)&&R.A(e.height,t.height)||0<=this.Bx&&this.C(16),z.free(e),qv(this,!1)}},(D=wt.prototype).Hm=function(t,e){var n=this.diagram;if(null!==n){var o=!1;if(!1===n.ui&&t.u()){var a=z.alloc();a.assign(n.documentBounds),a.Kw(n.padding),t.x>a.x&&t.y>a.y&&t.right<a.right&&t.bottom<a.bottom&&e.x>a.x&&e.y>a.y&&e.right<a.right&&e.bottom<a.bottom&&(o=!0),z.free(a)}0==(65536&this.D)&&t.w(e)||Jv(this,o,n),n.M(),Xy(t,e)||(this instanceof ot&&!n.undoManager.isUndoingRedoing&&this.td(),this.Nh())}},D.Fw=function(t,e){if(this.Oh()||!t.u())return!1;var n=this.diagram;null!==n&&Kv(this,n,t,e),this.la=t,this.D&=-2097153;var o=this.fg;return!o.u()||null!==n&&!n.animationManager.isTicking&&n.undoManager.isUndoingRedoing||(n=o.copy(),o.h(o.x+(t.x-e.x),o.y+(t.y-e.y)),this.g("location",n,o.copy())),!1===ma(this)&&!1===Ri(this)&&($d(this),Lx(this)),!0},D.er=function(t,e,n){var o=this.fg,a=this.la;if(n){if(o.x===t&&o.y===e)return;ma(this)||Ri(this)?a.h(NaN,NaN):a.h(a.x+t-o.x,a.y+e-o.y),o.h(t,e)}else{if(a.x===t&&a.y===e)return;ma(this)||Ri(this)?this.lu():o.h(o.x+t-a.x,o.y+e-a.y),a.h(t,e)}$d(this)},D.lu=function(){this.D&=-2097153,$d(this)},D.rj=function(){return!0},D.Pc=function(){return!0},D.Oh=function(){return!1},D.Hf=function(){return!0},wt.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return null===t||!!t.allowCopy&&(null===(t=t.diagram)||!!t.allowCopy)},wt.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return null===t||!!t.allowDelete&&(null===(t=t.diagram)||!!t.allowDelete)},wt.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return null===t||!!t.allowTextEdit&&(null===(t=t.diagram)||!!t.allowTextEdit)},wt.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return null===t||!!t.allowGroup&&(null===(t=t.diagram)||!!t.allowGroup)},wt.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return null===t||!!t.allowMove&&(null===(t=t.diagram)||!!t.allowMove)},wt.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return null===t||!!t.allowReshape&&(null===(t=t.diagram)||!!t.allowReshape)},wt.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return null===t||!!t.allowResize&&(null===(t=t.diagram)||!!t.allowResize)},wt.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return null===t||!!t.allowRotate&&(null===(t=t.diagram)||!!t.allowRotate)},wt.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return null===t||!!t.allowSelect&&(null===(t=t.diagram)||!!t.allowSelect)},(D=wt.prototype).Nd=function(t){this.D=t?131072|this.D:-131073&this.D},D.Nh=function(){var t=this.containingGroup;null!==t&&(t.o(),null!==t.placeholder&&t.placeholder.o(),t.td())},D.M=function(){var t=this.diagram;null!==t&&!Ri(this)&&!ma(this)&&this.isVisible()&&this.yb.u()&&t.M(Oh(this,this.yb))},D.o=function(){X.prototype.o.call(this);var t=this.diagram;null!==t&&(t.wd.add(this),this instanceof ot&&null!==this.labeledLink&&qa(this.labeledLink),t.Eb(!0))},D.Jq=function(t){t||null!==(t=this.li)&&Zd(t,this)},D.Kq=function(t){t||null!==(t=this.li)&&Jd(t,this)},D.uk=function(){var t=this.data;if(null!==t){var e=this.diagram;null!==e&&null!==(e=e.model)&&e.Mm(t)}},D.bA=function(){return wm(this,this)},D.eA=function(){return Fx(this,this)},D.Kd=function(t){return t instanceof Pt&&e0(this,this,t)},D.oy=function(t){if(null===t)return null;if(this===t)return this.containingGroup;for(var e=this;null!==e;){if(e instanceof Pt&&vm(e,!0),e instanceof ot){var n=e.labeledLink;null!==n&&(e=n)}e=e.containingGroup}for(n=null,e=t;null!==e;){if(0!=(1048576&e.D)){n=e;break}e instanceof ot&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup}for(e=this;null!==e;)e instanceof Pt&&vm(e,!1),e instanceof ot&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup;return n},wt.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.isTemporary||this instanceof ot&&this.isLinkLabel)},wt.prototype.C=function(t){if(void 0===t&&(t=16777215),this.isLayoutPositioned&&0!=(t&this.layoutConditions)){var e=this.layer;e=!(null!==e&&e.isTemporary||this instanceof ot&&this.isLinkLabel)&&!(null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing)}else e=!1;if(e)if(null!==(e=this.li)){var n=e.layout;null!==n?n.C():e.C(t)}else null!==(t=this.diagram)&&null!==(t=t.layout)&&t.C()},L.Object.defineProperties(wt.prototype,{key:{get:function(){var t=this.diagram;if(null!==t)return t.model.ja(this.data)}},adornments:{get:function(){return null===this.Nf?mo:this.Nf.iteratorValues}},layer:{get:function(){return this.Ei}},diagram:{get:function(){var t=this.Ei;return null!==t?t.diagram:null}},layerName:{get:function(){return this.ih},set:function(t){var e=this.ih;if(e!==t){var n=this.diagram;if((null===n||null!==n.ym(t)&&!n.partManager.addsToTemporaryLayer)&&(this.ih=t,null!==n&&n.Oa(),this.g("layerName",e,t),null!==(e=this.layer)&&e.name!==t&&null!==(n=e.diagram)&&null!==(t=n.ym(t))&&t!==e)){var o=e.Nc(-1,this,!0);if(0<=o&&n.bb(be,"parts",e,this,null,o,!0),o=t.oj(99999999,this,!0),e.visible!==t.visible&&this.Pb(t.visible),0<=o&&n.bb(rn,"parts",t,null,this,!0,o),null!==(o=this.layerChanged)){var a=n.Z;n.Z=!0,o(this,e,t),n.Z=a}}}}},layerChanged:{get:function(){return this.Co},set:function(t){var e=this.Co;e!==t&&(this.Co=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.qq},set:function(t){var e=this.qq;if(e!==t){this.qq=t;var n=this.layer;null!==n&&Ng(n,-1,this),this.g("zOrder",e,t),null!==(t=this.diagram)&&t.M()}}},locationObject:{get:function(){if(null===this.df){var t=this.locationObjectName;""!==t?(t=this.ab(t),this.df=null!==t?t:this):this.df=this instanceof Gt&&this.type!==X.Link&&null!==this.placeholder?this.placeholder:this}return this.df.visible?this.df:this}},minLocation:{get:function(){return this.To},set:function(t){var e=this.To;e.w(t)||(this.To=t=t.G(),this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.Lo},set:function(t){var e=this.Lo;e.w(t)||(this.Lo=t=t.G(),this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.Jo},set:function(t){var e=this.Jo;e!==t&&(this.Jo=t,this.df=null,this.o(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.Ko},set:function(t){var e=this.Ko;e.w(t)||(this.Ko=t=t.G(),this.o(),this.g("locationSpot",e,t))}},location:{get:function(){return this.fg},set:function(t){var e=t.x,n=t.y,o=this.fg,a=o.x,u=o.y;(a===e||isNaN(a)&&isNaN(e))&&(u===n||isNaN(u)&&isNaN(n))||(e=t=t.copy(),this.Oh()?e=!1:(this.fg=e,this.D|=2097152,!1===Ri(this)&&($d(this),(n=this.la).u()&&(null===(a=this.diagram)||a.animationManager.isTicking||!a.undoManager.isUndoingRedoing))&&(u=n.copy(),n.h(n.x+(e.x-o.x),n.y+(e.y-o.y)),Kv(this,a,n,u),this.g("position",u,n.copy())),e=!0),e&&this.g("location",o.copy(),t.copy()))}},category:{get:function(){return this.Pf},set:function(t){var e=this.Pf;if(e!==t){var n=this.diagram,o=this.data,a=null;if(null!==n&&null!==o&&!(this instanceof Gt)){var u=n.model.undoManager;u.isEnabled&&!u.isUndoingRedoing&&(a=this.clone()).W.addAll(this.W)}this.Pf=t,this.g("category",e,t),null===n||null===o||this instanceof Gt?this instanceof Gt&&null!==(a=this.adornedPart)&&(null!==(t=a.Nf)&&t.remove(e),a.Fh(this.category,this)):(u=n.model).undoManager.isUndoingRedoing||(this.Oh()?(n.partManager.setLinkCategoryForData(o,t),null!==(n=n.partManager.findLinkTemplateForCategory(t))&&(Lr(n),null!==(n=n.copy())&&Qv(this,n,e,t))):(null!==u&&u.Tm(o,t),null!==(n=e1(n.partManager,o,t))&&(Lr(n),null===(n=n.copy())||n instanceof Q||(o=this.location.copy(),Qv(this,n,e,t),this.location.u()||(this.location=o)))),null!==a&&((e=this.clone()).W.addAll(this.W),this.g("self",a,e)))}}},self:{get:function(){return this},set:function(t){Qv(this,t,this.category,t.category)}},copyable:{get:function(){return 0!=(1&this.D)},set:function(t){var e=0!=(1&this.D);e!==t&&(this.D^=1,this.g("copyable",e,t))}},deletable:{get:function(){return 0!=(2&this.D)},set:function(t){var e=0!=(2&this.D);e!==t&&(this.D^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return 0!=(4&this.D)},set:function(t){var e=0!=(4&this.D);e!==t&&(this.D^=4,this.g("textEditable",e,t),this.Mb())}},groupable:{get:function(){return 0!=(8&this.D)},set:function(t){var e=0!=(8&this.D);e!==t&&(this.D^=8,this.g("groupable",e,t))}},movable:{get:function(){return 0!=(16&this.D)},set:function(t){var e=0!=(16&this.D);e!==t&&(this.D^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return 0!=(32&this.D)},set:function(t){var e=0!=(32&this.D);e!==t&&(this.D^=32,this.g("selectionAdorned",e,t),this.Mb())}},isInDocumentBounds:{get:function(){return 0!=(64&this.D)},set:function(t){var e=0!=(64&this.D);if(e!==t){this.D^=64;var n=this.diagram;null!==n&&n.Oa(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return 0!=(128&this.D)},set:function(t){var e=0!=(128&this.D);e!==t&&(this.D^=128,this.g("isLayoutPositioned",e,t),this.C(t?4:8))}},selectable:{get:function(){return 0!=(256&this.D)},set:function(t){var e=0!=(256&this.D);e!==t&&(this.D^=256,this.g("selectable",e,t),this.Mb())}},reshapable:{get:function(){return 0!=(512&this.D)},set:function(t){var e=0!=(512&this.D);e!==t&&(this.D^=512,this.g("reshapable",e,t),this.Mb())}},resizable:{get:function(){return 0!=(1024&this.D)},set:function(t){var e=0!=(1024&this.D);e!==t&&(this.D^=1024,this.g("resizable",e,t),this.Mb())}},rotatable:{get:function(){return 0!=(2048&this.D)},set:function(t){var e=0!=(2048&this.D);e!==t&&(this.D^=2048,this.g("rotatable",e,t),this.Mb())}},isSelected:{get:function(){return 0!=(4096&this.D)},set:function(t){var e=0!=(4096&this.D);if(e!==t){var n=this.diagram;if(!t||this.canSelect()&&!(null!==n&&n.selection.count>=n.maxSelectionCount)){this.D^=4096;var o=!1;if(null!==n){o=n.skipsUndoManager,n.skipsUndoManager=!0;var a=n.selection;a.ea(),t?a.add(this):a.remove(this),a.freeze()}this.g("isSelected",e,t),this.Mb(),null!==(t=this.selectionChanged)&&t(this),null!==n&&(n.Eb(),n.skipsUndoManager=o)}}}},isHighlighted:{get:function(){return 0!=(524288&this.D)},set:function(t){var e=0!=(524288&this.D);if(e!==t){this.D^=524288;var n=this.diagram;null!==n&&((n=n.highlighteds).ea(),t?n.add(this):n.remove(this),n.freeze()),this.g("isHighlighted",e,t),this.M(),null!==(t=this.highlightedChanged)&&t(this)}}},isShadowed:{get:function(){return 0!=(8192&this.D)},set:function(t){var e=0!=(8192&this.D);e!==t&&(this.D^=8192,this.g("isShadowed",e,t),this.M())}},isAnimated:{get:function(){return 0!=(262144&this.D)},set:function(t){var e=0!=(262144&this.D);e!==t&&(this.D^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.oo},set:function(t){var e=this.oo;e!==t&&(this.oo=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.Op},set:function(t){var e=this.Op;e!==t&&(this.Op=t,this.sh=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.Mp},set:function(t){var e=this.Mp;e!==t&&(this.Mp=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(null===this.sh){var t=this.selectionObjectName;null!==t&&""!==t?(t=this.ab(t),this.sh=null!==t?t:this):this.sh=this instanceof Q&&null!==(t=this.path)?t:this}return this.sh}},selectionChanged:{get:function(){return this.Np},set:function(t){var e=this.Np;e!==t&&(this.Np=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.xp},set:function(t){var e=this.xp;e!==t&&(this.xp=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.zp},set:function(t){var e=this.zp;e!==t&&(this.zp=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return""!==t&&null!==(t=this.ab(t))?t:this}},resizeCellSize:{get:function(){return this.yp},set:function(t){var e=this.yp;e.w(t)||(this.yp=t=t.G(),this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.Bp},set:function(t){var e=this.Bp;e!==t&&(this.Bp=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.Cp},set:function(t){var e=this.Cp;e!==t&&(this.Cp=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return""!==t&&null!==(t=this.ab(t))?t:this}},rotationSpot:{get:function(){return this.Dp},set:function(t){var e=this.Dp;e.w(t)||(this.Dp=t=t.G(),this.g("rotationSpot",e,t))}},text:{get:function(){return this.Ub},set:function(t){var e=this.Ub;e!==t&&(this.Ub=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.li},set:function(t){if(this.Pc()){var e=this.li;if(e!==t){null===t||this!==t&&!t.Kd(this)||(this===t&&W("Cannot make a Group a member of itself: "+this.toString()),W("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.C(2);var n=this.diagram;if(null!==e?Jd(e,this):this instanceof Pt&&null!==n&&n.Ch.remove(this),this.li=t,null!==t?Zd(t,this):this instanceof Pt&&null!==n&&n.Ch.add(this),this.C(1),null!==n&&n.Z){var o=this.data,a=n.model;if(null!==o&&a.Ck()){var u=a.ja(null!==t?t.data:null);a.dr(o,u)}}if(null!==(o=this.containingGroupChanged)&&(a=!0,null!==n&&(a=n.Z,n.Z=!0),o(this,e,t),null!==n&&(n.Z=a)),this instanceof Pt)for(Ul(n=new nt,this,!0,0,!0),n=n.iterator;n.next();)if((o=n.value)instanceof ot)for(o=o.linksConnected;o.next();)ff(o.value);if(this instanceof ot){for(n=this.linksConnected;n.next();)ff(n.value);null!==(n=this.labeledLink)&&ff(n)}this.g("containingGroup",e,t),null!==t&&null!==(e=t.layer)&&Ng(e,-1,t)}}else W("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.yn},set:function(t){var e=this.yn;e!==t&&(this.yn=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(null!==this.containingGroup||this instanceof ot&&null!==this.labeledLink)}},layoutConditions:{get:function(){return this.Do},set:function(t){var e=this.Do;e!==t&&(this.Do=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.Qn},set:function(t){var e=this.Qn;e!==t&&(this.Qn=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.Sp},set:function(t){var e=this.Sp;e.w(t)||(this.Sp=t=t.G(),this.M(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.Rp},set:function(t){var e=this.Rp;e!==t&&(this.Rp=t,this.M(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.lf},set:function(t){var e=this.lf;e!==t&&(this.lf=t,this.M(),this.g("shadowBlur",e,t))}}}),wt.prototype.invalidateLayout=wt.prototype.C,wt.prototype.findCommonContainingGroup=wt.prototype.oy,wt.prototype.isMemberOf=wt.prototype.Kd,wt.prototype.findTopLevelPart=wt.prototype.eA,wt.prototype.findSubGraphLevel=wt.prototype.bA,wt.prototype.ensureBounds=wt.prototype.Ta,wt.prototype.getDocumentBounds=wt.prototype.mj,wt.prototype.getRelativePoint=wt.prototype.Ff,wt.prototype.findObject=wt.prototype.ab,wt.prototype.moveTo=wt.prototype.moveTo,wt.prototype.invalidateAdornments=wt.prototype.Mb,wt.prototype.clearAdornments=wt.prototype.nk,wt.prototype.removeAdornment=wt.prototype.Jf,wt.prototype.addAdornment=wt.prototype.Fh,wt.prototype.findAdornment=wt.prototype.wk,wt.prototype.updateTargetBindings=wt.prototype.Ca;var n0=!1;function Gt(t){wt.call(this,t),this.D&=-257,this.ih="Adornment",this.ie=null,this.Fx=0,this.Tx=!1,this.l=t instanceof bd?[]:VM,this.Ra=null}wt.className="Part",wt.LayoutNone=0,wt.LayoutAdded=1,wt.LayoutRemoved=2,wt.LayoutShown=4,wt.LayoutHidden=8,wt.LayoutNodeSized=16,wt.LayoutGroupLayout=32,wt.LayoutNodeReplaced=64,wt.LayoutStandard=127,wt.LayoutAll=16777215,Y(Gt,wt),Gt.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(null!==t?t.toString():"")},Gt.prototype.updateRelationshipsFromData=function(){},Gt.prototype.Fk=function(t){var e=this.adornedObject.part;if(e instanceof Q&&this.adornedObject instanceof At){var n=e.path;e.Fk(t),t=n.geometry,n=(e=this.W.j).length;for(var o=0;o<n;o++){var a=e[o];a.isPanelMain&&a instanceof At&&(a.na=t)}}},Gt.prototype.rj=function(){var t=this.ie;return null===t||null===(t=t.part)||!Ri(t)},Gt.prototype.Pc=function(){return!1},Gt.prototype.Rk=function(t,e,n,o,a,u,h){if(t===rn&&"elements"===e){if(a instanceof Ni)null===this.Ra&&(this.Ra=a);else if(a instanceof X){var f=a.xm(function(p){return p instanceof Ni});f instanceof Ni&&null===this.Ra&&(this.Ra=f)}}else t===be&&"elements"===e&&null!==this.Ra&&(o===this.Ra||o instanceof X&&this.Ra.Hg(o))&&(this.Ra=null);wt.prototype.Rk.call(this,t,e,n,o,a,u,h)},Gt.prototype.updateAdornments=function(){},Gt.prototype.uk=function(){},L.Object.defineProperties(Gt.prototype,{placeholder:{get:function(){return this.Ra}},adornedObject:{get:function(){return this.ie},set:function(t){var e=this.adornedPart,n=null;null!==t&&(n=t.part),null===e||null!==t&&e===n||e.Jf(this.category),this.ie=t,null!==n&&n.Fh(this.category,this)}},adornedPart:{get:function(){var t=this.ie;return null!==t?t.part:null}},containingGroup:{get:function(){return null}}});var VM=[];function ot(t){wt.call(this,t),this.P=13,this.Za=new lt,this.kq=this.Ll=this.Hi=this.Fo=this.Eo=null,this.cl=sM,this.tc=this.Te=null,this.tp=hf,this.Dh=!1}function Ee(t,e){null!==e&&(null===t.Te&&(t.Te=new nt),t.Te.add(e))}function ir(t,e,n,o){if(null===e||null===t.Te)return null;for(var a=t.Te.iterator;a.next();){var u=a.value;if(u.au===t&&u.kw===e&&u.Ny===n&&u.Oy===o||u.au===e&&u.kw===t&&u.Ny===o&&u.Oy===n)return u}return null}function r0(t,e){for(t=t.linksConnected;t.next();){var n=t.value;(n.fromPort===e||n.toPort===e)&&(rr(n.fromPort),rr(n.toPort),n.Ua())}}function rr(t){if(null!==t){var e=t.sp;null!==e&&e.Cm(),null===(e=(t=t.part).containingGroup)||t.isVisible()||rr(e.port)}}function Yd(t,e,n,o){if(null!==e&&!n.has(e)){n.add(e);var a=!0,u=t.diagram;null!==u&&(a=u.isTreePathToChildren),e.linksConnected.each(function(h){h.isTreeLink?(a?h.fromNode===e:h.toNode===e)&&Yd(t,a?h.toNode:h.fromNode,n,o):o.add(h)})}}function Go(t,e,n){rr(n);var o=t.Za.contains(e);if(o||t.Za.add(e),!o||e.fromNode===e.toNode){var a=t.linkConnected;if(null!==a){var u=!0,h=t.diagram;null!==h&&(u=h.Z,h.Z=!0),a(t,e,n),null!==h&&(h.Z=u)}}!o&&e.isTreeLink&&(n=e.fromNode,e=e.toNode,null!==n&&null!==e&&n!==e&&(o=!0,null!==(t=t.diagram)&&(o=t.isTreePathToChildren),u=o?n:e,(a=o?e:n).Dh||(a.Dh=u),!u.isTreeLeaf||null!==t&&t.undoManager.isUndoingRedoing||(o?n===u&&(u.isTreeLeaf=!1):e===u&&(u.isTreeLeaf=!1))))}function Wd(t,e,n){rr(n);var o=t.Za.remove(e),a=null;if(o||e.toNode===e.fromNode){var u=t.linkDisconnected;if(a=t.diagram,null!==u){var h=!0;null!==a&&(h=a.Z,a.Z=!0),u(t,e,n),null!==a&&(a.Z=h)}}o&&e.isTreeLink&&(n=!0,null!==a&&(n=a.isTreePathToChildren),t=n?e.toNode:e.fromNode,e=n?e.fromNode:e.toNode,null!==t&&(t.Dh=!1),null===e||e.isTreeLeaf||(0===e.Za.count?(e.Dh=null,null!==a&&a.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):Xd(e)))}function Xd(t){if(t.Dh=!1,0!==t.Za.count){var e=!0,n=t.diagram;if(null===n||!n.undoManager.isUndoingRedoing){for(null!==n&&(e=n.isTreePathToChildren),n=t.Za.iterator;n.next();){var o=n.value;if(o.isTreeLink)if(e){if(o.fromNode===t)return void(t.isTreeLeaf=!1)}else if(o.toNode===t)return void(t.isTreeLeaf=!1)}t.isTreeLeaf=!0}}}function xm(t){null===t.tc?t.tc=new Et:t.tc.clear(),t.Zm(t,function(e,n){il(e,n)}),0===t.tc.count&&t.tc.add("",t)}function il(t,e){var n=e.portId;null!==n&&null!==t.tc&&t.tc.add(n,e)}function Kd(t,e,n){var o=e.portId;if(null!==o&&(null!==t.tc&&t.tc.remove(o),null!==(e=t.diagram)&&n)){for(n=null,t=t.findLinksConnected(o);t.next();)o=t.value,null===n&&(n=ye()),n.push(o);if(null!==n){for(t=0;t<n.length;t++)e.remove(n[t]);Jt(n)}}}function o0(t,e){return null===(e=e.Gg())?0:1+o0(t,e)}function Cm(t,e,n,o,a,u,h){if(1<o)for(var f=n?t.Cq():t.Hd();f.next();){var p=f.value;p.isTreeLink&&(null===(p=p.Hq(t))||p===t||e.contains(p)||(e.add(p),Cm(p,e,n,o-1,a,u,h)))}else UM(t,e,n,a,u,h)}function UM(t,e,n,o,a,u){for(var h=a===t||t.isTreeExpanded,f=n?t.Cq():t.Hd();f.next();){var p=f.value;if(p.isTreeLink&&null!==(p=p.Hq(t))&&p!==t){var g=e.contains(p);g||e.add(p),h&&(u&&o.jk(p,a),p.Nh(),p.Pb(!1)),p.isTreeExpanded&&(p.wasTreeExpanded=p.isTreeExpanded,g||UM(p,e,n,o,a,u))}}t.isTreeExpanded=!1}function s0(t,e,n,o,a,u,h){for(var f=u!==t&&t.isTreeExpanded,p=n?t.Cq():t.Hd();p.next();){var g=p.value;g.isTreeLink&&(f||g.kd||g.Ua(),null!==(g=g.Hq(t))&&g!==t&&!e.contains(g)&&(e.add(g),f||(g.Pb(!0),g.Nh(),h&&a.lk(g,u)),2<o||g.wasTreeExpanded))&&(g.wasTreeExpanded=!1,s0(g,e,n,o-1,a,u,h))}t.isTreeExpanded=!0}Gt.className="Adornment",Y(ot,wt),ot.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.P=this.P,t.P=-17&this.P,t.Eo=this.Eo,t.Fo=this.Fo,t.Hi=this.Hi,t.kq=this.kq,t.cl=this.cl.G(),t.tp=this.tp},(D=ot.prototype).Af=function(t){wt.prototype.Af.call(this,t),t.td(),t.Te=this.Te,t.tc=null},D.xA=function(t,e,n){null==e&&(e=""),null==n&&(n=""),null!==(t=ir(this,t,e,n))&&t.Cm()},D.Rk=function(t,e,n,o,a,u,h){(t===rn&&"elements"===e||t===be&&"elements"===e)&&(this.tc=null),wt.prototype.Rk.call(this,t,e,n,o,a,u,h)},D.td=function(t){void 0===t&&(t=null);for(var e=this.linksConnected;e.next();){var n=e.value;null!==t&&t.contains(n)||(rr(n.fromPort),rr(n.toPort),n.Ua())}},D.rj=function(){return!0},ot.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.rq(this.cl),t},ot.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.containingGroup;return t},ot.prototype.isVisible=function(){if(!wt.prototype.isVisible.call(this))return!1;var t=!0,e=qi,n=this.diagram;if(null!==n){if(n.animationManager.cu(this))return!0;t=n.isTreePathToChildren,e=n.treeCollapsePolicy}if(e===qi){if(null!==(t=this.Gg())&&!t.isTreeExpanded)return!1}else if(e===Md){if(0<(t=t?this.Sv():this.Tv()).count&&t.all(function(o){return!o.isTreeExpanded}))return!1}else if(e===Pu&&0<(t=t?this.Sv():this.Tv()).count&&t.any(function(o){return!o.isTreeExpanded}))return!1;return null===(t=this.labeledLink)||t.isVisible()},ot.prototype.Pb=function(t){wt.prototype.Pb.call(this,t);for(var e=this.linksConnected;e.next();){var n=e.value;if(t&&null!==this.containingGroup){var o=n.Hq(this);null===o||o.Kd(this.containingGroup)||n.Ua()}n.Pb(t)}},ot.prototype.py=function(){var t=new nt,e=new nt;return Yd(this,this,t,e),e.iterator},ot.prototype.findLinksConnected=function(t){if(void 0===t&&(t=null),null===t)return this.Za.iterator;var e=new ke(this.Za),n=this;return e.predicate=function(o){return o.fromNode===n&&o.fromPortId===t||o.toNode===n&&o.toPortId===t},e},(D=ot.prototype).Cq=function(t){void 0===t&&(t=null);var e=new ke(this.Za),n=this;return e.predicate=function(o){return o.fromNode===n&&(null===t||o.fromPortId===t)},e},D.Hd=function(t){void 0===t&&(t=null);var e=new ke(this.Za),n=this;return e.predicate=function(o){return o.toNode===n&&(null===t||o.toPortId===t)},e},D.Rv=function(t){void 0===t&&(t=null);for(var e=null,n=null,o=this.Za.iterator;o.next();){var a=o.value;a.fromNode===this?(null===t||a.fromPortId===t)&&(a=a.toNode,null!==e?e.add(a):null!==n&&n!==a?((e=new nt).add(n),e.add(a)):n=a):a.toNode!==this||null!==t&&a.toPortId!==t||(a=a.fromNode,null!==e?e.add(a):null!==n&&n!==a?((e=new nt).add(n),e.add(a)):n=a)}return null!==e?e.iterator:null!==n?new zn(n):mo},D.Tv=function(t){void 0===t&&(t=null);for(var e=null,n=null,o=this.Za.iterator;o.next();){var a=o.value;a.fromNode!==this||null!==t&&a.fromPortId!==t||(a=a.toNode,null!==e?e.add(a):null!==n&&n!==a?((e=new nt).add(n),e.add(a)):n=a)}return null!==e?e.iterator:null!==n?new zn(n):mo},D.Sv=function(t){void 0===t&&(t=null);for(var e=null,n=null,o=this.Za.iterator;o.next();){var a=o.value;a.toNode!==this||null!==t&&a.toPortId!==t||(a=a.fromNode,null!==e?e.add(a):null!==n&&n!==a?((e=new nt).add(n),e.add(a)):n=a)}return null!==e?e.iterator:null!==n?new zn(n):mo},D.Xz=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var o=new ke(this.Za),a=this;return o.predicate=function(u){return!((u.fromNode!==a||u.toNode!==t||null!==e&&u.fromPortId!==e||null!==n&&u.toPortId!==n)&&(u.fromNode!==t||u.toNode!==a||null!==n&&u.fromPortId!==n||null!==e&&u.toPortId!==e))},o},D.Yz=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var o=new ke(this.Za),a=this;return o.predicate=function(u){return!(u.fromNode!==a||u.toNode!==t||null!==e&&u.fromPortId!==e||null!==n&&u.toPortId!==n)},o},ot.prototype.updateRelationshipsFromData=function(){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)},(D=ot.prototype).Jq=function(t){wt.prototype.Jq.call(this,t),t||(Xd(this),null!==(t=this.Ll)&&a0(t,this))},D.Kq=function(t){wt.prototype.Kq.call(this,t),t||null!==(t=this.Ll)&&null!==t.od&&(t.od.remove(this),t.o())},D.uk=function(){if(0<this.Za.count){var t=this.diagram;if(null!==t)for(var e=null===t.commandHandler||t.commandHandler.deletesConnectedLinks,n=this.Za.copy().iterator;n.next();){var o=n.value;e?t.remove(o):(o.fromNode===this&&(o.fromNode=null),o.toNode===this&&(o.toNode=null))}}this.labeledLink=null,wt.prototype.uk.call(this)},D.Kt=function(t){if(null===this.tc){if(""===t&&!1===this.Mh)return this;xm(this)}var e=this.tc.H(t);return null!==e||""!==t&&null!==(e=this.tc.H(""))?e:this},D.zA=function(t){if(null===t||t===this)return!1;var e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),n=this,e)for(;n!==t;){e=null;for(var o=n.Za.iterator;o.next();){var a=o.value;if(a.isTreeLink&&(e=a.fromNode)!==n&&e!==this)break}if(e===this||null===e||e===n)return!1;n=e}else for(;n!==t;){for(e=null,o=n.Za.iterator;o.next()&&(!(a=o.value).isTreeLink||(e=a.toNode)===n||e===this););if(e===this||null===e||e===n)return!1;n=e}return!0},D.iA=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var n=e.Za.iterator;n.next();){var o=n.value;if(o.isTreeLink&&(t=o.fromNode)!==e&&t!==this)break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,n=e.Za.iterator;n.next()&&(!(o=n.value).isTreeLink||(t=o.toNode)===e||t===this););if(t===this)return this;if(null===t||t===e)return e;e=t}},D.Uz=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)vm(e,!0),e=e.Gg();var n=null;for(e=t;null!==e;){if(0!=(1048576&e.D)){n=e;break}e=e.Gg()}for(e=this;null!==e;)vm(e,!1),e=e.Gg();return n},D.jj=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this.Za.iterator,t){for(;e.next();)if((t=e.value).isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if((t=e.value).isTreeLink&&t.toNode!==this)return t;return null},D.Gg=function(){var t=this.Dh;if(null===t)return null;if(t instanceof ot)return t;var e=!0;if(null!==(t=this.diagram)&&(e=t.isTreePathToChildren),t=this.Za.iterator,e){for(;t.next();)if((e=t.value).isTreeLink&&(e=e.fromNode)!==this)return this.Dh=e}else for(;t.next();)if((e=t.value).isTreeLink&&(e=e.toNode)!==this)return this.Dh=e;return this.Dh=null},D.gA=function(){var e=new nt;return function t(n,o){if(null!==n){o.add(n);var a=n.jj();null!==a&&(o.add(a),t(n.Gg(),o))}}(this,e),e},D.fA=function(){return o0(this,this)},D.Eq=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren),e=new ke(this.Za);var n=this;return e.predicate=t?function(o){return!(!o.isTreeLink||o.fromNode!==n)}:function(o){return!(!o.isTreeLink||o.toNode!==n)},e},D.Vv=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren);var n=e=null,o=this.Za.iterator;if(t)for(;o.next();)(t=o.value).isTreeLink&&t.fromNode===this&&(t=t.toNode,null!==e?e.add(t):null!==n&&n!==t?((e=new lt).add(n),e.add(t)):n=t);else for(;o.next();)(t=o.value).isTreeLink&&t.toNode===this&&(t=t.fromNode,null!==e?e.add(t):null!==n&&n!==t?((e=new lt).add(n),e.add(t)):n=t);return null!==e?e.iterator:null!==n?new zn(n):mo},D.hA=function(t){void 0===t&&(t=1/0);var e=new nt;return Ul(e,this,!1,t,!0),e},ot.prototype.collapseTree=function(t){void 0===t&&(t=1),1>t&&(t=1);var e=this.diagram;if(null!==e&&!e.Ke){e.Ke=!0;var n=new nt;n.add(this),Cm(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===qi),e.Ke=!1}},ot.prototype.expandTree=function(t){void 0===t&&(t=2),2>t&&(t=2);var e=this.diagram;if(null!==e&&!e.Ke){e.Ke=!0;var n=new nt;n.add(this),s0(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===qi),e.Ke=!1}},L.Object.defineProperties(ot.prototype,{portSpreading:{get:function(){return this.tp},set:function(t){var e=this.tp;e!==t&&(this.tp=t,this.g("portSpreading",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.td())}},avoidable:{get:function(){return 0!=(8&this.P)},set:function(t){var e=0!=(8&this.P);if(e!==t){this.P^=8;var n=this.diagram;null!==n&&px(n,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.cl},set:function(t){"number"==typeof t&&(t=new te(t));var e=this.cl;if(!e.w(t)){this.cl=t=t.G();var n=this.diagram;null!==n&&px(n,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.Za.iterator}},linkConnected:{get:function(){return this.Eo},set:function(t){var e=this.Eo;e!==t&&(this.Eo=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.Fo},set:function(t){var e=this.Fo;e!==t&&(this.Fo=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return null!==this.Ll}},labeledLink:{get:function(){return this.Ll},set:function(t){var e=this.Ll;if(e!==t){var n=this.diagram,o=this.data;if(null!==e){if(null!==e.od&&(e.od.remove(this),e.o()),null!==n&&null!==o&&!n.undoManager.isUndoingRedoing){var a=e.data,u=n.model;if(null!==a&&u.qj()){var h=u.ja(o);void 0!==h&&u.Py(a,h)}}this.containingGroup=null}this.Ll=t,null!==t&&(a0(t,this),null===n||null===o||n.undoManager.isUndoingRedoing||(n=n.model,null!==(a=t.data)&&n.qj()&&void 0!==(o=n.ja(o))&&n.Cv(a,o)),this.containingGroup=t.containingGroup),qa(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.Kt("")}},ports:{get:function(){return null===this.tc&&xm(this),this.tc.iteratorValues}},isTreeExpanded:{get:function(){return 0!=(1&this.P)},set:function(t){var e=0!=(1&this.P);if(e!==t){this.P^=1;var n=this.diagram;if(this.g("isTreeExpanded",e,t),null!==(e=this.treeExpandedChanged)){var o=!0;null!==n&&(o=n.Z,n.Z=!0),e(this),null!==n&&(n.Z=o)}null!==n&&n.undoManager.isUndoingRedoing?this.Pb(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return 0!=(2&this.P)},set:function(t){var e=0!=(2&this.P);e!==t&&(this.P^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.kq},set:function(t){var e=this.kq;e!==t&&(this.kq=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return 0!=(4&this.P)},set:function(t){var e=0!=(4&this.P);e!==t&&(this.P^=4,this.g("isTreeLeaf",e,t))}}}),ot.prototype.expandTree=ot.prototype.expandTree,ot.prototype.collapseTree=ot.prototype.collapseTree,ot.prototype.findTreeParts=ot.prototype.hA,ot.prototype.findTreeChildrenNodes=ot.prototype.Vv,ot.prototype.findTreeChildrenLinks=ot.prototype.Eq,ot.prototype.findTreeLevel=ot.prototype.fA,ot.prototype.findTreeParentChain=ot.prototype.gA,ot.prototype.findTreeParentNode=ot.prototype.Gg,ot.prototype.findTreeParentLink=ot.prototype.jj,ot.prototype.findCommonTreeParent=ot.prototype.Uz,ot.prototype.findTreeRoot=ot.prototype.iA,ot.prototype.isInTreeOf=ot.prototype.zA,ot.prototype.findPort=ot.prototype.Kt,ot.prototype.findLinksTo=ot.prototype.Yz,ot.prototype.findLinksBetween=ot.prototype.Xz,ot.prototype.findNodesInto=ot.prototype.Sv,ot.prototype.findNodesOutOf=ot.prototype.Tv,ot.prototype.findNodesConnected=ot.prototype.Rv,ot.prototype.findLinksInto=ot.prototype.Hd,ot.prototype.findLinksOutOf=ot.prototype.Cq,ot.prototype.findExternalTreeLinksConnected=ot.prototype.py,ot.prototype.invalidateConnectedLinks=ot.prototype.td,ot.prototype.invalidateLinkBundle=ot.prototype.xA;var eT=new it(ot,"SpreadingNone",10),hf=new it(ot,"SpreadingEvenly",11),cf=new it(ot,"SpreadingPacked",12);function Pt(t){ot.call(this,t),this.P|=4608,this.Qo=new nt,this.Tl=new nt,this.Ra=this.aq=this.Ji=this.Ro=this.Po=this.Ya=null,this.lc=new Wt,this.lc.group=this}function Zd(t,e){if(t.Qo.add(e)){e instanceof Pt&&t.Tl.add(e);var n=t.memberAdded;if(null!==n){var o=!0,a=t.diagram;null!==a&&(o=a.Z,a.Z=!0),n(t,e),null!==a&&(a.Z=o)}t.isVisible()&&t.isSubGraphExpanded||e.Pb(!1)}e instanceof Q&&!t.computesBoundsIncludingLinks||(null===(e=t.Ra)&&(e=t),e.o())}function Jd(t,e){if(t.Qo.remove(e)){e instanceof Pt&&t.Tl.remove(e);var n=t.memberRemoved;if(null!==n){var o=!0,a=t.diagram;null!==a&&(o=a.Z,a.Z=!0),n(t,e),null!==a&&(a.Z=o)}t.isVisible()&&t.isSubGraphExpanded||e.Pb(!0)}e instanceof Q&&!t.computesBoundsIncludingLinks||(null===(e=t.Ra)&&(e=t),e.o())}function HM(t,e,n,o){for(var a=t.memberParts;a.next();){var u=a.value;if(u.Pb(!1),u instanceof Pt&&u.isSubGraphExpanded&&(u.wasSubGraphExpanded=u.isSubGraphExpanded,HM(u,e,n,o)),u instanceof ot)u.td(e),n.jk(u,o);else if(u instanceof Q)for(u=u.labelNodes;u.next();)u.value.td(e)}t.isSubGraphExpanded=!1}function jx(t,e,n,o){for(var a=t.memberParts;a.next();){var u=a.value;if(u.Pb(!0),u instanceof Pt&&u.wasSubGraphExpanded&&(u.wasSubGraphExpanded=!1,jx(u,e,n,o)),u instanceof ot)u.td(e),n.lk(u,o);else if(u instanceof Q)for(u=u.labelNodes;u.next();)u.value.td(e)}t.isSubGraphExpanded=!0}function Ni(){Z.call(this),this.ib=Qf,this.Ip=new z(NaN,NaN,NaN,NaN)}function Q(){wt.call(this,X.Link),this.Fa=8,this.Xe=null,this.Ye="",this.tf=this.co=null,this.uf="",this.jq=null,this.Yk=Un,this.Fn=0,this.Hn=Un,this.In=NaN,this.ck=tp,this.Wp=.5,this.od=null,this.Bb=(new lt).freeze(),this.sg=this.ph=null,this.Yl=new z,this.na=new It,this.I=this.v=this.Of=this.Xf=null,this.l=[],this.uv=new A,this.bs=this.Ox=this.Nx=null,this.Pu=NaN,this.O=null}function ff(t){var o,e=t.fromNode,n=t.toNode;if(o=null!==e?null!==n?e.oy(n):e.containingGroup:null!==n?n.containingGroup:null,(n=t.li)!==(e=o)){null!==n&&Jd(n,t),t.li=e,null!==e&&Zd(e,t);var a=t.containingGroupChanged;if(null!==a){var u=!0,h=t.diagram;null!==h&&(u=h.Z,h.Z=!0),a(t,n,e),null!==h&&(h.Z=u)}!t.kd||t.Nx!==n&&t.Ox!==n||t.Ua()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=o}function a0(t,e){null===t.od&&(t.od=new nt),t.od.add(e),t.o()}function Hl(t,e,n){if(0!==e||0!==n){for(var o=t.kd,a=new lt,u=t.Bb.iterator;u.next();){var h=u.value;a.add(new A(h.x+e,h.y+n).freeze())}a.freeze(),u=t.Bb,t.Bb=a,h=t.diagram,isNaN(e)||isNaN(n)||null!==h&&h.animationManager.sc?t.o():(t.fg.h(t.fg.x+e,t.fg.y+n),t.la.h(t.la.x+e,t.la.y+n),qa(t)),o?Mm(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),null!==h&&h.animationManager.sc&&(t.sg=a),t.g("points",u,a)}}function Mm(t){0===t.Bb.count?t.kd=!1:(t.kd=!0,t.bs=null,t.Pu=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),Hx(t,!1))}function Bx(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x=e.x>=t.x?t.x+9e9:t.x-9e9,e.y=t.y):(e.y=e.y>=t.y?t.y+9e9:t.y-9e9,e.x=t.x),e}function Qd(t,e){var n=e.sp;return null===n&&((n=new yf).port=e,n.node=e.part,e.sp=n),m0(n,t)}function bh(t){return t===gi||.5===t.x&&.5===t.y}function Sm(t){return.5===t.x&&.5===t.y?t:ie}function qd(t){if(null===t.diagram||!t.isAvoiding||!cx(t.diagram))return!1;var e=t.points.j,n=e.length;if(4>n)return!1;t=fx(t.diagram,!0,t.containingGroup,null);for(var o=1;o<n-2;o++){var a=e[o],u=e[o+1];if(!t.Dk(Math.min(a.x,u.x),Math.min(a.y,u.y),Math.abs(a.x-u.x),Math.abs(a.y-u.y)))return!0}return!1}function Vx(t,e,n,o,a,u){var h=e.wq,f=e.vq,p=Bh(e,n,o),g=n,y=o;for(0===a?g+=h:90===a?y+=f:180===a?g-=h:y-=f;p>Vh&&Bh(e,g,y)===p-1;)n=g,o=y,0===a?g+=h:90===a?y+=f:180===a?g-=h:y-=f,--p;u?p>Vh&&(180===a||0===a?n=Math.floor(n/h)*h+h/2:(90===a||270===a)&&(o=Math.floor(o/f)*f+f/2)):(n=Math.floor(n/h)*h+h/2,o=Math.floor(o/f)*f+f/2),p>Vh&&(u=a,g=n,y=o,0===a?(u=90,y+=f):90===a?(u=180,g-=h):180===a?(u=270,y-=f):270===a&&(u=0,g+=h),Bh(e,g,y)===p-1?Vx(t,e,g,y,u,!1):(g=n,y=o,0===a?(u=270,y-=f):90===a?(u=0,g+=h):180===a?(u=90,y+=f):270===a&&(u=180,g-=h),Bh(e,g,y)===p-1&&Vx(t,e,g,y,u,!1))),t.xf(n,o)}function l0(t,e,n,o){return t=n-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=o-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),R.aa(t,0)?e:R.aa(e,0)?t:Math.sqrt(t*t+e*e)))}function df(t,e,n,o){var a=t.pointsCount;if(2>a)return e;if(n){var u=t.i(1);if(0===(o=l0(e.x,e.y,n=u.x-o.x,u=u.y-o.y)))return e;a=2===a?.5*o:o,(t=t.computeShortLength(!0))>a&&(t=a),a=t*(u-e.y)/o,e.x+=t*(n-e.x)/o,e.y+=a}else{if(u=t.i(a-2),0===(o=l0(e.x,e.y,n=u.x-o.x,u=u.y-o.y)))return e;a=2===a?.5*o:o,(t=t.computeShortLength(!1))>a&&(t=a),a=t*(e.y-u)/o,e.x-=t*(e.x-n)/o,e.y-=a}return e}function Ux(t,e,n,o){for(var a=t.pointsCount,u=e;R.aa(e.x,u.x)&&R.aa(e.y,u.y);){if(n>=a)return a-1;u=t.i(n++)}if(!R.aa(e.x,u.x)&&!R.aa(e.y,u.y))return n-1;for(var h=u;R.aa(e.x,u.x)&&R.aa(u.x,h.x)&&(!o||(e.y>=u.y?u.y>=h.y:u.y<=h.y))||R.aa(e.y,u.y)&&R.aa(u.y,h.y)&&(!o||(e.x>=u.x?u.x>=h.x:u.x<=h.x));){if(n>=a)return a-1;h=t.i(n++)}return n-2}function pf(t,e,n,o,a,u,h){if(!h&&Lh(t)){h=[];var f=0;if(t.isVisible()&&(f=function nT(t,e,n,o){var a=t.diagram;if(null===a||e.w(n))return 0;for(a=a.layers;a.next();){var u=a.value;if(null!==u&&u.visible)for(var h=(u=u.Da.j).length,f=0;f<h;f++){var p=u[f];if(p instanceof Q){if(p===t)return 0<o.length&&o.sort(function(y,v){return y-v}),o.length;if(p.isVisible()&&Lh(p)){var g=p.routeBounds;g.u()&&t.routeBounds.Oc(g)&&!t.usesSamePort(p)&&null!==(g=p.path)&&g.If()&&iT(e,n,o,p)}}}}return 0<o.length&&o.sort(function(y,v){return y-v}),o.length}(t,a,u,h)),0<f)if(R.A(a.y,u.y))if(a.x<u.x)for(var p=0;p<f;){var g=Math.max(a.x,Math.min(h[p++]-5,u.x-10));e.lineTo(g+n,u.y+o);for(var y=g+n,v=Math.min(g+10,u.x);p<f&&(g=h[p])<v+10;)p++,v=Math.min(g+5,u.x);g=u.y-10+o,v+=n;var x=u.y+o;t.curve===rl?Ah(e,v,x,!1):ga(e,y,g,v,g,v,x)}else for(--f;0<=f;){for(p=Math.min(a.x,Math.max(h[f--]+5,u.x+10)),e.lineTo(p+n,u.y+o),y=p+n,g=Math.max(p-10,u.x);0<=f&&(p=h[f])>g-10;)f--,g=Math.max(p-5,u.x);p=u.y-10+o,g+=n,v=u.y+o,t.curve===rl?Ah(e,g,v,!1):ga(e,y,p,g,p,g,v)}else if(R.A(a.x,u.x))if(a.y<u.y)for(p=0;p<f;){for(g=Math.max(a.y,Math.min(h[p++]-5,u.y-10)),e.lineTo(u.x+n,g+o),y=g+o,g=Math.min(g+10,u.y);p<f&&(v=h[p])<g+10;)p++,g=Math.min(v+5,u.y);v=u.x-10+n,x=u.x+n,g+=o,t.curve===rl?Ah(e,x,g,!1):ga(e,v,y,v,g,x,g)}else for(--f;0<=f;){for(p=Math.min(a.y,Math.max(h[f--]+5,u.y+10)),e.lineTo(u.x+n,p+o),y=p+o,p=Math.max(p-10,u.y);0<=f&&(g=h[f])>p-10;)f--,p=Math.max(g-5,u.y);g=u.x-10+n,v=u.x+n,p+=o,t.curve===rl?Ah(e,v,p,!1):ga(e,g,y,g,p,v,p)}}e.lineTo(u.x+n,u.y+o)}function iT(t,e,n,o){for(var a=R.A(t.y,e.y),u=o.pointsCount,h=o.i(0),f=A.alloc(),p=1;p<u;p++){var g=o.i(p);if(p<u-1){var y=o.i(p+1);if(h.y===g.y&&g.y===y.y){if(g.x>h.x&&y.x>=g.x||g.x<h.x&&y.x<=g.x)continue}else if(h.x===g.x&&g.x===y.x&&(g.y>h.y&&y.y>=g.y||g.y<h.y&&y.y<=g.y))continue}t:{var v=t.y,x=e.x,S=e.y,M=h.x;h=h.y;var T=g.x,N=g.y;if(R.A(y=t.x,x)){if(!R.A(v,S)&&R.A(h,N)&&Math.min(v,S)<h&&Math.max(v,S)>h&&Math.min(M,T)<y&&Math.max(M,T)>y&&!R.A(M,T)){f.x=y,f.y=h,y=!0;break t}}else if(R.A(v,S)&&R.A(M,T)&&Math.min(y,x)<M&&Math.max(y,x)>M&&Math.min(h,N)<v&&Math.max(h,N)>v&&!R.A(h,N)){f.x=M,f.y=v,y=!0;break t}f.x=0,f.y=0,y=!1}y&&n.push(a?f.x:f.y),h=g}A.free(f)}function Lh(t){return(t=t.curve)===Uu||t===rl}function Hx(t,e){(e||Lh(t))&&(null===(e=t.diagram)||e.animationManager.isTicking||e.Wg.contains(t)||0===t.Yl.width&&0===t.Yl.height||e.Wg.add(t,t.Yl.copy()))}function GM(t,e,n){if(null!==e&&e.Ym&&e.kd&&Lh(e)){var o=e.routeBounds;o.u()&&(t.routeBounds.Oc(o)||n.Oc(o))&&(t.usesSamePort(e)||e.dc())}}function Ls(t){var e=t.Xe;if(null!==e){var n=t.tf;if(null!==n&&isNaN(t.curviness)){for(var o=t.Ye,a=t.uf,u=t=null,h=e.Za.j,f=h.length,p=0;p<f;p++){var g=h[p];(g.Xe===e&&g.Ye===o&&g.tf===n&&g.uf===a||g.Xe===n&&g.Ye===a&&g.tf===e&&g.uf===o)&&(null===u?u=g:(null===t&&(t=[]).push(u),t.push(g)))}if(null!==t){for(null===(u=ir(e,n,o,a))&&(Ee(e,u=new gf(e,o,n,a)),Ee(n,u)),u.links=t,e=0;e<t.length;e++)t[e].Of=u;u.Cm()}}}}function Fh(t){var e=t.Of;null!==e&&isNaN(t.curviness)&&(t.Of=null,0<=(t=e.links.indexOf(t))&&(Al(e.links,t),e.Cm()))}ot.className="Node",ot.SpreadingNone=eT,ot.SpreadingEvenly=hf,ot.SpreadingPacked=cf,Y(Pt,ot),Pt.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),this.P=-32769&this.P,null!==this.Ya&&(t.Ya=this.Ya.copy()),t.Po=this.Po,t.Ro=this.Ro,t.Ji=this.Ji,t.aq=this.aq;var e=t.xm(function(n){return n instanceof Ni});t.Ra=e instanceof Ni?e:null,null!==this.lc?(t.lc=this.lc.copy(),t.lc.group=t):(null!==t.lc&&(t.lc.group=null),t.lc=null)},(D=Pt.prototype).Af=function(t){ot.prototype.Af.call(this,t);var e=t.xk();for(t=t.memberParts;t.next();){var n=t.value;if(n.o(),n.C(8),n.nk(),n instanceof ot)n.td(e);else if(n instanceof Q)for(n=n.labelNodes;n.next();)n.value.td(e)}},D.Rk=function(t,e,n,o,a,u,h){if(t===rn&&"elements"===e){if(a instanceof Ni)null===this.Ra?this.Ra=a:this.Ra!==a&&W("Cannot insert a second Placeholder into the visual tree of a Group.");else if(a instanceof X){var f=a.xm(function(p){return p instanceof Ni});f instanceof Ni&&(null===this.Ra?this.Ra=f:this.Ra!==f&&W("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===be&&"elements"===e&&null!==this.Ra&&(o===this.Ra||o instanceof X&&this.Ra.Hg(o))&&(this.Ra=null);ot.prototype.Rk.call(this,t,e,n,o,a,u,h)},D.Hm=function(t,e){ot.prototype.Hm.call(this,t,e),this.isClipping&&this.type!==X.Spot&&((t=this.resizeObject)instanceof X&&(t=t.rb()),null===this.Ya&&(this.Ya=new z),t.mj(this.Ya),t instanceof At&&this.Ya.Lc(-t.strokeWidth,-t.strokeWidth))},D.Hh=function(t,e,n,o){this.df=this.Ra,ot.prototype.Hh.call(this,t,e,n,o)},D.Ta=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof Q||e.Ta()}),ot.prototype.Ta.call(this)},D.rj=function(){if(!ot.prototype.rj.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof ot){if(e.isVisible()&&Ri(e))return!1}else if(e instanceof Q&&e.isVisible()&&Ri(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0},D.uk=function(){if(0<this.Qo.count){var t=this.diagram;if(null!==t)for(var e=this.Qo.copy().iterator;e.next();)t.remove(e.value)}ot.prototype.uk.call(this)},Pt.prototype.canAddMembers=function(t){var e=this.diagram;if(null===e)return!1;for(e=e.commandHandler,t=Pv(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},Pt.prototype.addMembers=function(t,e){var n=this.diagram;if(null===n)return!1;n=n.commandHandler;var o=!0;for(t=Pv(t).iterator;t.next();){var a=t.value;!e||n.isValidMember(this,a)?a.containingGroup=this:o=!1}return o},Pt.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return!(null!==t&&!t.allowUngroup||null!==(t=t.diagram)&&!t.allowUngroup)},(D=Pt.prototype).td=function(t){void 0===t&&(t=null);var e=0!=(65536&this.P);if(ot.prototype.td.call(this,t),!e)for(0==(65536&this.P)&&(this.P=65536^this.P),e=this.Qv();e.next();){var n=e.value;if(null===t||!t.contains(n)){var o=n.fromNode;(null!==o&&o!==this&&o.Kd(this)&&!o.isVisible()||null!==(o=n.toNode)&&o!==this&&o.Kd(this)&&!o.isVisible())&&(rr(n.fromPort),rr(n.toPort),n.Ua())}}},D.Qv=function(){var t=this.xk();t.add(this);for(var e=new nt,n=t.iterator;n.next();){var o=n.value;if(o instanceof ot)for(o=o.linksConnected;o.next();){var a=o.value;t.contains(a)||e.add(a)}}return e.iterator},D.Wz=function(){var t=this.xk();t.add(this);for(var e=new nt,n=t.iterator;n.next();){var o=n.value;if(o instanceof ot)for(o=o.linksConnected;o.next();){var a=o.value,u=a.fromNode;null===u||t.contains(u)&&u!==this||e.add(u),null===(a=a.toNode)||t.contains(a)&&a!==this||e.add(a)}}return e.iterator},D.Vz=function(){var e=new nt;return function t(n,o){null!==n&&(o.add(n),t(n.containingGroup,o))}(this,e),e},D.xk=function(){var t=new nt;return Ul(t,this,!0,0,!0),t.remove(this),t},D.Pb=function(t){ot.prototype.Pb.call(this,t);for(var e=this.memberParts;e.next();)e.value.Pb(t)},Pt.prototype.collapseSubGraph=function(){var t=this.diagram;null===t||t.Ke||(t.Ke=!0,HM(this,this.xk(),t,this),t.Ke=!1)},Pt.prototype.expandSubGraph=function(){var t=this.diagram;null===t||t.Ke||(t.Ke=!0,jx(this,this.xk(),t,this),t.Ke=!1)},Pt.prototype.move=function(t,e){void 0===e&&(e=!1);var n=e?this.location:this.position,o=n.x;n=n.y;var a=t.x,u=t.y;if(!(o===a||isNaN(o)&&isNaN(a))||!(n===u||isNaN(n)&&isNaN(u))){for(o=a-(isNaN(o)?0:o),n=u-(isNaN(n)?0:n),u=A.alloc(),ot.prototype.move.call(this,t,e),t=new nt,e=this.xk().iterator;e.next();)(a=e.value)instanceof Q&&(a.suspendsRouting&&t.add(a),a.kd||a.fromNode!==this&&a.toNode!==this)&&(a.suspendsRouting=!0);for(e.reset();e.next();)if(!((a=e.value).Oh()||a instanceof ot&&a.isLinkLabel)){var h=a.position,f=a.location;h.u()?(u.x=h.x+o,u.y=h.y+n,a.position=u):f.u()&&(u.x=f.x+o,u.y=f.y+n,a.location=u)}for(e.reset();e.next();)(a=e.value)instanceof Q&&(a.suspendsRouting=t.contains(a),a.kd||a.fromNode!==this&&a.toNode!==this)&&(u.x=(h=a.position).x+o,u.y=h.y+n,u.u()?a.move(u):a.Ua(),qd(a)&&a.Ua());A.free(u)}},L.Object.defineProperties(Pt.prototype,{placeholder:{get:function(){return this.Ra}},computesBoundsAfterDrag:{get:function(){return 0!=(2048&this.P)},set:function(t){var e=0!=(2048&this.P);e!==t&&(this.P^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return 0!=(4096&this.P)},set:function(t){var e=0!=(4096&this.P);e!==t&&(this.P^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return 0!=(8192&this.P)},set:function(t){var e=0!=(8192&this.P);e!==t&&(this.P^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return 0!=(16384&this.P)},set:function(t){var e=0!=(16384&this.P);e!==t&&(this.P^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.Qo.iterator}},layout:{get:function(){return this.lc},set:function(t){var e=this.lc;if(e!==t){null!==e&&(e.diagram=null,e.group=null),this.lc=t;var n=this.diagram;null!==t&&(t.diagram=n,t.group=this),null!==n&&(n.Og=!0),this.g("layout",e,t),null!==n&&n.Eb()}}},memberAdded:{get:function(){return this.Po},set:function(t){var e=this.Po;e!==t&&(this.Po=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.Ro},set:function(t){var e=this.Ro;e!==t&&(this.Ro=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return 0!=(256&this.P)},set:function(t){var e=0!=(256&this.P);e!==t&&(this.P^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return 0!=(512&this.P)},set:function(t){var e=0!=(512&this.P);if(e!==t){this.P^=512;var n=this.diagram;if(this.g("isSubGraphExpanded",e,t),null!==(e=this.subGraphExpandedChanged)){var o=!0;null!==n&&(o=n.Z,n.Z=!0),e(this),null!==n&&(n.Z=o)}null!==n&&n.undoManager.isUndoingRedoing?(null!==this.Ra&&this.Ra.o(),this.memberParts.each(function(a){a.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return 0!=(1024&this.P)},set:function(t){var e=0!=(1024&this.P);e!==t&&(this.P^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.aq},set:function(t){var e=this.aq;e!==t&&(this.aq=t,this.g("subGraphExpandedChanged",e,t))}},Qh:{get:function(){return 0!=(32768&this.P)},set:function(t){0!=(32768&this.P)!==t&&(this.P^=32768)}}}),Pt.prototype.expandSubGraph=Pt.prototype.expandSubGraph,Pt.prototype.collapseSubGraph=Pt.prototype.collapseSubGraph,Pt.prototype.findSubGraphParts=Pt.prototype.xk,Pt.prototype.findContainingGroupChain=Pt.prototype.Vz,Pt.prototype.findExternalNodesConnected=Pt.prototype.Wz,Pt.prototype.findExternalLinksConnected=Pt.prototype.Qv,Pt.prototype.ensureBounds=Pt.prototype.Ta,Pt.className="Group",Y(Ni,Z),Ni.prototype.cloneProtected=function(t){Z.prototype.cloneProtected.call(this,t),t.ib=this.ib.G(),t.Ip=this.Ip.copy()},Ni.prototype.Jh=function(t){if(null===this.background&&null===this.areaBackground)return!1;var e=this.naturalBounds;return ts(0,0,e.width,e.height,t.x,t.y)},Ni.prototype.Gm=function(){var t=this.part;if(null!==t&&(t instanceof Pt||t instanceof Gt)||W("Placeholder is not inside a Group or Adornment."),t instanceof Pt){var e=this.computeBorder(this.Ip),n=this.minSize,o=this.rc;for(Ao(o,(isFinite(n.width)?Math.max(n.width,e.width):e.width)||0,(isFinite(n.height)?Math.max(n.height,e.height):e.height)||0),As(this,0,0,o.width,o.height),o=t.memberParts,n=!1;o.next();)if(o.value.isVisible()){n=!0;break}o=t.diagram,!n||null===o||o.animationManager.dw(t)||isNaN(e.x)||isNaN(e.y)||((n=A.alloc()).tj(e,t.locationSpot),n.w(t.location)||(t.location=new A(n.x,n.y)),A.free(n))}else{e=this.rc,o=(n=this.ib).left+n.right;var a=n.top+n.bottom,u=t.adornedObject;t.angle=u.lj();var h=0;u instanceof At&&(h=u.strokeWidth);var f=u.Cf(),p=u.naturalBounds,g=(p.width+h)*f;h=(p.height+h)*f,t.type!==X.Link&&(u=u.da("Selection"===t.category?Ue:t.locationSpot,A.alloc()),t.location=u,A.free(u)),isNaN(g)||isNaN(h)?(g=(t=t.adornedObject).da(Ue,A.alloc()),(u=z.allocAt(g.x,g.y,0,0)).Oe(t.da(ns,g)),u.Oe(t.da(uh,g)),u.Oe(t.da(kl,g)),Ao(e,u.width+o||0,u.height+a||0),As(this,-n.left,-n.top,e.width,e.height),A.free(g),z.free(u)):(Ao(e,g+o||0,h+a||0),As(this,-n.left,-n.top,e.width,e.height))}},Ni.prototype.Hh=function(t,e,n,o){this.actualBounds.h(t,e,n,o)},Ni.prototype.computeBorder=function(t){var e=this.part,n=e.diagram;if(null!==n&&e instanceof Pt&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.Ip.u()){var o=n.toolManager.findTool("Dragging");if(o===n.currentTool&&null!==(n=o.computeBorder(e,this.Ip,t)))return n}n=z.alloc(),o=this.computeMemberBounds(n);var a=this.ib;return e instanceof Pt&&!e.isSubGraphExpanded?t.h(o.x-a.left,o.y-a.top,0,0):t.h(o.x-a.left,o.y-a.top,Math.max(o.width+a.left+a.right,0),Math.max(o.height+a.top+a.bottom,0)),z.free(n),e instanceof Pt&&e.computesBoundsIncludingLocation&&e.location.u()&&t.Oe(e.location),t},Ni.prototype.computeMemberBounds=function(t){if(!(this.part instanceof Pt))return t.h(0,0,0,0),t;for(var e=this.part,n=1/0,o=1/0,a=-1/0,u=-1/0,h=e.memberParts;h.next();){var f=h.value;if(f.isVisible()){if(f instanceof Q&&(!e.computesBoundsIncludingLinks||us(f)||f.fromNode===e||f.toNode===e))continue;(f=f.actualBounds).left<n&&(n=f.left),f.top<o&&(o=f.top),f.right>a&&(a=f.right),f.bottom>u&&(u=f.bottom)}}return isFinite(n)&&isFinite(o)?t.h(n,o,a-n,u-o):t.h((e=e.location).x,e.y,0,0),t},L.Object.defineProperties(Ni.prototype,{padding:{get:function(){return this.ib},set:function(t){"number"==typeof t&&(t=new te(t));var e=this.ib;e.w(t)||(this.ib=t=t.G(),this.g("padding",e,t),this.o())}}}),Ni.className="Placeholder",Y(Q,wt),Q.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.Fa=-113&this.Fa,t.Ye=this.Ye,t.co=this.co,t.uf=this.uf,t.jq=this.jq,t.Yk=this.Yk,t.Fn=this.Fn,t.Hn=this.Hn,t.In=this.In,t.ck=this.ck,t.Wp=this.Wp,null!==this.O&&(t.O=this.O.copy())},(D=Q.prototype).Af=function(t){wt.prototype.Af.call(this,t),this.Ye=t.Ye,this.uf=t.uf,t.ph=null,t.Ua(),t.Of=this.Of;var e=t.fromPort;null!==e&&rr(e),null!==(t=t.toPort)&&rr(t)},D.jb=function(t){t.classType===Q?2==(2&t.value)?this.routing=t:t===vr||t===rl||t===Uu?this.curve=t:t===ep||t===np||t===Dm?this.adjusting=t:t!==tp&&t!==Un&&W("Unknown Link enum value for a Link property: "+t):wt.prototype.jb.call(this,t)},D.Mc=function(){null===this.O&&(this.O=new ap)},D.rj=function(){var t=this.fromNode;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),Ri(t)||ma(t))return!1}return!(null!==(t=this.toNode)&&(e=t.findVisibleNode(),null!==e&&(t=e),Ri(t)||ma(t)))},D.Fw=function(){return!1},D.lu=function(){},D.Pc=function(){return!1},Q.prototype.computeAngle=function(t,e,n){return Q.computeAngle(e,n)},Q.computeAngle=function(t,e){switch(t){default:case Un:t=0;break;case ip:t=e;break;case Gl:t=e+90;break;case ol:t=e-90;break;case rp:t=e+180;break;case zl:90<(t=R.Sq(e))&&270>t&&(t-=180);break;case $l:90<(t=R.Sq(e+90))&&270>t&&(t-=180);break;case sl:90<(t=R.Sq(e-90))&&270>t&&(t-=180);break;case Em:if(45<(t=R.Sq(e))&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return R.Sq(t)},(D=Q.prototype).Nh=function(){var t=this.containingGroup;null!==t&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&wt.prototype.Nh.call(this)},D.Hq=function(t){var e=this.fromNode;return t===e?this.toNode:e},D.nA=function(t){var e=this.fromPort;return t===e?this.toPort:e},D.Jq=function(t){if(wt.prototype.Jq.call(this,t),Lh(this)&&this.Mq(this.actualBounds),!t){var e=null;null!==(t=this.Xe)&&Go(t,this,e=this.fromPort);var n=this.tf;if(null!==n){var o=this.toPort;n===t&&o===e||Go(n,this,o)}Ls(this)}},D.Kq=function(t){if(wt.prototype.Kq.call(this,t),Lh(this)&&this.Mq(this.actualBounds),!t){var e=null;null!==(t=this.Xe)&&Wd(t,this,e=this.fromPort);var n=this.tf;if(null!==n){var o=this.toPort;n===t&&o===e||Wd(n,this,o)}Fh(this)}},D.uk=function(){if(this.kd=!0,null!==this.od){var t=this.diagram;if(null!==t)for(var e=this.od.copy().iterator;e.next();)t.remove(e.value)}null!==this.data&&null!==(t=this.diagram)&&t.partManager.removeDataForLink(this)},Q.prototype.updateRelationshipsFromData=function(){if(null!==this.data){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)}},Q.prototype.move=function(t,e){var n=e?this.location:this.position,o=n.x;isNaN(o)&&(o=0);var a=n.y;for(isNaN(a)&&(a=0),o=t.x-o,a=t.y-a,!0===e?wt.prototype.move.call(this,t,!1):(t=A.allocAt(n.x+o,n.y+a),wt.prototype.move.call(this,t,!1),A.free(t)),Hl(this,o,a),t=this.labelNodes;t.next();)(e=t.value).moveTo((n=e.position).x+o,n.y+a)},Q.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},Q.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},Q.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(0===e)return t.assign(fn),t;if(1===e)return t.assign(this.i(0)),t;if(2===e){var n=this.i(0),o=this.i(1);return t.h((n.x+o.x)/2,(n.y+o.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===vr))return this.na.Wv(.5,t),t.add(this.i(0)),n=this.na.figures.first(),t.offset(-n.startX,-n.startY),t;if(this.computeCurve()===vr){if(3===e)return this.i(1);if(n=3*((o=(e-1)/3|0)/2|0),o%2==1){o=this.i(n);var a=this.i(n+1),u=this.i(n+2);n=this.i(n+3),R.yz(o.x,o.y,a.x,a.y,u.x,u.y,n.x,n.y,t)}else t.assign(this.i(n));return t}var h=this.flattenedLengths;for(n=this.flattenedTotalLength,a=u=o=0;o<n/2&&u<e&&!(o+(a=h[u])>n/2);)o+=a,u++;return e=this.i(u),u=this.i(u+1),1>Math.abs(e.x-u.x)?t.h(e.x,e.y>u.y?e.y-(n/2-o):e.y+(n/2-o)):1>Math.abs(e.y-u.y)?t.h(e.x>u.x?e.x-(n/2-o):e.x+(n/2-o),e.y):t.h(e.x+(n=(n/2-o)/a)*(u.x-e.x),e.y+n*(u.y-e.y)),t},Q.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(2===t)return this.i(0).Sa(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===vr))return this.na.vy(.5);if(this.computeCurve()===vr&&4<=t){var e=(t-1)/3|0,n=3*(e/2|0);if(e%2==1){n=Math.floor(n),t=this.i(n),e=this.i(n+1);var o=this.i(n+2);return n=this.i(n+3),R.xz(t.x,t.y,e.x,e.y,o.x,o.y,n.x,n.y)}if(0<n&&n+1<t)return this.i(n-1).Sa(this.i(n+1))}e=this.flattenedLengths,o=this.flattenedTotalLength;var u,a=0;for(n=0;a<o/2&&n<t&&!(a+(u=e[n])>o/2);)a+=u,n++;if(e=this.i(n),o=this.i(n+1),1>Math.abs(e.x-o.x)&&1>Math.abs(e.y-o.y)){if(0<n&&n+2<t)return this.i(n-1).Sa(this.i(n+2))}else{if(1>Math.abs(e.x-o.x))return e.y>o.y?270:90;if(1>Math.abs(e.y-o.y))return e.x>o.x?180:0}return e.Sa(o)},(D=Q.prototype).i=function(t){return this.Bb.j[t]},D.Sc=function(t,e){this.Bb.Rc(t,e)},D.L=function(t,e,n){this.Bb.Rc(t,new A(e,n))},D.wA=function(t,e){this.Bb.wb(t,e)},D.m=function(t,e,n){this.Bb.wb(t,new A(e,n))},D.be=function(t){this.Bb.add(t)},D.xf=function(t,e){this.Bb.add(new A(t,e))},D.uw=function(t){this.Bb.cb(t)},D.pk=function(){this.Bb.clear()},D.Sh=function(){null===this.ph&&(this.ph=this.Bb,this.Bb=this.Bb.copy())},D.zf=function(){if(null!==this.ph){for(var t=this.ph,e=this.Bb,n=1/0,o=1/0,a=t.j,u=a.length,h=0;h<u;h++){var f=a[h];n=Math.min(f.x,n),o=Math.min(f.y,o)}f=h=1/0;for(var p=e.j,g=p.length,y=0;y<g;y++){var v=p[y];h=Math.min(v.x,h),f=Math.min(v.y,f),v.freeze()}if(e.freeze(),g===u){for(u=0;u<g;u++)if((y=a[u]).x-n!=(v=p[u]).x-h||y.y-o!=v.y-f){this.dc();break}}else this.dc();this.ph=null,null!==(n=this.diagram)&&n.animationManager.sc&&(this.sg=e),Mm(this),this.g("points",t,e)}},D.zw=function(){null!==this.ph&&(this.Bb=this.ph,this.ph=null)},D.Ua=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.Yt.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager).isTicking&&!t.defaultAnimation.isAnimating)return;null!==this.sg&&!t.isTicking&&t.defaultAnimation.isAnimating&&(this.sg=null)}null!==(t=this.path)&&(this.kd=!1,this.o(),t.o())}},D.xj=function(){if(!this.kd&&!this.Ct){var t=!0;try{this.Ct=!0,this.Sh(),t=this.computePoints()}catch(e){this.Ct=!1,this.zw()}finally{this.Ct=!1,t?this.zf():this.zw()}}},Q.prototype.computePoints=function(){if(null===this.diagram)return!1;var t=this.fromNode,e=null;if(null===t?(Rh||((Rh=new ot).desiredSize=xn,Rh.Ta()),this.defaultFromPoint&&(Rh.location=this.defaultFromPoint,Rh.Ta(),e=t=Rh)):e=this.fromPort,null!==e&&!t.isVisible()){var n=t.findVisibleNode();null!==n&&n!==t?(t=n,e=n.port):t=n}if(this.Nx=t,null===t||!t.location.u())return!1;for(;!(null===e||e.actualBounds.u()&&e.If());)e=e.panel;if(null===e)return!1;var o=this.toNode,a=null;if(null===o?(Vu||((Vu=new ot).desiredSize=xn,Vu.Ta()),this.defaultToPoint&&(Vu.location=this.defaultToPoint,Vu.Ta(),a=o=Vu)):a=this.toPort,null===a||o.isVisible()||(null!==(n=o.findVisibleNode())&&n!==o?(o=n,a=n.port):o=n),this.Ox=o,null===o||!o.location.u())return!1;for(;!(null===a||a.actualBounds.u()&&a.If());)a=a.panel;if(null===a)return!1;var u=this.pointsCount,h=this.computeSpot(!0,e);n=this.computeSpot(!1,a);var f=bh(h),p=bh(n),g=e===a&&null!==e,y=this.isOrthogonal,v=this.curve===vr;this.Xf=!(!g||y)&&(v=!0);var x=this.computeAdjusting()===Un||g;if(!y&&!g&&f&&p){if(f=!1,!x&&3<=u&&(x=this.getLinkPoint(t,e,h,!0,!1,o,a),p=this.getLinkPoint(o,a,n,!1,!1,t,e),f=this.adjustPoints(0,x,u-1,p))&&(x=this.getLinkPoint(t,e,h,!0,!1,o,a),p=this.getLinkPoint(o,a,n,!1,!1,t,e),this.adjustPoints(0,x,u-1,p)),!f)if(this.pk(),v){u=this.getLinkPoint(t,e,h,!0,!1,o,a),f=(x=this.getLinkPoint(o,a,n,!1,!1,t,e)).x-u.x,p=x.y-u.y,g=this.computeCurviness(),v=y=0;var S=u.x+f/3,M=u.y+p/3,T=S,N=M;R.A(p,0)?N=0<f?N-g:N+g:(y=-f/p,v=Math.sqrt(g*g/(y*y+1)),0>g&&(v=-v),N=y*((T=(0>p?-1:1)*v+S)-S)+M);var P=S=u.x+2*f/3,I=M=u.y+2*p/3;I=R.A(p,0)?0<f?I-g:I+g:y*((P=(0>p?-1:1)*v+S)-S)+M,this.pk(),this.be(u),this.xf(T,N),this.xf(P,I),this.be(x),this.Sc(0,this.getLinkPoint(t,e,h,!0,!1,o,a)),this.Sc(3,this.getLinkPoint(o,a,n,!1,!1,t,e))}else o=this.getLinkPoint(t,e,h,!0,!1,u=o,x=a),a=this.getLinkPoint(u,x,n,!1,!1,t,e),this.hasCurviness()?(x=a.x-o.x,n=a.y-o.y,h=this.computeCurviness(),u=t=o.x+x/2,f=e=o.y+n/2,R.A(n,0)?f=0<x?f-h:f+h:(x=-x/n,u=Math.sqrt(h*h/(x*x+1)),0>h&&(u=-u),f=x*((u=(0>n?-1:1)*u+t)-t)+e),this.be(o),this.xf(u,f),this.be(a)):(this.be(o),this.be(a),f=z.alloc(),e.mj(f),p=f.$(a),x.mj(f),g=f.$(o),(p||g)&&(h=e.da(Sm(h),new A),this.Sc(0,this.getLinkPointFromPoint(t,e,h,a,!0,h)),n=x.da(Sm(n),new A),this.Sc(1,this.getLinkPointFromPoint(u,x,n,o,!1,n))),z.free(f))}else{v=this.isAvoiding,x&&(y&&v||g)&&this.pk();var O=g?this.computeCurviness():0;v=this.getLinkPoint(t,e,h,!0,y,o,a),S=T=M=0,(y||!f||g)&&(N=this.computeEndSegmentLength(t,e,h,!0),S=this.getLinkDirection(t,e,v,h,!0,y,o,a),g&&(f||h.w(n)||!y&&h.x+n.x===1&&h.y+n.y===1)&&(S-=y?90:30,0>O&&(S-=180)),0>S?S+=360:360<=S&&(S-=360),g&&(N+=Math.abs(O)*(y?1:2)),0===S?M=N:90===S?T=N:180===S?M=-N:270===S?T=-N:(M=N*Math.cos(S*Math.PI/180),T=N*Math.sin(S*Math.PI/180)),h.nc()&&g&&(N=e.da(ie,A.alloc()),P=A.allocAt(N.x+1e3*M,N.y+1e3*T),this.getLinkPointFromPoint(t,e,N,P,!0,v),A.free(N),A.free(P))),N=this.getLinkPoint(o,a,n,!1,y,t,e);var b=I=P=0;if(y||!p||g){var B=this.computeEndSegmentLength(o,a,n,!1);b=this.getLinkDirection(o,a,N,n,!1,y,t,e),g&&(p||h.w(n)||!y&&h.x+n.x===1&&h.y+n.y===1)&&(b+=y?0:30,0>O&&(b+=180)),0>b?b+=360:360<=b&&(b-=360),g&&(B+=Math.abs(O)*(y?1:2)),0===b?P=B:90===b?I=B:180===b?P=-B:270===b?I=-B:(P=B*Math.cos(b*Math.PI/180),I=B*Math.sin(b*Math.PI/180)),n.nc()&&g&&(n=a.da(ie,A.alloc()),h=A.allocAt(n.x+1e3*P,n.y+1e3*I),this.getLinkPointFromPoint(o,a,n,h,!1,N),A.free(n),A.free(h))}n=v,(y||!f||g)&&(n=new A(v.x+M,v.y+T)),h=N,(y||!p||g)&&(h=new A(N.x+P,N.y+I)),!x&&!y&&f&&3<u&&this.adjustPoints(0,v,u-2,h)?this.Sc(u-1,N):!x&&!y&&p&&3<u&&this.adjustPoints(1,n,u-1,N)?this.Sc(0,v):!x&&(y?6<=u:4<u)&&this.adjustPoints(1,n,u-2,h)?(this.Sc(0,v),this.Sc(u-1,N)):(this.pk(),this.be(v),(y||!f||g)&&this.be(n),y&&this.addOrthoPoints(n,S,h,b,t,o),(y||!p||g)&&this.be(h),this.be(N))}return!0},Q.prototype.getLinkPointFromPoint=function(t,e,n,o,a,u){if(void 0===u&&(u=new A),null===t||null===e)return u.assign(n),u;if(t.isVisible()||null!==(a=t.findVisibleNode())&&a!==t&&(e=a.port),t=null,null===(a=e.panel)||a.he()||(a=a.panel),null===a){a=o.x,o=o.y;var h=n.x;n=n.y}else{var f=-(t=a.Fd).m12*(a=1/(t.m11*t.m22-t.m12*t.m21)),p=-t.m21*a,g=t.m11*a,y=a*(t.m21*t.dy-t.m22*t.dx),v=a*(t.m12*t.dx-t.m11*t.dy);a=o.x*(h=t.m22*a)+o.y*p+y,o=o.x*f+o.y*g+v,h=n.x*h+n.y*p+y,n=n.x*f+n.y*g+v}return e.yk(a,o,h,n,u),null!==t&&u.transform(t),u},Q.prototype.getLinkPoint=function(t,e,n,o,a,u,h,f){if(void 0===f&&(f=new A),n.kb()&&!bh(n))return e.da(n,f),f;if(n.Qc()){var p=Qd(this,e);if(null!==p){if(f.assign(p.Pq),a&&this.routing===zx){var g=Qd(this,h);if(null!==g&&p.vm<g.vm){p=A.alloc(),g=A.alloc();var y=new z(e.da(Ue,p),e.da(ns,g)),v=this.computeSpot(!o,h);t=this.getLinkPoint(u,h,v,!o,a,t,e,g),(n.Gf(pe)||n.Gf(mu))&&t.y>=y.y&&t.y<=y.y+y.height?f.y=t.y:(n.Gf(kc)||n.Gf(Ic))&&t.x>=y.x&&t.x<=y.x+y.width&&(f.x=t.x),A.free(p),A.free(g)}}return f}}return n=e.da(Sm(n),A.alloc()),this.pointsCount>(a?6:2)?(h=this.i(o?1:this.pointsCount-2),a&&(h=Bx(n,h.copy()))):(p=this.computeSpot(!o,h),u=A.alloc(),h=h.da(Sm(p),u),a&&(h=Bx(n,h)),A.free(u)),this.getLinkPointFromPoint(t,e,n,h,o,f),A.free(n),f},Q.prototype.getLinkDirection=function(t,e,n,o,a,u,h,f){t:if(o.kb())var p=o.x>o.y?o.x>1-o.y?0:o.x<1-o.y?270:315:o.x<o.y?o.x>1-o.y?90:o.x<1-o.y?180:135:.5>o.x?225:.5<o.x?45:0;else{if(o.Qc()&&null!==(p=Qd(this,e)))switch(p.Bc){case 1:p=270;break t;case 2:p=180;break t;default:case 4:p=0;break t;case 8:p=90;break t}p=e.da(ie,A.alloc()),this.pointsCount>(u?6:2)?(f=this.i(a?1:this.pointsCount-2),f=u?Bx(p,f.copy()):n):(n=A.alloc(),f=f.da(ie,n),A.free(n)),n=Math.abs(f.x-p.x)>Math.abs(f.y-p.y)?f.x>=p.x?0:180:f.y>=p.y?90:270,A.free(p),p=n}return o.nc()&&h.Kd(t)&&360<=(p+=180)&&(p-=360),bh(o)||0===(t=e.lj())||(45<=t&&135>t?p+=90:135<=t&&225>t?p+=180:225<=t&&315>t&&(p+=270),360<=p&&(p-=360)),p},Q.prototype.computeEndSegmentLength=function(t,e,n,o){return null!==e&&n.Qc()&&null!==(t=Qd(this,e))?t.Ov:(t=o?this.fromEndSegmentLength:this.toEndSegmentLength,null!==e&&isNaN(t)&&(t=o?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},Q.prototype.computeSpot=function(t,e){return void 0===e&&(e=null),t?null===(t=e||this.fromPort)?t=ie:((e=this.fromSpot).Nb()&&(e=t.fromSpot),t=e===Ei?gi:e):null===(t=e||this.toPort)?t=ie:((e=this.toSpot).Nb()&&(e=t.toSpot),t=e===Ei?gi:e),t},Q.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==Un&&4<this.pointsCount?this.computeMidPoint(new A):(t=e.da(ie),null!==(e=null!==(e=e.sp)?m0(e,this):null)&&(t=e.Pq),t)},Q.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;null!==e&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&null!==(e=this.toPort)&&(t=e.toShortLength),isNaN(t)?0:t},Q.prototype.Bf=function(t,e,n,o,a,u){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var h=u;if(void 0===u&&(h=Ht.alloc()).reset(),h.multiply(this.transform),this.Ih(t,h))return im(this,e,n,a),void 0===u&&Ht.free(h),!0;if(this.Oc(t,h)){var f=!1;if(!this.isAtomic)for(var p=this.W.j,g=p.length;g--;){var y=p[g];if(y.visible||y===this.locationObject){var v=y.actualBounds,x=this.naturalBounds;if(!(v.x>x.width||v.y>x.height||0>v.x+v.width||0>v.y+v.height)){if((v=Ht.alloc()).set(h),y instanceof X)f=y.Bf(t,e,n,o,a,v);else if(this.path===y){if(y instanceof At)if(f=t,x=o,!1===y.pickable)f=!1;else if(v.multiply(y.transform),x)t:{var S=f,M=v;if(y.Ih(S,M))f=!0;else{if(void 0===M&&(M=y.transform,S.Ge(y.actualBounds))){f=!0;break t}f=S.left,x=S.right;var T=S.top;S=S.bottom;var N=A.alloc(),P=A.alloc(),I=A.alloc(),O=Ht.alloc();O.set(M),O.iw(y.transform),O.Tt(),P.x=x,P.y=T,P.transform(O),N.x=f,N.y=T,N.transform(O),M=!1,cs(y,N,P,I)?M=!0:(N.x=x,N.y=S,N.transform(O),cs(y,N,P,I)?M=!0:(P.x=f,P.y=S,P.transform(O),cs(y,N,P,I)?M=!0:(N.x=f,N.y=T,N.transform(O),cs(y,N,P,I)&&(M=!0)))),Ht.free(O),A.free(N),A.free(P),A.free(I),f=M}}else f=y.Ih(f,v)}else f=Ug(y,t,o,v);f&&(x=y,null!==e&&(x=e(y)),x&&(null===n||n(x))&&a.add(x)),Ht.free(v)}}}return void 0===u&&Ht.free(h),f||null!==this.background||null!==this.areaBackground}return void 0===u&&Ht.free(h),!1},Q.prototype.computeCurve=function(){if(null===this.Xf){var t=this.fromPort;this.Xf=null!==t&&t===this.toPort&&!this.isOrthogonal}return this.Xf?vr:this.curve},Q.prototype.computeCorner=function(){if(this.curve===vr)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},Q.prototype.findMidLabel=function(){for(var t=this.path,e=this.W.j,n=e.length,o=0;o<n;o++){var a=e[o];if(a!==t&&!a.isPanelMain&&(a.segmentIndex===-1/0||isNaN(a.segmentIndex)))return a}for(t=this.labelNodes;t.next();)if((e=t.value).segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},Q.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=c0;t=Math.max(t,this.computeThickness());var e=this.fromPort,n=this.toPort;if(null!==e&&null!==n){var o=this.findMidLabel();if(null!==o){var a=o.naturalBounds,u=o.margin,h=isNaN(a.width)?30:a.width*o.scale+u.left+u.right;a=isNaN(a.height)?14:a.height*o.scale+u.top+u.bottom,(o=o.segmentOrientation)===ip||o===zl||o===rp?t=Math.max(t,a):o===ol||o===sl||o===Gl||o===$l?t=Math.max(t,h):(e=e.da(ie).Sa(n.da(ie))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*h)+Math.abs(Math.cos(e)*a)+1)),this.curve===vr&&(t*=1.333)}}return t},Q.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var n=t[e];n.computeAdjusting()===Un&&n.Ua()}},Q.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=h0;var e=this.Of;if(null!==e){for(var n=ye(),o=0,a=e.links,u=0;u<a.length;u++){var h=a[u].computeSpacing();n.push(h),o+=h}for(o=-o/2,u=0;u<a.length;u++){if(a[u]===this){t=o+n[u]/2;break}o+=n[u]}e.au===this.fromNode&&(t=-t),Jt(n)}}return t},Q.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.strokeWidth,1):1},Q.prototype.hasCurviness=function(){return!isNaN(this.curviness)||null!==this.Of},Q.prototype.adjustPoints=function(t,e,n,o){var a=this.computeAdjusting();if(this.isOrthogonal){if(a===np)return!1;a===Dm&&(a=ep)}switch(a){case np:var u=this.i(t),h=this.i(n);if(!u.Na(e)||!h.Na(o)){var f=h.x-(a=u.x),p=h.y-(u=u.y),g=Math.sqrt(f*f+p*p);if(!R.aa(g,0)){if(R.aa(f,0))var y=0>p?-Math.PI/2:Math.PI/2;else y=Math.atan(p/Math.abs(f)),0>f&&(y=Math.PI-y);var v=e.y;f=o.x-(h=e.x);var x=o.y-v;for(p=Math.sqrt(f*f+x*x),R.aa(f,0)?x=0>x?-Math.PI/2:Math.PI/2:(x=Math.atan(x/Math.abs(f)),0>f&&(x=Math.PI-x)),g=p/g,y=x-y,this.Sc(t,e),t+=1;t<n;t++)f=(e=this.i(t)).x-a,p=e.y-u,e=Math.sqrt(f*f+p*p),R.aa(e,0)||(R.aa(f,0)?p=0>p?-Math.PI/2:Math.PI/2:(p=Math.atan(p/Math.abs(f)),0>f&&(p=Math.PI-p)),f=p+y,this.L(t,h+(e*=g)*Math.cos(f),v+e*Math.sin(f)));this.Sc(n,o)}}return!0;case Dm:if(u=this.i(t),v=this.i(n),!u.Na(e)||!v.Na(o)){g=((h=v.x)-(a=u.x))*(h-a)+((v=v.y)-(u=u.y))*(v-u),y=e.y,x=o.y;var S=1;if((p=o.x)-(f=e.x)!=0){var M=(x-y)/(p-f);S=Math.sqrt(1+1/(M*M))}else M=9e9;for(this.Sc(t,e),t+=1;t<n;t++){var T=(e=this.i(t)).x,N=e.y,P=.5;0!==g&&(P=((a-T)*(a-h)+(u-N)*(u-v))/g);var I=a+P*(h-a),O=u+P*(v-u);e=Math.sqrt((T-I)*(T-I)+(N-O)*(N-O)),N<M*(T-I)+O&&(e=-e),0<M&&(e=-e),T=f+P*(p-f),P=y+P*(x-y),0!==M?this.L(t,e=T+e/S,P-(e-T)/M):this.L(t,T,P+e)}this.Sc(n,o)}return!0;case ep:return this.isOrthogonal&&(a=this.i(t),u=this.i(t+1),h=this.i(t+2),v=f=u.x,g=y=u.y,R.A(a.y,u.y)?R.A(u.x,h.x)?y=e.y:R.A(u.y,h.y)&&(f=e.x):R.A(a.x,u.x)&&(R.A(u.y,h.y)?f=e.x:R.A(u.x,h.x)&&(y=e.y)),this.L(t+1,f,y),a=this.i(n),u=this.i(n-1),h=this.i(n-2),p=f=u.x,x=y=u.y,R.A(a.y,u.y)?R.A(u.x,h.x)?y=o.y:R.A(u.y,h.y)&&(f=o.x):R.A(a.x,u.x)&&(R.A(u.y,h.y)?f=o.x:R.A(u.x,h.x)&&(y=o.y)),this.L(n-1,f,y),qd(this))?(this.L(t+1,v,g),this.L(n-1,p,x),n=!1):(this.Sc(t,e),this.Sc(n,o),n=!0),n;default:return!1}},Q.prototype.addOrthoPoints=function(t,e,n,o,a,u){e=-45<=e&&45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,o=-45<=o&&45>o?0:45<=o&&135>o?90:135<=o&&225>o?180:270;var h=a.actualBounds.copy(),f=u.actualBounds.copy();if(h.u()&&f.u()){if(h.Lc(jh,jh),f.Lc(jh,jh),h.Oe(t),f.Oe(n),0===e)if(n.x>t.x||270===o&&n.y<t.y&&f.right>t.x||90===o&&n.y>t.y&&f.right>t.x){var p=new A(n.x,t.y),g=new A(n.x,(t.y+n.y)/2);180===o?(p.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),g.x=p.x,g.y=n.y):270===o&&n.y<t.y||90===o&&n.y>t.y?(p.x=t.x<f.left?this.computeMidOrthoPosition(t.x,t.y,f.left,n.y,!1):t.x<f.right&&(270===o&&t.y<f.top||90===o&&t.y>f.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):f.right,g.x=p.x,g.y=n.y):0===o&&t.x<f.left&&t.y>f.top&&t.y<f.bottom&&(p.x=t.x,p.y=t.y<n.y?Math.min(n.y,f.top):Math.max(n.y,f.bottom),g.y=p.y)}else p=new A(t.x,n.y),g=new A((t.x+n.x)/2,n.y),(180===o||90===o&&n.y<h.top||270===o&&n.y>h.bottom)&&(180===o&&(f.$(t)||h.$(n))?p.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(180===o||90===o)?p.y=this.computeMidOrthoPosition(t.x,h.top,n.x,Math.max(n.y,f.bottom),!0):n.y>t.y&&(180===o||270===o)&&(p.y=this.computeMidOrthoPosition(t.x,h.bottom,n.x,Math.min(n.y,f.top),!0)),g.x=n.x,g.y=p.y),p.y>h.top&&p.y<h.bottom&&(n.x>=h.left&&n.x<=t.x||t.x<=f.right&&t.x>=n.x?(90===o||270===o)&&(p=new A(Math.max((t.x+n.x)/2,t.x),t.y),g=new A(p.x,n.y)):(p.y=270===o||(0===o||180===o)&&n.y<t.y?Math.min(n.y,0===o?h.top:Math.min(h.top,f.top)):Math.max(n.y,0===o?h.bottom:Math.max(h.bottom,f.bottom)),g.x=n.x,g.y=p.y));else 180===e?n.x<t.x||270===o&&n.y<t.y&&f.left<t.x||90===o&&n.y>t.y&&f.left<t.x?(p=new A(n.x,t.y),g=new A(n.x,(t.y+n.y)/2),0===o?(p.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),g.x=p.x,g.y=n.y):270===o&&n.y<t.y||90===o&&n.y>t.y?(p.x=t.x>f.right?this.computeMidOrthoPosition(t.x,t.y,f.right,n.y,!1):t.x>f.left&&(270===o&&t.y<f.top||90===o&&t.y>f.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):f.left,g.x=p.x,g.y=n.y):180===o&&t.x>f.right&&t.y>f.top&&t.y<f.bottom&&(p.x=t.x,p.y=t.y<n.y?Math.min(n.y,f.top):Math.max(n.y,f.bottom),g.y=p.y)):(p=new A(t.x,n.y),g=new A((t.x+n.x)/2,n.y),(0===o||90===o&&n.y<h.top||270===o&&n.y>h.bottom)&&(0===o&&(f.$(t)||h.$(n))?p.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(0===o||90===o)?p.y=this.computeMidOrthoPosition(t.x,h.top,n.x,Math.max(n.y,f.bottom),!0):n.y>t.y&&(0===o||270===o)&&(p.y=this.computeMidOrthoPosition(t.x,h.bottom,n.x,Math.min(n.y,f.top),!0)),g.x=n.x,g.y=p.y),p.y>h.top&&p.y<h.bottom&&(n.x<=h.right&&n.x>=t.x||t.x>=f.left&&t.x<=n.x?(90===o||270===o)&&(p=new A(Math.min((t.x+n.x)/2,t.x),t.y),g=new A(p.x,n.y)):(p.y=270===o||(0===o||180===o)&&n.y<t.y?Math.min(n.y,180===o?h.top:Math.min(h.top,f.top)):Math.max(n.y,180===o?h.bottom:Math.max(h.bottom,f.bottom)),g.x=n.x,g.y=p.y))):90===e?n.y>t.y||180===o&&n.x<t.x&&f.bottom>t.y||0===o&&n.x>t.x&&f.bottom>t.y?(p=new A(t.x,n.y),g=new A((t.x+n.x)/2,n.y),270===o?(p.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),g.x=n.x,g.y=p.y):180===o&&n.x<t.x||0===o&&n.x>t.x?(p.y=t.y<f.top?this.computeMidOrthoPosition(t.x,t.y,n.x,f.top,!0):t.y<f.bottom&&(180===o&&t.x<f.left||0===o&&t.x>f.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):f.bottom,g.x=n.x,g.y=p.y):90===o&&t.y<f.top&&t.x>f.left&&t.x<f.right&&(p.x=t.x<n.x?Math.min(n.x,f.left):Math.max(n.x,f.right),p.y=t.y,g.x=p.x)):(p=new A(n.x,t.y),g=new A(n.x,(t.y+n.y)/2),(270===o||0===o&&n.x<h.left||180===o&&n.x>h.right)&&(270===o&&(f.$(t)||h.$(n))?p.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(270===o||0===o)?p.x=this.computeMidOrthoPosition(h.left,t.y,Math.max(n.x,f.right),n.y,!1):n.x>t.x&&(270===o||180===o)&&(p.x=this.computeMidOrthoPosition(h.right,t.y,Math.min(n.x,f.left),n.y,!1)),g.x=p.x,g.y=n.y),p.x>h.left&&p.x<h.right&&(n.y>=h.top&&n.y<=t.y||t.y<=f.bottom&&t.y>=n.y?(0===o||180===o)&&(p=new A(t.x,Math.max((t.y+n.y)/2,t.y)),g=new A(n.x,p.y)):(p.x=180===o||(90===o||270===o)&&n.x<t.x?Math.min(n.x,90===o?h.left:Math.min(h.left,f.left)):Math.max(n.x,90===o?h.right:Math.max(h.right,f.right)),g.x=p.x,g.y=n.y))):n.y<t.y||180===o&&n.x<t.x&&f.top<t.y||0===o&&n.x>t.x&&f.top<t.y?(p=new A(t.x,n.y),g=new A((t.x+n.x)/2,n.y),90===o?(p.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),g.x=n.x,g.y=p.y):180===o&&n.x<t.x||0===o&&n.x>=t.x?(p.y=t.y>f.bottom?this.computeMidOrthoPosition(t.x,t.y,n.x,f.bottom,!0):t.y>f.top&&(180===o&&t.x<f.left||0===o&&t.x>f.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):f.top,g.x=n.x,g.y=p.y):270===o&&t.y>f.bottom&&t.x>f.left&&t.x<f.right&&(p.x=t.x<n.x?Math.min(n.x,f.left):Math.max(n.x,f.right),p.y=t.y,g.x=p.x)):(p=new A(n.x,t.y),g=new A(n.x,(t.y+n.y)/2),(90===o||0===o&&n.x<h.left||180===o&&n.x>h.right)&&(90===o&&(f.$(t)||h.$(n))?p.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(90===o||0===o)?p.x=this.computeMidOrthoPosition(h.left,t.y,Math.max(n.x,f.right),n.y,!1):n.x>t.x&&(90===o||180===o)&&(p.x=this.computeMidOrthoPosition(h.right,t.y,Math.min(n.x,f.left),n.y,!1)),g.x=p.x,g.y=n.y),p.x>h.left&&p.x<h.right&&(n.y<=h.bottom&&n.y>=t.y||t.y>=f.top&&t.y<=n.y?(0===o||180===o)&&(p=new A(t.x,Math.min((t.y+n.y)/2,t.y)),g=new A(n.x,p.y)):(p.x=180===o||(90===o||270===o)&&n.x<t.x?Math.min(n.x,270===o?h.left:Math.min(h.left,f.left)):Math.max(n.x,270===o?h.right:Math.max(h.right,f.right)),g.x=p.x,g.y=n.y)));var y=p,v=g,x=n;if(this.isAvoiding){var S=this.diagram;if(null===S||!cx(S)||h.$(x)&&!u.Kd(a)||f.$(t)&&!a.Kd(u)||a===u||this.layer.isTemporary)e=!1;else{var M=fx(S,!0,this.containingGroup,null);if(17!==this.segmentIndex&&M.Dk(Math.min(t.x,y.x),Math.min(t.y,y.y),Math.abs(t.x-y.x),Math.abs(t.y-y.y))&&M.Dk(Math.min(y.x,v.x),Math.min(y.y,v.y),Math.abs(y.x-v.x),Math.abs(y.y-v.y))&&M.Dk(Math.min(v.x,x.x),Math.min(v.y,x.y),Math.abs(v.x-x.x),Math.abs(v.y-x.y)))e=!1;else{a=t,u=x;var T=n=null;if(S.isVirtualized){(S=M.bounds.copy()).Lc(-M.wq,-M.vq);var N=A.alloc();Yl(M,t.x,t.y)||(R.Ef(S.x,S.y,S.x+S.width,S.y+S.height,t.x,t.y,y.x,y.y,N)?(n=t=N.copy(),e=N.Sa(y)):R.Ef(S.x,S.y,S.x+S.width,S.y+S.height,y.x,y.y,v.x,v.y,N)?(n=t=N.copy(),e=N.Sa(v)):R.Ef(S.x,S.y,S.x+S.width,S.y+S.height,v.x,v.y,x.x,x.y,N)&&(n=t=N.copy(),e=N.Sa(x))),Yl(M,x.x,x.y)||(R.Ef(S.x,S.y,S.x+S.width,S.y+S.height,x.x,x.y,v.x,v.y,N)?(T=x=N.copy(),o=v.Sa(N)):R.Ef(S.x,S.y,S.x+S.width,S.y+S.height,v.x,v.y,y.x,y.y,N)?(T=x=N.copy(),o=y.Sa(N)):R.Ef(S.x,S.y,S.x+S.width,S.y+S.height,y.x,y.y,t.x,t.y,N)&&(T=x=N.copy(),o=t.Sa(N))),A.free(N)}(h=h.copy().Tc(f)).Lc(M.wq*M.Xy,M.vq*M.Xy),$x(M,t,e,x,o,h,!0),f=Bh(M,x.x,x.y),!M.abort&&f>=Fr&&(f0(M),h.Lc(M.wq*M.Hy,M.vq*M.Hy),$x(M,t,e,x,o,h,!1),f=Bh(M,x.x,x.y)),!M.abort&&f<Fr&&Bh(M,x.x,x.y)!==al?(Vx(this,M,x.x,x.y,o,!0),f=this.i(2),4>this.pointsCount?(0===e||180===e?(f.x=t.x,f.y=x.y):(f.x=x.x,f.y=t.y),this.L(2,f.x,f.y),this.m(3,f.x,f.y)):(h=this.i(3),0===e||180===e?R.A(f.x,h.x)?(f=0===e?Math.max(f.x,t.x):Math.min(f.x,t.x),this.L(2,f,t.y),this.L(3,f,h.y)):R.A(f.y,h.y)?(Math.abs(t.y-f.y)<=M.vq/2&&(this.L(2,f.x,t.y),this.L(3,h.x,t.y)),this.m(2,f.x,t.y)):this.L(2,t.x,f.y):(90===e||270===e)&&(R.A(f.y,h.y)?(f=90===e?Math.max(f.y,t.y):Math.min(f.y,t.y),this.L(2,t.x,f),this.L(3,h.x,f)):R.A(f.x,h.x)?(Math.abs(t.x-f.x)<=M.wq/2&&(this.L(2,t.x,f.y),this.L(3,t.x,h.y)),this.m(2,t.x,f.y)):this.L(2,f.x,t.y))),null!==n&&(t=this.i(1),h=this.i(2),t.x!==h.x&&t.y!==h.y?0===e||180===e?this.m(2,t.x,h.y):this.m(2,h.x,t.y):0===e||180===e?this.m(2,a.x,n.y):this.m(2,n.x,a.y)),null!==T&&(0===o||180===o?this.xf(u.x,T.y):this.xf(T.x,u.y)),e=!0):e=!1}}}else e=!1;e||(this.be(p),this.be(g))}},Q.prototype.computeMidOrthoPosition=function(t,e,n,o,a){var u=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Qc()||this.computeSpot(!1,this.toPort).Qc()||(u=this.computeCurviness()),a?(e+o)/2+u:(t+n)/2+u},Q.prototype.Sz=function(t){var e=t.x;t=t.y;for(var n=this.i(0),o=this.i(1),a=Di(e,t,n.x,n.y,o.x,o.y),u=0,h=1;h<this.pointsCount-1;h++){n=this.i(h+1);var f=Di(e,t,o.x,o.y,n.x,n.y);o=n,f<a&&(u=h,a=f)}return u},Q.prototype.dc=function(){this.Ym=!1,this.o()},Q.prototype.Fk=function(t){if((t||!1!==this.kd&&(t=this.rb(),!this.Ym||null!==t&&null===t.geometry))&&(this.na=this.makeGeometry(),null!==(t=this.path))){t.na=this.na;for(var e=this.W.j,n=e.length,o=0;o<n;o++){var a=e[o];a!==t&&a.isPanelMain&&a instanceof At&&(a.na=this.na)}}},Q.prototype.makeGeometry=function(){var t=this.na,e=this.pointsCount;if(2>e)return t.type=Tn,this.Ym=!0,t;var n=!1,o=this.diagram;null!==o&&Lh(this)&&o.Wg.contains(this)&&(0!==this.Yl.width||0!==this.Yl.height)&&(n=!0);var a=this.i(0).copy(),u=a.copy();o=this.Bb.j;var h=this.computeCurve();if(h===vr&&3<=e&&!R.aa(this.smoothness,0))if(3===e){var f=this.i(1);o=Math.min(a.x,f.x);var p=Math.min(a.y,f.y);f=this.i(2),o=Math.min(o,f.x),p=Math.min(p,f.y)}else{if(this.isOrthogonal)for(p=0;p<e;p++)f=o[p],u.x=Math.min(f.x,u.x),u.y=Math.min(f.y,u.y);else for(o=3;o<e;o+=3)o+3>=e&&(o=e-1),p=this.i(o),u.x=Math.min(p.x,u.x),u.y=Math.min(p.y,u.y);o=u.x,p=u.y}else{for(p=0;p<e;p++)f=o[p],u.x=Math.min(f.x,u.x),u.y=Math.min(f.y,u.y);o=u.x,p=u.y}if(p-=this.uv.y,a.x-=o-=this.uv.x,a.y-=p,2!==e||Lh(this)){if(t.type=pn,f=Xv(t),0!==this.computeShortLength(!0)&&(a=df(this,a,!0,u)),Ah(f,a.x,a.y,!1),h===vr&&3<=e&&!R.aa(this.smoothness,0))if(3===e)e=(n=this.i(1)).x-o,n=n.y-p,(a=this.i(2).copy()).x-=o,a.y-=p,0!==this.computeShortLength(!1)&&(a=df(this,a,!1,u)),ga(f,e,n,e,n,a.x,a.y);else if(this.isOrthogonal){u=new A(o,p),a=this.i(1).copy(),h=new A(o,p),e=new A(o,p),n=this.i(0);for(var g,y=this.smoothness/3,v=1;v<this.pointsCount-1;v++){var x=n,S=g=this.i(v),M=this.i(Ux(this,g,v,!1));if(!(R.aa(x.x,S.x)&&R.aa(S.x,M.x)||R.aa(x.y,S.y)&&R.aa(S.y,M.y))){var T=y;isNaN(T)&&(T=this.smoothness/3);var N=x.x,P=S.x,I=M.x;M=M.y;var O=T*l0(N,x=x.y,P,S=S.y);T*=l0(P,S,I,M),R.aa(x,S)&&R.aa(P,I)&&(P>N?M>S?(h.x=P-O,h.y=S-O,e.x=P+T,e.y=S+T):(h.x=P-O,h.y=S+O,e.x=P+T,e.y=S-T):M>S?(h.x=P+O,h.y=S-O,e.x=P-T,e.y=S+T):(h.x=P+O,h.y=S+O,e.x=P-T,e.y=S-T)),R.aa(N,P)&&R.aa(S,M)&&(S>x?(I>P?(h.x=P-O,h.y=S-O,e.x=P+T):(h.x=P+O,h.y=S-O,e.x=P-T),e.y=S+T):(I>P?(h.x=P-O,h.y=S+O,e.x=P+T):(h.x=P+O,h.y=S+O,e.x=P-T),e.y=S-T)),(R.aa(N,P)&&R.aa(P,I)||R.aa(x,S)&&R.aa(S,M))&&(x=.5*(x+M),h.x=N=.5*(N+I),h.y=x,e.x=N,e.y=x),(1===v||2===v&&R.aa(n.x,this.i(0).x)&&R.aa(n.y,this.i(0).y))&&(a.x=.5*(n.x+g.x),a.y=.5*(n.y+g.y)),ga(f,a.x-o,a.y-p,h.x-o,h.y-p,g.x-o,g.y-p),u.set(h),a.set(e),n=g}}u=n.x,n=n.y,a=this.i(this.pointsCount-1),0!==this.computeShortLength(!1)&&(a=df(this,a.copy(),!1,Ga)),ga(f,e.x-o,e.y-p,(u=.5*(u+a.x))-o,(n=.5*(n+a.y))-p,a.x-o,a.y-p)}else for(n=3;n<e;n+=3)u=this.i(n-2),n+3>=e&&(n=e-1),a=this.i(n-1),h=this.i(n),n===e-1&&0!==this.computeShortLength(!1)&&(h=df(this,h.copy(),!1,Ga)),ga(f,u.x-o,u.y-p,a.x-o,a.y-p,h.x-o,h.y-p);else{for((u=A.alloc()).assign(this.i(0)),(a=A.alloc()).assign(u),h=this.computeCorner(),v=1,g=0;v<e;){if(v=Ux(this,u,v,1<v),y=this.i(v),v>=e-1){if(u.w(y)){if(0===g)for(v=1;v<e;)a.assign(u),pf(this,f,-o,-p,u,y=this.i(v++),n),u.assign(y)}else 0!==this.computeShortLength(!1)&&(y=df(this,y.copy(),!1,Ga)),pf(this,f,-o,-p,u,y,n);break}if(g=Ux(this,y,v+1,v<e-3),v=-o,N=-p,x=y,T=this.i(g),P=n,R.A(u.y,x.y)&&R.A(x.x,T.x))if(S=Math.min(h,Math.abs(x.x-a.x)/2),S=I=Math.min(S,Math.abs(T.y-x.y)/2),R.A(S,0))pf(this,f,v,N,u,x,P),u.assign(x);else{var b=M=x.x,B=O=x.y;B=T.y>x.y?x.y+I:x.y-I,pf(this,f,v,N,u,new A(M=x.x>u.x?x.x-S:x.x+S,O),P),kh(f,x.x+v,x.y+N,b+v,B+N),u.h(b,B)}else R.A(u.x,x.x)&&R.A(x.y,T.y)?(S=Math.min(h,Math.abs(x.y-a.y)/2),S=I=Math.min(S,Math.abs(T.x-x.x)/2),R.A(I,0)?(pf(this,f,v,N,u,x,P),u.assign(x)):(b=M=x.x,B=O=x.y,b=T.x>x.x?x.x+I:x.x-I,pf(this,f,v,N,u,new A(M,O=x.y>u.y?x.y-S:x.y+S),P),kh(f,x.x+v,x.y+N,b+v,B+N),u.h(b,B))):(pf(this,f,v,N,u,x,P),u.assign(x));a.assign(y),v=g}A.free(u)}uf=f}else(f=this.i(1).copy()).x-=o,f.y-=p,0!==this.computeShortLength(!0)&&(a=df(this,a,!0,u)),0!==this.computeShortLength(!1)&&(f=df(this,f,!1,u)),t.type=Tn,t.startX=a.x,t.startY=a.y,t.endX=f.x,t.endY=f.y;return this.Ym=!0,t},Q.prototype.Mq=function(t){var e=this.layer;if(null!==e&&e.visible&&!e.isTemporary){var n=e.diagram;if(null!==n&&!n.animationManager.isTicking){var o=!1;for(n=n.layers;n.next();){var a=n.value;if(a.visible)if(a===e){o=!0;for(var u=!1,h=(a=a.Da.j).length,f=0;f<h;f++){var p=a[f];p instanceof Q&&(p===this?u=!0:u&&GM(this,p,t))}}else if(o)for(a=(u=a.Da.j).length,h=0;h<a;h++)(f=u[h])instanceof Q&&GM(this,f,t)}}}},Q.prototype.usesSamePort=function(t){var e=this.pointsCount,n=t.pointsCount;if(0<e&&0<n){var o=this.i(0),a=t.i(0);if(o.Na(a)||(e=this.i(e-1),t=t.i(n-1),e.Na(t)||o.Na(t)||e.Na(a)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},Q.prototype.isVisible=function(){if(!wt.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),null!==(n=this.fromNode)){if(this.isTreeLink&&e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(var o=n;null!==o;){if(o.labeledLink===this)return!0;o=o.containingGroup}if(null===(n=n.findVisibleNode())||n===t)return!1}if(null!==(n=this.toNode)){if(this.isTreeLink&&!e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(e=n;null!==e;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(null===(e=n.findVisibleNode())||e===t)return!1}return!0},Q.prototype.Pb=function(t){if(wt.prototype.Pb.call(this,t),null!==this.Of&&this.Of.Cm(),null!==this.od)for(var e=this.od.iterator;e.next();)e.value.Pb(t)},Q.prototype.computeAdjusting=function(){return this.isAvoiding&&null!==this.diagram&&this.diagram.animationManager.defaultAnimation.isAnimating?ep:this.Yk},Q.prototype.Oh=function(){return!0},L.Object.defineProperties(Q.prototype,{fromNode:{get:function(){return this.Xe},set:function(t){var e=this.Xe;if(e!==t){var n=this.fromPort;null!==e&&(this.tf!==e&&Wd(e,this,n),Fh(this),this.C(2)),this.Xe=t,null!==t&&this.Pb(t.isVisible()),this.Xf=null,this.Ua();var o=this.diagram;null!==o&&o.Z&&o.partManager.setFromNodeForLink(this,t,e);var a=this.fromPort,u=this.fromPortChanged;if(null!==u){var h=!0;null!==o&&(h=o.Z,o.Z=!0),u(this,n,a),null!==o&&(o.Z=h)}null!==t&&(this.tf!==t&&Go(t,this,a),Ls(this),this.C(1)),this.g("fromNode",e,t),ff(this)}}},fromPortId:{get:function(){return this.Ye},set:function(t){var e=this.Ye;if(e!==t){var n=this.fromPort;null!==n&&rr(n),Fh(this),this.Ye=t;var o=this.fromPort;null!==o&&rr(o);var a=this.diagram;if(null!==a){var u=this.data,h=a.model;null!==u&&h.qj()&&h.Dw(u,t)}n!==o&&(this.Xf=null,this.Ua(),null!==(u=this.fromPortChanged)&&(h=!0,null!==a&&(h=a.Z,a.Z=!0),u(this,n,o),null!==a&&(a.Z=h))),Ls(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.Xe;return null===t?null:t.Kt(this.Ye)}},fromPortChanged:{get:function(){return this.co},set:function(t){var e=this.co;e!==t&&(this.co=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.tf},set:function(t){var e=this.tf;if(e!==t){var n=this.toPort;null!==e&&(this.Xe!==e&&Wd(e,this,n),Fh(this),this.C(2)),this.tf=t,null!==t&&this.Pb(t.isVisible()),this.Xf=null,this.Ua();var o=this.diagram;null!==o&&o.Z&&o.partManager.setToNodeForLink(this,t,e);var a=this.toPort,u=this.toPortChanged;if(null!==u){var h=!0;null!==o&&(h=o.Z,o.Z=!0),u(this,n,a),null!==o&&(o.Z=h)}null!==t&&(this.Xe!==t&&Go(t,this,a),Ls(this),this.C(1)),this.g("toNode",e,t),ff(this)}}},toPortId:{get:function(){return this.uf},set:function(t){var e=this.uf;if(e!==t){var n=this.toPort;null!==n&&rr(n),Fh(this),this.uf=t;var o=this.toPort;null!==o&&rr(o);var a=this.diagram;if(null!==a){var u=this.data,h=a.model;null!==u&&h.qj()&&h.Iw(u,t)}n!==o&&(this.Xf=null,this.Ua(),null!==(u=this.toPortChanged)&&(h=!0,null!==a&&(h=a.Z,a.Z=!0),u(this,n,o),null!==a&&(a.Z=h))),Ls(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.tf;return null===t?null:t.Kt(this.uf)}},toPortChanged:{get:function(){return this.jq},set:function(t){var e=this.jq;e!==t&&(this.jq=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return null!==this.O?this.O.bh:Ei},set:function(t){this.Mc();var e=this.O.bh;e.w(t)||(t=t.G(),this.O.bh=t,this.g("fromSpot",e,t),(e.Qc()||t.Qc())&&null!==this.fromNode&&rr(this.fromPort),this.Ua())}},fromEndSegmentLength:{get:function(){return null!==this.O?this.O.$g:NaN},set:function(t){this.Mc();var e=this.O.$g;e!==t&&(0>t&&qt(t,">= 0",Q,"fromEndSegmentLength"),this.O.$g=t,this.g("fromEndSegmentLength",e,t),this.Ua())}},fromShortLength:{get:function(){return null!==this.O?this.O.ah:NaN},set:function(t){this.Mc();var e=this.O.ah;e!==t&&(this.O.ah=t,this.dc(),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return null!==this.O?this.O.Bh:Ei},set:function(t){this.Mc();var e=this.O.Bh;e.w(t)||(t=t.G(),this.O.Bh=t,this.g("toSpot",e,t),(e.Qc()||t.Qc())&&null!==this.toNode&&rr(this.toPort),this.Ua())}},toEndSegmentLength:{get:function(){return null!==this.O?this.O.zh:NaN},set:function(t){this.Mc();var e=this.O.zh;e!==t&&(0>t&&qt(t,">= 0",Q,"toEndSegmentLength"),this.O.zh=t,this.g("toEndSegmentLength",e,t),this.Ua())}},toShortLength:{get:function(){return null!==this.O?this.O.Ah:NaN},set:function(t){this.Mc();var e=this.O.Ah;e!==t&&(this.O.Ah=t,this.dc(),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return null!==this.od&&0<this.od.count}},labelNodes:{get:function(){return null===this.od?mo:this.od.iterator}},relinkableFrom:{get:function(){return 0!=(1&this.Fa)},set:function(t){var e=0!=(1&this.Fa);e!==t&&(this.Fa^=1,this.g("relinkableFrom",e,t),this.Mb())}},relinkableTo:{get:function(){return 0!=(2&this.Fa)},set:function(t){var e=0!=(2&this.Fa);e!==t&&(this.Fa^=2,this.g("relinkableTo",e,t),this.Mb())}},resegmentable:{get:function(){return 0!=(4&this.Fa)},set:function(t){var e=0!=(4&this.Fa);e!==t&&(this.Fa^=4,this.g("resegmentable",e,t),this.Mb())}},isTreeLink:{get:function(){return 0!=(8&this.Fa)},set:function(t){var e=0!=(8&this.Fa);e!==t&&(this.Fa^=8,this.g("isTreeLink",e,t),null!==this.fromNode&&Xd(this.fromNode),null!==this.toNode&&Xd(this.toNode))}},path:{get:function(){var t=this.rb();return t instanceof At?t:null}},routeBounds:{get:function(){this.xj();var t=this.Yl,e=1/0,n=1/0,o=this.pointsCount;if(0===o)t.h(NaN,NaN,0,0);else{if(1===o)o=this.i(0),e=Math.min(o.x,e),n=Math.min(o.y,n),t.h(o.x,o.y,0,0);else if(2===o){o=this.i(0);var a=this.i(1);e=Math.min(o.x,a.x),n=Math.min(o.y,a.y),t.h(o.x,o.y,0,0),t.Oe(a)}else if(this.computeCurve()===vr&&3<=o&&!this.isOrthogonal)if(a=this.i(0),t.h(e=a.x,n=a.y,0,0),3===o){o=this.i(1),e=Math.min(o.x,e),n=Math.min(o.y,n);var u=this.i(2);e=Math.min(u.x,e),n=Math.min(u.y,n),R.um(a.x,a.y,o.x,o.y,o.x,o.y,u.x,u.y,.5,t)}else for(u=3;u<o;u+=3){var h=this.i(u-2);u+3>=o&&(u=o-1);var f=this.i(u-1),p=this.i(u);R.um(a.x,a.y,h.x,h.y,f.x,f.y,p.x,p.y,.5,t),e=Math.min(p.x,e),n=Math.min(p.y,n),a=p}else for(a=this.i(0),u=this.i(1),e=Math.min(a.x,u.x),n=Math.min(a.y,u.y),t.h(a.x,a.y,0,0),t.Oe(u),a=2;a<o;a++)u=this.i(a),e=Math.min(u.x,e),n=Math.min(u.y,n),t.Oe(u);this.uv.h(e-t.x,n-t.y)}return t}},midPoint:{get:function(){return this.xj(),this.computeMidPoint(new A)}},midAngle:{get:function(){return this.xj(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(null===this.bs){this.kd||Mm(this);for(var t=this.bs=[],e=this.pointsCount,n=0;n<e-1;n++){var o=this.i(n),a=this.i(n+1);R.aa(o.x,a.x)?0>(o=a.y-o.y)&&(o=-o):R.aa(o.y,a.y)?0>(o=a.x-o.x)&&(o=-o):o=Math.sqrt(o.He(a)),t.push(o)}}return this.bs}},flattenedTotalLength:{get:function(){var t=this.Pu;if(isNaN(t)){for(var e=this.flattenedLengths,n=e.length,o=t=0;o<n;o++)t+=e[o];this.Pu=t}return t}},points:{get:function(){return this.Bb},set:function(t){var e=this.Bb;if(e!==t){var n=null;if(Array.isArray(t)){var o=t.length%2==0;if(o)for(var a=0;a<t.length;a++)if("number"!=typeof t[a]||isNaN(t[a])){o=!1;break}if(o)for(n=new lt,o=0;o<t.length/2;o++)a=new A(t[2*o],t[2*o+1]).freeze(),n.add(a);else{for(o=!0,a=0;a<t.length;a++){var u=t[a];if(!$t(u)||"number"!=typeof u.x||isNaN(u.x)||"number"!=typeof u.y||isNaN(u.y)){o=!1;break}}if(o)for(n=new lt,o=0;o<t.length;o++)n.add(new A((a=t[o]).x,a.y).freeze())}}else if(t instanceof lt)for(n=t.copy(),t=n.iterator;t.next();)t.value.freeze();else W("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.Bb=n,this.dc(),Mm(this),null!==(t=this.diagram)&&(t.pj||t.undoManager.isUndoingRedoing||t.Yt.add(this),t.animationManager.sc&&(this.sg=n)),this.g("points",e,n)}}},pointsCount:{get:function(){return this.Bb.count}},kd:{get:function(){return 0!=(16&this.Fa)},set:function(t){0!=(16&this.Fa)!==t&&(this.Fa^=16)}},suspendsRouting:{get:function(){return 0!=(32&this.Fa)},set:function(t){0!=(32&this.Fa)!==t&&(this.Fa^=32)}},Ct:{get:function(){return 0!=(64&this.Fa)},set:function(t){0!=(64&this.Fa)!==t&&(this.Fa^=64)}},defaultFromPoint:{get:function(){return this.v},set:function(t){this.v=t.copy()}},defaultToPoint:{get:function(){return this.I},set:function(t){this.I=t.copy()}},isOrthogonal:{get:function(){return 2==(2&this.ck.value)}},isAvoiding:{get:function(){return 4==(4&this.ck.value)}},Ym:{get:function(){return 0!=(128&this.Fa)},set:function(t){0!=(128&this.Fa)!==t&&(this.Fa^=128)}},geometry:{get:function(){return this.Ym||(this.xj(),this.na=this.makeGeometry()),this.na}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!bh(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return 0===t?0:2>=t?t-1:this.isOrthogonal||!bh(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.Yk},set:function(t){var e=this.Yk;e!==t&&(this.Yk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.Fn},set:function(t){var e=this.Fn;e!==t&&(this.Fn=t,this.dc(),this.g("corner",e,t))}},curve:{get:function(){return this.Hn},set:function(t){var e=this.Hn;e!==t&&(this.Hn=t,this.Ua(),this.dc(),Hx(this,e===rl||e===Uu||t===rl||t===Uu),this.g("curve",e,t))}},curviness:{get:function(){return this.In},set:function(t){var e=this.In;e!==t&&(this.In=t,this.Ua(),this.dc(),this.g("curviness",e,t))}},routing:{get:function(){return this.ck},set:function(t){var e=this.ck;e!==t&&(this.ck=t,this.Xf=null,this.Ua(),Hx(this,2==(2&e.value)||2==(2&t.value)),this.g("routing",e,t))}},smoothness:{get:function(){return this.Wp},set:function(t){var e=this.Wp;e!==t&&(this.Wp=t,this.dc(),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(null!==t&&t.model.qj())return t.model.Wb(this.data)}}}),Q.prototype.invalidateOtherJumpOvers=Q.prototype.Mq,Q.prototype.findClosestSegment=Q.prototype.Sz,Q.prototype.updateRoute=Q.prototype.xj,Q.prototype.invalidateRoute=Q.prototype.Ua,Q.prototype.rollbackRoute=Q.prototype.zw,Q.prototype.commitRoute=Q.prototype.zf,Q.prototype.startRoute=Q.prototype.Sh,Q.prototype.clearPoints=Q.prototype.pk,Q.prototype.removePoint=Q.prototype.uw,Q.prototype.addPointAt=Q.prototype.xf,Q.prototype.addPoint=Q.prototype.be,Q.prototype.insertPointAt=Q.prototype.m,Q.prototype.insertPoint=Q.prototype.wA,Q.prototype.setPointAt=Q.prototype.L,Q.prototype.setPoint=Q.prototype.Sc,Q.prototype.getPoint=Q.prototype.i,Q.prototype.getOtherPort=Q.prototype.nA,Q.prototype.getOtherNode=Q.prototype.Hq;var Rh=null,Vu=null,tp=new it(Q,"Normal",1),Gx=new it(Q,"Orthogonal",2),u0=new it(Q,"AvoidsNodes",6),zx=new it(Q,"AvoidsNodesStraight",7),Un=new it(Q,"None",0),vr=new it(Q,"Bezier",9),rl=new it(Q,"JumpGap",10),Uu=new it(Q,"JumpOver",11),ep=new it(Q,"End",17),np=new it(Q,"Scale",18),Dm=new it(Q,"Stretch",19),ip=new it(Q,"OrientAlong",21),Gl=new it(Q,"OrientPlus90",22),ol=new it(Q,"OrientMinus90",23),rp=new it(Q,"OrientOpposite",24),zl=new it(Q,"OrientUpright",25),$l=new it(Q,"OrientPlus90Upright",26),sl=new it(Q,"OrientMinus90Upright",27),Em=new it(Q,"OrientUpright45",28),h0=16,c0=14,jh=8;function gf(t,e,n,o){wn(this),this.se=this.js=!1,this.au=t,this.Ny=e,this.kw=n,this.Oy=o,this.links=[]}function mf(){wn(this),this.Wy=this.group=null,this.St=!0,this.abort=!1,this.Bd=this.Ad=1,this.No=this.Mo=-1,this.gc=this.fc=8,this.Rb=null,this.$i=this.Zi=0,this.Xy=11,this.Hy=124}function Yl(t,e,n){return t.Ad<=e&&e<=t.Mo&&t.Bd<=n&&n<=t.No}function Bh(t,e,n){return Yl(t,e,n)?(e-=t.Ad,n-=t.Bd,t.Rb[0|(e/=t.fc)][0|(n/=t.gc)]):p0}function f0(t){if(null!==t.Rb)for(var e=0;e<=t.Zi;e++)for(var n=t.Rb[e],o=0;o<=t.$i;o++)n[o]>=Vh&&(n[o]=p0)}function ya(t,e,n,o,a,u,h,f,p){if(!(e<u||e>h||n<f||n>p)){var g=0|e,y=0|n,v=t.Rb[g][y];if(v>=Vh&&v<Fr)for(a?y+=o:g+=o,v+=1;u<=g&&g<=h&&f<=y&&y<=p&&!(v>=t.Rb[g][y]);)t.Rb[g][y]=v,v+=1,a?y+=o:g+=o;if(g=a?y:g,a)if(0<o)for(n+=o;n<g;n+=o)ya(t,e,n,1,!a,u,h,f,p),ya(t,e,n,-1,!a,u,h,f,p);else for(n+=o;n>g;n+=o)ya(t,e,n,1,!a,u,h,f,p),ya(t,e,n,-1,!a,u,h,f,p);else if(0<o)for(e+=o;e<g;e+=o)ya(t,e,n,1,!a,u,h,f,p),ya(t,e,n,-1,!a,u,h,f,p);else for(e+=o;e>g;e+=o)ya(t,e,n,1,!a,u,h,f,p),ya(t,e,n,-1,!a,u,h,f,p)}}function op(t,e,n,o,a,u,h,f,p){var g=al,y=Vh;for(t.Rb[e|=0][n|=0]=y;g===al&&e>u&&e<h&&n>f&&n<p;)t.Rb[e][n]=y+=1,a?n+=o:e+=o,g=t.Rb[e][n]}function sp(t,e,n,o,a,u,h,f,p){var g=al,y=Fr;for(t.Rb[e|=0][n|=0]=y;g===al&&e>u&&e<h&&n>f&&n<p;)t.Rb[e][n]=y,a?n+=o:e+=o,g=t.Rb[e][n]}function $x(t,e,n,o,a,u,h){if(null!==t.Rb){t.abort=!1;var f=e.x,p=e.y;if(Yl(t,f,p)){f-=t.Ad,f/=t.fc,p-=t.Bd,p/=t.gc;var g=o.x,y=o.y;if(Yl(t,g,y))if(g-=t.Ad,g/=t.fc,y-=t.Bd,y/=t.gc,1>=Math.abs(f-g)&&1>=Math.abs(p-y))t.abort=!0;else{var v=u.x;o=u.y,e=u.x+u.width;var x=u.y+u.height;v-=t.Ad,v/=t.fc,o-=t.Bd,o/=t.gc,e-=t.Ad,e/=t.fc,x-=t.Bd,x/=t.gc,u=Math.max(0,Math.min(t.Zi,0|v)),e=Math.min(t.Zi,Math.max(0,0|e)),v=Math.max(0,Math.min(t.$i,0|o)),x=Math.min(t.$i,Math.max(0,0|x)),g|=0,y|=0;var S=0===n||90===n?1:-1;if(n=90===n||270===n,(o=t.Rb)[f|=0][p|=0]===al?(op(t,f,p,S,n,u,e,v,x),op(t,f,p,1,!n,u,e,v,x),op(t,f,p,-1,!n,u,e,v,x)):op(t,f,p,S,n,f,p,f,p),o[g][y]===al?(sp(t,g,y,0===a||90===a?1:-1,90===a||270===a,u,e,v,x),sp(t,g,y,1,!(90===a||270===a),u,e,v,x),sp(t,g,y,-1,!(90===a||270===a),u,e,v,x)):sp(t,g,y,S,n,g,y,g,y),n=ye(),h&&d0(t,g,y,a,f,p,n))for((n[0]!==g||n[1]!==y)&&(n.unshift(y),n.unshift(g)),(n[n.length-2]!==f||n[n.length-1]!==p)&&(n.push(f),n.push(p)),t=Vh,o[a=n[n.length-2]][h=n[n.length-1]]=t++,u=n.length-4;0<=u;u-=2)for(a=n[u+2],h=n[u+3],e=n[u],g=n[u+1];e>a?a++:e<a?a--:g>h?h++:g<h&&h--,o[a][h]=t++,a!==e||h!==g;);else ya(t,f,p,1,!1,u,e,v,x),ya(t,f,p,-1,!1,u,e,v,x),ya(t,f,p,1,!0,u,e,v,x),ya(t,f,p,-1,!0,u,e,v,x);Jt(n)}}}}function d0(t,e,n,o,a,u,h){for(var f=t.Rb,p=e,g=n;;){if(p===a&&g===u)return!0;var y=p,v=g;if(0===o){if(!(y<a))break;y++}else if(90===o){if(!(v<u))break;v++}else if(180===o){if(!(y>a))break;y--}else{if(!(v>u))break;v--}var x=f[y][v];if(0===x||x===g0)break;p=y,g=v}for(;;){if(y=o,v=p,x=g,0===o?x<u?(y=90,x++):x>u&&(y=270,x--):90===o?v<a?(y=0,v++):v>a&&(y=180,v--):180===o?x<u?(y=90,x++):x>u&&(y=270,x--):v<a?(y=0,v++):v>a&&(y=180,v--),v=f[v][x],y!==o&&0!==v&&v!==g0){if(h.push(p),h.push(g),d0(t,p,g,y,a,u,h))return!0;h.pop(),h.pop()}if(f[p][g]=g0,0===o){if(p===e)return!1;p--}else if(90===o){if(g===n)return!1;g--}else if(180===o){if(p===e)return!1;p++}else{if(g===n)return!1;g++}}}Q.className="Link",Q.Normal=tp,Q.Orthogonal=Gx,Q.AvoidsNodes=u0,Q.AvoidsNodesStraight=zx,Q.None=Un,Q.Bezier=vr,Q.JumpGap=rl,Q.JumpOver=Uu,Q.End=ep,Q.Scale=np,Q.Stretch=Dm,Q.OrientAlong=ip,Q.OrientPlus90=Gl,Q.OrientMinus90=ol,Q.OrientOpposite=rp,Q.OrientUpright=zl,Q.OrientPlus90Upright=$l,Q.OrientMinus90Upright=sl,Q.OrientUpright45=Em,Q.EndSegmentStep=8,Q.CurvinessStart=h0,Q.SpacingMin=c0,Q.OrthoShortCut=jh,Q.AvoidanceCell=8,Q.AvoidanceLimit=999,gf.prototype.Cm=function(){if(!this.js){var t=this.links;0<t.length&&null!==(t=t[0].diagram)&&(t.Ru.add(this),this.se=t.undoManager.isUndoingRedoing)}this.js=!0},gf.prototype.Ww=function(){if(this.js){this.js=!1;var t=this.links;if(0<t.length){var e=t[0],n=e.diagram;n=null===n||n.pj&&!this.se,this.se=!1,e.arrangeBundledLinks(t,n),1===t.length&&(e.Of=null,t.length=0)}0===t.length&&(t=this.au,null!==this&&null!==t.Te&&t.Te.remove(this),t=this.kw,null!==this&&null!==t.Te&&t.Te.remove(this))}},gf.className="LinkBundle",mf.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,n=t.x+t.width,o=t.y+t.height;if(this.Ad=Math.floor((t.x-this.fc)/this.fc)*this.fc,this.Bd=Math.floor((e-this.gc)/this.gc)*this.gc,this.Mo=Math.ceil((n+2*this.fc)/this.fc)*this.fc,this.No=Math.ceil((o+2*this.gc)/this.gc)*this.gc,t=1+(0|Math.ceil((this.Mo-this.Ad)/this.fc)),e=1+(0|Math.ceil((this.No-this.Bd)/this.gc)),null===this.Rb||this.Zi<t-1||this.$i<e-1){for(n=[],o=0;o<=t;o++)n[o]=new Uint32Array(e);this.Rb=n,this.Zi=t-1,this.$i=e-1}if(t=p0,null!==this.Rb)for(e=0;e<=this.Zi;e++)if((n=this.Rb[e]).fill)n.fill(t);else for(o=0;o<=this.$i;o++)n[o]=t}},mf.prototype.Dk=function(t,e,n,o){if(t>this.Mo||t+n<this.Ad||e>this.No||e+o<this.Bd)return!0;t=(t-this.Ad)/this.fc|0,e=(e-this.Bd)/this.gc|0,n=Math.max(0,n)/this.fc+1|0;var a=Math.max(0,o)/this.gc+1|0;if(0>t&&(n+=t,t=0),0>e&&(a+=e,e=0),0>n||0>a)return!0;for(o=0|Math.min(t+n-1,this.Zi),n=0|Math.min(e+a-1,this.$i);t<=o;t++){a=this.Rb[t];for(var u=e;u<=n;u++)if(a[u]===al)return!1}return!0},L.Object.defineProperties(mf.prototype,{bounds:{get:function(){return new z(this.Ad,this.Bd,this.Mo-this.Ad,this.No-this.Bd)}},wq:{get:function(){return this.fc},set:function(t){0<t&&t!==this.fc&&(this.fc=t,this.initialize(this.bounds))}},vq:{get:function(){return this.gc},set:function(t){0<t&&t!==this.gc&&(this.gc=t,this.initialize(this.bounds))}}});var al=0,Vh=1,Fr=999999,p0=Fr+1,g0=Fr+2;function yf(){wn(this),this.port=this.node=null,this.de=[],this.Rq=!1}function rT(t,e,n,o){switch(e=e.offsetY){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<n?270:90;case 6:return 90<n&&270>=n?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return n>t&&n<=180+t?180:270;case 5:return n>180-t&&n<=360-t?270:0;case 12:return n>t&&n<=180+t?90:0;case 10:return n>180-t&&n<=360-t?180:90;case 7:return 90<n&&n<=180+t?180:n>180+t&&n<=360-t?270:0;case 13:return 180<n&&n<=360-t?270:n>t&&180>=n?90:0;case 14:return n>t&&n<=180-t?90:n>180-t&&270>=n?180:0;case 11:return n>180-t&&n<=180+t?180:n>180+t?270:90}return o&&15!==e&&0>(n-=15)&&(n+=360),n>t&&n<180-t?90:n>=180-t&&n<=180+t?180:n>180+t&&n<360-t?270:0}function m0(t,e){var n=t.de;if(0===n.length){t:if(!t.Rq){n=t.Rq,t.Rq=!0;var o=null,a=t.node,u=a instanceof Pt?a:null;if(null===u||u.isSubGraphExpanded)var h=a.isTreeExpanded?a.findLinksConnected(t.port.portId):a.py();else{if(!u.actualBounds.u()){t.Rq=n;break t}h=(o=u).Qv()}u=t.de.length=0;var f=t.port.da(Ue,A.alloc()),p=t.port.da(ns,A.alloc());for((a=z.allocAt(f.x,f.y,0,0)).Oe(p),A.free(f),A.free(p),f=A.allocAt(a.x+a.width/2,a.y+a.height/2),p=t.port.lj(),h=h.iterator;h.next();){var g=h.value;if(g.isVisible()&&g.fromPort!==g.toPort){var y=g.fromPort===t.port||null!==g.fromNode&&g.fromNode.Kd(o),v=g.computeSpot(y,t.port);if(v.Qc()&&null!==(y=y?g.toPort:g.fromPort)){var x=y.part;if(null!==x){var S=x.findVisibleNode();null!==S&&S!==x&&(y=(x=S).port),y=g.computeOtherPoint(x,y),x=f.Sa(y),0>(x-=p)?x+=360:360<=x&&(x-=360),0===(v=rT(a,v,x,g.isOrthogonal))?(v=4,180<x&&(x-=360)):90===v?(v=8,270<x&&(x-=360)):180===v?v=2:(v=1,90>x&&(x+=360)),void 0===(S=t.de[u])?(S=new Yx(g,x,v),t.de[u]=S):(S.link=g,S.angle=x,S.Bc=v),S.nw.set(y),u++}}}}for(A.free(f),t.de.sort(yf.prototype.l),p=t.de.length,o=-1,u=f=0;u<p;u++)void 0!==(h=t.de[u])&&(h.Bc!==o&&(o=h.Bc,f=0),h.Iq=f,f++);for(o=-1,f=0,u=p-1;0<=u;u--)void 0!==(p=t.de[u])&&(p.Bc!==o&&(o=p.Bc,f=p.Iq+1),p.vm=f);if(u=t.de,v=t.port,o=t.node.portSpreading,f=A.alloc(),p=A.alloc(),h=A.alloc(),g=A.alloc(),v.da(Ue,f),v.da(uh,p),v.da(ns,h),v.da(kl,g),S=x=y=v=0,o===cf)for(var M=0;M<u.length;M++){var T=u[M];if(null!==T){var N=T.link.computeThickness();switch(T.Bc){case 8:x+=N;break;case 2:S+=N;break;case 1:v+=N;break;default:y+=N}}}var P=M=0,I=1,O=T=0;for(N=0;N<u.length;N++){var b=u[N];if(null!==b){if(M!==b.Bc){switch(M=b.Bc){case 8:var B=h;P=g;break;case 2:B=g,P=f;break;case 1:B=f,P=p;break;default:B=p,P=h}switch(T=P.x-B.x,O=P.y-B.y,M){case 8:x>Math.abs(T)?(I=Math.abs(T)/x,x=Math.abs(T)):I=1;break;case 2:S>Math.abs(O)?(I=Math.abs(O)/S,S=Math.abs(O)):I=1;break;case 1:v>Math.abs(T)?(I=Math.abs(T)/v,v=Math.abs(T)):I=1;break;default:y>Math.abs(O)?(I=Math.abs(O)/y,y=Math.abs(O)):I=1}P=0}var K=b.Pq;if(o===cf){switch(b=b.link.computeThickness(),b*=I,K.set(B),M){case 8:K.x=B.x+T/2+x/2-P-b/2;break;case 2:K.y=B.y+O/2+S/2-P-b/2;break;case 1:K.x=B.x+T/2-v/2+P+b/2;break;default:K.y=B.y+O/2-y/2+P+b/2}P+=b}else{var rt=.5;o===hf&&(rt=(b.Iq+1)/(b.vm+1)),K.x=B.x+T*rt,K.y=B.y+O*rt}}}for(A.free(f),A.free(p),A.free(h),A.free(g),B=t.de,u=0;u<B.length;u++)null!==(o=B[u])&&(o.Ov=t.computeEndSegmentLength(o));t.Rq=n,z.free(a)}n=t.de}for(t=0;t<n.length;t++)if(null!==(a=n[t])&&a.link===e)return a;return null}function Yx(t,e,n){this.link=t,this.angle=e,this.Bc=n,this.nw=new A,this.vm=this.Iq=0,this.Pq=new A,this.Ov=0}function ap(){this.Bh=this.bh=Ei,this.Ah=this.ah=this.zh=this.$g=NaN,this.hq=this.ao=null,this.iq=this.bo=1/0}function Wt(){wn(this),this.v=this.B=null,this.yi=this.so=!0,this.xo=!1,this.ln=new A(0,0).freeze(),this.uo=!0,this.tn=this.to=null,this.wo=!1,this.l=null,this.I=0,this.Oo=this.nq=null,this.wt=!1,this.zg=this.ek=null,this.lt=!1}function ll(t,e,n,o,a,u,h,f){for(n=n.iterator;n.next();){var p=n.value;o&&!p.isTopLevel||null!==a&&!a(p)||!p.canLayout()||(u&&p instanceof ot?p.isLinkLabel||(p instanceof Pt&&null===p.layout?ll(t,e,p.memberParts,!1,a,u,h,f):(lp(p),e.add(p))):h&&p instanceof Q?e.add(p):!f||!p.Pc()||p instanceof ot||(lp(p),e.add(p)))}}function lp(t){var e=t.actualBounds;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.Ta()}function Tm(t,e){if(null!==t.workerStateChanged){var n={key:t.group?t.group.key:null};void 0!==e&&(n.time=e),null!==t.ek&&(n.running=Wx(t.ek)),null!==t.zg&&(n.waiting=Wx(t.zg)),t.workerStateChanged(n,t)}}function Wx(t){return{vertexes:t.vertexes.count,edges:t.edges.count}}function up(t,e){var n=hp(t);if(!n)throw Error("Unknown Layout class: "+t);if(e)for(var o in e)n[o]=e[o]}function hp(t){var e=null;if("function"==typeof t){if(!(e=Uh.get(t))){var n=Va(t);(e=Uh.get(n))||((e=new ul).Kv=t,e.name=n,e.l=t.name,e.Cy=v0,Uh.set(n,e),Uh.set(t,e),Uh.set(t.name,e))}}else"string"==typeof t&&(e=Uh.get(t));return e}function y0(t,e){t.wt=!0;var n=hp(t.constructor),o=Xx(t,e,!0);o._GoJS="_GoJS",n.Pe.postMessage(o),n.Em.set(En(t),t),t.ek=e}function Xx(t,e,n){t.onNetworkSerialization(1,n,e,null);var o={};t.serializeLayoutProperties(o,n);var a=[];e.vertexes.each(function(h){var f={};h.serializeVertexProperties(f,n),a.push(f)});var u=[];return e.edges.each(function(h){var f={};h.serializeEdgeProperties(f,n),u.push(f)}),o={id:n?En(t):t.id,layout:Va(t.constructor),p:o,hB:a,Qz:u},t.onNetworkSerialization(2,n,e,o),o}function Kx(t,e,n){n&&(t.id=e.id);var o=t.diagram,a=t.createNetwork();t.onNetworkSerialization(3,n,a,e);var u=e.hB,h=new Et;u&&u.forEach(function(g){var y=null;null===g.key||null===o||n||(y=o.Db(g.key)),null!==y?y=a.mk(y):(y=a.createVertex(),a.Cg(y)),n&&null!==g.key&&(y.data={Ci:g.key}),h.set(g.id,y)});var f=e.Qz,p=new Et;return f&&f.forEach(function(g){var y=null;null===g.key||null===o||n||(y=o.findLinkForKey(g.key));var v=a.createEdge();a.sm(v),v.link=y,n&&null!==g.key&&(v.data={Ci:g.key}),p.set(g.id,v)}),u&&u.forEach(function(g){var y=h.get(g.id);y&&y.zq(g,h,p,n)}),f&&f.forEach(function(g){var y=p.get(g.id);y&&y.deserializeEdgeProperties(g,h,p,n)}),t.deserializeLayoutProperties(e.p,h,p,n,a),t.onNetworkSerialization(4,n,a,e),a}mf.className="PositionArray",yf.prototype.toString=function(){for(var t=this.de,e=this.node.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var o=t[n];null!==o&&(e+="\n  "+o.toString())}return e},yf.prototype.Cm=function(){this.de.length=0},yf.prototype.l=function(t,e){return t===e?0:null===t?-1:null===e?1:t.Bc<e.Bc?-1:t.Bc>e.Bc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},yf.prototype.computeEndSegmentLength=function(t){var e=t.link,n=e.computeEndSegmentLength(this.node,this.port,gi,e.fromPort===this.port),o=t.Iq;if(0>o)return n;var a=t.vm;if(1>=a||!e.isOrthogonal)return n;e=t.nw;var u=t.Pq;return(2===t.Bc||8===t.Bc)&&(o=a-1-o),((t=2===t.Bc||4===t.Bc)?e.y<u.y:e.x<u.x)?n+8*o:(t?e.y===u.y:e.x===u.x)?n:n+8*(a-1-o)},yf.className="Knot",Yx.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Bc.toString()+":"+this.Iq.toString()+"/"+this.vm.toString()+" "+this.Pq.toString()+" "+this.Ov.toString()+" "+this.nw.toString()},Yx.className="LinkInfo",ap.prototype.copy=function(){var t=new ap;return t.bh=this.bh.G(),t.Bh=this.Bh.G(),t.$g=this.$g,t.zh=this.zh,t.ah=this.ah,t.Ah=this.Ah,t.ao=this.ao,t.hq=this.hq,t.bo=this.bo,t.iq=this.iq,t},ap.className="LinkSettings",Wt.prototype.cloneProtected=function(t){t.so=this.so,t.yi=this.yi,t.xo=this.xo,t.ln.assign(this.ln),t.uo=this.uo,t.to=this.to,t.tn=this.tn,t.wo=!0,t.Oo=this.Oo,t.nq=this.nq},Wt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Wt.prototype.serializeLayoutProperties=function(t){t.arrangementOrigin={x:this.arrangementOrigin.x,y:this.arrangementOrigin.y},t.isRouting=this.isRouting},Wt.prototype.deserializeLayoutProperties=function(t){null!==t&&(this.arrangementOrigin=new A(t.arrangementOrigin.x,t.arrangementOrigin.y),this.isRouting=t.isRouting)},Wt.prototype.jb=function(){},Wt.prototype.toString=function(){var t=Va(this.constructor);return t+="(",null!==this.group&&(t+=" in "+this.group),null!==this.diagram&&(t+=" for "+this.diagram),t+")"},Wt.prototype.C=function(){if(this.isValidLayout){var t=this.diagram;if(null!==t&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.Cc(),this.isOngoing&&t.pj||this.isInitial&&!t.pj)&&(this.isValidLayout=!1,t.Eb())}}},Wt.prototype.createNetwork=function(){return new re(this)},Wt.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof V?(e.Bg(t.nodes,!0),e.Bg(t.links,!0)):e.Bg(t instanceof Pt?t.memberParts:t.iterator),e},Wt.prototype.updateParts=function(){if(this.isValidLayout=!0,!this.workerLayout()){var t=this.diagram;if(null===t&&null!==this.network)for(var e=this.network.vertexes.iterator;e.next();){var n=e.value.node;if(null!==n&&null!==(t=n.diagram))break}try{null!==t&&t.xa("Layout"),this.commitLayout()}finally{null!==t&&t.Wa("Layout")}}},Wt.prototype.commitLayout=function(){if(null!==this.network){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},Wt.prototype.doLayout=function(t){var e=new nt;t instanceof V?(ll(this,e,t.nodes,!0,this.Qh,!0,!1,!0),ll(this,e,t.parts,!0,this.Qh,!0,!1,!0)):t instanceof Pt?ll(this,e,t.memberParts,!1,this.Qh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(null!==(t=this.diagram)&&t.xa("Layout"),this.doMinimalNoNetworkLayout(e),null!==t&&t.Wa("Layout")),this.isValidLayout=!0},Wt.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var n=this.arrangementOrigin.x,o=n,a=this.arrangementOrigin.y,u=0,h=0;for(t=t.iterator;t.next();){var f=t.value;lp(f);var p=f.measuredBounds,g=p.width;p=p.height,f.moveTo(o,a),f instanceof Pt&&(f.Qh=!1),o+=Math.max(g,50)+20,h=Math.max(h,Math.max(p,50)),u>=e-1?(u=0,o=n,a+=h+20,h=0):u++}},Wt.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,n=e,o=this.arrangementOrigin.y,a=0,u=0,h=this.network.vertexes.iterator;h.next();){var f=h.value.node;if(!(null===f||f instanceof Q)&&(lp(f),this.Qh(f))){var p=f.measuredBounds,g=p.width;p=p.height,f.moveTo(n,o),f instanceof Pt&&(f.Qh=!1),n+=Math.max(g,50)+20,u=Math.max(u,Math.max(p,50)),a>=t-1?(a=0,n=e,o+=u+20,u=0):a++}}},Wt.prototype.Qh=function(t){return!(t.location.u()&&!(t instanceof Pt&&t.Qh))},Wt.prototype.nj=function(t,e){var n=this.boundsComputation;return null!==n?(e||(e=new z),n(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},Wt.prototype.ay=function(t){var e=new nt;return t instanceof V?(ll(this,e,t.nodes,!0,null,!0,!0,!0),ll(this,e,t.links,!0,null,!0,!0,!0),ll(this,e,t.parts,!0,null,!0,!0,!0)):ll(this,e,t instanceof Pt?t.memberParts:t.iterator,!1,null,!0,!0,!0),e},Wt.prototype.initialOrigin=function(t){var e=this.group;if(null!==e){var n=e.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),null!==(e=e.placeholder)&&(n=e.da(Ue),(isNaN(n.x)||isNaN(n.y))&&n.set(t),n.x+=(t=e.padding).left,n.y+=t.top),n}return t},Wt.prototype.mayUseWorker=function(){return!!this.mayUseWorkerFunction&&this.mayUseWorkerFunction(this)},Wt.prototype.workerLayout=function(){return!1},Wt.prototype.zz=function(){var t=hp(this.constructor);t&&(null!==t.Pe&&t.Pe.terminate(),t.Pe=null,t.Em.iteratorValues.each(function(e){e.wt=!1,e.ek=null,e.zg=null,e.lt=!1,Tm(e)}),t.Em.clear())},Wt.prototype.Vw=function(){if("undefined"==typeof Worker||!Zx||"undefined"==typeof self||void 0!==self.DedicatedWorkerGlobalScope)return!1;if(!this.mayUseWorker())return this.wt&&(this.lt=!0,this.zg=this.ek=null,Tm(this)),!1;var t=hp(this.constructor);return null!==t&&(null===t.Pe&&(t.Pe=new Worker(Zx),t.Pe.onerror=function(e){e.preventDefault(),Ln("Worker Error at: "+e.filename+" "+e.lineno+" "+e.colno+"\n  "+e.message)},t.Pe.l=function(e){Ln("Worker serialization error: "+e)},t.Pe.onmessage=function(e){var n=e.data;if("_GoJS"===n._GoJS)if(n.version&&V.version&&n.version!==V.version)Ln("Failure: GoJS v"+V.version+"  Worker v"+n.version);else if(e=t.Em.get(n.id)){if(t.Em.remove(n.id),e.wt=!1,e.ek=null,e.lt)e.lt=!1,e.zg=null;else{var o=Kx(e,n,!1);e.network=o,e.updateParts(),e.network=null,e.isValidLayout=!0}if(Tm(e,n.time),null!==(n=e.zg))e.zg=null;else for(o=t.Em.iteratorValues;o.next();){var a=o.value;if(null!==(n=a.zg)){a.zg=null;break}}null!==n&&y0(e,n)}},t.Pe.postMessage({_GoJS:"_GoJS",url:t.Cy}),Array.isArray(t.scripts)&&t.scripts.forEach(function(e){t.Pe.postMessage({_GoJS:"_GoJS",url:e})}),t.Pe.postMessage({_GoJS:"_GoJS",version:-1})),null!==this.ek?this.zg=this.network:y0(this,this.network),Tm(this),this.doMinimalNetworkLayout(),this.network=null,this.isValidLayout=!0)},Wt.prototype.onNetworkSerialization=function(){},L.Object.defineProperties(Wt.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},group:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t,null!==t&&(this.B=t.diagram))}},isOngoing:{get:function(){return this.so},set:function(t){this.so!==t&&(this.so=t)}},isInitial:{get:function(){return this.yi},set:function(t){this.yi=t,t||(this.wo=!0)}},isViewportSized:{get:function(){return this.xo},set:function(t){this.xo!==t&&(this.xo=t)&&this.C()}},isRouting:{get:function(){return this.uo},set:function(t){this.uo!==t&&(this.uo=t)}},isRealtime:{get:function(){return this.to},set:function(t){this.to!==t&&(this.to=t)}},isValidLayout:{get:function(){return this.wo},set:function(t){this.wo!==t&&(this.wo=t,t||null!==(t=this.diagram)&&(t.Og=!0))}},network:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t,null!==t&&(t.layout=this))}},boundsComputation:{get:function(){return this.tn},set:function(t){this.tn!==t&&(this.tn=t,this.C())}},arrangementOrigin:{get:function(){return this.ln},set:function(t){this.ln.w(t)||(this.ln.assign(t),this.C())}},id:{get:function(){return this.I},set:function(t){this.I=t}},mayUseWorkerFunction:{get:function(){return this.Oo},set:function(t){this.Oo!==t&&(this.Oo=t)}},workerStateChanged:{get:function(){return this.nq},set:function(t){this.nq!==t&&(this.nq=t)}}}),Wt.prototype.useWorker=Wt.prototype.Vw,Wt.declareWorkerLayout=up,Wt.prototype.cancelWorker=Wt.prototype.zz,Wt.prototype.collectParts=Wt.prototype.ay,Wt.prototype.getLayoutBounds=Wt.prototype.nj,Wt.prototype.invalidateLayout=Wt.prototype.C;var Uh=new Et,v0="object"==typeof U.document&&U.document.currentScript?U.document.currentScript.src:"",Zx="undefined"!=typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof Blob?URL.createObjectURL(new Blob(["self.onmessage=function(e){if(e.data.url){\nimportScripts(e.data.url);}}"],{type:"text/javascript"})):"";function ul(){this.Kv=null,this.Cy=this.l=this.name="",this.scripts=[],this.Pe=null,this.Em=new Et}function re(t){wn(this),this.lc=t,this.vf=new nt,this.le=new nt,this.bu=new Et,this.Xt=new Et}function Jx(t,e){if(null===e)return!1;var n=t.vf.remove(e);return n&&null!==(e=e.node)&&t.bu.remove(e),n}function w0(t,e){if(null!==e){t.le.add(e);var n=e.link;null!==n&&null===t.Bq(n)&&t.Xt.add(n,e),e.network=t}}function Qx(t,e){null!==e&&t.le.remove(e)&&null!==(e=e.link)&&t.Xt.remove(e)}function x0(t,e,n){if(null!==n&&n.network!==e){Jx(t,n),e.Cg(n);for(var o=n.sourceEdges;o.next();){var a=o.value;a.network!==e&&(Qx(t,a),w0(e,a),x0(t,e,a.fromVertex))}for(o=n.destinationEdges;o.next();)(n=o.value).network!==e&&(Qx(t,n),w0(e,n),x0(t,e,n.toVertex))}}function on(t){wn(this),this.Vc=t,this.l=new z(0,0,10,10).freeze(),this.v=new A(5,5).freeze(),this.Li=this.nb=null,this.ud=new lt,this.Gd=new lt}function C0(t,e){return e=e.Li,(t=t.Li)?e?(t=t.text)<(e=e.text)?-1:t>e?1:0:1:null!==e?-1:0}function Xn(t){wn(this),this.Uc=t,this.gd=this.$c=this.Ol=this.nb=null}function Hn(){Wt.call(this),this.isViewportSized=!0,this.oq=this.pq=NaN,this.Rg=new Nt(NaN,NaN).freeze(),this.mf=new Nt(10,10).freeze(),this.zb=Gh,this.Fb=_m,this.dd=dp,this.Yc=t1}function t1(t,e){return(t=t.text)<(e=e.text)?-1:t>e?1:0}Wt.className="Layout",Wt.GoJSScriptURL=v0,Wt.declareWorkerLayout=up,"undefined"!=typeof self&&void 0!==self.DedicatedWorkerGlobalScope&&"undefined"!=typeof self&&void 0!==self.DedicatedWorkerGlobalScope&&(self.onmessage=function(t){if("_GoJS"===(t=t.data)._GoJS)if(t.url)importScripts(t.url);else if(t.version)self.postMessage({_GoJS:"_GoJS",version:V.version},void 0);else{var e=performance.now(),n=null;t.layout&&(n=hp(t.layout));var o=null;if(n&&n.Kv&&(o=new n.Kv),!o)throw Error("no registered Worker Layout: "+t.layout);o.network=Kx(o,t,!0),o.workerLayout=function(){var a=Xx(o,o.network,!1);return a._GoJS="_GoJS",a.time=performance.now()-e,self.postMessage(a,void 0),!0},o.doLayout(new lt)}}),re.prototype.clear=function(){if(this.vf)for(var t=this.vf.iterator;t.next();)t.value.clear();if(this.le)for(t=this.le.iterator;t.next();)t.value.clear();this.vf=new nt,this.le=new nt,this.bu=new Et,this.Xt=new Et},re.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutNetwork"+(null!==this.layout?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.vf.count+" edges: "+this.le.count,1<t){for(var n=this.vf.iterator;n.next();)e+="\n    "+n.value.toString(t-1);for(n=this.le.iterator;n.next();)e+="\n    "+n.value.toString(t-1)}return e},re.prototype.createVertex=function(){return new on(this)},re.prototype.createEdge=function(){return new Xn(this)},re.prototype.Bg=function(t,e,n){if(null!==t){for(void 0===e&&(e=!1),void 0===n&&(n=null),null===n&&(n=function(h){if(h instanceof ot)return!h.isLinkLabel;if(h instanceof Q){var f=h.fromNode;return null!==f&&!f.isLinkLabel&&!(null===(h=h.toNode)||h.isLinkLabel)}return!1}),t=t.iterator;t.next();){var o=t.value;if(o instanceof ot&&(!e||o.isTopLevel)&&o.canLayout()&&n(o))if(o instanceof Pt&&null===o.layout)this.Bg(o.memberParts,!1);else if(null===this.kj(o)){var a=this.createVertex();a.node=o,this.Cg(a)}}for(t.reset();t.next();)if((o=t.value)instanceof Q&&(!e||o.isTopLevel)&&o.canLayout()&&n(o)&&null===this.Bq(o)){var u=o.fromNode;a=o.toNode,null!==u&&null!==a&&u!==a&&(u=this.findGroupVertex(u),a=this.findGroupVertex(a),null!==u&&null!==a&&this.Ek(u,a,o))}}},re.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.kj(e)))return t;for(e=e.containingGroup;null!==e;){if(null!==(t=this.kj(e)))return t;e=e.containingGroup}return null},(D=re.prototype).Cg=function(t){if(null!==t){this.vf.add(t);var e=t.node;null!==e&&this.bu.add(e,t),t.network=this}},D.mk=function(t){if(null===t)return null;var e=this.kj(t);return null===e&&((e=this.createVertex()).node=t,this.Cg(e)),e},D.Nv=function(t){if(null!==t&&Jx(this,t)){for(var e=t.ud,n=e.count-1;0<=n;n--){var o=e.J(n);this.vk(o)}for(t=(e=t.Gd).count-1;0<=t;t--)n=e.J(t),this.vk(n)}},D.Lz=function(t){null!==t&&null!==(t=this.kj(t))&&this.Nv(t)},D.kj=function(t){return null===t?null:this.bu.H(t)},D.sm=function(t){if(null!==t){w0(this,t);var e=t.toVertex;null!==e&&e.Dv(t),null!==(e=t.fromVertex)&&e.Bv(t)}},D.oz=function(t){if(null===t)return null;var e=t.fromNode,n=t.toNode,o=this.Bq(t);return null===o?((o=this.createEdge()).link=t,null!==e&&(o.fromVertex=this.mk(e)),null!==n&&(o.toVertex=this.mk(n)),this.sm(o)):(o.fromVertex=null!==e?this.mk(e):null,o.toVertex=null!==n?this.mk(n):null),o},D.vk=function(t){if(null!==t){var e=t.toVertex;null!==e&&e.Mv(t),null!==(e=t.fromVertex)&&e.Lv(t),Qx(this,t)}},D.Kz=function(t){null!==t&&null!==(t=this.Bq(t))&&this.vk(t)},D.Bq=function(t){return null===t?null:this.Xt.H(t)},D.Ek=function(t,e,n){if(null===t||null===e)return null;if(t.network===this&&e.network===this){var o=this.createEdge();return o.link=n,o.fromVertex=t,o.toVertex=e,this.sm(o),o}return null},D.Qm=function(t){if(null!==t){var e=t.fromVertex,n=t.toVertex;null!==e&&null!==n&&(e.Lv(t),n.Mv(t),t.Qm(),e.Dv(t),n.Bv(t))}},D.yq=function(){for(var t=ye(),e=this.le.iterator;e.next();){var n=e.value;n.fromVertex===n.toVertex&&t.push(n)}for(e=t.length,n=0;n<e;n++)this.vk(t[n]);Jt(t)},re.prototype.deleteArtificialVertexes=function(){for(var t=ye(),e=this.vf.iterator;e.next();){var n=e.value;null===n.node&&null===n.data&&t.push(n)}for(n=t.length,e=0;e<n;e++)this.Nv(t[e]);for(e=ye(),n=this.le.iterator;n.next();){var o=n.value;null===o.link&&null===o.data&&e.push(o)}for(n=e.length,o=0;o<n;o++)this.vk(e[o]);Jt(t),Jt(e)},re.prototype.Yy=function(t){void 0===t&&(t=!0),t&&(this.deleteArtificialVertexes(),function qx(t){for(var e=ye(),n=t.le.iterator;n.next();){var o=n.value;null!==o.fromVertex&&null!==o.toVertex||e.push(o)}for(n=e.length,o=0;o<n;o++)t.vk(e[o]);Jt(e)}(this),this.yq()),t=new lt;for(var e=!0;e;){e=!1;for(var n=this.vf.iterator;n.next();){var o=n.value;if(0<o.ud.count||0<o.Gd.count){e=this.layout.createNetwork(),t.add(e),x0(this,e,o),e=!0;break}}}return t.sort(function(a,u){return null===a||null===u||a===u?0:u.vertexes.count-a.vertexes.count}),t},re.prototype.Rz=function(){for(var t=new nt,e=this.vf.iterator;e.next();)t.add(e.value.node);for(e=this.le.iterator;e.next();)t.add(e.value.link);return t},L.Object.defineProperties(re.prototype,{layout:{get:function(){return this.lc},set:function(t){null!==t&&(this.lc=t)}},vertexes:{get:function(){return this.vf}},edges:{get:function(){return this.le}}}),re.prototype.findAllParts=re.prototype.Rz,re.prototype.splitIntoSubNetworks=re.prototype.Yy,re.prototype.deleteSelfEdges=re.prototype.yq,re.prototype.reverseEdge=re.prototype.Qm,re.prototype.linkVertexes=re.prototype.Ek,re.prototype.findEdge=re.prototype.Bq,re.prototype.deleteLink=re.prototype.Kz,re.prototype.deleteEdge=re.prototype.vk,re.prototype.addLink=re.prototype.oz,re.prototype.addEdge=re.prototype.sm,re.prototype.findVertex=re.prototype.kj,re.prototype.deleteNode=re.prototype.Lz,re.prototype.deleteVertex=re.prototype.Nv,re.prototype.addNode=re.prototype.mk,re.prototype.addVertex=re.prototype.Cg,re.prototype.addParts=re.prototype.Bg,re.className="LayoutNetwork",on.prototype.serializeVertexProperties=function(t){t.id=En(this),t.key=this.node?this.node.key:this.data?this.data.Ci:void 0,void 0===t.key&&(t.key=null),t.x=this.bounds.x,t.y=this.bounds.y,t.iB=this.bounds.width,t.tA=this.bounds.height,t.fx=this.focus.x,t.fy=this.focus.y;var e=[];this.ud.each(function(o){e.push(En(o))}),t.Vy=e;var n=[];this.Gd.each(function(o){n.push(En(o))}),t.jy=n},on.prototype.zq=function(t,e,n){if(null!==t){this.x=t.x,this.y=t.y,this.width=t.iB,this.height=t.tA,this.focusX=t.fx,this.focusY=t.fy;var o=this;t.Vy&&t.Vy.forEach(function(a){(a=n.get(a))&&o.ud.add(a)}),t.jy&&t.jy.forEach(function(a){(a=n.get(a))&&o.Gd.add(a)})}},on.prototype.clear=function(){this.Li=this.nb=null,this.ud=new lt,this.Gd=new lt},on.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutVertex#"+En(this);if(0<t&&(e+=null!==this.node?"("+this.node.toString()+")":"",1<t)){t="";for(var n=!0,o=this.ud.iterator;o.next();){var a=o.value;n?n=!1:t+=",",t+=a.toString(0)}for(a="",n=!0,o=this.Gd.iterator;o.next();)n?n=!1:a+=",",a+=o.value.toString(0);e+=" sources: "+t+" destinations: "+a}return e},on.prototype.commit=function(){var t=this.nb;if(null!==t){var e=this.bounds,n=t.bounds;$t(n)?(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.node)){if(e=this.bounds,!(t instanceof Pt)){n=z.alloc();var o=this.network.layout.nj(t,n),a=t.locationObject.da(ie);if(o.u()&&a.u())return t.moveTo(e.x+this.focusX-(a.x-o.x),e.y+this.focusY-(a.y-o.y)),void z.free(n);z.free(n)}t.moveTo(e.x,e.y)}},on.prototype.Dv=function(t){null!==t&&(this.ud.contains(t)||this.ud.add(t))},on.prototype.Mv=function(t){null!==t&&this.ud.remove(t)},on.prototype.Bv=function(t){null!==t&&(this.Gd.contains(t)||this.Gd.add(t))},on.prototype.Lv=function(t){null!==t&&this.Gd.remove(t)},L.Object.defineProperties(on.prototype,{sourceEdgesArrayAccess:{get:function(){return this.ud._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.Gd._dataArray}},data:{get:function(){return this.nb},set:function(t){if(this.nb=t,null!==t&&t.bounds){var e=t.bounds;t=e.x;var n=e.y,o=e.width;this.v.h(o/2,(e=e.height)/2),this.l.h(t,n,o,e)}}},node:{get:function(){return this.Li},set:function(t){if(this.Li!==t){this.Li=t,t.Ta();var e=this.network.layout,n=z.alloc(),o=e.nj(t,n);e=o.x;var a=o.y,u=o.width;if(o=o.height,isNaN(e)&&(e=0),isNaN(a)&&(a=0),this.l.h(e,a,u,o),z.free(n),!(t instanceof Pt)&&(t=t.locationObject.da(ie)).u())return void this.v.h(t.x-e,t.y-a);this.v.h(u/2,o/2)}}},bounds:{get:function(){return this.l},set:function(t){this.l.w(t)||this.l.assign(t)}},focus:{get:function(){return this.v},set:function(t){this.v.w(t)||this.v.assign(t)}},centerX:{get:function(){return this.l.x+this.v.x},set:function(t){var e=this.l;e.x+this.v.x!==t&&(e.ea(),e.x=t-this.v.x,e.freeze())}},centerY:{get:function(){return this.l.y+this.v.y},set:function(t){var e=this.l;e.y+this.v.y!==t&&(e.ea(),e.y=t-this.v.y,e.freeze())}},focusX:{get:function(){return this.v.x},set:function(t){var e=this.v;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},focusY:{get:function(){return this.v.y},set:function(t){var e=this.v;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},x:{get:function(){return this.l.x},set:function(t){var e=this.l;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},y:{get:function(){return this.l.y},set:function(t){var e=this.l;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},width:{get:function(){return this.l.width},set:function(t){var e=this.l;e.width!==t&&(e.ea(),e.width=t,e.freeze())}},height:{get:function(){return this.l.height},set:function(t){var e=this.l;e.height!==t&&(e.ea(),e.height=t,e.freeze())}},network:{get:function(){return this.Vc},set:function(t){this.Vc=t}},sourceVertexes:{get:function(){for(var t=new nt,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new nt,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new nt,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.ud.iterator}},destinationEdges:{get:function(){return this.Gd.iterator}},edges:{get:function(){for(var t=new lt,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.ud.count+this.Gd.count}}}),on.prototype.deleteDestinationEdge=on.prototype.Lv,on.prototype.addDestinationEdge=on.prototype.Bv,on.prototype.deleteSourceEdge=on.prototype.Mv,on.prototype.addSourceEdge=on.prototype.Dv,on.className="LayoutVertex",on.standardComparer=C0,on.smartComparer=function(t,e){if(null!==t){if(null!==e){var n=e.Li;if(null!==(t=t.Li)){if(null!==n){for(e=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),t=n.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),n=0;n<e.length;n++)if(""!==t[n]&&void 0!==t[n]){var o=parseFloat(e[n]),a=parseFloat(t[n]);if(isNaN(o)){if(!isNaN(a))return 1;if(0!==e[n].localeCompare(t[n]))return e[n].localeCompare(t[n])}else{if(isNaN(a))return-1;if(o-a!=0)return o-a}}else if(""!==e[n])return 1;return""!==t[n]&&void 0!==t[n]?-1:0}return 1}return null!==n?-1:0}return 1}return null!==e?-1:0},Xn.prototype.clear=function(){this.gd=this.$c=this.Ol=this.nb=null},Xn.prototype.serializeEdgeProperties=function(t){t.id=En(this),t.key=this.link?this.link.key:this.data?this.data.Ci:void 0,void 0===t.key&&(t.key=null),t.from=this.fromVertex?En(this.fromVertex):null,t.dB=this.toVertex?En(this.toVertex):null},Xn.prototype.deserializeEdgeProperties=function(t,e){if(null!==t){var n=e.get(t.from);n&&(this.fromVertex=n),(t=e.get(t.dB))&&(this.toVertex=t)}},Xn.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutEdge#"+En(this);return 0<t&&(e+=null!==this.Ol?"("+this.Ol.toString()+")":"",1<t&&(e+=" "+(this.$c?this.$c.toString():"null")+" --\x3e "+(this.gd?this.gd.toString():"null"))),e},Xn.prototype.Qm=function(){var t=this.$c;this.$c=this.gd,this.gd=t},Xn.prototype.commit=function(){},Xn.prototype.zy=function(t){return this.gd===t?this.$c:this.$c===t?this.gd:null},L.Object.defineProperties(Xn.prototype,{network:{get:function(){return this.Uc},set:function(t){this.Uc=t}},data:{get:function(){return this.nb},set:function(t){this.nb!==t&&(this.nb=t)}},link:{get:function(){return this.Ol},set:function(t){this.Ol!==t&&(this.Ol=t)}},fromVertex:{get:function(){return this.$c},set:function(t){this.$c!==t&&(this.$c=t)}},toVertex:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this.gd=t)}}}),Xn.prototype.getOtherVertex=Xn.prototype.zy,Xn.className="LayoutEdge",Y(Hn,Wt),Hn.prototype.cloneProtected=function(t){Wt.prototype.cloneProtected.call(this,t),t.pq=this.pq,t.oq=this.oq,t.Rg.assign(this.Rg),t.mf.assign(this.mf),t.zb=this.zb,t.Fb=this.Fb,t.dd=this.dd,t.Yc=this.Yc},Hn.prototype.jb=function(t){t.classType===Hn?t===dp||t===Nm||t===cp||t===fp?this.sorting=t:t===_m||t===ao?this.arrangement=t:t===Gh||t===Hh?this.alignment=t:W("Unknown enum value: "+t):Wt.prototype.jb.call(this,t)},Hn.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.ay(t);t=this.diagram;for(var n=e.copy().iterator;n.next();){var o=n.value;if(!o.Oh()||null===o.fromNode&&null===o.toNode){if(o.Ta(),o instanceof Pt)for(o=o.memberParts;o.next();)e.remove(o.value)}else e.remove(o)}var a=e.ma();if(0!==a.length){switch(this.sorting){case fp:a.reverse();break;case dp:a.sort(this.comparer);break;case Nm:a.sort(this.comparer),a.reverse()}var u=this.wrappingColumn;isNaN(u)&&(u=0);var h=this.wrappingWidth;switch(isNaN(h)&&null!==t?(e=t.padding,h=Math.max(t.viewportBounds.width-e.left-e.right,0)):h=Math.max(this.wrappingWidth,0),0>=u&&0>=h&&(u=1),e=this.spacing.width,isFinite(e)||(e=0),n=this.spacing.height,isFinite(n)||(n=0),null!==t&&t.xa("Layout"),o=[],this.alignment){case Hh:var f=e,p=n,g=z.alloc(),y=Math.max(this.cellSize.width,1);if(!isFinite(y))for(var v=y=0;v<a.length;v++){var x=this.nj(a[v],g);y=Math.max(y,x.width)}if(y=Math.max(y+f,1),v=Math.max(this.cellSize.height,1),!isFinite(v))for(x=v=0;x<a.length;x++){var S=this.nj(a[x],g);v=Math.max(v,S.height)}v=Math.max(v+p,1),x=this.arrangement;for(var M=S=this.arrangementOrigin.x,T=this.arrangementOrigin.y,N=0,P=0,I=0;I<a.length;I++){var O=a[I],b=this.nj(O,g),B=Math.ceil((b.width+f)/y)*y,K=Math.ceil((b.height+p)/v)*v;if(x===ao)var rt=Math.abs(M-b.width);else rt=M+b.width;(0<u&&N>u-1||0<h&&0<N&&rt-S>h)&&(o.push(new z(0,T,h+f,P)),N=0,M=S,T+=P,P=0),P=Math.max(P,K),O.moveTo(M+(b=x===ao?-b.width:0),T),x===ao?M-=B:M+=B,N++}o.push(new z(0,T,h+f,P)),z.free(g);break;case Gh:for(p=h,y=u,v=e,x=n,h=z.alloc(),S=Math.max(this.cellSize.width,1),u=T=g=0,f=A.alloc(),M=0;M<a.length;M++)N=this.nj(P=a[M],h),P=P.Ff(P.locationObject,P.locationSpot,f),g=Math.max(g,P.x),T=Math.max(T,N.width-P.x),u=Math.max(u,P.y);(M=this.arrangement)===ao?g+=v:T+=v,S=isFinite(S)?Math.max(S+v,1):Math.max(g+T,1);var tt=P=this.arrangementOrigin.x;for(I=this.arrangementOrigin.y,T=0,p>=g&&(p-=g),g=O=0,B=Math.max(this.cellSize.height,1),b=u=0,K=!0,N=A.alloc(),rt=0;rt<a.length;rt++){var mt=a[rt],ht=this.nj(mt,h),$=mt.Ff(mt.locationObject,mt.locationSpot,f);if(0<T?M===ao?(tt=(tt-P-(ht.width-$.x))/S,tt=(tt=R.aa(Math.round(tt),tt)?Math.round(tt):Math.floor(tt))*S+P):(tt=(tt-P+$.x)/S,tt=(tt=R.aa(Math.round(tt),tt)?Math.round(tt):Math.ceil(tt))*S+P):O=M===ao?tt+$.x+ht.width:tt-$.x,M===ao)var zt=-(tt+$.x)+O;else zt=tt+ht.width-$.x-O;if(0<y&&T>y-1||0<p&&0<T&&zt>p){for(o.push(new z(0,K?I-u:I,p+v,b+u+x)),tt=0;tt<T&&rt!==T;tt++){var Lt=(zt=a[rt-T+tt]).Ff(zt.locationObject,zt.locationSpot,N);zt.moveTo(zt.position.x,zt.position.y+u-Lt.y)}b+=x,I=K?I+b:I+(b+u),T=b=u=0,tt=P,K=!1}tt===P&&(g=M===ao?Math.max(g,ht.width-$.x):Math.min(g,-$.x)),u=Math.max(u,$.y),b=Math.max(b,ht.height-$.y),isFinite(B)&&(b=Math.max(b,Math.max(ht.height,B)-$.y)),mt.moveTo(tt-$.x,K?I-$.y:I),M===ao?tt-=$.x+v:tt+=ht.width-$.x+v,T++}if(o.push(new z(0,I,p+v,(K?b:b+u)+x)),a.length!==T)for(p=0;p<T;p++)v=(y=a[a.length-T+p]).Ff(y.locationObject,y.locationSpot,f),y.moveTo(y.position.x,y.position.y+u-v.y);if(A.free(f),A.free(N),M===ao)for(a=0;a<o.length;a++)(u=o[a]).width+=g,u.x-=g;else for(a=0;a<o.length;a++)(u=o[a]).x>g&&(u.width+=u.x-g,u.x=g);z.free(h)}for(f=u=h=a=0;f<o.length;f++)p=o[f],a=Math.min(a,p.x),h=Math.min(h,p.y),u=Math.max(u,p.x+p.width);this.commitLayers(o,new A(this.arrangement===ao?a+e/2-(u+a):a-e/2,h-n/2)),null!==t&&t.Wa("Layout"),this.isValidLayout=!0}},Hn.prototype.commitLayers=function(){},L.Object.defineProperties(Hn.prototype,{wrappingWidth:{get:function(){return this.pq},set:function(t){this.pq!==t&&(0<t||isNaN(t))&&(this.pq=t,this.isViewportSized=isNaN(t),this.C())}},wrappingColumn:{get:function(){return this.oq},set:function(t){this.oq!==t&&(0<t||isNaN(t))&&(this.oq=t,this.C())}},cellSize:{get:function(){return this.Rg},set:function(t){this.Rg.w(t)||(this.Rg.assign(t),this.C())}},spacing:{get:function(){return this.mf},set:function(t){this.mf.w(t)||(this.mf.assign(t),this.C())}},alignment:{get:function(){return this.zb},set:function(t){this.zb===t||t!==Gh&&t!==Hh||(this.zb=t,this.C())}},arrangement:{get:function(){return this.Fb},set:function(t){this.Fb===t||t!==_m&&t!==ao||(this.Fb=t,this.C())}},sorting:{get:function(){return this.dd},set:function(t){this.dd===t||t!==cp&&t!==fp&&t!==dp&&t!==Nm||(this.dd=t,this.C())}},comparer:{get:function(){return this.Yc},set:function(t){this.Yc!==t&&(this.Yc=t,this.C())}}});var Hh=new it(Hn,"Position",0),Gh=new it(Hn,"Location",1),_m=new it(Hn,"LeftToRight",2),ao=new it(Hn,"RightToLeft",3),cp=new it(Hn,"Forward",4),fp=new it(Hn,"Reverse",5),dp=new it(Hn,"Ascending",6),Nm=new it(Hn,"Descending",7);function Zt(){this.gp=new nt,this.Io=new nt,this.Da=new nt,this.Ve=new Et,this.Ue=new Et,this.Qj=new Et,this.B=null,this.nr=!1}function zM(t,e,n){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Ve.contains(e)){void 0===n&&(n=!0);t:{if(null!=e&&!t.B.undoManager.isUndoingRedoing&&!t.Ve.contains(e)){var o=t.Fq(e),a=e1(t,e,o);if(null!==a&&(Lr(a),null!==(a=a.copy()))){var u=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,a.Pf=o,a.nb=e,t.nr&&(a.ih="Tool"),t.diagram.add(a),a.nb=null,a.data=e,t.diagram.skipsModelSourceBindings=u,o=a;break t}}o=null}null!==o&&n&&t.resolveReferencesForData(e)}}function e1(t,e,n){var o=(t=t.B).model;return o.Ck()&&o.ew(e)?null===(e=t.groupTemplateMap.H(n))&&null===(e=t.groupTemplateMap.H(""))&&(gp||(gp=!0,Ln('No Group template found for category "'+n+'"'),Ln("  Using default group template")),e=t.Du):null===(e=t.nodeTemplateMap.H(n))&&null===(e=t.nodeTemplateMap.H(""))&&(hl||(hl=!0,Ln('No Node template found for category "'+n+'"'),Ln("  Using default node template")),e=t.Fu),e}function Pm(t,e,n){for(var o in n){var a=e[o],u=n[o];if(Dn(u)){if(!Dn(a)||a.length<u.length)return!1;for(var h=0;h<a.length;h++){var f=u[h];if(void 0!==f&&!M0(t,a[h],f))return!1}}else if(!M0(t,a,u))return!1}return!0}function M0(t,e,n){if("function"==typeof n){if(!n(e))return!1}else if(n instanceof RegExp){if(!e||!n.test(e.toString()))return!1}else if($t(e)&&$t(n)){if(!Pm(t,e,n))return!1}else if(e!==n)return!1;return!0}function Am(t,e){var n=e.Bi;if(Dn(n)){var o=t.Qj.H(n);if(null===o)(o=[]).push(e),t.Qj.add(n,o);else{for(t=0;t<o.length;t++)if(o[t]===e)return;o.push(e)}}}function km(t,e,n){bs(e,function(h){for(var f=(h=h.W.j).length,p=0;p<f;p++)Tu(n,h[p])});var o=e.Bi;if(Dn(o)){var a=t.Qj.H(o);if(null!==a)for(var u=0;u<a.length;u++)if(a[u]===e){a.splice(u,1),0===a.length&&t.Qj.remove(o);break}}}function pp(t,e,n,o,a){if(null===e||a&&!e.canCopy())return null;if(o.contains(e))return o.H(e);var u=t.copyPartData(e,n);if(!(u instanceof wt))return null;if(u.isSelected=!1,u.isHighlighted=!1,o.add(e,u),e instanceof ot){for(var h=e.linksConnected;h.next();){var f=h.value;if(f.fromNode===e){var p=o.H(f);null!==p&&(p.fromNode=u)}f.toNode===e&&null!==(f=o.H(f))&&(f.toNode=u)}if(e instanceof Pt&&u instanceof Pt)for(e=e.memberParts;e.next();)(h=pp(t,e.value,n,o,a))instanceof Q||null===h||(h.containingGroup=u)}else if(e instanceof Q&&u instanceof Q)for(null!==(h=e.fromNode)&&null!==(h=o.H(h))&&(u.fromNode=h),null!==(h=e.toNode)&&null!==(h=o.H(h))&&(u.toNode=h),e=e.labelNodes;e.next();)null!==(h=pp(t,e.value,n,o,a))&&h instanceof ot&&(h.labeledLink=u);return u}Hn.className="GridLayout",Hn.standardComparer=t1,Hn.smartComparer=function(t,e){if(null!==t){if(null!==e){t=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/);for(var n=0;n<t.length;n++)if(""!==e[n]&&void 0!==e[n]){var o=parseFloat(t[n]),a=parseFloat(e[n]);if(isNaN(o)){if(!isNaN(a))return 1;if(0!==t[n].localeCompare(e[n]))return t[n].localeCompare(e[n])}else{if(isNaN(a))return-1;if(o-a!=0)return o-a}}else if(""!==t[n])return 1;return""!==e[n]&&void 0!==e[n]?-1:0}return 1}return null!==e?-1:0},Hn.Position=Hh,Hn.Location=Gh,Hn.LeftToRight=_m,Hn.RightToLeft=ao,Hn.Forward=cp,Hn.Reverse=fp,Hn.Ascending=dp,Hn.Descending=Nm,(D=Zt.prototype).clear=function(){this.gp.clear(),this.Io.clear(),this.Da.clear(),this.Ve.clear(),this.Ue.clear(),this.Qj.clear()},D.ee=function(t){this.B=t},D.oj=function(t){if(t instanceof ot){if(this.gp.add(t),t instanceof Pt){var e=t.containingGroup;null===e?this.B.Ch.add(t):e.Tl.add(t),null!==(e=t.layout)&&(e.diagram=this.B)}}else t instanceof Q?this.Io.add(t):t instanceof Gt||this.Da.add(t);null===(e=t.data)||t instanceof Gt||(t instanceof Q?this.Ue.add(e,t):this.Ve.add(e,t))},D.Nc=function(t){if(t.nk(),t instanceof ot){if(this.gp.remove(t),t instanceof Pt){var e=t.containingGroup;null===e?this.B.Ch.remove(t):e.Tl.remove(t),null!==(e=t.layout)&&(e.diagram=null)}}else t instanceof Q?this.Io.remove(t):t instanceof Gt||this.Da.remove(t);null===(e=t.data)||t instanceof Gt||(t instanceof Q?this.Ue.remove(e):this.Ve.remove(e))},D.Md=function(){for(var t=this.B.nodeTemplateMap.iterator;t.next();){var e=t.value,n=t.key;(!e.Pc()||e instanceof Pt)&&W('Invalid node template in Diagram.nodeTemplateMap: template for "'+n+'" must be a Node or a simple Part, not a Group or Link: '+e)}for(t=this.B.groupTemplateMap.iterator;t.next();)n=t.key,(e=t.value)instanceof Pt||W('Invalid group template in Diagram.groupTemplateMap: template for "'+n+'" must be a Group, not a normal Node or Link: '+e);for(t=this.B.linkTemplateMap.iterator;t.next();)n=t.key,(e=t.value)instanceof Q||W('Invalid link template in Diagram.linkTemplateMap: template for "'+n+'" must be a Link, not a normal Node or simple Part: '+e);for(t=ye(),e=this.B.selection.iterator;e.next();)(n=e.value.data)&&t.push(n);for(e=ye(),n=this.B.highlighteds.iterator;n.next();){var o=n.value.data;o&&e.push(o)}for(n=ye(),o=this.nodes.iterator;o.next();){var a=o.value;null!==a.data&&(n.push(a.data),n.push(a.location))}for(o=this.links.iterator;o.next();)null!==(a=o.value).data&&(n.push(a.data),n.push(a.location));for(o=this.parts.iterator;o.next();)null!==(a=o.value).data&&(n.push(a.data),n.push(a.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),o=0;o<t.length;o++)null!==(a=this.zc(t[o]))&&(a.isSelected=!0);for(o=0;o<e.length;o++)null!==(a=this.zc(e[o]))&&(a.isHighlighted=!0);for(o=0;o<n.length;o+=2)null!==(a=this.zc(n[o]))&&(a.location=n[o+1]);Jt(t),Jt(e),Jt(n)},Zt.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Zt.prototype.addModeledParts=function(t,e){var n=this,o=this.diagram.model;t.forEach(function(a){o.$a(a)&&zM(n,a,!1)}),t.forEach(function(a){o.$a(a)&&n.resolveReferencesForData(a)}),!1!==e&&Fl(this.diagram,!1)},Zt.prototype.insertLink=function(){return null},Zt.prototype.resolveReferencesForData=function(){},Zt.prototype.Fq=function(t){return this.B.model.Fq(t)},Zt.prototype.getLinkCategoryForData=function(){return""},Zt.prototype.setLinkCategoryForData=function(){},Zt.prototype.setFromNodeForLink=function(){},Zt.prototype.setToNodeForLink=function(){},Zt.prototype.findLinkTemplateForCategory=function(t){var e=this.B.linkTemplateMap.H(t);return null===e&&null===(e=this.B.linkTemplateMap.H(""))&&(n1||(n1=!0,Ln('No Link template found for category "'+t+'"'),Ln("  Using default link template")),e=this.B.Eu),e},Zt.prototype.removeAllModeledParts=function(){this.fu(this.diagram.model.nodeDataArray)},Zt.prototype.fu=function(t){var e=this;t.forEach(function(n){e.$q(n)})},Zt.prototype.$q=function(t){null!==(t=this.zc(t))&&(Og(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Zt.prototype.unresolveReferencesForPart=function(){},Zt.prototype.removeDataForLink=function(){},Zt.prototype.findPartForKey=function(t){return null==t?null:null!==(t=this.B.model.Lb(t))?this.Ve.H(t):null},Zt.prototype.Db=function(t){return null==t||null===(t=this.B.model.Lb(t))?null:(t=this.Ve.H(t))instanceof ot?t:null},Zt.prototype.findLinkForKey=function(){return null},(D=Zt.prototype).zc=function(t){if(null===t)return null;var e=this.Ve.H(t);return null!==e?e:e=this.Ue.H(t)},D.gj=function(t){return null===t?null:(t=this.Ve.H(t))instanceof ot?t:null},D.yc=function(t){return null===t?null:this.Ue.H(t)},D.Jt=function(t){for(var e=0;e<arguments.length;++e);e=new nt;for(var n=this.gp.iterator;n.next();){var o=n.value,a=o.data;if(null!==a)for(var u=0;u<arguments.length;u++){var h=arguments[u];if($t(h)&&Pm(this,a,h)){e.add(o);break}}}return e.iterator},D.It=function(t){for(var e=0;e<arguments.length;++e);e=new nt;for(var n=this.Io.iterator;n.next();){var o=n.value,a=o.data;if(null!==a)for(var u=0;u<arguments.length;u++){var h=arguments[u];if($t(h)&&Pm(this,a,h)){e.add(o);break}}}return e.iterator},Zt.prototype.doModelChanged=function(t){if(this.B){var e=this.B;if(t.model===e.model){var n=t.change;if(e.doModelChanged(t),e.Z){e.Z=!1;try{var o=t.modelChange;if(""!==o)if(n===Me){if("nodeCategory"===o){var a=this.zc(t.object),u=t.newValue;null!==a&&"string"==typeof u&&(a.category=u)}else"nodeDataArray"===o&&(this.fu(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(n===rn){var h=t.newValue;"nodeDataArray"===o&&$t(h)&&zM(this,h),e.isModified=!0}else if(n===be){var f=t.oldValue;"nodeDataArray"===o&&$t(f)&&this.$q(f),e.isModified=!0}else n===cr&&("SourceChanged"===o?null!==t.object?this.updateDataBindings(t.object,t.propertyName):(this.jr(),this.updateAllTargetBindings()):"ModelDisplaced"===o&&this.Md());else if(n===Me){var p=t.propertyName,g=t.object;g===e.model?("nodeKeyProperty"===p||"nodeCategoryProperty"===p)&&(e.undoManager.isUndoingRedoing||this.Md()):this.updateDataBindings(g,p),e.isModified=!0}else if(n===rn||n===be){var y=t.change===rn,v=y?t.newParam:t.oldParam,x=y?t.newValue:t.oldValue,S=this.Qj.H(t.object);if(Array.isArray(S))for(t=0;t<S.length;t++){var M=S[t];if(y)sm(M,x,v);else if(!(0>v)){var T=v+om(M);M.Nc(T,!0),Ax(M,T,v)}}e.isModified=!0}}finally{e.Z=!0}}}}},Zt.prototype.updateAllTargetBindings=function(t){void 0===t&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Ca(t);for(e=this.nodes.iterator;e.next();)e.value.Ca(t);for(e=this.links.iterator;e.next();)e.value.Ca(t)},Zt.prototype.jr=function(){for(var t=this.B.model,e=new nt,n=t.nodeDataArray,o=0;o<n.length;o++)e.add(n[o]);var a=[];for(this.nodes.each(function(h){null===h.data||e.contains(h.data)||a.push(h.data)}),this.parts.each(function(h){null===h.data||e.contains(h.data)||a.push(h.data)}),a.forEach(function(h){s1(t,h,!1)}),o=0;o<n.length;o++){var u=n[o];null===this.zc(u)&&o1(t,u,!1)}for(this.refreshDataBoundLinks(),n=this.parts.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.nodes.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.links.iterator;n.next();)n.value.updateRelationshipsFromData()},Zt.prototype.refreshDataBoundLinks=function(){},Zt.prototype.updateRelationshipsFromData=function(){},Zt.prototype.updateDataBindings=function(t,e){if("string"==typeof e){var n=this.zc(t);if(null!==n)n.Ca(e);else{n=null;for(var o=this.Qj.iterator;o.next();){for(var a=o.value,u=0;u<a.length;u++){var h=a[u].qy(t);null!==h&&(null===n&&(n=ye()),n.push(h))}if(null!==n)break}if(null!==n){for(o=0;o<n.length;o++)n[o].Ca(e);Jt(n)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}},Zt.prototype.tk=function(t,e,n){void 0===n&&(n=!1);var o=new Et;if(Dn(t))for(var a=0;a<t.length;a++)pp(this,t[a],e,o,n);else for(t=t.iterator;t.next();)pp(this,t.value,e,o,n);if(null!==e){n=e.model,t=null!==(t=e.toolManager.findTool("Dragging"))?t.dragOptions.dragsLink:e.kl.dragsLink,a=new nt;for(var u=new Et,h=o.iterator;h.next();){var f=h.value;if(f instanceof Q)t||null!==f.fromNode&&null!==f.toNode||a.add(f);else if(f instanceof ot&&null!==f.data&&n.Dm()){var p=f,g=(f=h.key).Gg();null!==g&&(null!==(g=o.H(g))?(n.fe(p.data,n.ja(g.data)),p=e.yc(p.data),null!==(f=f.jj())&&null!==p&&u.add(f,p)):n.fe(p.data,void 0))}}if(0<a.count&&e.gu(a,!1),0<u.count)for(n=u.iterator;n.next();)o.add(n.key,n.value)}if(null!==e&&null!==this.B&&null!==(n=(e=e.model).afterCopyFunction)){var y=new Et;o.each(function(v){null!==v.key.data&&y.add(v.key.data,v.value.data)}),n(y,e,this.B.model)}for(e=o.iterator;e.next();)e.value.Ca();return o},Zt.prototype.copyPartData=function(t,e){var n=null,o=t.data;if(null!==o&&null!==e){var a=e.model;t instanceof Q||$t(o=a.copyNodeData(o))&&(a.wf(o),n=e.zc(o))}else Lr(t),null!==(n=t.copy())&&(a=this.B,null!==e?e.add(n):null!==o&&null!==a&&null!==a.commandHandler&&a.commandHandler.copiesClipboardData&&(e=a.model,a=null,n instanceof Q||(a=e.copyNodeData(o)),$t(a)&&(n.data=a)));return n},L.Object.defineProperties(Zt.prototype,{nodes:{get:function(){return this.gp}},links:{get:function(){return this.Io}},parts:{get:function(){return this.Da}},diagram:{get:function(){return this.B}},addsToTemporaryLayer:{get:function(){return this.nr},set:function(t){this.nr=t}}}),Zt.prototype.updateAllRelationshipsFromData=Zt.prototype.jr,Zt.prototype.findLinksByExample=Zt.prototype.It,Zt.prototype.findNodesByExample=Zt.prototype.Jt,Zt.prototype.findLinkForData=Zt.prototype.yc,Zt.prototype.findNodeForData=Zt.prototype.gj,Zt.prototype.findPartForData=Zt.prototype.zc,Zt.prototype.findNodeForKey=Zt.prototype.Db,Zt.prototype.removeModeledPart=Zt.prototype.$q,Zt.prototype.removeModeledParts=Zt.prototype.fu,Zt.prototype.rebuildParts=Zt.prototype.Md;var hl=!1,gp=!1,n1=!1;function kn(t){Zt.apply(this,arguments)}function $M(t,e){e.forEach(function(n){mp(t,n)}),Fl(t.diagram,!1)}function mp(t,e){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Ue.contains(e)){var n=t.getLinkCategoryForData(e),o=t.findLinkTemplateForCategory(n);if(null!==o){Lr(o);var a=o.copy();if(null!==a){o=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,a.Pf=n,a.nb=e;var u=vp(n=t.diagram.model,e,!0);""!==u&&(a.fromPortId=u),void 0!==(u=or(n,e,!0))&&(u=t.Db(u))instanceof ot&&(a.fromNode=u),""!==(u=vp(n,e,!1))&&(a.toPortId=u),void 0!==(u=or(n,e,!1))&&(u=t.Db(u))instanceof ot&&(a.toNode=u),n=n.Df(e),Array.isArray(n)&&n.forEach(function(h){null!==(h=t.Db(h))&&(h.labeledLink=a)}),t.nr&&(a.ih="Tool"),t.diagram.add(a),a.nb=null,a.data=e,t.diagram.skipsModelSourceBindings=o}}}}function S0(t,e){e.forEach(function(n){t.$q(n)})}function wr(){Zt.apply(this,arguments),this.rh=null}function Hu(t,e,n){if(null!==e&&null!==n){var o=t.diagram.toolManager.findTool("Linking"),a=e,u=n;if(t.diagram.isTreePathToChildren){for(e=u.linksConnected;e.next();)if(e.value.toNode===u)return}else for(u=e,e=(a=n).linksConnected;e.next();)if(e.value.fromNode===a)return;if((null===o||!fr(o,a,u,null,!0))&&(o=t.getLinkCategoryForData(n.data),null!==(e=t.findLinkTemplateForCategory(o))&&(Lr(e),null!==(e=e.copy())))){var h=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,e.Pf=o,e.nb=n.data,e.fromNode=a,e.toNode=u,t.diagram.add(e),e.nb=null,e.data=n.data,t.diagram.skipsModelSourceBindings=h}}}function dt(t){this.Ni=new nt,this.Ki=new nt,this.su=',\n  "insertedNodeKeys": ',this.mx=',\n  "modifiedNodeData": ',this.uu=',\n  "removedNodeKeys": ',this.Xh=null,wn(this),this.Jn=this.Qa="",this.bg=!1,this.l={},this.Hc=[],this.Va=new Et,this.Mi="key",this.il=this.Ql=null,this.An=this.Bn=!1,this.Dn=!0,this.hn=null,this.Yj="category",this.Vf=new Et,this.bv=new lt,this.wg=!1,this.v=null,this.undoManager=new Le,void 0!==t&&(this.nodeDataArray=t)}function Gu(t,e,n,o,a,u){function h(v,x){f?(void 0===v.__gohashid&&u.push(v),o.set(v,x)):(v=Ha++,o.set(v,x),a.set(v,e))}if(!$t(e))return e;u||(u=[]);var f=Object.isExtensible(e);if(o||(o=new Et),f){var p=o.get(e);if(p)return p}else for(a||(a=new Et),p=a.iterator;p.next();){var g=p.key;if(p.value===e&&(g=o.get(g)))return g}if(Array.isArray(e)){h(e,p=[]);for(var y=0;y<e.length;y++)p.push(Gu(t,e[y],!1,o,a,u))}else if(e instanceof A||e instanceof Nt||e instanceof z||e instanceof te||e instanceof at)p=e.copy(),h(e,p);else{if(e instanceof Xt||e instanceof It||e instanceof it)return e;if(e instanceof lt)p=(new lt).addAll(Gu(t,e.ma(),!1,o,a,u)),h(e,p);else if(e instanceof nt)p=(new nt).addAll(Gu(t,e.ma(),!1,o,a,u)),h(e,p);else if(e instanceof Et)p=(new Et).addAll(Gu(t,e.ma(),!1,o,a,u)),h(e,p);else if(e instanceof Date)p=new Date(e.getTime()),h(e,p);else if(e instanceof RegExp)p=new RegExp(e),h(e,p),p.lastIndex=e.lastIndex;else if("function"==typeof e.copy)p=e.copy(),h(e,p);else for(y in h(e,p={}),e)"__gohashid"!==y&&(p[y]=Gu(t,e[y],!1,o,a,u))}return n&&u.forEach(function(v){delete v.__gohashid}),p}function Im(t){return',\n  "modelData": '+r1(t,t.modelData)}function D0(t,e){$t(e=e.modelData)&&(t.Nm(e),t.modelData=e)}function zh(t,e,n,o){if(e===n)return!0;if(typeof e!=typeof n||"function"==typeof e||"function"==typeof n)return!1;if(Array.isArray(e)&&Array.isArray(n)){if(o.H(e)===n)return!0;if(o.add(e,n),e.length!==n.length)return!1;for(var a=0;a<e.length;a++)if(!zh(t,e[a],n[a],o))return!1;return!0}if($t(e)&&$t(n)){if(o.H(e)===n)return!0;for(var u in o.add(e,n),e){var h=e[u];if(!Wl(u,h)){var f=n[u];if(void 0===f||!zh(t,h,f,o))return!1}}for(a in n)if(!(Wl(a,u=n[a])||void 0!==(h=e[a])&&zh(t,h,u,o)))return!1;return!0}return!1}function zu(t,e,n){t[n]!==e[n]&&W("Model.computeJsonDifference: Model."+n+' is not the same in both models: "'+t[n]+'" and "'+e[n]+'"')}function Om(t,e){function n(a,u){if((u=u.part)&&a!==(u=u.data)){var h=o.get(a);null===h?((h=new nt).add(u),o.add(a,h)):h.add(u)}}var o=t.Xh;null===o&&(o=new Et,e.changes.each(function(a){if(null!==a.diagram){var u=a.change;u===Me?(a=a.object.panel)&&(u=a.data)&&n(u,a):(u===rn||u===be)&&(u=(a=a.object).itemArray)&&n(u,a)}}),t.Xh=o)}function i1(t,e){for(var n=new nt,o=0;o<t.nodeDataArray.length;o++){var a=t.nodeDataArray[o];bm(t,e,a,a,n)}return n}function bm(t,e,n,o,a){if(Array.isArray(n))for(var u=0;u<n.length;u++){var h=n[u];if(h===e)return a.add(o),!0;if(bm(t,e,h,o,a))return!0}else if($t(n)&&Object.getPrototypeOf(n)===Object.prototype)for(u in n){if((h=n[u])===e)return a.add(o),!0;if(bm(t,e,h,o,a))return!0}return!1}function lo(t,e,n){void 0===n&&(n=!1);var o=e.length;if(0>=o)return"[]";var a=new rg;a.add("["),n&&1<o&&a.add("\n");for(var u=0;u<o;u++){var h=e[u];void 0!==h&&(0<u&&(a.add(","),n&&a.add("\n")),a.add(t.$m(h)))}return n&&1<o&&a.add("\n"),a.add("]"),a.toString()}function Wl(t,e){return void 0===e||"__gohashid"===t||"_"===t[0]||"function"==typeof e}function wi(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function r1(t,e){var n=e;if(n instanceof A)e={class:"go.Point",x:wi(n.x),y:wi(n.y)};else if(n instanceof Nt)e={class:"go.Size",width:wi(n.width),height:wi(n.height)};else if(n instanceof z)e={class:"go.Rect",x:wi(n.x),y:wi(n.y),width:wi(n.width),height:wi(n.height)};else if(n instanceof te)e={class:"go.Margin",top:wi(n.top),right:wi(n.right),bottom:wi(n.bottom),left:wi(n.left)};else if(n instanceof at)e=n.kb()?{class:"go.Spot",x:wi(n.x),y:wi(n.y),offsetX:wi(n.offsetX),offsetY:wi(n.offsetY)}:{class:"go.Spot",enum:n.toString()};else if(n instanceof Xt){if(e={class:"go.Brush",type:n.type.name},n.type===nl?e.color=n.color:(n.type===fa||n.type===mr)&&(e.start=n.start,e.end=n.end,n.type===mr&&(0!==n.startRadius&&(e.startRadius=wi(n.startRadius)),isNaN(n.endRadius)||(e.endRadius=wi(n.endRadius)))),null!==n.colorStops){var o={};for(n=n.colorStops.iterator;n.next();)o[n.key]=n.value;e.colorStops=o}}else n instanceof It?(e={class:"go.Geometry",type:n.type.name},0!==n.startX&&(e.startX=wi(n.startX)),0!==n.startY&&(e.startY=wi(n.startY)),0!==n.endX&&(e.endX=wi(n.endX)),0!==n.endY&&(e.endY=wi(n.endY)),n.spot1.w(Ue)||(e.spot1=n.spot1),n.spot2.w(ns)||(e.spot2=n.spot2),n.type===pn&&(e.path=nv(n))):n instanceof it&&(e={class:"go.EnumValue",classType:Yh(t,n.classType),name:n.name});for(var a in o="{",n=!0,e){var u=Qe(e,a);if(!Wl(a,u))if(n?n=!1:o+=",",o+='"'+a+'":',"points"===a&&u instanceof lt){var h="[";for(u=u.iterator;u.next();){var f=u.value;1<h.length&&(h+=","),h+=t.$m(f.x),h+=",",h+=t.$m(f.y)}o+=h+="]"}else o+=t.$m(u)}return o+"}"}function Pi(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function We(t,e,n,o,a,u,h,f,p){void 0===f&&(f=null),void 0===p&&(p=null);var g=new De;g.model=t,g.change=n,g.modelChange=e,g.propertyName=o,g.object=a,g.oldValue=u,g.oldParam=f,g.newValue=h,g.newParam=p,t.zt(g)}function Xl(t){return"number"==typeof t||"string"==typeof t}function o1(t,e,n){var o=t.ja(e);(void 0===o||t.Va.H(o)!==e)&&(t.Zt(e),void 0===(o=t.ja(e))?W("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."):(t.Va.add(o,e),o=null,n&&Po(t.Hc,o=t.Hc.length,e),We(t,"nodeDataArray",rn,"nodeDataArray",t,null,e,null,o),t.Pm(e),t.Om(e)))}function s1(t,e,n){var o=t.ja(e);if(void 0!==o&&t.Va.remove(o),o=null,n){t:if(n=t.Hc,Array.isArray(n))o=n.indexOf(e);else{o=n.length;for(var a=0;a<o;a++)if(n[a]===e){o=a;break t}o=-1}if(0>o)return;Al(t.Hc,o)}We(t,"nodeDataArray",be,"nodeDataArray",t,e,null,o,null),t.ir(e)}function zo(t,e,n){if(void 0!==e){var o=t.Vf.H(e);null===o&&(o=new nt,t.Vf.add(e,o)),o.add(n)}}function mn(t,e,n){if(void 0!==e){var o=t.Vf.H(e);o instanceof nt&&(null==n?t.Vf.remove(e):(o.remove(n),0===o.count&&t.Vf.remove(e)))}}function $h(t,e){return void 0===e?null:(t=t.Vf.H(e))instanceof nt?t:null}function yp(t,e,n){if(t.copiesArrays&&Array.isArray(e)){var o=[];for(n=0;n<e.length;n++){var a=yp(t,e[n],t.copiesArrayObjects);o.push(a)}return wn(o),o}if(n&&$t(e)){for(o in n=(n=e.constructor)?new n:{},a=t.copiesKey||"string"!=typeof t.nodeKeyProperty?null:t.nodeKeyProperty,e)if("__gohashid"===o)n.__gohashid=void 0;else if(o===a)n[a]=void 0;else{var u=Qe(e,o),h=Yh(t,u);"GraphObject"===h||"Diagram"===h||"Layer"===h||"RowColumnDefinition"===h||"AnimationManager"===h||"Tool"===h||"CommandHandler"===h||"Layout"===h||"InputEvent"===h||"DiagramEvent"===h||u instanceof dt||u instanceof Le||u instanceof Mn||u instanceof De||(u=yp(t,u,!1)),ce(n,o,u)}return wn(n),n}return e instanceof A||e instanceof Nt||e instanceof z||e instanceof at||e instanceof te?e.copy():e}function Lm(){return new dt}function Yh(t,e){if("function"==typeof e){if(e.className)return e.className;if(e.name)return e.name}else if("object"==typeof e&&null!==e&&e.constructor)return Yh(t,e.constructor);return typeof e}function Fm(t){return Co[t]?Co[t]:void 0!==U.go&&U.go[t]?U.go[t]:null}function Qe(t,e){if(!t||!e)return null;try{if("function"==typeof e)var n=e(t);else"function"==typeof t.getAttribute?null===(n=t.getAttribute(e))&&(n=void 0):n=t[e]}catch(o){}return n}function ce(t,e,n){if(t&&e)try{"function"==typeof e?e(t,n):"function"==typeof t.setAttribute?t.setAttribute(e,n):t[e]=n}catch(o){}}Zt.className="PartManager",Y(kn,Zt),kn.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),$M(this,t.linkDataArray)},kn.prototype.addModeledParts=function(t){for(Zt.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)ff(t.value);Fl(this.diagram,!1)},kn.prototype.removeAllModeledParts=function(){var t=this.diagram.model;S0(this,t.linkDataArray),this.fu(t.nodeDataArray)},kn.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Mt(t)},kn.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.cr(t,e)},kn.prototype.setFromNodeForLink=function(t,e){var n=this.diagram.model;n.Cw(t.data,n.ja(null!==e?e.data:null))},kn.prototype.setToNodeForLink=function(t,e){var n=this.diagram.model;n.Hw(t.data,n.ja(null!==e?e.data:null))},kn.prototype.removeDataForLink=function(t){this.diagram.model.Lm(t.data)},kn.prototype.findPartForKey=function(t){var e=Zt.prototype.findPartForKey.call(this,t);return null===e&&null!==(t=this.diagram.model.Eg(t))?this.Ue.H(t):e},kn.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.Eg(t))?this.Ue.H(t):null},kn.prototype.doModelChanged=function(t){var e=this;if(Zt.prototype.doModelChanged.call(this,t),this.diagram){var n=this.diagram;if(t.model===n.model){var o=t.change;if(n.Z){n.Z=!1;try{var a=t.modelChange;if(""!==a){if(o===Me){if("linkFromKey"===a){var u=this.yc(t.object);if(null!==u){var h=this.Db(t.newValue);u.fromNode=h}}else if("linkToKey"===a){var f=this.yc(t.object);if(null!==f){var p=this.Db(t.newValue);f.toNode=p}}else if("linkFromPortId"===a){var g=this.yc(t.object);if(null!==g){var y=t.newValue;"string"==typeof y&&(g.fromPortId=y)}}else if("linkToPortId"===a){var v=this.yc(t.object);if(null!==v){var x=t.newValue;"string"==typeof x&&(v.toPortId=x)}}else if("nodeGroupKey"===a){var S=this.zc(t.object);if(null!==S){var M=t.newValue;if(void 0!==M){var T=this.Db(M);S.containingGroup=T instanceof Pt?T:null}else S.containingGroup=null}}else if("linkLabelKeys"===a){var N=this.yc(t.object);if(null!==N){var P=t.oldValue,I=t.newValue;Array.isArray(P)&&P.forEach(function($){0<=I.indexOf($)||null!==($=e.Db($))&&($.labeledLink=null)}),Array.isArray(I)&&I.forEach(function($){null!==($=e.Db($))&&($.labeledLink=N)})}}else if("linkCategory"===a){var O=this.yc(t.object),b=t.newValue;null!==O&&"string"==typeof b&&(O.category=b)}else"linkDataArray"===a&&(S0(this,t.oldValue),$M(this,t.newValue));n.isModified=!0}else if(o===rn){var B=t.newValue;if("linkDataArray"===a&&"object"==typeof B&&null!==B)mp(this,B);else if("linkLabelKeys"===a&&Xl(B)){var K=this.yc(t.object),rt=this.Db(B);null!==K&&null!==rt&&(rt.labeledLink=K)}n.isModified=!0}else if(o===be){var tt=t.oldValue;if("linkDataArray"===a&&"object"==typeof tt&&null!==tt)this.$q(tt);else if("linkLabelKeys"===a&&Xl(tt)){var mt=this.Db(tt);null!==mt&&(mt.labeledLink=null)}n.isModified=!0}}else if(o===Me){var ht=t.propertyName;t.object!==n.model||"linkFromKeyProperty"!==ht&&"linkToKeyProperty"!==ht&&"linkFromPortIdProperty"!==ht&&"linkToPortIdProperty"!==ht&&"linkLabelKeysProperty"!==ht&&"nodeIsGroupProperty"!==ht&&"nodeGroupKeyProperty"!==ht&&"linkCategoryProperty"!==ht||n.undoManager.isUndoingRedoing||this.Md(),n.isModified=!0}}finally{n.Z=!0}}}}},kn.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,n=new nt,o=e.linkDataArray;o.forEach(function(u){n.add(u)});var a=[];this.links.each(function(u){null===u.data||n.contains(u.data)||a.push(u.data)}),a.forEach(function(u){Fs(e,u,!1)}),o.forEach(function(u){null===t.yc(u)&&XM(e,u,!1)})},kn.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var o=n.model;if(t instanceof Q){var a=or(o,e,!0);if(a=n.Db(a),t.fromNode=a,a=or(o,e,!1),a=n.Db(a),t.toNode=a,0<(e=o.Df(e)).length||0<t.labelNodes.count){if(1===e.length&&1===t.labelNodes.count){a=e[0];var u=t.labelNodes.first();if(o.ja(u.data)===a)return}a=(new nt).addAll(e);var h=new nt;t.labelNodes.each(function(f){null!==f.data&&void 0!==(f=o.ja(f.data))&&h.add(f)}),(e=h.copy()).Zq(a),(a=a.copy()).Zq(h),(0<e.count||0<a.count)&&(e.each(function(f){null!==(f=n.Db(f))&&f.labeledLink===t&&(f.labeledLink=null)}),a.each(function(f){null!==(f=n.Db(f))&&f.labeledLink!==t&&(f.labeledLink=t)}))}}else!(t instanceof Gt)&&(e=o.Kh(e),null===(e=n.findPartForKey(e))||e instanceof Pt)&&(t.containingGroup=e)}}},kn.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ja(t);if(void 0!==n){var o=$h(e,n),a=this.zc(t);if(null!==o&&null!==a){o=o.iterator;for(var u={};o.next();){var h=o.value;e.$a(h)?a instanceof Pt&&e.Kh(h)===n&&null!==(h=this.zc(h))&&(h.containingGroup=a):(u.link=this.yc(h),null!==u.link&&a instanceof ot&&(or(e,h,!0)===n&&(u.link.fromNode=a),or(e,h,!1)===n&&(u.link.toNode=a),h=e.Df(h),Array.isArray(h)&&h.some(function(f){return function(p){return p===n&&(a.labeledLink=f.link,!0)}}(u)))),u={link:u.link}}mn(e,n)}void 0!==(t=e.Kh(t))&&(t=this.Db(t))instanceof Pt&&(a.containingGroup=t)}},kn.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof ot){var n=e.ja(t.data);if(void 0!==n){for(var o=t.linksConnected;o.next();)zo(e,n,o.value.data);if(t.isLinkLabel&&null!==(o=t.labeledLink)&&zo(e,n,o.data),t instanceof Pt)for(t=t.memberParts;t.next();)e.$a(o=t.value.data)&&zo(e,n,o)}}},kn.prototype.copyPartData=function(t,e){var n=Zt.prototype.copyPartData.call(this,t,e);if(t instanceof Q)if(null!==(t=t.data)&&null!==e){var o=e.model;"object"==typeof(t=o.xq(t))&&null!==t&&(o.bj(t),n=e.yc(t))}else null!==n&&(e=this.diagram,null!==t&&null!==e&&null!==e.commandHandler&&e.commandHandler.copiesClipboardData&&"object"==typeof(e=e.model.xq(t))&&null!==e&&(n.data=e));return n},kn.prototype.insertLink=function(t,e,n,o){var a=this.diagram,u=a.model,h=a.toolManager.findTool("Linking"),f="";if(null!==t&&(null===e&&(e=t),null===(f=e.portId)&&(f="")),e="",null!==n&&(null===o&&(o=n),null===(e=o.portId)&&(e="")),(o=h.archetypeLinkData)instanceof Q){if(Lr(o),null!==(u=o.copy()))return u.fromNode=t,u.fromPortId=f,u.toNode=n,u.toPortId=e,a.add(u),(t=h.archetypeLabelNodeData)instanceof ot&&(Lr(t),null!==(t=t.copy())&&(t.labeledLink=u,a.add(t))),u}else if(null!==o&&"object"==typeof(o=u.xq(o))&&null!==o)return null!==t&&vf(u,o,u.ja(t.data),!0),Wh(u,o,f,!0),null!==n&&vf(u,o,u.ja(n.data),!1),Wh(u,o,e,!1),u.bj(o),null===(t=h.archetypeLabelNodeData)||t instanceof ot||"object"==typeof(t=u.copyNodeData(t))&&null!==t&&(u.wf(t),void 0!==(t=u.ja(t))&&u.Cv(o,t)),a.yc(o);return null},kn.prototype.findLinkForKey=kn.prototype.findLinkForKey,kn.prototype.findPartForKey=kn.prototype.findPartForKey,kn.prototype.removeAllModeledParts=kn.prototype.removeAllModeledParts,kn.prototype.addModeledParts=kn.prototype.addModeledParts,kn.prototype.addAllModeledParts=kn.prototype.addAllModeledParts,kn.className="GraphLinksPartManager",Y(wr,Zt),wr.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Pt(t)},wr.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.ku(t,e)},wr.prototype.setFromNodeForLink=function(t,e,n){var o=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren)o.fe(t.data,o.ja(e));else{var a=this.rh;this.rh=t,null!==n&&o.fe(n.data,void 0),o.fe(e,o.ja(null!==t.toNode?t.toNode.data:null)),this.rh=a}},wr.prototype.setToNodeForLink=function(t,e,n){var o=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren){var a=this.rh;this.rh=t,null!==n&&o.fe(n.data,void 0),o.fe(e,o.ja(null!==t.fromNode?t.fromNode.data:null)),this.rh=a}else o.fe(t.data,o.ja(e))},wr.prototype.removeDataForLink=function(t){this.diagram.model.fe(t.data,void 0)},wr.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.Lb(t))?this.Ue.H(t):null},wr.prototype.doModelChanged=function(t){if(Zt.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var n=t.change;if(e.Z){e.Z=!1;try{var o=t.modelChange;if(""!==o){if(n===Me){if("nodeParentKey"===o){var a=t.object,u=this.Db(t.newValue),h=this.gj(a);if(null!==this.rh)null!==u&&(this.rh.data=a,this.rh.category=this.getLinkCategoryForData(a));else if(null!==h){var f=h.jj();null!==f?null===u?e.remove(f):e.isTreePathToChildren?f.fromNode=u:f.toNode=u:Hu(this,u,h)}}else if("parentLinkCategory"===o){var p=this.gj(t.object),g=t.newValue;if(null!==p&&"string"==typeof g){var y=p.jj();null!==y&&(y.category=g)}}e.isModified=!0}}else n===Me&&(t.object===e.model&&"nodeParentKeyProperty"===t.propertyName&&(e.undoManager.isUndoingRedoing||this.Md()),e.isModified=!0)}finally{e.Z=!0}}}}},wr.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var o=n.model;t instanceof ot&&(e=o.Lh(e),(e=n.Db(e))!==(o=t.Gg())&&(o=t.jj(),null!==e?null!==o?n.isTreePathToChildren?o.fromNode=e:o.toNode=e:Hu(this,e,t):null!==o&&Og(n,o,!1)))}}},wr.prototype.updateDataBindings=function(t,e){Zt.prototype.updateDataBindings.call(this,t,e),"string"==typeof e&&null!==this.zc(t)&&null!==(t=this.yc(t))&&t.Ca(e)},wr.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ja(t);if(void 0!==n){var o=$h(e,n),a=this.zc(t);if(null!==o&&null!==a){for(o=o.iterator;o.next();){var u=o.value;e.$a(u)&&a instanceof ot&&e.Lh(u)===n&&Hu(this,a,this.gj(u))}mn(e,n)}void 0!==(t=e.Lh(t))&&a instanceof ot&&Hu(this,t=this.Db(t),a)}},wr.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof ot){var n=e.ja(t.data),o=this.yc(t.data);if(null!==o){o.isSelected=!1,o.isHighlighted=!1;var a=o.layer;if(null!==a){var u=a.Nc(-1,o,!1);0<=u&&this.diagram.bb(be,"parts",a,o,null,u,null),null!==(u=o.layerChanged)&&u(o,a,null)}}for(o=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)a=t.value,e.$a(a=(o?a.toNode:a.fromNode).data)&&zo(e,n,a)}},wr.prototype.insertLink=function(t,e,n){e=this.diagram.model;var o=t,a=n;return this.diagram.isTreePathToChildren||(o=n,a=t),null!==o&&null!==a?(e.fe(a.data,e.ja(o.data)),a.jj()):null},wr.prototype.findLinkForKey=wr.prototype.findLinkForKey,wr.className="TreePartManager",dt.prototype.cloneProtected=function(t){t.Qa=this.Qa,t.Jn=this.Jn,t.bg=this.bg,t.Mi=this.Mi,t.Ql=this.Ql,t.il=this.il,t.Bn=this.Bn,t.An=this.An,t.Dn=this.Dn,t.hn=this.hn,t.Yj=this.Yj},dt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},dt.prototype.clear=function(){this.Hc=[],this.Va.clear(),this.Vf.clear(),this.undoManager.clear()},dt.prototype.toString=function(t){if(void 0===t&&(t=0),1<t)return this.gr();var e=(""!==this.name?this.name:"")+" Model";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,o=0;o<n;o++){var a=t[o];e+=" "+this.ja(a)+":"+Pr(a)}}return e},dt.prototype.eB=function(t){t.change!==cr&&W("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof Mn?(Om(this,e),t=this.Zw(e,"FinishedUndo"===t.propertyName),this.Xh=null,t):null},dt.prototype.Zw=function(t,e){var n=this,o=!1,a=new nt,u=new nt,h=new nt,f=this.Xh;t.changes.each(function(v){v.model===n&&("nodeDataArray"===v.modelChange?v.change===rn?a.add(v.newValue):v.change===be&&h.add(v.oldValue):n.$a(v.object)?u.add(v.object):v.change!==Me||n.modelData!==v.object&&"modelData"!==v.propertyName?null!==v.object&&(f&&f.contains(v.object)?f.get(v.object).each(function(x){n.$a(x)&&u.add(x)}):v.object instanceof dt||n.qj()&&n.xc(v.object)||i1(n,v.object).each(function(x){u.add(x)})):o=!0)});var p=this.Ki;p.clear(),a.each(function(v){p.add(n.ja(v)),e||u.add(v)});var g=this.Ni;g.clear(),h.each(function(v){g.add(n.ja(v)),e&&u.add(v)}),t=n.cloneDeep(u.ma());var y=null;return o&&(null===y&&(y={}),y.modelData=this.cloneDeep(this.modelData)),0<p.count&&(null===y&&(y={}),e?y.removedNodeKeys=p.ma():y.insertedNodeKeys=p.ma()),0<t.length&&(null===y&&(y={}),y.modifiedNodeData=t),0<g.count&&(null===y&&(y={}),e?y.insertedNodeKeys=g.ma():y.removedNodeKeys=g.ma()),g.clear(),p.clear(),y},dt.prototype.cloneDeep=function(t){return Gu(this,t,!0)},(D=dt.prototype).Vk=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.dataFormat&&(t+=',\n  "dataFormat": '+this.quote(this.dataFormat)),this.isReadOnly&&(t+=',\n  "isReadOnly": '+this.isReadOnly),"key"!==this.nodeKeyProperty&&"string"==typeof this.nodeKeyProperty&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=',\n  "copiesArrays": true'),this.copiesArrayObjects&&(t+=',\n  "copiesArrayObjects": true'),this.copiesKey||(t+=',\n  "copiesKey": false'),"category"!==this.nodeCategoryProperty&&"string"==typeof this.nodeCategoryProperty&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.nodeCategoryProperty)),t},D.Xq=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),!1===t.copiesKey&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)},D.$w=function(){var n,t=this.modelData,e=!1;for(n in t)if(!Wl(n,t[n])){e=!0;break}return t="",e&&(t=Im(this)),t+',\n  "nodeDataArray": '+lo(this,this.nodeDataArray,!0)},D.qw=function(t){D0(this,t),Dn(t=t.nodeDataArray)&&(this.Nm(t),this.nodeDataArray=t)},D.lr=function(t){zu(this,t,"nodeKeyProperty");var e=this.Ki;e.clear();var n=new nt,o=this.Ni;o.clear(),o.addAll(this.Va.iteratorKeys);for(var a=new Et,u=t.nodeDataArray,h=u.length,f=0;f<h;f++){var p=u[f],g=t.ja(p);if(void 0!==g){o.remove(g);var y=this.Lb(g);null===y?(e.add(g),n.add(p)):zh(this,y,p,a)||n.add(p)}else this.Zt(p),g=this.ja(p),e.add(g),n.add(p)}return u="",zh(this,this.modelData,t.modelData,a)||(u+=Im(this)),0<e.count&&(u+=this.su+lo(this,e.ma(),!0)),0<n.count&&(u+=this.mx+lo(this,n.ma(),!0)),0<o.count&&(u+=this.uu+lo(this,o.ma(),!0)),o.clear(),e.clear(),u},D.Dz=function(t,e){return void 0===e&&(e=Yh(this,this)),'{ "class": '+this.quote(e)+', "incremental": 1'+this.Vk()+this.lr(t)+"}"},D.Yw=function(t,e){var n=this,o=!1,a=new nt,u=new nt,h=new nt,f=this.Xh;t.changes.each(function(y){y.model===n&&("nodeDataArray"===y.modelChange?y.change===rn?a.add(y.newValue):y.change===be&&h.add(y.oldValue):n.$a(y.object)?u.add(y.object):y.change!==Me||n.modelData!==y.object&&"modelData"!==y.propertyName?null!==y.object&&(f&&f.contains(y.object)?f.get(y.object).each(function(v){n.$a(v)&&u.add(v)}):y.object instanceof dt||n.qj()&&n.xc(y.object)||i1(n,y.object).each(function(v){u.add(v)})):o=!0)});var p=this.Ki;p.clear(),a.each(function(y){p.add(n.ja(y)),e||u.add(y)});var g=this.Ni;return g.clear(),h.each(function(y){g.add(n.ja(y)),e&&u.add(y)}),t="",o&&(t+=Im(this)),0<p.count&&(t+=(e?this.uu:this.su)+lo(this,p.ma(),!0)),0<u.count&&(t+=this.mx+lo(this,u.ma(),!0)),0<g.count&&(t+=(e?this.su:this.uu)+lo(this,g.ma(),!0)),g.clear(),p.clear(),t},D.Wq=function(t){(void 0!==t.name&&t.name!==this.name||void 0!==t.dataFormat&&t.dataFormat!==this.dataFormat||void 0!==t.isReadOnly&&t.isReadOnly!==this.isReadOnly||void 0!==t.nodeKeyProperty&&t.nodeKeyProperty!==this.nodeKeyProperty||void 0!==t.copiesArrays&&t.copiesArrays!==this.copiesArrays||void 0!==t.copiesArrayObjects&&t.copiesArrayObjects!==this.copiesArrayObjects||void 0!==t.copiesKey&&t.copiesKey!==this.copiesKey||void 0!==t.nodeCategoryProperty&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&W("applyIncrementalJson cannot change Model properties"),D0(this,t);var e=t.insertedNodeKeys,n=t.modifiedNodeData,o=new Et;if(Array.isArray(n))for(var a=0;a<n.length;a++){var u=n[a],h=this.ja(u);null!=h&&o.set(h,u)}if(Array.isArray(e))for(a=e.length,u=0;u<a;u++){var f=this.Lb(h=e[u]);null===f&&(f=(f=o.get(h))?f:this.copyNodeData({}),this.Um(f,h),this.wf(f))}if(Array.isArray(n))for(e=n.length,o=0;o<e;o++)if(u=this.ja(a=n[o]),null!==(u=this.Lb(u))){for(var p in a)"__gohashid"===p||p===this.nodeKeyProperty||this.Bk()&&p===this.nodeIsGroupProperty||this.setDataProperty(u,p,a[p]);this.Vm(a,u)}if(t=t.removedNodeKeys,Array.isArray(t))for(n=t.length,p=0;p<n;p++)null!==(e=this.Lb(t[p]))&&this.Mm(e)},D.Zy=function(t,e){t.change!==cr&&W("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var n=t.object;return t.isTransactionFinished&&n instanceof Mn?(void 0===e&&(e=Yh(this,this)),Om(this,n),t=this.Yw(n,"FinishedUndo"===t.propertyName),this.Xh=null,"2"===e?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.Vk()+t+"}"):'{ "incremental": 0 }'},D.fB=function(t,e){return this.Zy(t,e)},D.gr=function(t){return void 0===t&&(t=Yh(this,this)),'{ "class": '+this.quote(t)+this.Vk()+this.$w()+"}"},D.toJSON=function(t){return this.gr(t)},D.Yx=function(t){var e=null;if("string"==typeof t)try{e=U.JSON.parse(t)}catch(o){}else"object"==typeof t?e=t:W("Unable to modify a Model from: "+t);var n=e.incremental;"number"!=typeof n&&W("Unable to apply non-incremental changes to Model: "+t),0!==n&&(this.xa("applyIncrementalJson"),this.Wq(e),this.Wa("applyIncrementalJson"))},D.vz=function(t){return this.Yx(t)},dt.constructGraphLinksModel=function(){return new dt},(D=dt.prototype).Nm=function(t){if(Dn(t))for(var e=t.length,n=0;n<e;n++){var o=t[n];if($t(o)){var a=n;o=this.Nm(o),Array.isArray(t)?t[a]=o:W("Cannot replace an object in an HTMLCollection or NodeList at "+a)}}else if($t(t)){for(n in t)if($t(a=t[n])&&(a=this.Nm(a),t[n]=a,"points"===n&&Array.isArray(a))){o=a.length%2==0;for(var u=0;u<a.length;u++)if("number"!=typeof a[u]){o=!1;break}if(o){for(o=new lt,u=0;u<a.length/2;u++)o.add(new A(a[2*u],a[2*u+1]));o.freeze(),t[n]=o}}if("object"==typeof t){if(n=t,0===(a=t.class||"").indexOf("go.")&&(a=a.substr(3)),"NaN"===a)n=NaN;else if("Date"===a)n=new Date(t.value);else if("Point"===a)n=new A(Pi(t.x),Pi(t.y));else if("Size"===a)n=new Nt(Pi(t.width),Pi(t.height));else if("Rect"===a)n=new z(Pi(t.x),Pi(t.y),Pi(t.width),Pi(t.height));else if("Margin"===a)n=new te(Pi(t.top),Pi(t.right),Pi(t.bottom),Pi(t.left));else if("Spot"===a)n="string"==typeof t.enum?tv(t.enum):new at(Pi(t.x),Pi(t.y),Pi(t.offsetX),Pi(t.offsetY));else if("Brush"===a){if((n=new Xt).type=Qs(Xt,t.type),"string"==typeof t.color&&(n.color=t.color),t.start instanceof at&&(n.start=t.start),t.end instanceof at&&(n.end=t.end),"number"==typeof t.startRadius&&(n.startRadius=Pi(t.startRadius)),"number"==typeof t.endRadius&&(n.endRadius=Pi(t.endRadius)),$t(t=t.colorStops))for(e in t)n.addColorStop(parseFloat(e),t[e])}else"Geometry"===a?(e=null,(e="string"==typeof t.path?se(t.path):new It).type=Qs(It,t.type),"number"==typeof t.startX&&(e.startX=Pi(t.startX)),"number"==typeof t.startY&&(e.startY=Pi(t.startY)),"number"==typeof t.endX&&(e.endX=Pi(t.endX)),"number"==typeof t.endY&&(e.endY=Pi(t.endY)),t.spot1 instanceof at&&(e.spot1=t.spot1),t.spot2 instanceof at&&(e.spot2=t.spot2),n=e):"EnumValue"===a&&(0===(e=t.classType).indexOf("go.")&&(e=e.substr(3)),"function"==typeof(e=Fm(e))&&(n=Qs(e,t.name)));t=n}}return t},D.quote=function(t){for(var e="",n=t.length,o=0;o<n;o++){var a=t[o];if('"'===a||"\\"===a)e+="\\"+a;else if("\b"===a)e+="\\b";else if("\f"===a)e+="\\f";else if("\n"===a)e+="\\n";else if("\r"===a)e+="\\r";else if("\t"===a)e+="\\t";else{var u=t.charCodeAt(o);e=16>u?e+"\\u000"+t.charCodeAt(o).toString(16):32>u?e+"\\u00"+t.charCodeAt(o).toString(16):8232===u?e+"\\u2028":8233===u?e+"\\u2029":e+a}}return'"'+e+'"'},D.$m=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.$m(t.valueOf()):Dn(t)?lo(this,t):$t(t)?r1(this,t):"function"==typeof t?"null":t.toString()},D.Gh=function(t){this.bv.add(t)},D.Sk=function(t){this.bv.remove(t)},D.zt=function(t){this.skipsUndoManager||this.undoManager.$v(t);for(var e=this.bv,n=e.length,o=0;o<n;o++)e.J(o)(t)},D.bb=function(t,e,n,o,a,u,h){We(this,"",t,e,n,o,a,u,h)},D.g=function(t,e,n,o,a){We(this,"",Me,t,this,e,n,o,a)},D.du=function(t,e,n,o,a,u){We(this,"",Me,e,t,n,o,a,u)},dt.prototype.changeState=function(t,e){if(null!==t&&t.model===this)if(t.change===Me){var n=t.object,o=t.propertyName,a=t.H(e);o===this.nodeKeyProperty&&this.$a(n)&&(void 0!==(e=t.H(!e))&&this.Va.remove(e),void 0!==a&&this.Va.add(a,n)),ce(n,o,a)}else t.change===rn?(n=t.newParam,"nodeDataArray"===t.modelChange?$t(t=t.newValue)&&"number"==typeof n&&(o=this.ja(t),e?(this.Hc[n]===t&&Al(this.Hc,n),void 0!==o&&this.Va.remove(o)):(this.Hc[n]!==t&&Po(this.Hc,n,t),void 0!==o&&this.Va.add(o,t))):""===t.modelChange?((o=t.object)&&!Dn(o)&&t.propertyName&&(o=Qe(t.object,t.propertyName)),Dn(o)&&"number"==typeof n&&(t=t.newValue,e?Al(o,n):Po(o,n,t))):W("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===be?(n=t.oldParam,"nodeDataArray"===t.modelChange?$t(t=t.oldValue)&&"number"==typeof n&&(o=this.ja(t),e?(this.Hc[n]!==t&&Po(this.Hc,n,t),void 0!==o&&this.Va.add(o,t)):(this.Hc[n]===t&&Al(this.Hc,n),void 0!==o&&this.Va.remove(o))):""===t.modelChange?((o=t.object)&&!Dn(o)&&t.propertyName&&(o=Qe(t.object,t.propertyName)),Dn(o)&&"number"==typeof n&&(t=t.oldValue,e?Po(o,n,t):Al(o,n))):W("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==cr&&W("unknown ChangedEvent: "+t.toString())},dt.prototype.xa=function(t){return this.undoManager.xa(t)},dt.prototype.Wa=function(t){return this.undoManager.Wa(t)},dt.prototype.Kf=function(){return this.undoManager.Kf()},dt.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.xa(e);var o=!1;try{t(this),o=!0}finally{o?this.undoManager.Wa(e):this.undoManager.Kf(),this.skipsUndoManager=n}},(D=dt.prototype).Ca=function(t,e){void 0===e&&(e=""),We(this,"SourceChanged",cr,e,t,null,null)},D.ja=function(t){if(null!==t){var e=this.Mi;if(""!==e&&void 0!==(e=Qe(t,e))){if(Xl(e))return e;W("Key value for node data "+t+" is not a number or a string: "+e)}}},D.Um=function(t,e){if(null!==t){var n=this.Mi;if(""!==n)if(this.$a(t)){var o=Qe(t,n);o!==e&&null===this.Lb(e)&&(ce(t,n,e),void 0!==o&&this.Va.remove(o),this.Va.add(e,t),We(this,"nodeKey",Me,n,t,o,e),"string"==typeof n&&this.Ca(t,n),this.ar(o,e))}else ce(t,n,e)}},D.$a=function(t){var e=this.ja(t);return void 0!==e&&this.Va.H(e)===t},D.Lb=function(t){return null===t&&W("Model.findNodeDataForKey:key must not be null"),void 0!==t&&Xl(t)?this.Va.H(t):null},D.Zt=function(t){if(null!==t){var e=this.Mi;if(""!==e){var n=this.ja(t);if(void 0===n||this.Va.contains(n)){var o=this.Ql;if(null!==o&&null!=(n=o(this,t))&&!this.Va.contains(n))return void ce(t,e,n);if("string"==typeof n){for(o=2;this.Va.contains(n+o);)o++;ce(t,e,n+o)}else if(void 0===n||"number"==typeof n){for(n=-this.Va.count-1;this.Va.contains(n);)n--;ce(t,e,n)}}}}},D.wf=function(t){null!==t&&(pi(t),this.$a(t)||o1(this,t,!0))},D.qz=function(t){if(Dn(t))for(var e=t.length,n=0;n<e;n++)this.wf(t[n]);else for(t=t.iterator;t.next();)this.wf(t.value)},D.Mm=function(t){null!==t&&s1(this,t,!0)},D.VA=function(t){if(Dn(t))for(var e=t.length,n=0;n<e;n++)this.Mm(t[n]);else for(t=t.iterator;t.next();)this.Mm(t.value)},D.KA=function(t){if(t!==this.nodeDataArray&&Dn(t)){var e=this.Ni;e.clear(),e.addAll(this.Va.iteratorKeys);var n=this.Ki;n.clear();for(var o=t.length,a=0;a<o;a++){var u=t[a],h=this.ja(u);if(void 0!==h){n.add(h);var f=this.Lb(h);f!==u&&(null!==f?(this.sq(f,u),this.Vm(u,f)):(u=this.cloneDeep(u),this.Um(u,h),this.wf(u)))}else h=this.cloneDeep(u),this.wf(h),n.add(this.ja(h))}for(t=e.iterator;t.next();)n.contains(o=t.value)||(o=this.Lb(o))&&this.Mm(o);e.clear(),n.clear()}},D.ar=function(t,e){void 0!==e&&(t=$h(this,t))instanceof nt&&this.Vf.add(e,t)},D.Tw=function(){},D.Pm=function(){},D.Om=function(){},D.ir=function(){},D.Cz=function(t){void 0===t?this.Vf.clear():this.Vf.remove(t)},dt.prototype.copyNodeData=function(t){if(null===t)return null;var e=this.il;return $t(t=null!==e?e(t,this):yp(this,t,!0))&&wn(t),t},dt.prototype.setDataProperty=function(t,e,n){if(this.$a(t)){if(e===this.nodeKeyProperty)return void this.Um(t,n);if(e===this.nodeCategoryProperty)return void this.Tm(t,n)}else!a1&&t instanceof Z&&(a1=!0,Ln('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Ln("  Is that really your intent?"));var o=Qe(t,e);o!==n&&(ce(t,e,n),this.du(t,e,o,n))},(D=dt.prototype).set=function(t,e,n){this.setDataProperty(t,e,n)},D.sq=function(t,e){if(e){var o,n=this.$a(t);for(o in e)"__gohashid"===o||n&&o===this.nodeKeyProperty||this.setDataProperty(t,o,e[o])}},D.mz=function(t,e){this.Qt(t,-1,e)},D.Qt=function(t,e,n){0>e&&(e=t.length),Po(t,e,n),We(this,"",rn,"",t,null,n,null,e)},D.sw=function(t,e){void 0===e&&(e=-1),t===this.Hc&&W("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===e&&(e=t.length-1);var n=t[e];Al(t,e),We(this,"",be,"",t,n,null,e,null)},D.Fq=function(t){if(null===t)return"";var e=this.Yj;return""===e||void 0===(e=Qe(t,e))?"":"string"==typeof e?e:(W("getCategoryForNodeData found a non-string category for "+t+": "+e),"")},D.Tm=function(t,e){if(null!==t){var n=this.Yj;if(""!==n)if(this.$a(t)){var o=Qe(t,n);void 0===o&&(o=""),o!==e&&(ce(t,n,e),We(this,"nodeCategory",Me,n,t,o,e))}else ce(t,n,e)}},D.Vm=function(t,e){this.Tm(e,this.Fq(t))},D.Dm=function(){return!1},D.Bk=function(){return!1},D.qj=function(){return!1},D.Vt=function(){return!1},D.Ck=function(){return!1},L.Object.defineProperties(dt.prototype,{name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;e!==t&&(this.Qa=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.Jn},set:function(t){var e=this.Jn;e!==t&&(this.Jn=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.bg},set:function(t){var e=this.bg;e!==t&&(this.bg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.l},set:function(t){var e=this.l;e!==t&&(this.l=t,this.g("modelData",e,t),this.Ca(t))}},undoManager:{get:function(){return this.v},set:function(t){var e=this.v;e!==t&&(null!==e&&e.Qy(this),this.v=t,null!==t&&t.Wx(this))}},skipsUndoManager:{get:function(){return this.wg},set:function(t){this.wg=t}},nodeKeyProperty:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e!==t&&(""===t&&W("Model.nodeKeyProperty may not be the empty string"),0<this.Va.count&&W("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Mi=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.Ql},set:function(t){var e=this.Ql;e!==t&&(this.Ql=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Hc},set:function(t){var e=this.Hc;if(e!==t){this.Va.clear(),this.Tw();for(var n=t.length,o=0;o<n;o++){var a=t[o];if(!$t(a))return void W("Model.nodeDataArray must only contain Objects, not: "+a);pi(a)}for(this.Hc=t,o=new lt,a=0;a<n;a++){var u=t[a],h=this.ja(u);void 0===h||null!==this.Va.H(h)?o.add(u):this.Va.add(h,u)}for(o=o.iterator;o.next();)this.Zt(a=o.value),void 0!==(u=this.ja(a))&&this.Va.add(u,a);for(We(this,"nodeDataArray",Me,"nodeDataArray",this,e,t),e=0;e<n;e++)this.Pm(o=t[e]),this.Om(o);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.il},set:function(t){var e=this.il;e!==t&&(this.il=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.Bn},set:function(t){var e=this.Bn;e!==t&&(this.Bn=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.An},set:function(t){var e=this.An;e!==t&&(this.An=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.Dn},set:function(t){var e=this.Dn;e!==t&&(this.Dn=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.hn},set:function(t){var e=this.hn;e!==t&&(this.hn=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.Yj},set:function(t){var e=this.Yj;e!==t&&(this.Yj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),dt.prototype.setCategoryForNodeData=dt.prototype.Tm,dt.prototype.getCategoryForNodeData=dt.prototype.Fq,dt.prototype.removeArrayItem=dt.prototype.sw,dt.prototype.insertArrayItem=dt.prototype.Qt,dt.prototype.addArrayItem=dt.prototype.mz,dt.prototype.assignAllDataProperties=dt.prototype.sq,dt.prototype.set=dt.prototype.set,dt.prototype.clearUnresolvedReferences=dt.prototype.Cz,dt.prototype.mergeNodeDataArray=dt.prototype.KA,dt.prototype.removeNodeDataCollection=dt.prototype.VA,dt.prototype.removeNodeData=dt.prototype.Mm,dt.prototype.addNodeDataCollection=dt.prototype.qz,dt.prototype.addNodeData=dt.prototype.wf,dt.prototype.makeNodeDataKeyUnique=dt.prototype.Zt,dt.prototype.findNodeDataForKey=dt.prototype.Lb,dt.prototype.containsNodeData=dt.prototype.$a,dt.prototype.setKeyForNodeData=dt.prototype.Um,dt.prototype.getKeyForNodeData=dt.prototype.ja,dt.prototype.updateTargetBindings=dt.prototype.Ca,dt.prototype.commit=dt.prototype.commit,dt.prototype.rollbackTransaction=dt.prototype.Kf,dt.prototype.commitTransaction=dt.prototype.Wa,dt.prototype.startTransaction=dt.prototype.xa,dt.prototype.raiseDataChanged=dt.prototype.du,dt.prototype.raiseChanged=dt.prototype.g,dt.prototype.raiseChangedEvent=dt.prototype.bb,dt.prototype.removeChangedListener=dt.prototype.Sk,dt.prototype.addChangedListener=dt.prototype.Gh,dt.prototype.writeJsonValue=dt.prototype.$m,dt.prototype.replaceJsonObjects=dt.prototype.Nm,dt.prototype.applyIncrementalJSON=dt.prototype.vz,dt.prototype.applyIncrementalJson=dt.prototype.Yx,dt.prototype.toJSON=dt.prototype.toJSON,dt.prototype.toJson=dt.prototype.gr,dt.prototype.toIncrementalJSON=dt.prototype.fB,dt.prototype.toIncrementalJson=dt.prototype.Zy,dt.prototype.computeJsonDifference=dt.prototype.Dz,dt.prototype.toIncrementalData=dt.prototype.eB,dt.prototype.clear=dt.prototype.clear;var a1=!1,Co={};function sn(t,e,n){wn(this),this.s=!1,void 0===t&&(t=""),void 0===e&&(e=t),void 0===n&&(n=null),this.l=-1,this.qd=null,this.om=t,this.nm=this.eq=0,this.ht=null,this.vo=!1,this.gm=e,this.zn=n,this.Uo=u1,this.sn=null,this.Nu=new nt}function YM(t,e,n){return null===(t=t.sourceName)||""===t?e:"/"===t?n.part:"."===t?n:".."===t?n.panel:e.ab(t)}dt.className="Model",dt.fromJSON=dt.fromJson=function(t,e){void 0===e&&(e=null);var n=null;if("string"==typeof t)try{n=U.JSON.parse(t)}catch(u){}else"object"==typeof t?n=t:W("Unable to construct a Model from: "+t);if(null===e){t=null;var o=n.class;if("string"==typeof o)try{var a=null;0===o.indexOf("go.")?a=Fm(o=o.substr(3)):null===(a=Fm(o))&&(a=U[o]),"function"==typeof a&&(t=new a)}catch(u){}null===t||t instanceof dt?e=t:W("Unable to construct a Model of declared class: "+n.class)}return null===e&&(e=dt.constructGraphLinksModel()),e.Xq(n),e.qw(n),e},dt.safePropertyValue=Qe,dt.safePropertySet=ce,Co.Brush=Xt,Co.ChangedEvent=De,Co.Geometry=It,Co.Margin=te,Co.Panel=X,Co.Point=A,Co.Rect=z,Co.Size=Nt,Co.Spot=at,Co.Transaction=Mn,Co.UndoManager=Le,sn.prototype.copy=function(){var t=new sn;return t.om=this.om,t.eq=this.eq,t.nm=this.nm,t.ht=this.ht,t.vo=this.vo,t.gm=this.gm,t.zn=this.zn,t.Uo=this.Uo,t.sn=this.sn,t},(D=sn.prototype).jb=function(t){t.classType===sn&&(this.mode=t)},D.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(-1!==this.wj?" "+this.wj:"")+" "+this.mode.name+")"},D.freeze=function(){return this.s=!0,this},D.ea=function(){return this.s=!1,this},D.Jy=function(t){return void 0===t&&(t=null),this.mode=Rm,this.backConverter=t,this},D.Tq=function(t){return void 0===t&&(t=""),this.sourceName=t,this.isToModel=!1,this},D.MA=function(){return this.sourceName=null,this.isToModel=!0,this},D.Uw=function(t,e,n){var o=this.gm;if(void 0===n||""===o||o===n){n=this.om;var a=this.zn;if(null===a&&""===n)Ln("Binding error: target property is the empty string: "+this.toString());else{var u=e;if(""!==o&&(u=Qe(e,o)),void 0!==u)if(null===a)""!==n&&ce(t,n,u);else try{""!==n?ce(t,n,a(u,t)):a(u,t)}catch(f){}}}},D.kr=function(t,e,n,o){if(this.Uo===Rm){var a=this.om;if(void 0===n||a===n){n=this.gm;var u=this.sn,h=t;if(""!==a&&(h=Qe(t,a)),void 0!==h&&!this.Nu.contains(t))try{this.Nu.add(t);var f=null!==o?o.diagram:null,p=null!==f?f.model:null;if(null===u){if(""!==n)null!==p?p.setDataProperty(e,n,h):ce(e,n,h);else if(null!==p&&null!==o&&0<=o.itemIndex&&null!==o.panel&&Array.isArray(o.panel.itemArray)){var g=o.itemIndex,y=o.panel.itemArray;p.sw(y,g),p.Qt(y,g,h)}}else try{if(""!==n){var v=u(h,e,p);null!==p?p.setDataProperty(e,n,v):ce(e,n,v)}else{var x=u(h,e,p);if(void 0!==x&&null!==p&&null!==o&&0<=o.itemIndex&&null!==o.panel&&Array.isArray(o.panel.itemArray)){var S=o.itemIndex,M=o.panel.itemArray;p.sw(M,S),p.Qt(M,S,x)}}}catch(T){}}finally{this.Nu.remove(t)}}}},L.Object.defineProperties(sn.prototype,{wj:{get:function(){return this.l},set:function(t){this.s&&Ft(this),this.l=t}},targetProperty:{get:function(){return this.om},set:function(t){this.s&&Ft(this),this.om=t}},sourceName:{get:function(){return this.ht},set:function(t){this.s&&Ft(this),this.ht=t,null!==t&&(this.vo=!1)}},isToModel:{get:function(){return this.vo},set:function(t){this.s&&Ft(this),this.vo=t}},sourceProperty:{get:function(){return this.gm},set:function(t){this.s&&Ft(this),this.gm=t}},converter:{get:function(){return this.zn},set:function(t){this.s&&Ft(this),this.zn=t}},backConverter:{get:function(){return this.sn},set:function(t){this.s&&Ft(this),this.sn=t}},mode:{get:function(){return this.Uo},set:function(t){this.s&&Ft(this),this.Uo=t}}}),sn.prototype.updateSource=sn.prototype.kr,sn.prototype.updateTarget=sn.prototype.Uw,sn.prototype.ofModel=sn.prototype.MA,sn.prototype.ofObject=sn.prototype.Tq,sn.prototype.makeTwoWay=sn.prototype.Jy;var l1="Binding",u1=new it(sn,"OneWay",1),Rm=new it(sn,"TwoWay",2);function Vt(t,e){dt.call(this),this.ru=',\n  "insertedLinkKeys": ',this.lx=',\n  "modifiedLinkData": ',this.tu=',\n  "removedLinkKeys": ',this.bd=[],this.cg=new nt,this.gb=new Et,this.Gi="",this.Aj=this.hl=this.Rl=null,this.bf="from",this.cf="to",this.Vj=this.Uj="",this.Tj="category",this.$d="",this.Vl="isGroup",this.ze="group",this.Cn=!1,void 0!==t&&(this.nodeDataArray=t),void 0!==e&&(this.linkDataArray=e)}function WM(t,e){for(var n=new nt,o=0;o<t.linkDataArray.length;o++){var a=t.linkDataArray[o];bm(t,e,a,a,n)}return n}function or(t,e,n){if(null!==e&&""!==(t=n?t.bf:t.cf)&&void 0!==(t=Qe(e,t))){if(Xl(t))return t;W((n?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function vf(t,e,n,o){if(null===n&&(n=void 0),null!==e){var a=o?t.bf:t.cf;if(""!==a)if(n=t.Fm(n),t.xc(e)){var u=Qe(e,a);u!==n&&(mn(t,u,e),ce(e,a,n),null===t.Lb(n)&&zo(t,n,e),We(t,o?"linkFromKey":"linkToKey",Me,a,e,u,n),"string"==typeof a&&t.Ca(e,a))}else ce(e,a,n)}}function vp(t,e,n){return null===e||""===(t=n?t.Uj:t.Vj)||void 0===(e=Qe(e,t))?"":e}function Wh(t,e,n,o){if(null!==e){var a=o?t.Uj:t.Vj;if(""!==a)if(t.xc(e)){var u=Qe(e,a);void 0===u&&(u=""),u!==n&&(ce(e,a,n),We(t,o?"linkFromPortId":"linkToPortId",Me,a,e,u,n),"string"==typeof a&&t.Ca(e,a))}else ce(e,a,n)}}function XM(t,e,n){if(""!==t.linkKeyProperty){var o=t.Wb(e);if(void 0!==o&&t.gb.H(o)===e)return;if(t.Qq(e),void 0===(o=t.Wb(e)))return void W("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model.");t.gb.add(o,e)}t.cg.add(e),o=null,n&&t.bd.splice(o=t.bd.length,0,e),We(t,"linkDataArray",rn,"linkDataArray",t,null,e,null,o),h1(t,e)}function Fs(t,e,n){t.cg.remove(e);var o=t.Wb(e);if(void 0!==o&&t.gb.remove(o),o=null,n){if(0>(o=t.bd.indexOf(e)))return;t.bd.splice(o,1)}if(We(t,"linkDataArray",be,"linkDataArray",t,e,null,o,null),mn(t,n=or(t,e,!0),e),mn(t,n=or(t,e,!1),e),o=t.Df(e),Array.isArray(o))for(var a=o.length,u=0;u<a;u++)mn(t,n=o[u],e)}function h1(t,e){var n=or(t,e,!0);n=t.Fm(n),null===t.Lb(n)&&zo(t,n,e),n=or(t,e,!1),n=t.Fm(n),null===t.Lb(n)&&zo(t,n,e);var o=t.Df(e);if(Array.isArray(o))for(var a=o.length,u=0;u<a;u++)null===t.Lb(n=o[u])&&zo(t,n,e)}function KM(t,e,n){t.cr(n,t.Mt(e)),t.Cw(n,t.xy(e)),t.Hw(n,t.Ay(e)),t.ju(n,t.Df(e)),t.Dw(n,t.yy(e)),t.Iw(n,t.By(e))}sn.className="Binding",sn.parseEnum=function(t,e){return function(n){return null===(n=Qs(t,n))?e:n}},sn.toString=Pr,sn.OneWay=u1,sn.TwoWay=Rm,Y(Vt,dt),Vt.constructGraphLinksModel=dt.constructGraphLinksModel,Vt.prototype.cloneProtected=function(t){dt.prototype.cloneProtected.call(this,t),t.Gi=this.Gi,t.Rl=this.Rl,t.hl=this.hl,t.bf=this.bf,t.cf=this.cf,t.Uj=this.Uj,t.Vj=this.Vj,t.Tj=this.Tj,t.$d=this.$d,t.Vl=this.Vl,t.ze=this.ze,t.Cn=this.Cn},(D=Vt.prototype).clear=function(){dt.prototype.clear.call(this),this.bd=[],this.gb.clear(),this.cg.clear()},D.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.gr();var e=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){e+="\n node data:";var o,n=(t=this.nodeDataArray).length;for(o=0;o<n;o++){var a=t[o];e+=" "+this.ja(a)+":"+Pr(a)}for(e+="\n link data:",n=(t=this.linkDataArray).length,o=0;o<n;o++)e+=" "+or(this,a=t[o],!0)+"--\x3e"+or(this,a,!1)}return e},D.Zw=function(t,e){""===this.linkKeyProperty&&W("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var n=dt.prototype.Zw.call(this,t,e),o=this,a=new nt,u=new nt,h=new nt,f=this.Xh;t.changes.each(function(y){y.model===o&&("linkDataArray"===y.modelChange?y.change===rn?a.add(y.newValue):y.change===be&&h.add(y.oldValue):o.xc(y.object)?u.add(y.object):null!==y.object&&(null!==y.object&&f&&f.contains(y.object)?f.get(y.object).each(function(v){o.xc(v)&&u.add(v)}):y.object instanceof dt||o.$a(y.object)||WM(o,y.object).each(function(v){u.add(v)})))});var p=this.Ki;p.clear(),a.each(function(y){p.add(o.Wb(y)),e||u.add(y)});var g=this.Ni;return g.clear(),h.each(function(y){g.add(o.Wb(y)),e&&u.add(y)}),t=o.cloneDeep(u.ma()),0<p.count&&(null===n&&(n={}),e?n.removedLinkKeys=p.ma():n.insertedLinkKeys=p.ma()),0<t.length&&(null===n&&(n={}),n.modifiedLinkData=t),0<g.count&&(null===n&&(n={}),e?n.insertedLinkKeys=g.ma():n.removedLinkKeys=g.ma()),g.clear(),p.clear(),n},D.Vk=function(){var t=dt.prototype.Vk.call(this),e="";return"category"!==this.linkCategoryProperty&&"string"==typeof this.linkCategoryProperty&&(e+=',\n  "linkCategoryProperty": '+this.quote(this.linkCategoryProperty)),""!==this.linkKeyProperty&&"string"==typeof this.linkKeyProperty&&(e+=',\n  "linkKeyProperty": '+this.quote(this.linkKeyProperty)),"from"!==this.linkFromKeyProperty&&"string"==typeof this.linkFromKeyProperty&&(e+=',\n  "linkFromKeyProperty": '+this.quote(this.linkFromKeyProperty)),"to"!==this.linkToKeyProperty&&"string"==typeof this.linkToKeyProperty&&(e+=',\n  "linkToKeyProperty": '+this.quote(this.linkToKeyProperty)),""!==this.linkFromPortIdProperty&&"string"==typeof this.linkFromPortIdProperty&&(e+=',\n  "linkFromPortIdProperty": '+this.quote(this.linkFromPortIdProperty)),""!==this.linkToPortIdProperty&&"string"==typeof this.linkToPortIdProperty&&(e+=',\n  "linkToPortIdProperty": '+this.quote(this.linkToPortIdProperty)),""!==this.linkLabelKeysProperty&&"string"==typeof this.linkLabelKeysProperty&&(e+=',\n  "linkLabelKeysProperty": '+this.quote(this.linkLabelKeysProperty)),"isGroup"!==this.nodeIsGroupProperty&&"string"==typeof this.nodeIsGroupProperty&&(e+=',\n  "nodeIsGroupProperty": '+this.quote(this.nodeIsGroupProperty)),"group"!==this.nodeGroupKeyProperty&&"string"==typeof this.nodeGroupKeyProperty&&(e+=',\n  "nodeGroupKeyProperty": '+this.quote(this.nodeGroupKeyProperty)),t+e},D.Xq=function(t){dt.prototype.Xq.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},D.$w=function(){return dt.prototype.$w.call(this)+',\n  "linkDataArray": '+lo(this,this.linkDataArray,!0)},D.qw=function(t){dt.prototype.qw.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.Nm(t),this.linkDataArray=t)},D.lr=function(t){if(!(t instanceof Vt))return W("Model.computeJsonDifference: newmodel must be a GraphLinksModel"),"";""===this.linkKeyProperty&&W("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var e=dt.prototype.lr.call(this,t);zu(this,t,"linkKeyProperty"),zu(this,t,"linkFromKeyProperty"),zu(this,t,"linkToKeyProperty"),zu(this,t,"linkLabelKeysProperty"),zu(this,t,"nodeIsGroupProperty"),zu(this,t,"nodeGroupKeyProperty");var n=this.Ki;n.clear();var o=new nt,a=this.Ni;a.clear(),a.addAll(this.gb.iteratorKeys);for(var u=new Et,h=t.linkDataArray,f=h.length,p=0;p<f;p++){var g=h[p],y=t.Wb(g);if(void 0!==y){a.remove(y);var v=this.Eg(y);null===v?(n.add(y),o.add(g)):zh(this,v,g,u)||o.add(g)}else this.Qq(g),y=this.Wb(g),n.add(y),o.add(g)}return t=e,0<n.count&&(t+=this.ru+lo(this,n.ma(),!0)),0<o.count&&(t+=this.lx+lo(this,o.ma(),!0)),0<a.count&&(t+=this.tu+lo(this,a.ma(),!0)),a.clear(),n.clear(),t},D.Yw=function(t,e){""===this.linkKeyProperty&&W("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var n=dt.prototype.Yw.call(this,t,e),o=this,a=new nt,u=new nt,h=new nt,f=this.Xh;t.changes.each(function(y){y.model===o&&("linkDataArray"===y.modelChange?y.change===rn?a.add(y.newValue):y.change===be&&h.add(y.oldValue):o.xc(y.object)?u.add(y.object):null!==y.object&&(null!==y.object&&f&&f.contains(y.object)?f.get(y.object).each(function(v){o.xc(v)&&u.add(v)}):y.object instanceof dt||o.$a(y.object)||WM(o,y.object).each(function(v){u.add(v)})))});var p=this.Ki;p.clear(),a.each(function(y){p.add(o.Wb(y)),e||u.add(y)});var g=this.Ni;return g.clear(),h.each(function(y){g.add(o.Wb(y)),e&&u.add(y)}),t=n,0<p.count&&(t+=(e?this.tu:this.ru)+lo(this,p.ma(),!0)),0<u.count&&(t+=this.lx+lo(this,u.ma(),!0)),0<g.count&&(t+=(e?this.ru:this.tu)+lo(this,g.ma(),!0)),g.clear(),p.clear(),t},D.Wq=function(t){(void 0!==t.linkCategoryProperty&&t.linkCategoryProperty!==this.linkCategoryProperty||void 0!==t.linkKeyProperty&&t.linkKeyProperty!==this.linkKeyProperty||void 0!==t.linkFromKeyProperty&&t.linkFromKeyProperty!==this.linkFromKeyProperty||void 0!==t.linkToKeyProperty&&t.linkToKeyProperty!==this.linkToKeyProperty||void 0!==t.linkFromPortIdProperty&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||void 0!==t.linkToPortIdProperty&&t.linkToPortIdProperty!==this.linkToPortIdProperty||void 0!==t.linkLabelKeysProperty&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||void 0!==t.nodeIsGroupProperty&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||void 0!==t.nodeGroupKeyProperty&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&W("applyIncrementalJson cannot change Model properties"),dt.prototype.Wq.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var n=e.length,o=0;o<n;o++){var a=e[o],u=this.Eg(a);null===u&&(u=this.xq({}),this.iu(u,a),this.bj(u))}if(e=t.modifiedLinkData,Array.isArray(e))for(n=e.length,o=0;o<n;o++)if(u=this.Wb(a=e[o]),null!==(u=this.Eg(u))){for(var h in a)"__gohashid"!==h&&h!==this.linkKeyProperty&&this.setDataProperty(u,h,a[h]);KM(this,a,u)}if(t=t.removedLinkKeys,Array.isArray(t))for(h=t.length,e=0;e<h;e++)null!==(n=this.Eg(t[e]))&&this.Lm(n)},Vt.prototype.changeState=function(t,e){if(null!==t&&t.model===this){if(t.change===Me){var n=t.object,o=t.propertyName;if(o===this.linkKeyProperty&&this.xc(n)){var a=t.H(e);return void 0!==(e=t.H(!e))&&this.gb.remove(e),void 0!==a&&this.gb.add(a,n),void ce(n,o,a)}}else if(t.change===rn){if(n=t.newParam,"linkDataArray"===t.modelChange)return void($t(t=t.newValue)&&"number"==typeof n&&(o=this.Wb(t),e?(this.cg.remove(t),this.bd[n]===t&&this.bd.splice(n,1),void 0!==o&&this.gb.remove(o)):(this.cg.add(t),this.bd[n]!==t&&this.bd.splice(n,0,t),void 0!==o&&this.gb.add(o,t))));if("linkLabelKeys"===t.modelChange)return o=this.Df(t.object),void(Array.isArray(o)&&"number"==typeof n&&(e?(n=o.indexOf(t.newValue),0<=n&&o.splice(n,1)):0>o.indexOf(t.newValue)&&o.splice(n,0,t.newValue)))}else if(t.change===be){if(n=t.oldParam,"linkDataArray"===t.modelChange)return void($t(t=t.oldValue)&&"number"==typeof n&&(o=this.Wb(t),e?(this.cg.add(t),this.bd[n]!==t&&this.bd.splice(n,0,t),void 0!==o&&this.gb.add(o,t)):(this.cg.remove(t),this.bd[n]===t&&this.bd.splice(n,1),void 0!==o&&this.gb.remove(o))));if("linkLabelKeys"===t.modelChange)return o=this.Df(t.object),void(Array.isArray(o)&&"number"==typeof n&&(e?0>o.indexOf(t.newValue)&&o.splice(n,0,t.newValue):(n=o.indexOf(t.newValue),0<=n&&o.splice(n,1))))}dt.prototype.changeState.call(this,t,e)}},(D=Vt.prototype).Fm=function(t){if(void 0!==t){var e=this.Aj;if(null!==e){var n=this.Lb(t);null===n&&(ce(n=this.copyNodeData(e),this.nodeKeyProperty,t),this.wf(n))}return t}},D.xy=function(t){return or(this,t,!0)},D.Cw=function(t,e){vf(this,t,e,!0)},D.Ay=function(t){return or(this,t,!1)},D.Hw=function(t,e){vf(this,t,e,!1)},D.yy=function(t){return vp(this,t,!0)},D.Dw=function(t,e){Wh(this,t,e,!0)},D.By=function(t){return vp(this,t,!1)},D.Iw=function(t,e){Wh(this,t,e,!1)},D.Df=function(t){if(null===t)return wp;var e=this.$d;return""===e||void 0===(t=Qe(t,e))?wp:t},D.ju=function(t,e){if(null!==t){var n=this.$d;if(""!==n)if(this.xc(t)){var o=Qe(t,n);if(void 0===o&&(o=wp),o!==e){if(Array.isArray(o))for(var a=o.length,u=0;u<a;u++)mn(this,o[u],t);for(ce(t,n,e),a=e.length,u=0;u<a;u++){var h=e[u];null===this.Lb(h)&&zo(this,h,t)}We(this,"linkLabelKeys",Me,n,t,o,e),"string"==typeof n&&this.Ca(t,n)}}else ce(t,n,e)}},D.Cv=function(t,e){if(null!=e&&null!==t){var n=this.$d;if(""!==n){var o=Qe(t,n);if(void 0===o)(n=[]).push(e),this.ju(t,n);else if(Array.isArray(o)){var a=o.indexOf(e);0<=a||(a=o.length,o.push(e),this.xc(t)&&(null===this.Lb(e)&&zo(this,e,t),We(this,"linkLabelKeys",rn,n,t,null,e,null,a)))}else W(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},D.Py=function(t,e){if(null!=e&&null!==t){var n=this.$d;if(""!==n){var o=Qe(t,n);if(Array.isArray(o)){var a=o.indexOf(e);0>a||(o.splice(a,1),this.xc(t)&&(mn(this,e,t),We(this,"linkLabelKeys",be,n,t,e,null,a,null)))}else void 0!==o&&W(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},D.Wb=function(t){if(null!==t){var e=this.Gi;if(""!==e&&void 0!==(e=Qe(t,e))){if(Xl(e))return e;W("Key value for link data "+t+" is not a number or a string: "+e)}}},D.iu=function(t,e){if(null!==t){var n=this.Gi;if(""!==n)if(this.xc(t)){var o=Qe(t,n);o!==e&&null===this.Eg(e)&&(ce(t,n,e),void 0!==o&&this.gb.remove(o),this.gb.add(e,t),We(this,"linkKey",Me,n,t,o,e),"string"==typeof n&&this.Ca(t,n))}else ce(t,n,e)}},D.Eg=function(t){return null===t&&W("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&Xl(t)?this.gb.H(t):null},D.Qq=function(t){if(null!==t){var e=this.Gi;if(""!==e){var n=this.Wb(t);if(void 0===n||this.gb.contains(n)){var o=this.Rl;if(null!==o&&null!=(n=o(this,t))&&!this.gb.contains(n))return void ce(t,e,n);if("string"==typeof n){for(o=2;this.gb.contains(n+o);)o++;ce(t,e,n+o)}else if(void 0===n||"number"==typeof n){for(n=-this.gb.count-1;this.gb.contains(n);)n--;ce(t,e,n)}}}}},D.xc=function(t){return null!==t&&this.cg.contains(t)},D.bj=function(t){null!==t&&(pi(t),this.xc(t)||XM(this,t,!0))},D.pz=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.bj(t[n]);else for(t=t.iterator;t.next();)this.bj(t.value)},D.Lm=function(t){null!==t&&Fs(this,t,!0)},D.TA=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Lm(t[n]);else for(t=t.iterator;t.next();)this.Lm(t.value)},D.JA=function(t){if(""===this.linkKeyProperty&&W("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&Dn(t)){var e=this.Ni;e.clear(),e.addAll(this.gb.iteratorKeys);var n=this.Ki;n.clear();for(var o=t.length,a=0;a<o;a++){var u=t[a],h=this.Wb(u);if(void 0!==h){n.add(h);var f=this.Eg(h);f!==u&&(null!==f?(this.sq(f,u),KM(this,u,f)):(u=this.cloneDeep(u),this.iu(u,h),this.bj(u)))}else h=this.cloneDeep(u),this.bj(h),n.add(this.Wb(h))}for(t=e.iterator;t.next();)n.contains(o=t.value)||(o=this.Eg(o))&&this.Lm(o);e.clear(),n.clear()}},D.xq=function(t){if(null===t)return null;var e=this.hl;return $t(t=null!==e?e(t,this):yp(this,t,!0))&&(wn(t),""!==this.bf&&ce(t,this.bf,void 0),""!==this.cf&&ce(t,this.cf,void 0),""!==this.$d&&ce(t,this.$d,[])),t},D.ew=function(t){if(null===t)return!1;var e=this.Vl;return""!==e&&!!Qe(t,e)},D.Kh=function(t){if(null!==t){var e=this.ze;if(""!==e&&void 0!==(e=Qe(t,e))){if(Xl(e))return e;W("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},D.dr=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.ze;if(""!==n)if(this.$a(t)){var o=Qe(t,n);o!==e&&(mn(this,o,t),ce(t,n,e),null===this.Lb(e)&&zo(this,e,t),We(this,"nodeGroupKey",Me,n,t,o,e),"string"==typeof n&&this.Ca(t,n))}else ce(t,n,e)}},Vt.prototype.copyNodeData=function(t){return null===t?null:(t=dt.prototype.copyNodeData.call(this,t),this.rk||""===this.ze||void 0===Qe(t,this.ze)||ce(t,this.ze,void 0),t)},Vt.prototype.setDataProperty=function(t,e,n){if(this.$a(t)){if(e===this.nodeKeyProperty)return void this.Um(t,n);if(e===this.nodeCategoryProperty)return void this.Tm(t,n);if(e===this.nodeGroupKeyProperty)return void this.dr(t,n)}else if(this.xc(t)){if(e===this.linkFromKeyProperty)return void vf(this,t,n,!0);if(e===this.linkToKeyProperty)return void vf(this,t,n,!1);if(e===this.linkFromPortIdProperty)return void Wh(this,t,n,!0);if(e===this.linkToPortIdProperty)return void Wh(this,t,n,!1);if(e===this.linkKeyProperty)return void this.iu(t,n);if(e===this.linkCategoryProperty)return void this.cr(t,n);if(e===this.linkLabelKeysProperty)return void this.ju(t,n)}var o=Qe(t,e);o!==n&&(ce(t,e,n),this.du(t,e,o,n))},(D=Vt.prototype).sq=function(t,e){if(e){var a,n=this.$a(t),o=this.xc(t);for(a in e)"__gohashid"===a||n&&a===this.nodeKeyProperty||n&&a===this.nodeIsGroupProperty&&Qe(t,a)===e[a]||o&&a===this.linkKeyProperty||this.setDataProperty(t,a,e[a])}},D.ar=function(t,e){dt.prototype.ar.call(this,t,e);for(var n=this.Va.iterator;n.next();)this.ww(n.value,t,e);for(n=this.cg.iterator;n.next();){var o=n.value,a=t,u=e;if(or(this,o,!0)===a){var h=this.bf;ce(o,h,u),We(this,"linkFromKey",Me,h,o,a,u),"string"==typeof h&&this.Ca(o,h)}if(or(this,o,!1)===a&&(ce(o,h=this.cf,u),We(this,"linkToKey",Me,h,o,a,u),"string"==typeof h&&this.Ca(o,h)),h=this.Df(o),Array.isArray(h))for(var f=h.length,p=this.$d,g=0;g<f;g++)h[g]===a&&(h[g]=u,We(this,"linkLabelKeys",rn,p,o,a,u,g,g))}},D.ww=function(t,e,n){if(this.Kh(t)===e){var o=this.ze;ce(t,o,n),We(this,"nodeGroupKey",Me,o,t,e,n),"string"==typeof o&&this.Ca(t,o)}},D.Tw=function(){dt.prototype.Tw.call(this);for(var t=this.linkDataArray,e=t.length,n=0;n<e;n++)h1(this,t[n])},D.Pm=function(t){dt.prototype.Pm.call(this,t);var e=$h(this,t=this.ja(t));if(null!==e){var n=ye();for(e=e.iterator;e.next();){var o=e.value;if(this.$a(o)){if(this.Kh(o)===t){var a=this.ze;We(this,"nodeGroupKey",Me,a,o,t,t),"string"==typeof a&&this.Ca(o,a),n.push(o)}}else if(or(this,o,!0)===t&&(We(this,"linkFromKey",Me,a=this.bf,o,t,t),"string"==typeof a&&this.Ca(o,a),n.push(o)),or(this,o,!1)===t&&(We(this,"linkToKey",Me,a=this.cf,o,t,t),"string"==typeof a&&this.Ca(o,a),n.push(o)),a=this.Df(o),Array.isArray(a))for(var u=a.length,h=this.$d,f=0;f<u;f++)a[f]===t&&(We(this,"linkLabelKeys",rn,h,o,t,t,f,f),n.push(o))}for(e=0;e<n.length;e++)mn(this,t,n[e]);Jt(n)}},D.Om=function(t){dt.prototype.Om.call(this,t);var e=this.Kh(t);null===this.Lb(e)&&zo(this,e,t)},D.ir=function(t){dt.prototype.ir.call(this,t),mn(this,this.Kh(t),t)},D.Mt=function(t){if(null===t)return"";var e=this.Tj;return""===e||void 0===(e=Qe(t,e))?"":"string"==typeof e?e:(W("getCategoryForLinkData found a non-string category for "+t+": "+e),"")},Vt.prototype.getLinkCategoryForData=function(t){return this.Mt(t)},Vt.prototype.cr=function(t,e){if(null!==t){var n=this.Tj;if(""!==n)if(this.xc(t)){var o=Qe(t,n);void 0===o&&(o=""),o!==e&&(ce(t,n,e),We(this,"linkCategory",Me,n,t,o,e),"string"==typeof n&&this.Ca(t,n))}else ce(t,n,e)}},Vt.prototype.setLinkCategoryForData=function(t,e){this.cr(t,e)},(D=Vt.prototype).Vm=function(t,e){dt.prototype.Vm.call(this,t,e),this.dr(e,this.Kh(t))},D.Bk=function(){return!0},D.qj=function(){return!0},D.Vt=function(){return!0},D.Ck=function(){return!0},L.Object.defineProperties(Vt.prototype,{archetypeNodeData:{get:function(){return this.Aj},set:function(t){var e=this.Aj;e!==t&&(this.Aj=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.bf},set:function(t){var e=this.bf;e!==t&&(this.bf=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.cf},set:function(t){var e=this.cf;e!==t&&(this.cf=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.Uj},set:function(t){var e=this.Uj;e!==t&&(this.Uj=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.Vj},set:function(t){var e=this.Vj;e!==t&&(this.Vj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.$d},set:function(t){var e=this.$d;e!==t&&(this.$d=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.bd},set:function(t){var e=this.bd;if(e!==t){this.gb.clear();for(var n=t.length,o=0;o<n;o++){var a=t[o];if(!$t(a))return void W("GraphLinksModel.linkDataArray must only contain Objects, not: "+a);pi(a)}if(this.bd=t,""!==this.linkKeyProperty){for(o=new lt,a=0;a<n;a++){var u=t[a],h=this.Wb(u);void 0===h||null!==this.gb.H(h)?o.add(u):this.gb.add(h,u)}for(o=o.iterator;o.next();)this.Qq(a=o.value),void 0!==(u=this.Wb(a))&&this.gb.add(u,a)}for(o=new nt,a=0;a<n;a++)o.add(t[a]);for(this.cg=o,We(this,"linkDataArray",Me,"linkDataArray",this,e,t),e=0;e<n;e++)h1(this,t[e])}}},linkKeyProperty:{get:function(){return this.Gi},set:function(t){var e=this.Gi;if(e!==t){this.Gi=t,this.gb.clear();for(var n=this.linkDataArray.length,o=0;o<n;o++){var a=this.linkDataArray[o],u=this.Wb(a);void 0===u&&(this.Qq(a),u=this.Wb(a)),void 0!==u&&this.gb.add(u,a)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.Rl},set:function(t){var e=this.Rl;e!==t&&(this.Rl=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.hl},set:function(t){var e=this.hl;e!==t&&(this.hl=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.Vl},set:function(t){var e=this.Vl;e!==t&&(this.Vl=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.ze},set:function(t){var e=this.ze;e!==t&&(this.ze=t,this.g("nodeGroupKeyProperty",e,t))}},rk:{get:function(){return this.Cn},set:function(t){this.Cn!==t&&(this.Cn=t)}},linkCategoryProperty:{get:function(){return this.Tj},set:function(t){var e=this.Tj;e!==t&&(this.Tj=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),Vt.prototype.setCategoryForLinkData=Vt.prototype.cr,Vt.prototype.getCategoryForLinkData=Vt.prototype.Mt,Vt.prototype.assignAllDataProperties=Vt.prototype.sq,Vt.prototype.setGroupKeyForNodeData=Vt.prototype.dr,Vt.prototype.getGroupKeyForNodeData=Vt.prototype.Kh,Vt.prototype.isGroupForNodeData=Vt.prototype.ew,Vt.prototype.copyLinkData=Vt.prototype.xq,Vt.prototype.mergeLinkDataArray=Vt.prototype.JA,Vt.prototype.removeLinkDataCollection=Vt.prototype.TA,Vt.prototype.removeLinkData=Vt.prototype.Lm,Vt.prototype.addLinkDataCollection=Vt.prototype.pz,Vt.prototype.addLinkData=Vt.prototype.bj,Vt.prototype.containsLinkData=Vt.prototype.xc,Vt.prototype.makeLinkDataKeyUnique=Vt.prototype.Qq,Vt.prototype.findLinkDataForKey=Vt.prototype.Eg,Vt.prototype.setKeyForLinkData=Vt.prototype.iu,Vt.prototype.getKeyForLinkData=Vt.prototype.Wb,Vt.prototype.removeLabelKeyForLinkData=Vt.prototype.Py,Vt.prototype.addLabelKeyForLinkData=Vt.prototype.Cv,Vt.prototype.setLabelKeysForLinkData=Vt.prototype.ju,Vt.prototype.getLabelKeysForLinkData=Vt.prototype.Df,Vt.prototype.setToPortIdForLinkData=Vt.prototype.Iw,Vt.prototype.getToPortIdForLinkData=Vt.prototype.By,Vt.prototype.setFromPortIdForLinkData=Vt.prototype.Dw,Vt.prototype.getFromPortIdForLinkData=Vt.prototype.yy,Vt.prototype.setToKeyForLinkData=Vt.prototype.Hw,Vt.prototype.getToKeyForLinkData=Vt.prototype.Ay,Vt.prototype.setFromKeyForLinkData=Vt.prototype.Cw,Vt.prototype.getFromKeyForLinkData=Vt.prototype.xy,Vt.prototype.clear=Vt.prototype.clear;var wp=Object.freeze([]);function xi(t){dt.call(this),this.Ae="parent",this.En=!1,this.$j="parentLinkCategory",void 0!==t&&(this.nodeDataArray=t)}function Te(){Wt.call(this),this.xx=this.Sn=this.$b=0,this.Vr=360,this.wx=Rr,this.Ij=0,this.nx=new A,this.Hr=this.ae=0,this.ut=new pl,this.Au=this.Zj=0,this.gz=600,this.vp=NaN,this.nn=1,this.Zp=0,this.lm=360,this.Fb=Rr,this.K=Ai,this.dd=Wr,this.Yc=C0,this.mf=6,this.ep=Xr}function xp(t,e,n,o,a){var u=t.Vr,h=t.$b;t=t.ae,o=o*Math.PI/180,n=n*Math.PI/180;for(var f=e.length,p=0;p<f;p++){var g=o+(a===Ai?p*n/(360<=u?f:f-1):-p*n/f),y=e.J(p),v=h*Math.tan(g)/t;v=Math.sqrt((h*h+t*t*v*v)/(1+v*v)),y.centerX=v*Math.cos(g),y.centerY=v*Math.sin(g),y.actualAngle=180*g/Math.PI}}function jm(t,e,n,o){var a=t.$b,u=t.ae,h=t.Ij;n=n*Math.PI/180;for(var f=e.length,p=0;p<f;p++){var g=e.J(p),y=e.J(p===f-1?0:p+1),v=u*Math.sin(n);g.centerX=a*Math.cos(n),g.centerY=v,g.actualAngle=180*n/Math.PI,isNaN(g.diameter)&&Yo(g,0),isNaN(y.diameter)&&Yo(y,0),g=Um(t,a,u,o===Ai?n:-n,(g.diameter+y.diameter)/2+h),n+=o===Ai?g:-g}}function wf(t,e,n,o){var a=t.$b,u=t.ae,h=t.Hr;n=n*Math.PI/180;for(var f=e.length,p=0;p<f;p++){var g=e.J(p);g.centerX=a*Math.cos(n),g.centerY=u*Math.sin(n),g.actualAngle=180*n/Math.PI,g=Um(t,a,u,o===Ai?n:-n,h),n+=o===Ai?g:-g}}function In(t,e,n,o,a){var u=t.Vr;if(t.Zj=0,t.ut=new pl,360>n){for(u=o+(a===Ai?u:-u);0>u;)u+=360;180<(u%=360)&&(u-=360),u*=Math.PI/180,t.Au=u,Bm(t,e,n,o,a)}else c1(t,e,n,o,a);t.ut.commit(e)}function c1(t,e,n,o,a){var u=t.$b,h=t.Ij,f=t.Sn,p=u*Math.cos(o*Math.PI/180),g=t.ae*Math.sin(o*Math.PI/180),y=e.ma();if(3===y.length)y[0].centerX=u,y[0].centerY=0,y[1].centerX=y[0].centerX-y[0].width/2-y[1].width/2-h,y[1].y=y[0].y,y[2].centerX=(y[0].centerX+y[1].centerX)/2,y[2].y=y[0].y-y[2].height-h;else if(4===y.length)y[0].centerX=u,y[0].centerY=0,y[2].centerX=-y[0].centerX,y[2].centerY=y[0].centerY,y[1].centerX=0,y[1].y=Math.min(y[0].y,y[2].y)-y[1].height-h,y[3].centerX=0,y[3].y=Math.max(y[0].y+y[0].height+h,y[2].y+y[2].height+h);else{u=A.alloc();for(var v=0;v<y.length&&(y[v].centerX=p,y[v].centerY=g,!(v>=y.length-1));v++)f1(t,p,g,y,v,a,u)||d1(t,p,g,y,v,a,u),p=u.x,g=u.y;if(A.free(u),t.Zj++,!(23<t.Zj)){p=y[0].centerX,g=y[0].centerY,u=y[y.length-1].centerX,v=y[y.length-1].centerY;var x=Math.abs(p-u)-((y[0].width+y[y.length-1].width)/2+h),S=Math.abs(g-v)-((y[0].height+y[y.length-1].height)/2+h);h=0,1>Math.abs(S)?Math.abs(p-u)<(y[0].width+y[y.length-1].width)/2&&(h=0):h=0<S?S:1>Math.abs(x)?0:x,p=Math.abs(u)>Math.abs(v)?0<u!=g>v:0<v!=p<u,(p=a===Ai?p:!p)&&(h=-Math.abs(h),h=Math.min(h,-y[y.length-1].width),h=Math.min(h,-y[y.length-1].height)),t.ut.compare(h,y),1<Math.abs(h)&&(t.$b=8>t.Zj?t.$b-h/(2*Math.PI):5>y.length&&10<h?t.$b/2:t.$b-(0<h?1.7:-2.3),t.ae=t.$b*f,c1(t,e,n,o,a))}}}function Bm(t,e,n,o,a){for(var u=t.$b,h=t.ae,f=t.Sn,p=u*Math.cos(o*Math.PI/180),g=h*Math.sin(o*Math.PI/180),y=A.alloc(),v=e.ma(),x=0;x<v.length&&(v[x].centerX=p,v[x].centerY=g,!(x>=v.length-1));x++)f1(t,p,g,v,x,a,y)||d1(t,p,g,v,x,a,y),p=y.x,g=y.y;if(A.free(y),t.Zj++,!(23<t.Zj)){if(p=Math.atan2(g,p),p=a===Ai?t.Au-p:p-t.Au,u=(p=Math.abs(p)<Math.abs(p-2*Math.PI)?p:p-2*Math.PI)*(u+h)/2,h=t.ut,Math.abs(u)<Math.abs(h.Am))for(h.Am=u,h.Wk=[],h.an=[],p=0;p<v.length;p++)h.Wk[p]=v[p].bounds.x,h.an[p]=v[p].bounds.y;1<Math.abs(u)&&(t.$b=8>t.Zj?t.$b-u/(2*Math.PI):t.$b-(0<u?1.7:-2.3),t.ae=t.$b*f,Bm(t,e,n,o,a))}}function f1(t,e,n,o,a,u,h){var f=t.$b,p=t.ae,g=0;t=(o[a].width+o[a+1].width)/2+t.Ij;var y=!1;if(0<=n!=(u===Ai)){if((u=e+t)>f){if((u=e-t)<-f)return h.x=u,h.y=g,!1;y=!0}}else if((u=e-t)<-f){if((u=e+t)>f)return h.x=u,h.y=g,!1;y=!0}return g=Math.sqrt(1-Math.min(1,u*u/(f*f)))*p,0>n!==y&&(g=-g),Math.abs(n-g)>(o[a].height+o[a+1].height)/2?(h.x=u,h.y=g,!1):(h.x=u,h.y=g,!0)}function d1(t,e,n,o,a,u,h){var f=t.$b,p=t.ae,g=0;if(t=(o[a].height+o[a+1].height)/2+t.Ij,o=!1,0<=e!=(u===Ai)){if((u=n-t)<-p){if((u=n+t)>p)return h.x=g,void(h.y=u);o=!0}}else if((u=n+t)>p){if((u=n-t)<-p)return h.x=g,void(h.y=u);o=!0}g=Math.sqrt(1-Math.min(1,u*u/(p*p)))*f,0>e!==o&&(g=-g),h.x=g,h.y=u}function E0(t,e,n,o,a){var u=t.gz;if(.001>Math.abs(t.Sn-1))return void 0!==o&&void 0!==a?a*e:2*Math.PI*e;t=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n;for(var h=0,f=void 0!==o&&void 0!==a?a/(u+1):Math.PI/(2*(u+1)),p=0,g=0;g<=u;g++){p=void 0!==o&&void 0!==a?o+g*a/u:g*Math.PI/(2*u);var y=Math.sin(p);h+=Math.sqrt(1-t*t*y*y)*f}return void 0!==o&&void 0!==a?(e>n?e:n)*h:4*(e>n?e:n)*h}function Vm(t,e,n,o,a){return e/(void 0!==o&&void 0!==a?E0(t,1,n,o,a):E0(t,1,n))}function Um(t,e,n,o,a){if(.001>Math.abs(t.Sn-1))return a/e;var u=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n,h=0;t=2*Math.PI/(700*t.network.vertexes.count),e>n&&(o+=Math.PI/2);for(var f=0;;f++){var p=Math.sin(o+f*t);if((h+=(e>n?e:n)*Math.sqrt(1-u*u*p*p)*t)>=a)return f*t}}Vt.className="GraphLinksModel",Co.GraphLinksModel=Vt,dt.constructGraphLinksModel=dt.constructGraphLinksModel=function(){return new Vt},dt.initDiagramModel=Lm=function(){return new Vt},Y(xi,dt),xi.constructGraphLinksModel=dt.constructGraphLinksModel,xi.prototype.cloneProtected=function(t){dt.prototype.cloneProtected.call(this,t),t.Ae=this.Ae,t.En=this.En,t.$j=this.$j},(D=xi.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.gr();var e=(""!==this.name?this.name:"")+" TreeModel";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,o=0;o<n;o++){var a=t[o];e+=" "+this.ja(a)+":"+Pr(a)}}return e},D.Vk=function(){var t=dt.prototype.Vk.call(this),e="";return"parent"!==this.nodeParentKeyProperty&&"string"==typeof this.nodeParentKeyProperty&&(e+=',\n  "nodeParentKeyProperty": '+this.quote(this.nodeParentKeyProperty)),t+e},D.Xq=function(t){dt.prototype.Xq.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},D.lr=function(t){return zu(this,t,"nodeParentKeyProperty"),dt.prototype.lr.call(this,t)},D.Wq=function(t){void 0!==t.nodeParentKeyProperty&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&W("applyIncrementalJson cannot change Model properties"),dt.prototype.Wq.call(this,t)},D.Fm=function(t){return t},D.Lh=function(t){if(null!==t){var e=this.Ae;if(""!==e&&void 0!==(e=Qe(t,e))){if(Xl(e))return e;W("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},D.fe=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.Ae;if(""!==n)if(e=this.Fm(e),this.$a(t)){var o=Qe(t,n);o!==e&&(mn(this,o,t),ce(t,n,e),null===this.Lb(e)&&zo(this,e,t),We(this,"nodeParentKey",Me,n,t,o,e),"string"==typeof n&&this.Ca(t,n))}else ce(t,n,e)}},D.Pt=function(t){if(null===t)return"";var e=this.$j;return""===e||void 0===(e=Qe(t,e))?"":"string"==typeof e?e:(W("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},xi.prototype.getLinkCategoryForData=function(t){return this.Pt(t)},xi.prototype.ku=function(t,e){if(null!==t){var n=this.$j;if(""!==n)if(this.$a(t)){var o=Qe(t,n);void 0===o&&(o=""),o!==e&&(ce(t,n,e),We(this,"parentLinkCategory",Me,n,t,o,e),"string"==typeof n&&this.Ca(t,n))}else ce(t,n,e)}},xi.prototype.setLinkCategoryForData=function(t,e){this.ku(t,e)},xi.prototype.copyNodeData=function(t){return null===t?null:(t=dt.prototype.copyNodeData.call(this,t),this.sk||""===this.Ae||void 0===Qe(t,this.Ae)||ce(t,this.Ae,void 0),t)},xi.prototype.setDataProperty=function(t,e,n){if(this.$a(t)){if(e===this.nodeKeyProperty)return void this.Um(t,n);if(e===this.nodeCategoryProperty)return void this.Tm(t,n);if(e===this.nodeParentKeyProperty)return void this.fe(t,n)}var o=Qe(t,e);o!==n&&(ce(t,e,n),this.du(t,e,o,n))},(D=xi.prototype).ar=function(t,e){dt.prototype.ar.call(this,t,e);for(var n=this.Va.iterator;n.next();)this.ww(n.value,t,e)},D.ww=function(t,e,n){if(this.Lh(t)===e){var o=this.Ae;ce(t,o,n),We(this,"nodeParentKey",Me,o,t,e,n),"string"==typeof o&&this.Ca(t,o)}},D.Pm=function(t){dt.prototype.Pm.call(this,t);var e=$h(this,t=this.ja(t));if(null!==e){var n=ye();for(e=e.iterator;e.next();){var o=e.value;if(this.$a(o)&&this.Lh(o)===t){var a=this.Ae;We(this,"nodeParentKey",Me,a,o,t,t),"string"==typeof a&&this.Ca(o,a),n.push(o)}}for(e=0;e<n.length;e++)mn(this,t,n[e]);Jt(n)}},D.Om=function(t){dt.prototype.Om.call(this,t);var e=this.Lh(t);e=this.Fm(e),null===this.Lb(e)&&zo(this,e,t)},D.ir=function(t){dt.prototype.ir.call(this,t),mn(this,this.Lh(t),t)},D.Vm=function(t,e){dt.prototype.Vm.call(this,t,e),this.ku(e,this.Pt(t)),this.fe(e,this.Lh(t))},D.Dm=function(){return!0},D.Vt=function(){return!0},L.Object.defineProperties(xi.prototype,{nodeParentKeyProperty:{get:function(){return this.Ae},set:function(t){var e=this.Ae;e!==t&&(this.Ae=t,this.g("nodeParentKeyProperty",e,t))}},sk:{get:function(){return this.En},set:function(t){this.En!==t&&(this.En=t)}},parentLinkCategoryProperty:{get:function(){return this.$j},set:function(t){var e=this.$j;e!==t&&(this.$j=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),xi.prototype.setParentLinkCategoryForNodeData=xi.prototype.ku,xi.prototype.getParentLinkCategoryForNodeData=xi.prototype.Pt,xi.prototype.setParentKeyForNodeData=xi.prototype.fe,xi.prototype.getParentKeyForNodeData=xi.prototype.Lh,xi.className="TreeModel",Co.TreeModel=xi,Y(Te,Wt),Te.prototype.cloneProtected=function(t){Wt.prototype.cloneProtected.call(this,t),t.vp=this.vp,t.nn=this.nn,t.Zp=this.Zp,t.lm=this.lm,t.Fb=this.Fb,t.K=this.K,t.dd=this.dd,t.Yc=this.Yc,t.mf=this.mf,t.ep=this.ep},Te.prototype.jb=function(t){t.classType===Te?t===dl||t===Xh||t===$u||t===Cr||t===Wr?this.sorting=t:t===fl||t===Mo||t===Ai||t===Kl?this.direction=t:t===cl||t===$o||t===Rr||t===xr?this.arrangement=t:(t===Rs||t===Xr)&&(this.nodeDiameterFormula=t):Wt.prototype.jb.call(this,t)},Te.prototype.createNetwork=function(){return new va(this)},Te.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),1>=(t=this.network.vertexes).count)1===t.count&&((t=t.first()).centerX=0,t.centerY=0);else{var e=new lt;e.addAll(t.iterator),t=new lt;var a,u,n=new lt,o=this.sort(e),h=this.Hr,f=this.arrangement,p=this.nodeDiameterFormula,g=this.radius;(!isFinite(g)||0>=g)&&(g=NaN);var y=this.aspectRatio;(!isFinite(y)||0>=y)&&(y=1);var v=this.startAngle;isFinite(v)||(v=0);var x=this.sweepAngle;if((!isFinite(x)||360<x||1>x)&&(x=360),e=this.spacing,isFinite(e)||(e=NaN),f===xr&&p===Rs?f=Rr:f===xr&&p!==Rs&&(f=this.arrangement),(this.direction===fl||this.direction===Mo)&&this.sorting!==Wr){for(p=0;!(p>=o.length||(t.add(o.J(p)),p+1>=o.length));p+=2)n.add(o.J(p+1));this.direction===fl?(this.arrangement===xr&&t.reverse(),(o=new lt).addAll(t),o.addAll(n)):(this.arrangement===xr&&n.reverse(),(o=new lt).addAll(n),o.addAll(t))}p=o.length;for(var S=u=a=0;S<o.length;S++){var M=v+x*u*(this.direction===Ai?1:-1)/p,T=o.J(S).diameter;isNaN(T)&&(T=Yo(o.J(S),M)),360>x&&(0===S||S===o.length-1)&&(T/=2),a+=T,u++}if(isNaN(g)||f===xr){if(isNaN(e)&&(e=6),f!==Rr&&f!==xr){for(u=-1/0,h=0;h<p;h++)S=o.J(h),a=o.J(h===p-1?0:h+1),isNaN(S.diameter)&&Yo(S,0),isNaN(a.diameter)&&Yo(a,0),u=Math.max(u,(S.diameter+a.diameter)/2);h=u+e,g=f===cl?(u+e)/(2*Math.PI/p):Vm(this,h*(360<=x?p:p-1),y,v*Math.PI/180,x*Math.PI/180)}else g=Vm(this,a+(360<=x?p:p-1)*(f!==xr?e:1.6*e),y,v*Math.PI/180,x*Math.PI/180);u=g*y}else if(S=E0(this,g,u=g*y,v*Math.PI/180,x*Math.PI/180),isNaN(e))(f===Rr||f===xr)&&(e=(S-a)/(360<=x?p:p-1));else if(f===Rr||f===xr)(S=(S-a)/(360<=x?p:p-1))<e?u=(g=Vm(this,a+e*(360<=x?p:p-1),y,v*Math.PI/180,x*Math.PI/180))*y:e=S;else{for(h=-1/0,a=0;a<p;a++)M=o.J(a),T=o.J(a===p-1?0:a+1),isNaN(M.diameter)&&Yo(M,0),isNaN(T.diameter)&&Yo(T,0),h=Math.max(h,(M.diameter+T.diameter)/2);(a=Vm(this,(h+=e)*(360<=x?p:p-1),y,v*Math.PI/180,x*Math.PI/180))>g?u=(g=a)*y:h=S/(360<=x?p:p-1)}if(this.wx=f,this.$b=g,this.Sn=y,this.xx=v,this.Vr=x,this.Ij=e,this.ae=u,this.Hr=h,e=o,o=this.wx,f=this.$b,g=this.xx,y=this.Vr,v=this.Ij,x=this.ae,p=this.Hr,this.direction!==fl&&this.direction!==Mo||o!==xr)if(this.direction===fl||this.direction===Mo){switch(h=0,o){case $o:h=180*Um(this,f,x,g,p)/Math.PI;break;case Rr:p=e=0,null!==(h=t.first())&&(e=Yo(h,Math.PI/2)),null!==(h=n.first())&&(p=Yo(h,Math.PI/2)),h=180*Um(this,f,x,g,v+(e+p)/2)/Math.PI;break;case cl:h=y/e.length}if(this.direction===fl){switch(o){case $o:wf(this,t,g,Kl);break;case Rr:jm(this,t,g,Kl);break;case cl:xp(this,t,y/2,g,Kl)}switch(o){case $o:wf(this,n,g+h,Ai);break;case Rr:jm(this,n,g+h,Ai);break;case cl:xp(this,n,y/2,g+h,Ai)}}else{switch(o){case $o:wf(this,n,g,Kl);break;case Rr:jm(this,n,g,Kl);break;case cl:xp(this,n,y/2,g,Kl)}switch(o){case $o:wf(this,t,g+h,Ai);break;case Rr:jm(this,t,g+h,Ai);break;case cl:xp(this,t,y/2,g+h,Ai)}}}else switch(o){case $o:wf(this,e,g,this.direction);break;case Rr:jm(this,e,g,this.direction);break;case cl:xp(this,e,y,g,this.direction);break;case xr:In(this,e,y,g,this.direction)}else In(this,e,y,g-y/2,Ai)}this.updateParts(),this.network=null,this.isValidLayout=!0},Te.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},Te.prototype.commitNodes=function(){var t=null!==this.group&&null!==this.group.placeholder&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,n=this.actualCenter;t?n=new A(0,0):(n.x=this.arrangementOrigin.x+this.$b,n.y=this.arrangementOrigin.y+this.ae);for(var o=this.network.vertexes.iterator;o.next();){var a=o.value;a.x+=n.x,a.y+=n.y,a.commit()}t&&(this.group.Ta(),t=this.group.position.copy(),n=this.group.location.copy(),e=e.ge(n.ge(t)),this.group.move(e),this.nx=e.ge(t))},Te.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Te.prototype.sort=function(t){switch(this.sorting){case $u:break;case Cr:t.reverse();break;case dl:t.sort(this.comparer);break;case Xh:t.sort(this.comparer),t.reverse();break;case Wr:return this.mw(function ZM(t){for(var e=[],n=0;n<t.length;n++)e.push(0);n=new lt;for(var o=0;o<t.length;o++){var a=-1,u=-1;if(0===o)for(var h=0;h<t.length;h++){var f=t.J(h).edgesCount;f>a&&(a=f,u=h)}else for(h=0;h<t.length;h++)(f=e[h])>a&&(a=f,u=h);for(n.add(t.J(u)),e[u]=-1,h=(u=t.J(u)).sourceEdges;h.next();)0>(a=t.indexOf(h.value.fromVertex))||0<=e[a]&&e[a]++;for(u=u.destinationEdges;u.next();)0>(a=t.indexOf(u.value.toVertex))||0<=e[a]&&e[a]++}return n}(t));default:W("Invalid sorting type.")}return t},Te.prototype.mw=function(t){for(var e=[],n=0;n<t.length;n++){var o=t.J(n);e[n]=[];for(var a,u=o.destinationEdges;u.next();)(a=t.indexOf(u.value.toVertex))!==n&&0>e[n].indexOf(a)&&e[n].push(a);for(o=o.sourceEdges;o.next();)(a=t.indexOf(o.value.fromVertex))!==n&&0>e[n].indexOf(a)&&e[n].push(a)}for(u=[],n=0;n<e.length;n++)u[n]=0;n=[];var h=[],f=[];o=[],a=new lt;for(var p=0,g=0;g<e.length;g++){var y=e[g].length;if(1===y)o.push(g);else if(0===y)a.add(t.J(g));else{if(0===p)n.push(g);else{for(var v=y=1/0,x=-1,S=[],M=0;M<n.length;M++)0>e[n[M]].indexOf(n[M===n.length-1?0:M+1])&&S.push(M===n.length-1?0:M+1);if(0===S.length)for(M=0;M<n.length;M++)S.push(M);for(M=0;M<S.length;M++){for(var T=S[M],N=e[g],P=0,I=0;I<h.length;I++){var O=u[h[I]],b=u[f[I]];if(O<b){var B=O;O=b}else B=b;if(B<T&&T<=O)for(b=0;b<N.length;b++){var K=N[b];0>n.indexOf(K)||B<u[K]&&u[K]<O||B===u[K]||O===u[K]||P++}else for(b=0;b<N.length;b++)0>n.indexOf(K=N[b])||B<u[K]&&u[K]<O&&B!==u[K]&&O!==u[K]&&P++}for(N=P,I=P=0;I<e[g].length;I++)0<=(B=n.indexOf(e[g][I]))&&(P+=(B=Math.abs(T-(B>=T?B+1:B)))<n.length+1-B?B:n.length+1-B);for(I=0;I<h.length;I++)(B=u[h[I]])>=T&&B++,(O=u[f[I]])>=T&&O++,B>O&&(b=O,O=B,B=b),O-B<(n.length+2)/2==(B<T&&T<=O)&&P++;(N<y||N===y&&P<v)&&(y=N,v=P,x=T)}for(n.splice(x,0,g),y=0;y<n.length;y++)u[n[y]]=y;for(y=0;y<e[g].length;y++)0<=n.indexOf(v=e[g][y])&&(h.push(g),f.push(v))}p++}}for(h=n.length;;){for(u=!0,f=0;f<o.length;f++)if(0<=(y=n.indexOf(g=e[p=o[f]][0]))){for(x=v=0;x<e[g].length;x++)0>(S=n.indexOf(e[g][x]))||S===y||(v+=S<y!=(M=S>y?S-y:y-S)>h-M?1:-1);n.splice(0>v?y:y+1,0,p),o.splice(f,1),f--}else u=!1;if(u)break;n.push(o[0]),o.splice(0,1)}for(e=0;e<n.length;e++)a.add(t.J(n[e]));return a},L.Object.defineProperties(Te.prototype,{radius:{get:function(){return this.vp},set:function(t){this.vp!==t&&(0<t||isNaN(t))&&(this.vp=t,this.C())}},aspectRatio:{get:function(){return this.nn},set:function(t){this.nn!==t&&0<t&&(this.nn=t,this.C())}},startAngle:{get:function(){return this.Zp},set:function(t){this.Zp!==t&&(this.Zp=t,this.C())}},sweepAngle:{get:function(){return this.lm},set:function(t){this.lm!==t&&(this.lm=0<t&&360>=t?t:360,this.C())}},arrangement:{get:function(){return this.Fb},set:function(t){this.Fb===t||t!==xr&&t!==Rr&&t!==$o&&t!==cl||(this.Fb=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K===t||t!==Ai&&t!==Kl&&t!==fl&&t!==Mo||(this.K=t,this.C())}},sorting:{get:function(){return this.dd},set:function(t){this.dd===t||t!==$u&&t!==Cr&&t!==dl&&!Xh&&t!==Wr||(this.dd=t,this.C())}},comparer:{get:function(){return this.Yc},set:function(t){this.Yc!==t&&(this.Yc=t,this.C())}},spacing:{get:function(){return this.mf},set:function(t){this.mf!==t&&(this.mf=t,this.C())}},nodeDiameterFormula:{get:function(){return this.ep},set:function(t){this.ep===t||t!==Xr&&t!==Rs||(this.ep=t,this.C())}},actualXRadius:{get:function(){return this.$b}},actualYRadius:{get:function(){return this.ae}},actualSpacing:{get:function(){return this.Ij}},actualCenter:{get:function(){return this.nx}}});var Rr=new it(Te,"ConstantSpacing",0),$o=new it(Te,"ConstantDistance",1),cl=new it(Te,"ConstantAngle",2),xr=new it(Te,"Packed",3),Ai=new it(Te,"Clockwise",4),Kl=new it(Te,"Counterclockwise",5),fl=new it(Te,"BidirectionalLeft",6),Mo=new it(Te,"BidirectionalRight",7),$u=new it(Te,"Forwards",8),Cr=new it(Te,"Reverse",9),dl=new it(Te,"Ascending",10),Xh=new it(Te,"Descending",11),Wr=new it(Te,"Optimized",12),Xr=new it(Te,"Pythagorean",13),Rs=new it(Te,"Circular",14);function pl(){this.Am=-1/0,this.an=this.Wk=null}function va(t){re.call(this,t)}function gl(t){on.call(this,t),this.I=this.Gj=NaN}function Yo(t,e){var n=t.network;if(null===n)return NaN;if(null===(n=n.layout))return NaN;if(n.arrangement===xr)if(n.nodeDiameterFormula===Rs)t.Gj=Math.max(t.width,t.height);else{if(n=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),0===n)return t.width;if(0===e)return t.height;t.Gj=Math.min(t.height/n,t.width/e)}else t.Gj=n.nodeDiameterFormula===Rs?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Gj}function Zl(t){Xn.call(this,t)}function hn(){Wt.call(this),this.Eh=null,this.zo=0,this.Pd=new Nt(100,100).freeze(),this.mn=!1,this.kf=!0,this.ld=!1,this.Sl=100,this.Vn=1,this.Zf=1e3,this.Xo=10,this.wp=Math,this.ol=.05,this.nl=50,this.ll=150,this.ml=0,this.Mn=10,this.Ln=5}function Kh(t,e,n){if(function xf(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.Eh=t.network.vertexes.ma(),(t=t.Eh).sort(function(n,o){return null===n||null===o||n===o?0:o.Ld-n.Ld}),e=t.length-1;0<=e&&1>=t[e].Ld;)e--;return 1<t.length-e}(t,e)){var o=t.Zf;t.Zf*=1+1/(e+1);var a=function p1(t,e){for(var n=t.network,o=new Yu(t),a=0;a<t.Eh.length;a++){var u=t.Eh[a];if(!(1<u.Ld))break;o.Cg(u);var h=new P0;h.pu=u.Ld,h.qu=u.width,h.ou=u.height,h.ax=u.focus.x,h.bx=u.focus.y,null===u.Ne&&(u.Ne=new lt),u.Ne.add(h),u.Aw=u.Ne.count-1}for(u=n.edges.iterator;u.next();){var f=u.value;h=f.toVertex,(a=f.fromVertex).network===o&&h.network===o?o.sm(f):a.network===o?(null===(f=a.qk)&&(f=new lt,a.qk=f),f.add(h),a.Ld--,a.Rh+=h.Rh):h.network===o&&(null===(f=h.qk)&&(f=new lt,h.qk=f),f.add(a),h.Ld--,h.Rh+=a.Rh)}for(a=o.edges.iterator;a.next();)(u=a.value).length*=Math.max(1,R.sqrt((u.fromVertex.Rh+u.toVertex.Rh)/(4*e+1)));for(e=o.vertexes.iterator;e.next();){var p=(a=e.value).qk;if(null!==p&&0<p.count&&!(0>=(h=a.Ne.J(a.Ne.count-1).pu-a.Ld))){for(var g=f=0,y=p.count-h;y<p.count;y++){var v=p.J(y),x=null;for(u=v.edges.iterator;u.next();){var S=u.value;if(S.zy(v)===a){x=S;break}}null!==x&&(g+=x.length,f+=v.width*v.height)}u=a.centerX,p=a.centerY,x=a.focus,1>(S=(y=a.width)*(v=a.height))&&(S=1),f=R.sqrt((f+S+g*g*4/(h*h))/S),a.bounds=new z(u-x.x-(h=(f-1)*y/2),p-x.y-(f=(f-1)*v/2),y+2*h,v+2*f),a.focus=new A(x.x+h,x.y+f)}}return t.network=o,n}(t,e),u=Math.max(0,Math.max(Math.min(t.network.vertexes.count,n*(e+1)/11),10));for(t.maxIterations+=u,Kh(t,e+1,n),N0(t,u),function g1(t,e){for(var n=t.network.vertexes.iterator;n.next();){var o=n.value;if(o.network=e,null!==o.Ne){var a=o.Ne.J(o.Aw);o.Ld=a.pu;var u=a.ax,h=a.bx;o.bounds=new z(o.centerX-u,o.centerY-h,a.qu,a.ou),o.focus=new A(u,h),o.Aw--}}for(n=t.network.edges.iterator;n.next();)n.value.network=e;t.network=e}(t,a),(e=a.vertexes.ma()).sort(function(h,f){return null===h||null===f||h===f?0:f.Ld-h.Ld}),n=0;n<e.length;n++)m1(t,e[n]);t.Zf=o}}function m1(t,e){var n=e.qk;if(null!==n&&0!==n.count){var o=e.centerX,a=e.centerY,u=e.width,h=e.height;null!==e.Ne&&0<e.Ne.count&&(u=(h=e.Ne.J(0)).qu,h=h.ou),u=R.sqrt(u*u+h*h)/2;for(var f=!1,p=h=0,g=0,y=e.vertexes.iterator;y.next();){var v=y.value;1>=v.Ld?p++:(f=!0,g++,h+=Math.atan2(e.centerY-v.centerY,e.centerX-v.centerX))}if(0!==p)for(0<g&&(h/=g),g=e=0,e=f?2*Math.PI/(p+1):2*Math.PI/p,p%2==0&&(g=e/2),1<n.count&&n.sort(function(S,M){return null===S||null===M||S===M?0:M.width*M.height-S.width*S.height}),f=p%2==0?0:1,n=n.iterator;n.next();)if(!(1<(p=n.value).Ld||t.isFixed(p))){for(y=null,v=p.edges.iterator;v.next();){y=v.value;break}var x=p.height;v=R.sqrt((v=p.width)*v+x*x)/2,y=u+y.length+v,v=h+(e*(f/2>>1)+g)*(f%2==0?1:-1),p.centerX=o+y*Math.cos(v),p.centerY=a+y*Math.sin(v),f++}}}function T0(t,e,n,o,a,u,h){var f=9e19,p=-1,g=0;t:for(;g<e;g++){var y=t[g],v=y.x-n,x=y.y-o;if((v=v*v+x*x)<f){for(x=g-1;0<=x;x--)if(t[x].y>y.y&&t[x].x-y.x<a+h.width)continue t;for(x=g+1;x<e;x++)if(t[x].x>y.x&&t[x].y-y.y<u+h.height)continue t;p=g,f=v}}return p}function _0(t,e){var n=t.bounds,o=n.x;t=n.y;var a=n.width;n=n.height;var u=e.bounds,h=u.x;e=u.y;var f=u.width;return u=u.height,o+a<h?t>e+u?R.sqrt((n=o+a-h)*n+(t=t-e-u)*t):t+n<e?R.sqrt((o=o+a-h)*o+(t=t+n-e)*t):h-(o+a):o>h+f?t>e+u?R.sqrt((n=o-h-f)*n+(t=t-e-u)*t):t+n<e?R.sqrt((o=o-h-f)*o+(t=t+n-e)*t):o-(h+f):t>e+u?t-(e+u):t+n<e?e-(t+n):.1}function N0(t,e){for(t.Eh=null,e=t.zo+e;t.zo<e&&(t.zo++,y1(t)););t.Eh=null}function y1(t){null===t.Eh&&(t.Eh=t.network.vertexes.ma());var e=t.Eh;if(0>=e.length)return!1;var n=e[0];n.forceX=0,n.forceY=0;for(var o=n.centerX,a=o,u=n=n.centerY,h=1;h<e.length;h++){var f=e[h];f.forceX=0,f.forceY=0;var p=f.centerX;f=f.centerY,o=Math.min(o,p),a=Math.max(a,p),n=Math.min(n,f),u=Math.max(u,f)}(a=a-o>u-n)?e.sort(function(T,N){return null===T||null===N||T===N?0:T.centerX-N.centerX}):e.sort(function(T,N){return null===T||null===N||T===N?0:T.centerY-N.centerY}),n=t.Zf;var g=o=f=0;for(u=0;u<e.length;u++){var y=(o=(h=e[u]).bounds).y+(f=h.focus).y;o=h.charge*t.electricalFieldX(p=o.x+f.x,y),g=h.charge*t.electricalFieldY(p,y),o+=h.mass*t.gravitationalFieldX(p,y),g+=h.mass*t.gravitationalFieldY(p,y),h.forceX+=o,h.forceY+=g;for(var v=u+1;v<e.length;v++){var x=e[v];if(x!==h){var S=(o=x.bounds).y+(f=x.focus).y;if(p-(g=o.x+f.x)>n||g-p>n){if(a)break}else if(y-S>n||S-y>n){if(!a)break}else{var M=_0(h,x);1>M?(null===(o=t.randomNumberGenerator)&&(t.randomNumberGenerator=o=new Hm),M=o.random(),f=o.random(),o=p>g?(1+(o=Math.abs(x.bounds.right-h.bounds.x)))*M:p<g?-(1+(o=Math.abs(x.bounds.x-h.bounds.right)))*M:(1+(o=Math.max(x.width,h.width)))*M-o/2,g=y>S?(1+(g=Math.abs(x.bounds.bottom-h.bounds.y)))*f:p<g?-(1+(g=Math.abs(x.bounds.y-h.bounds.bottom)))*f:(1+(g=Math.max(x.height,h.height)))*f-g/2):(o=(g-p)/M*(f=-h.charge*x.charge/(M*M)),g=(S-y)/M*f),h.forceX+=o,h.forceY+=g,x.forceX-=o,x.forceY-=g}}}}for(a=t.network.edges.iterator;a.next();)o=(h=(n=(f=a.value).fromVertex).bounds).x+(p=n.focus).x,h=h.y+p.y,p=(y=(u=f.toVertex).bounds).x+(v=u.focus).x,y=y.y+v.y,1>(v=_0(n,u))?(null===(v=t.randomNumberGenerator)&&(t.randomNumberGenerator=v=new Hm),f=v.random(),v=v.random(),o=(o>p?1:-1)*(1+(u.width>n.width?u.width:n.width))*f,g=(h>y?1:-1)*(1+(u.height>n.height?u.height:n.height))*v):(o=(p-o)/v*(f=f.stiffness*(v-f.length)),g=(y-h)/v*f),n.forceX+=o,n.forceY+=g,u.forceX-=o,u.forceY-=g;for(a=o=0;a<e.length;a++)t.isFixed(n=e[a])?t.moveFixedVertex(n):o=Math.max(o,t.moveVertex(n)||0);return o>t.epsilonDistance*t.epsilonDistance}function P0(){this.bx=this.ax=this.ou=this.qu=this.pu=0}function Yu(t){re.call(this,t)}function Zh(t){on.call(this,t),this.Ka=!1,this.eb=this.I=NaN,this.Rh=this.Ld=this.Ja=this.T=0,this.Ne=this.qk=null,this.Aw=0}function Mr(t){Xn.call(this,t),this.l=this.v=NaN}function Hm(){var t=0;void 0===t&&(t=42),this.seed=t,this.$y=48271,this.bz=2147483647,this.Q=44488.07041494893,this.cz=3399,this.az=1/2147483647,this.random()}function ee(){Wt.call(this),this.Zb=this.ue=25,this.K=0,this.jl=Jm,this.Nl=Sp,this.Cl=b0,this.Rj=4,this.Zk=Dt,this.pg=15,this.kf=!0,this.Ho=4,this.Ba=this.Ii=this.ra=-1,this.pc=this.mh=0,this.Ia=this.yd=this.zd=this.Zd=this.Ab=null,this.oh=0,this.$o=this.Wj=null,this.Gc=0,this.ap=null,this.Xc=new A,this.xe=[],this.xe.length=100}function Gm(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,null===e&&null===t?8:null===e||null===t?4:1}function Vi(t){null===t.Wj&&(t.Wj=[]);for(var e=0,n=t.network.vertexes.iterator;n.next();){var o=n.value;t.Wj[e]=o.layer,e++,t.Wj[e]=o.column,e++,t.Wj[e]=o.index,e++}return t.Wj}function Kr(t,e){var n=0;for(t=t.network.vertexes.iterator;t.next();){var o=t.value;o.layer=e[n],n++,o.column=e[n],n++,o.index=e[n],n++}}function A0(t,e,n){var o=Ql(t,e),a=t.Ab[e];(null===t.$o||t.$o.length<a*a)&&(t.$o=[]);for(var u=t.$o,h=0;h<a;h++){var x,f=0,p=o[h],g=p.near;if(null!==g&&g.layer===p.layer)if((p=g.index)>h)for(var y=h+1;y<p;y++){var v=o[y];v.near===g&&v.yf===g.yf||f++}else for(y=h-1;y>p;y--)(v=o[y]).near===g&&v.yf===g.yf||f++;if(0<=n)for(p=o[h].sourceEdgesArrayAccess,g=0;g<p.length;g++){var S=p[g];if(S.valid&&S.fromVertex.layer!==e)for(v=S.fromVertex.index,y=S.portToPos,S=S.portFromPos,x=g+1;x<p.length;x++){var M=p[x];if(M.valid&&M.fromVertex.layer!==e){var T=M.fromVertex.index,N=M.portToPos;M=M.portFromPos,y<N&&(v>T||v===T&&S>M)&&f++,N<y&&(T>v||T===v&&M>S)&&f++}}}if(0>=n)for(p=o[h].destinationEdgesArrayAccess,g=0;g<p.length;g++)if((S=p[g]).valid&&S.toVertex.layer!==e)for(v=S.toVertex.index,y=S.portToPos,S=S.portFromPos,x=g+1;x<p.length;x++)(M=p[x]).valid&&M.toVertex.layer!==e&&(T=M.toVertex.index,N=M.portToPos,S<(M=M.portFromPos)&&(v>T||v===T&&y>N)&&f++,M<S&&(T>v||T===v&&N>y)&&f++);for(u[h*a+h]=f,p=h+1;p<a;p++){var P=0,I=0;if(0<=n){f=o[h].sourceEdgesArrayAccess;var O=o[p].sourceEdgesArrayAccess;for(g=0;g<f.length;g++)if((S=f[g]).valid&&S.fromVertex.layer!==e)for(v=S.fromVertex.index,S=S.portFromPos,x=0;x<O.length;x++)(M=O[x]).valid&&M.fromVertex.layer!==e&&(T=M.fromVertex.index,M=M.portFromPos,(v<T||v===T&&S<M)&&I++,(T<v||T===v&&M<S)&&P++)}if(0>=n)for(f=o[h].destinationEdgesArrayAccess,O=o[p].destinationEdgesArrayAccess,g=0;g<f.length;g++)if((S=f[g]).valid&&S.toVertex.layer!==e)for(v=S.toVertex.index,y=S.portToPos,x=0;x<O.length;x++)(M=O[x]).valid&&M.toVertex.layer!==e&&(N=M.portToPos,(v<(T=M.toVertex.index)||v===T&&y<N)&&I++,(T<v||T===v&&N<y)&&P++);u[h*a+p]=P,u[p*a+h]=I}}return ql(t,e,o),u}function zm(t){for(var e=0,n=0;n<=t.ra;n++){for(var o=t,a=n,u=Ql(o,a),h=o.Ab[a],f=0,p=0;p<h;p++){var g=u[p].destinationEdgesArrayAccess;if(null!==g)for(var y=0;y<g.length;y++){var v=g[y];v.valid&&v.toVertex.layer!==a&&(f+=(Math.abs(v.fromVertex.column+v.portFromColOffset-(v.toVertex.column+v.portToColOffset))+1)*Gm(v))}}ql(o,a,u),e+=f}return e}function $m(t,e,n){for(var o=Ql(t,e),a=t.Ab[e],u=[],h=0;h<a;h++){var f=o[h],p=null;0>=n&&(p=f.sourceEdgesArrayAccess);var g=null;0<=n&&(g=f.destinationEdgesArrayAccess);var y=0,v=0,x=f.near;if(null!==x&&x.layer===f.layer&&(y+=x.column-1,v++),null!==p)for(x=0;x<p.length;x++){var S=(f=p[x]).fromVertex;f.valid&&!f.rev&&S.layer!==e&&(y+=S.column,v++)}if(null!==g)for(p=0;p<g.length;p++)x=(f=g[p]).toVertex,f.valid&&!f.rev&&x.layer!==e&&(y+=x.column,v++);u[h]=0===v?-1:y/v}return ql(t,e,o),u}function v1(t,e,n){for(var o=Ql(t,e),a=t.Ab[e],u=[],h=0;h<a;h++){var f=o[h],p=null;0>=n&&(p=f.sourceEdgesArrayAccess);var g=null;0<=n&&(g=f.destinationEdgesArrayAccess);var y=0,v=[],x=f.near;if(null!==x&&x.layer===f.layer&&(v[y]=x.column-1,y++),f=void 0,null!==p)for(x=0;x<p.length;x++){var S=(f=p[x]).fromVertex;f.valid&&!f.rev&&S.layer!==e&&(v[y]=S.column+f.portFromColOffset,y++)}if(null!==g)for(p=0;p<g.length;p++)x=(f=g[p]).toVertex,f.valid&&!f.rev&&x.layer!==e&&(v[y]=x.column+f.portToColOffset,y++);0===y?u[h]=-1:(v.sort(function(M,T){return M-T}),g=y>>1,u[h]=0!=(1&y)?v[g]:v[g-1]+v[g]>>1)}return ql(t,e,o),u}function Cp(t,e,n,o,a,u){if(e.component===o){if(e.component=n,a)for(var h=e.destinationEdges;h.next();){var f=h.value,p=f.toVertex,g=e.layer-p.layer;g===(f=t.linkMinLength(f))&&Cp(t,p,n,o,a,u)}if(u)for(h=e.sourceEdges;h.next();)(g=(p=(f=h.value).fromVertex).layer-e.layer)===(f=t.linkMinLength(f))&&Cp(t,p,n,o,a,u)}}function w1(t,e,n,o,a,u){if(e.component===o){if(e.component=n,a)for(var h=e.destinationEdges;h.next();)w1(t,h.value.toVertex,n,o,a,u);if(u)for(e=e.sourceEdges;e.next();)w1(t,e.value.fromVertex,n,o,a,u)}}function JM(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function Ym(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,o=e.destinationEdges;o.next();)if(o.value.toVertex.valid){n=!1;break}if(n)return e}}return null}function Wm(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,o=e.sourceEdges;o.next();)if(o.value.fromVertex.valid){n=!1;break}if(n)return e}}return null}function k0(t,e){e.Dg=t.oh,t.oh++;for(var n=e.destinationEdges;n.next();){var o=n.value,a=o.toVertex;-1===a.Dg&&(o.forest=!0,k0(t,a))}e.finish=t.oh,t.oh++}function QM(t){for(var e=t.network.vertexes.iterator;e.next();){var n=qM(t,e.value);t.ra=Math.max(n,t.ra)}}function qM(t,e){var n=0;if(-1===e.layer){for(var o=e.destinationEdges;o.next();){var a=o.value,u=a.toVertex;a=t.linkMinLength(a),n=Math.max(n,qM(t,u)+a)}e.layer=n}else n=e.layer;return n}function tS(t,e){var n=0;if(-1===e.layer){for(var o=e.sourceEdges;o.next();){var a=o.value,u=a.fromVertex;a=t.linkMinLength(a),n=Math.max(n,tS(t,u)+a)}e.layer=n}else n=e.layer;return n}function x1(t,e){if(!e.valid){e.valid=!0;for(var n=e.destinationEdges;n.next();)x1(t,n.value.toVertex);for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(var o=e.sourceEdgesArrayAccess,a=o.length,u=0;u<a;u++){var h=o[u],f=h.fromVertex,p=h.toVertex;h=t.linkMinLength(h),f.layer-p.layer>h&&Cp(t,f,0,-1,!0,!1)}for(Cp(t,e,1,-1,!0,!0);0!==e.component;){for(u=0,o=1/0,f=0,p=null,h=t.network.vertexes.iterator;h.next();){var g=h.value;if(1===g.component){var y=0,v=!1,x=g.sourceEdgesArrayAccess;a=x.length;for(var S=0;S<a;S++){var M=x[S],T=M.fromVertex;y+=1,1!==T.component&&(u+=1,T=T.layer-g.layer,M=t.linkMinLength(M),o=Math.min(o,T-M))}for(a=(x=g.destinationEdgesArrayAccess).length,S=0;S<a;S++)--y,1!==(M=x[S].toVertex).component?--u:v=!0;(null===p||y<f)&&!v&&(p=g,f=y)}}if(0<u){for(n.reset();n.next();)1===(a=n.value).component&&(a.layer+=o);e.component=0}else p.component=0}for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(Cp(t,e,1,-1,!0,!1);0!==e.component;){for(o=0,a=1/0,u=0,f=null,p=t.network.vertexes.iterator;p.next();)if(1===(h=p.value).component){for(g=0,y=!1,v=(x=h.sourceEdgesArrayAccess).length,S=0;S<v;S++)g+=1,1!==(M=x[S].fromVertex).component?o+=1:y=!0;for(v=(x=h.destinationEdgesArrayAccess).length,S=0;S<v;S++)--g,1!==(T=(M=x[S]).toVertex).component&&(--o,T=h.layer-T.layer,M=t.linkMinLength(M),a=Math.min(a,T-M));(null===f||g>u)&&!y&&(f=h,u=g)}if(0>o){for(n.reset();n.next();)1===(o=n.value).component&&(o.layer-=a);e.component=0}else f.component=0}}}function I0(t,e,n){return 90===t.K?n&&!e.rev||!n&&e.rev?270:90:180===t.K?n&&!e.rev||!n&&e.rev?0:180:270===t.K?n&&!e.rev||!n&&e.rev?90:270:n&&!e.rev||!n&&e.rev?180:0}function eS(t,e){var n=e.layer;for(e.index=t.Ab[n],t.Ab[n]++,e=e.destinationEdgesArrayAccess,n=!0;n;){n=!1;for(var o=0;o<e.length-1;o++){var a=e[o],u=e[o+1];a.portFromColOffset>u.portFromColOffset&&(n=!0,e[o]=u,e[o+1]=a)}}for(n=0;n<e.length;n++)(o=e[n]).valid&&-1===(o=o.toVertex).index&&eS(t,o)}function C1(t,e){var n=e.layer;e.index=t.Ab[n],t.Ab[n]++,e=e.sourceEdgesArrayAccess;for(var o=!0;o;)for(o=!1,n=0;n<e.length-1;n++){var a=e[n],u=e[n+1];a.portToColOffset>u.portToColOffset&&(o=!0,e[n]=u,e[n+1]=a)}for(n=0;n<e.length;n++)(o=e[n]).valid&&-1===(o=o.fromVertex).index&&C1(t,o)}function Jl(t,e,n){var o=Ql(t,e),a=t.Ab[e],u=v1(t,e,n),h=$m(t,e,n);for(n=0;n<a;n++)-1===h[n]&&(h[n]=o[n].column),-1===u[n]&&(u[n]=o[n].column);for(var p,f=!0;f;)for(f=!1,n=0;n<a-1;n++)(u[n+1]<u[n]||u[n+1]===u[n]&&h[n+1]<h[n])&&(f=!0,p=u[n],u[n]=u[n+1],u[n+1]=p,p=h[n],h[n]=h[n+1],h[n+1]=p,p=o[n],o[n]=o[n+1],o[n+1]=p);for(n=u=0;n<a;n++)(p=o[n]).index=n,u+=t.nodeMinColumnSpace(p,!0),p.column=u,u+=1,u+=t.nodeMinColumnSpace(p,!1);ql(t,e,o)}function uo(t,e,n){var o=Ql(t,e),a=t.Ab[e];n=A0(t,e,n);var u,h=[];for(u=0;u<a;u++)h[u]=-1;var f=[];for(u=0;u<a;u++)f[u]=-1;for(var p=!1,g=!0;g;)for(g=!1,u=0;u<a-1;u++){var y=n[o[u].index*a+o[u+1].index],v=n[o[u+1].index*a+o[u].index],x=0,S=0,M=o[u].column,T=o[u+1].column,N=t.nodeMinColumnSpace(o[u],!0),P=t.nodeMinColumnSpace(o[u],!1),I=t.nodeMinColumnSpace(o[u+1],!0),O=t.nodeMinColumnSpace(o[u+1],!1);N=M-N+I,P=T-P+O;var b=o[u].sourceEdges.iterator;for(b.reset();b.next();)if(O=(I=b.value).fromVertex,I.valid&&O.layer===e){for(I=0;o[I]!==O;)I++;I<u&&(x+=2*(u-I),S+=2*(u+1-I)),I===u+1&&(x+=1),I>u+1&&(x+=4*(I-u),S+=4*(I-(u+1)))}for((b=o[u].destinationEdges.iterator).reset();b.next();)if(O=(I=b.value).toVertex,I.valid&&O.layer===e){for(I=0;o[I]!==O;)I++;I===u+1&&(S+=1)}for((b=o[u+1].sourceEdges.iterator).reset();b.next();)if(O=(I=b.value).fromVertex,I.valid&&O.layer===e){for(I=0;o[I]!==O;)I++;I<u&&(x+=2*(u+1-I),S+=2*(u-I)),I===u&&(S+=1),I>u+1&&(x+=4*(I-(u+1)),S+=4*(I-u))}for((b=o[u+1].destinationEdges.iterator).reset();b.next();)if(O=(I=b.value).toVertex,I.valid&&O.layer===e){for(I=0;o[I]!==O;)I++;I===u&&(x+=1)}I=O=0;var B=f[o[u].index],K=h[o[u+1].index],rt=f[o[u+1].index];-1!==(b=h[o[u].index])&&(O+=Math.abs(b-M),I+=Math.abs(b-P)),-1!==B&&(O+=Math.abs(B-M),I+=Math.abs(B-P)),-1!==K&&(O+=Math.abs(K-T),I+=Math.abs(K-N)),-1!==rt&&(O+=Math.abs(rt-T),I+=Math.abs(rt-N)),(S<x-.5||S===x&&v<y-.5||S===x&&v===y&&I<O-.5)&&(g=p=!0,o[u].column=P,o[u+1].column=N,y=o[u],o[u]=o[u+1],o[u+1]=y)}for(u=0;u<a;u++)o[u].index=u;return ql(t,e,o),p}function Jh(t,e,n){for(var o=!1;nS(t,e,n);)o=!0;return o}function nS(t,e,n){var o,a=Ql(t,e),u=t.Ab[e],h=$m(t,e,-1);if(0<n)for(o=0;o<u;o++)h[o]=-1;var f=$m(t,e,1);if(0>n)for(o=0;o<u;o++)f[o]=-1;for(var p=!1,g=!0;g;)for(g=!1,o=0;o<u;o++){var S,y=a[o].column,v=t.nodeMinColumnSpace(a[o],!0),x=t.nodeMinColumnSpace(a[o],!1);S=0>o-1||y-a[o-1].column-1>v+t.nodeMinColumnSpace(a[o-1],!1)?y-1:y,v=o+1>=u||a[o+1].column-y-1>x+t.nodeMinColumnSpace(a[o+1],!0)?y+1:y;var M=x=0,T=0;if(0>=n)for(var N=a[o].sourceEdges.iterator;N.next();){var P=N.value,I=P.fromVertex;if(P.valid&&I.layer!==e){var O=Gm(P),b=P.portFromColOffset;P=P.portToColOffset,I=I.column,x+=(Math.abs(y+P-(I+b))+1)*O,M+=(Math.abs(S+P-(I+b))+1)*O,T+=(Math.abs(v+P-(I+b))+1)*O}}if(0<=n)for(N=a[o].destinationEdges.iterator;N.next();)I=(P=N.value).toVertex,P.valid&&I.layer!==e&&(O=Gm(P),b=P.portFromColOffset,P=P.portToColOffset,I=I.column,x+=(Math.abs(y+b-(I+P))+1)*O,M+=(Math.abs(S+b-(I+P))+1)*O,T+=(Math.abs(v+b-(I+P))+1)*O);P=b=O=0,I=f[a[o].index],-1!==(N=h[a[o].index])&&(O+=Math.abs(N-y),b+=Math.abs(N-S),P+=Math.abs(N-v)),-1!==I&&(O+=Math.abs(I-y),b+=Math.abs(I-S),P+=Math.abs(I-v)),M<x||M===x&&b<O?(g=p=!0,a[o].column=S):(T<x||T===x&&P<O)&&(g=p=!0,a[o].column=v)}return ql(t,e,a),t.normalize(),p}function Xm(t,e,n){var o=Ql(t,e),a=t.Ab[e],u=v1(t,e,n),h=[];for(n=0;n<a;n++)h[n]=u[n];for(u=!0;u;)for(u=!1,n=0;n<a;n++){var f=o[n].column,p=t.nodeMinColumnSpace(o[n],!0),g=t.nodeMinColumnSpace(o[n],!1),y=0;if(-1===h[n])if(0===n&&n===a-1)y=f;else if(0===n){var v=o[n+1].column;y=v-f===g+t.nodeMinColumnSpace(o[n+1],!0)?f-1:f}else y=n===a-1?f-(v=o[n-1].column)===p+t.nodeMinColumnSpace(o[n-1],!1)?f+1:f:((p=(v=o[n-1].column)+t.nodeMinColumnSpace(o[n-1],!1)+p+1)+(g=(v=o[n+1].column)-t.nodeMinColumnSpace(o[n+1],!0)-g-1))/2|0;else 0===n&&n===a-1?y=h[n]:0===n?(g=(v=o[n+1].column)-t.nodeMinColumnSpace(o[n+1],!0)-g-1,y=Math.min(h[n],g)):n===a-1?(p=(v=o[n-1].column)+t.nodeMinColumnSpace(o[n-1],!1)+p+1,y=Math.max(h[n],p)):(p=(v=o[n-1].column)+t.nodeMinColumnSpace(o[n-1],!1)+p+1,g=(v=o[n+1].column)-t.nodeMinColumnSpace(o[n+1],!0)-g-1,p<h[n]&&h[n]<g?y=h[n]:p>=h[n]?y=p:g<=h[n]&&(y=g));y!==f&&(u=!0,o[n].column=y)}ql(t,e,o),t.normalize()}function Km(t,e){for(var n=!0,o=t.network.vertexes.iterator;o.next();){var a=o.value,u=t.nodeMinColumnSpace(a,!0),h=t.nodeMinColumnSpace(a,!1);if(a.column-u<=e&&a.column+h>=e){n=!1;break}}if(t=!1,n)for(o.reset();o.next();)(n=o.value).column>e&&(--n.column,t=!0);return t}function iS(t,e){var o,n=e+1,a=[],u=[];for(o=0;o<=t.ra;o++)a[o]=!1,u[o]=!1;for(var h=t.network.vertexes.iterator;h.next();){var f=(o=h.value).column-t.nodeMinColumnSpace(o,!0),p=o.column+t.nodeMinColumnSpace(o,!1);f<=e&&p>=e&&(a[o.layer]=!0),f<=n&&p>=n&&(u[o.layer]=!0)}for(f=!0,n=!1,o=0;o<=t.ra;o++)f=f&&!(a[o]&&u[o]);if(f)for(h.reset();h.next();)(t=h.value).column>e&&(--t.column,n=!0);return n}function O0(t,e){for(var n=0;n<=t.Ba;n++)for(;Km(t,n););for(t.normalize(),n=0;n<t.Ba;n++)for(;iS(t,n););var o;if(t.normalize(),0<e)for(n=0;n<=t.Ba;n++){var a=Vi(t),u=zm(t);for(o=u+1;u<o;){o=u,M1(t,n,1);var h=zm(t);h>u?Kr(t,a):h<u&&(u=h,a=Vi(t))}}if(0>e)for(n=t.Ba;0<=n;n--)for(a=Vi(t),o=(u=zm(t))+1;u<o;)o=u,M1(t,n,-1),(h=zm(t))>u?Kr(t,a):h<u&&(u=h,a=Vi(t));t.normalize()}function M1(t,e,n){t.Gc=0;for(var o=t.network.vertexes.iterator;o.next();)o.value.component=-1;if(0<n)for(o.reset();o.next();){var a=o.value;a.column-t.nodeMinColumnSpace(a,!0)<=e&&(a.component=t.Gc)}if(0>n)for(o.reset();o.next();)(a=o.value).column+t.nodeMinColumnSpace(a,!1)>=e&&(a.component=t.Gc);for(t.Gc++,o.reset();o.next();)-1===(e=o.value).component&&(w1(t,e,t.Gc,-1,!0,!0),t.Gc++);var u;for(e=[],u=0;u<t.Gc*t.Gc;u++)e[u]=!1;for(a=[],u=0;u<(t.ra+1)*(t.Ba+1);u++)a[u]=-1;for(o.reset();o.next();)for(var h=(u=o.value).layer,f=Math.max(0,u.column-t.nodeMinColumnSpace(u,!0)),p=Math.min(t.Ba,u.column+t.nodeMinColumnSpace(u,!1));f<=p;f++)a[h*(t.Ba+1)+f]=u.component;for(u=0;u<=t.ra;u++){if(0<n)for(h=0;h<t.Ba;h++)-1!==a[u*(t.Ba+1)+h]&&-1!==a[u*(t.Ba+1)+h+1]&&a[u*(t.Ba+1)+h]!==a[u*(t.Ba+1)+h+1]&&(e[a[u*(t.Ba+1)+h]*t.Gc+a[u*(t.Ba+1)+h+1]]=!0);if(0>n)for(h=t.Ba;0<h;h--)-1!==a[u*(t.Ba+1)+h]&&-1!==a[u*(t.Ba+1)+h-1]&&a[u*(t.Ba+1)+h]!==a[u*(t.Ba+1)+h-1]&&(e[a[u*(t.Ba+1)+h]*t.Gc+a[u*(t.Ba+1)+h-1]]=!0)}for(a=[],u=0;u<t.Gc;u++)a[u]=!0;for((h=[]).push(0);0!==h.length;)if(p=h[h.length-1],h.pop(),a[p])for(a[p]=!1,u=0;u<t.Gc;u++)e[p*t.Gc+u]&&h.splice(0,0,u);if(0<n)for(o.reset();o.next();)a[(t=o.value).component]&&--t.column;if(0>n)for(o.reset();o.next();)a[(n=o.value).component]&&(n.column+=1)}function Zm(t,e){return 270===t.K?e?Be:Ar:90===t.K?e?Ar:Be:180===t.K?e?lr:Li:e?Li:lr}function Ql(t,e){var n=t.Ab[e];if(n>=t.xe.length){for(var o=[],a=0;a<t.xe.length;a++)o[a]=t.xe[a];t.xe=o}for(null==t.xe[n]?o=[]:(o=t.xe[n],t.xe[n]=null),t=t.ap[e],e=0;e<t.length;e++)o[(n=t[e]).index]=n;return o}function ql(t,e,n){t.xe[t.Ab[e]]=n}Te.className="CircularLayout",Te.ConstantSpacing=Rr,Te.ConstantDistance=$o,Te.ConstantAngle=cl,Te.Packed=xr,Te.Clockwise=Ai,Te.Counterclockwise=Kl,Te.BidirectionalLeft=fl,Te.BidirectionalRight=Mo,Te.Forwards=$u,Te.Reverse=Cr,Te.Ascending=dl,Te.Descending=Xh,Te.Optimized=Wr,Te.Pythagorean=Xr,Te.Circular=Rs,pl.prototype.compare=function(t,e){if(0<t&&0>this.Am||Math.abs(t)<Math.abs(this.Am)&&!(0>t&&0<this.Am))for(this.Am=t,this.Wk=[],this.an=[],t=0;t<e.length;t++)this.Wk[t]=e[t].bounds.x,this.an[t]=e[t].bounds.y},pl.prototype.commit=function(t){if(null!==this.Wk&&null!==this.an)for(var e=0;e<this.Wk.length;e++){var n=t.J(e);n.x=this.Wk[e],n.y=this.an[e]}},pl.className="VertexArrangement",Y(va,re),va.prototype.createVertex=function(){return new gl(this)},va.prototype.createEdge=function(){return new Zl(this)},va.className="CircularNetwork",Y(gl,on),L.Object.defineProperties(gl.prototype,{diameter:{get:function(){return this.Gj},set:function(t){this.Gj!==t&&(this.Gj=t)}},actualAngle:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}}}),gl.className="CircularVertex",Y(Zl,Xn),Zl.className="CircularEdge",Y(hn,Wt),hn.prototype.cloneProtected=function(t){Wt.prototype.cloneProtected.call(this,t),t.Pd.assign(this.Pd),t.mn=this.mn,t.kf=this.kf,t.ld=this.ld,t.Sl=this.Sl,t.Vn=this.Vn,t.Zf=this.Zf,t.Xo=this.Xo,t.wp=this.wp,t.ol=this.ol,t.nl=this.nl,t.ll=this.ll,t.ml=this.ml,t.Mn=this.Mn,t.Ln=this.Ln},hn.prototype.serializeLayoutProperties=function(t,e){Wt.prototype.serializeLayoutProperties.call(this,t,e),t.arrangementSpacing={width:this.arrangementSpacing.width,height:this.arrangementSpacing.height},t.arrangesToOrigin=this.arrangesToOrigin,t.setsPortSpots=this.setsPortSpots,t.comments=this.comments,t.maxIterations=this.maxIterations,t.epsilonDistance=this.epsilonDistance,t.infinityDistance=this.infinityDistance,t.moveLimit=this.moveLimit,t.defaultSpringStiffness=this.defaultSpringStiffness,t.defaultSpringLength=this.defaultSpringLength,t.defaultElectricalCharge=this.defaultElectricalCharge,t.defaultGravitationalMass=this.defaultGravitationalMass,t.defaultCommentSpringLength=this.defaultCommentSpringLength,t.defaultCommentElectricalCharge=this.defaultCommentElectricalCharge},hn.prototype.deserializeLayoutProperties=function(t,e,n,o,a){Wt.prototype.deserializeLayoutProperties.call(this,t,e,n,o,a),this.arrangementSpacing=new Nt(t.arrangementSpacing.width,t.arrangementSpacing.height),this.arrangesToOrigin=t.arrangesToOrigin,this.setsPortSpots=t.setsPortSpots,this.comments=t.comments,this.maxIterations=t.maxIterations,this.epsilonDistance=t.epsilonDistance,this.infinityDistance=t.infinityDistance,this.moveLimit=t.moveLimit,this.defaultSpringStiffness=t.defaultSpringStiffness,this.defaultSpringLength=t.defaultSpringLength,this.defaultElectricalCharge=t.defaultElectricalCharge,this.defaultGravitationalMass=t.defaultGravitationalMass,this.defaultCommentSpringLength=t.defaultCommentSpringLength,this.defaultCommentElectricalCharge=t.defaultCommentElectricalCharge},hn.prototype.createNetwork=function(){return new Yu(this)},hn.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),!this.Vw()){if(t=this.maxIterations,0<this.network.vertexes.count){this.network.yq();for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(e=this.network.edges.iterator;e.next();)(n=e.value).stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.Ev(),this.zo=0,this.needsClusterLayout()){for(var o=(n=(e=this.network).Yy()).iterator;o.next();){this.network=o.value;for(var a=this.network.vertexes.iterator;a.next();){var u=a.value;u.Ld=u.vertexes.count,u.Rh=1,u.qk=null,u.Ne=null}Kh(this,0,t)}this.network=e;var h=o=n.iterator;o=this.arrangementSpacing;var f=h.count,p=!0;u=a=0;for(var g=ye(),y=0;y<f+e.vertexes.count+2;y++)g[y]=null;f=0,h.reset();for(var v=z.alloc();h.next();)if(this.computeBounds(y=h.value,v),p)p=!1,a=v.x+v.width/2,u=v.y+v.height/2,g[0]=new A(v.x+v.width+o.width,v.y),g[1]=new A(v.x,v.y+v.height+o.height),f=2;else{var x=T0(g,f,a,u,v.width,v.height,o),S=g[x],M=new A(S.x+v.width+o.width,S.y),T=new A(S.x,S.y+v.height+o.height);for(x+1<f&&g.splice(x+1,0,null),g[x]=M,g[x+1]=T,f++,x=S.x-v.x,S=S.y-v.y,y=y.vertexes.iterator;y.next();)(M=y.value).centerX+=x,M.centerY+=S}for(z.free(v),y=e.vertexes.iterator;y.next();)x=(h=y.value).bounds,2>f?(a=x.x+x.width/2,u=x.y+x.height/2,g[0]=new A(x.x+x.width+o.width,x.y),g[1]=new A(x.x,x.y+x.height+o.height),f=2):(S=new A((v=g[p=T0(g,f,a,u,x.width,x.height,o)]).x+x.width+o.width,v.y),x=new A(v.x,v.y+x.height+o.height),p+1<f&&g.splice(p+1,0,null),g[p]=S,g[p+1]=x,f++,h.centerX=v.x+h.width/2,h.centerY=v.y+h.height/2);for(Jt(g),o=n.iterator;o.next();){for(a=(n=o.value).vertexes.iterator;a.next();)e.Cg(a.value);for(n=n.edges.iterator;n.next();)e.sm(n.value)}}N0(this,t),this.updateParts()}this.Sl=t,this.network=null,this.isValidLayout=!0}},hn.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,n=this.network.vertexes.first().bounds,o=this.network.vertexes.iterator;o.next();){if(o.value.bounds.Oc(n)&&2<++t)return!0;if(10<e)break;e++}return!1},hn.prototype.computeBounds=function(t,e){var n=!0;for(t=t.vertexes.iterator;t.next();){var o=t.value;n?(n=!1,e.set(o.bounds)):e.Tc(o.bounds)}return e},hn.prototype.Ev=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},hn.prototype.addComments=function(t){var e=t.node;if(null!==e)for(e=e.Rv();e.next();){var n=e.value;if("Comment"===n.category&&n.isVisible()){var o=this.network.kj(n);null===o&&(o=this.network.mk(n)),o.charge=this.defaultCommentElectricalCharge,n=null;for(var a=o.destinationEdges;a.next();){var u=a.value;if(u.toVertex===t){n=u;break}}if(null===n)for(a=o.sourceEdges;a.next();)if((u=a.value).fromVertex===t){n=u;break}null===n&&(n=this.network.Ek(t,o,null)),n.length=this.defaultCommentSpringLength}}},hn.prototype.moveVertex=function(t){var e=t.forceX,n=t.forceY,o=this.moveLimit;return e<-o?e=-o:e>o&&(e=o),n<-o?n=-o:n>o&&(n=o),t.centerX+=e,t.centerY+=n,e*e+n*n},hn.prototype.moveFixedVertex=function(){},hn.prototype.commitLayout=function(){this.Ew(),this.commitNodes(),this.isRouting&&this.commitLinks()},hn.prototype.Ew=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;null!==e&&(e.fromSpot=Ei,e.toSpot=Ei)}},hn.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var n=z.alloc();this.computeBounds(this.network,n),t=(e=this.arrangementOrigin).x-n.x,e=e.y-n.y,z.free(n)}n=z.alloc();for(var o=this.network.vertexes.iterator;o.next();){var a=o.value;(0!==t||0!==e)&&(n.assign(a.bounds),n.x+=t,n.y+=e,a.bounds=n),a.commit()}z.free(n)},hn.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},hn.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.ol:t},hn.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.nl:t},hn.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.ll:t},hn.prototype.electricalFieldX=function(){return 0},hn.prototype.electricalFieldY=function(){return 0},hn.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.ml:t},hn.prototype.gravitationalFieldX=function(){return 0},hn.prototype.gravitationalFieldY=function(){return 0},hn.prototype.isFixed=function(t){return t.isFixed},L.Object.defineProperties(hn.prototype,{currentIteration:{get:function(){return this.zo}},arrangementSpacing:{get:function(){return this.Pd},set:function(t){this.Pd.w(t)||(this.Pd.assign(t),this.C())}},arrangesToOrigin:{get:function(){return this.mn},set:function(t){this.mn!==t&&(this.mn=t,this.C())}},setsPortSpots:{get:function(){return this.kf},set:function(t){this.kf!==t&&(this.kf=t,this.C())}},comments:{get:function(){return this.ld},set:function(t){this.ld!==t&&(this.ld=t,this.C())}},maxIterations:{get:function(){return this.Sl},set:function(t){this.Sl!==t&&0<=t&&(this.Sl=t,this.C())}},epsilonDistance:{get:function(){return this.Vn},set:function(t){this.Vn!==t&&0<t&&(this.Vn=t,this.C())}},infinityDistance:{get:function(){return this.Zf},set:function(t){this.Zf!==t&&1<t&&(this.Zf=t,this.C())}},moveLimit:{get:function(){return this.Xo},set:function(t){this.Xo!==t&&1<t&&(this.Xo=t,this.C())}},randomNumberGenerator:{get:function(){return this.wp},set:function(t){this.wp!==t&&(null!==t&&"function"!=typeof t.random&&W('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.wp=t)}},defaultSpringStiffness:{get:function(){return this.ol},set:function(t){this.ol!==t&&(this.ol=t,this.C())}},defaultSpringLength:{get:function(){return this.nl},set:function(t){this.nl!==t&&(this.nl=t,this.C())}},defaultElectricalCharge:{get:function(){return this.ll},set:function(t){this.ll!==t&&(this.ll=t,this.C())}},defaultGravitationalMass:{get:function(){return this.ml},set:function(t){this.ml!==t&&(this.ml=t,this.C())}},defaultCommentSpringLength:{get:function(){return this.Mn},set:function(t){this.Mn!==t&&(this.Mn=t,this.C())}},defaultCommentElectricalCharge:{get:function(){return this.Ln},set:function(t){this.Ln!==t&&(this.Ln=t,this.C())}}}),hn.className="ForceDirectedLayout",P0.className="ForceDirectedSubnet",Y(Yu,re),Yu.prototype.createVertex=function(){return new Zh(this)},Yu.prototype.createEdge=function(){return new Mr(this)},Yu.className="ForceDirectedNetwork",Y(Zh,on),Zh.prototype.serializeVertexProperties=function(t,e){on.prototype.serializeVertexProperties.call(this,t,e),t.isFixed=this.isFixed,t.charge=this.charge,t.mass=this.mass},Zh.prototype.zq=function(t,e,n,o){on.prototype.zq.call(this,t,e,n,o),this.isFixed=t.isFixed,this.charge=t.charge,this.mass=t.mass},L.Object.defineProperties(Zh.prototype,{isFixed:{get:function(){return this.Ka},set:function(t){this.Ka!==t&&(this.Ka=t)}},charge:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},mass:{get:function(){return this.eb},set:function(t){this.eb!==t&&(this.eb=t)}},forceX:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}},forceY:{get:function(){return this.Ja},set:function(t){this.Ja!==t&&(this.Ja=t)}}}),Zh.className="ForceDirectedVertex",Y(Mr,Xn),Mr.prototype.serializeEdgeProperties=function(t,e){Xn.prototype.serializeEdgeProperties.call(this,t,e),t.stiffness=this.stiffness,t.length=this.length},Mr.prototype.deserializeEdgeProperties=function(t,e,n,o){Xn.prototype.deserializeEdgeProperties.call(this,t,e,n,o),this.stiffness=t.stiffness,this.length=t.length},L.Object.defineProperties(Mr.prototype,{stiffness:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t)}},length:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}}}),Mr.className="ForceDirectedEdge",Hm.prototype.random=function(){var t=this.seed%this.Q*this.$y-this.seed/this.Q*this.cz;return this.seed=0<t?t:t+this.bz,this.seed*this.az},Hm.className="RandomNumberGenerator",Y(ee,Wt),ee.prototype.cloneProtected=function(t){Wt.prototype.cloneProtected.call(this,t),t.ue=this.ue,t.Zb=this.Zb,t.K=this.K,t.jl=this.jl,t.Nl=this.Nl,t.Cl=this.Cl,t.Rj=this.Rj,t.Zk=this.Zk,t.pg=this.pg,t.kf=this.kf,t.Ho=this.Ho},ee.prototype.serializeLayoutProperties=function(t,e){Wt.prototype.serializeLayoutProperties.call(this,t,e),t.layerSpacing=this.layerSpacing,t.columnSpacing=this.columnSpacing,t.direction=this.direction,t.cycleRemoveOption=this.cycleRemoveOption.name,t.layeringOption=this.layeringOption.name,t.initializeOption=this.initializeOption.name,t.iterations=this.iterations,t.aggressiveOption=this.aggressiveOption.name,t.packOption=this.packOption,t.setsPortSpots=this.setsPortSpots,t.linkSpacing=this.linkSpacing,t.ra=this.ra,t.Ii=this.Ii,t.Ba=this.Ba,t.mh=this.mh,t.pc=this.pc,t.Ab=this.Ab,t.oh=this.oh,t.Gc=this.Gc,t.Xc={x:this.Xc.x,y:this.Xc.y}},ee.prototype.deserializeLayoutProperties=function(t,e,n,o,a){Wt.prototype.deserializeLayoutProperties.call(this,t,e,n,o,a),this.layerSpacing=t.layerSpacing,this.columnSpacing=t.columnSpacing,this.direction=t.direction,this.cycleRemoveOption=Qs(ee,t.cycleRemoveOption),this.layeringOption=Qs(ee,t.layeringOption),this.initializeOption=Qs(ee,t.initializeOption),this.iterations=t.iterations,this.aggressiveOption=Qs(ee,t.aggressiveOption),this.packOption=t.packOption,this.setsPortSpots=t.setsPortSpots,this.linkSpacing=t.linkSpacing,this.ra=t.ra,this.Ii=t.Ii,this.Ba=t.Ba,this.mh=t.mh,this.pc=t.pc,this.Ab=t.Ab,this.oh=t.oh,this.Gc=t.Gc,this.Xc=new A(this.Xc.x,this.Xc.y),a&&!o&&a.edges.each(function(u){if(!u.link&&u.fromVertex&&u.toVertex&&(null===u.fromVertex.node||null===u.toVertex.node)){for(var h=u.fromVertex;null!==h&&null===h.node&&0<h.ud.count;){var f=h.ud.J(0);if(f.link){u.link=f.link;break}h=f.fromVertex}if(!u.link){for(f=u.toVertex;null!==f&&null===f.node&&0<f.Gd.count;){var p=f.Gd.J(0);if(p.link){u.link=p.link;break}f=p.toVertex}if(!u.link)for(f=f.ud.iterator;f.next();)if((p=f.value).link&&p.fromVertex===h){u.link=p.link;break}}}})},ee.prototype.jb=function(t){t.classType===ee?0===t.name.indexOf("Aggressive")?this.aggressiveOption=t:0===t.name.indexOf("Cycle")?this.cycleRemoveOption=t:0===t.name.indexOf("Init")?this.initializeOption=t:0===t.name.indexOf("Layer")?this.layeringOption=t:W("Unknown enum value: "+t):Wt.prototype.jb.call(this,t)},ee.prototype.createNetwork=function(){return new Cf(this)},ee.prototype.doLayout=function(t){for(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Ii=-1,this.pc=this.mh=0,this.ap=this.$o=this.Wj=null,t=0;t<this.xe.length;t++)this.xe[t]=null;if(0<this.network.vertexes.count){if(this.network.yq(),this.Vw())return;for(this.cycleRemoveOption!==Mp&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.ra=-1,this.assignLayers(),t.reset();t.next();)this.ra=Math.max(this.ra,t.value.layer);this.cycleRemoveOption===Mp&&this.removeCycles();for(var e=[],n=(t=this.network).edges.iterator;n.next();){var o=n.value;o.valid=!1,e.push(o)}for(n=0;n<e.length;n++){var a=(o=e[n]).fromVertex,u=o.toVertex;if(!(o.valid||(null===a.node&&null===a.data||null===u.node&&null===u.data)&&a.layer===u.layer)){var h=0,f=0,p=0,g=0;if(null!==o.link){if(null===(f=o.link))continue;var y=a.node;if(h=u.node,null===y||null===h)continue;var v=f.fromNode;p=f.toNode;var x=f.fromPort;if(f=f.toPort,o.rev){g=v;var S=x;v=p,x=f,p=g,f=S}var M=a.focus;g=u.focus;var T=o.rev?u.bounds:a.bounds;S=A.alloc(),y!==v?T.u()&&v.isVisible()?v.actualBounds.u()?(v.Ff(x,ie,S),S.x+=v.actualBounds.x-T.x,S.y+=v.actualBounds.y-T.y):(v.Ff(x,ie,S),S.u()||S.assign(M)):S.assign(M):T.u()?(v.Ff(x,ie,S),S.u()||S.assign(M)):S.assign(M),v=o.rev?a.bounds:u.bounds,y=A.alloc(),h!==p?v.u()&&p.isVisible()?p.actualBounds.u()?(p.Ff(f,ie,y),y.x+=p.actualBounds.x-v.x,y.y+=p.actualBounds.y-v.y):(p.Ff(f,ie,y),y.u()||y.assign(g)):y.assign(g):v.u()?(p.Ff(f,ie,y),y.u()||y.assign(g)):y.assign(g),90===this.K||270===this.K?(h=Math.round((S.x-M.x)/this.Zb),p=S.x,f=Math.round((y.x-g.x)/this.Zb),g=y.x):(h=Math.round((S.y-M.y)/this.Zb),p=S.y,f=Math.round((y.y-g.y)/this.Zb),g=y.y),A.free(S),A.free(y),o.portFromColOffset=h,o.portFromPos=p,o.portToColOffset=f,o.portToPos=g}else o.portFromColOffset=0,o.portFromPos=0,o.portToColOffset=0,o.portToPos=0;if(S=a.layer,y=u.layer,v=0,null!==(T=o.link)){var N=T.fromPort,P=T.toPort;if(null!==N&&null!==P){var I=T.fromNode;if(x=T.toNode,null!==I&&null!==x){var O=Zm(this,!0),b=Zm(this,!1),B=this.setsPortSpots?O:T.computeSpot(!0,N);M=this.setsPortSpots?b:T.computeSpot(!1,P);var K=T.isOrthogonal;B.Qc()&&B.Gf(b)&&M.Qc()&&M.Gf(O)?v=0:(O=T.getLinkPoint(I,N,B,!0,K,x,P,A.alloc()),b=T.getLinkDirection(I,N,O,B,!0,K,x,P),A.free(O),B.Wt()||b!==I0(this,o,!0)?this.setsPortSpots&&null!==I&&1===I.ports.count&&o.rev&&(v+=1):v+=1,B=T.getLinkPoint(x,P,M,!1,K,I,N,A.alloc()),T=T.getLinkDirection(x,P,B,M,!1,K,I,N),A.free(B),M.Wt()||T!==I0(this,o,!1)?this.setsPortSpots&&null!==x&&1===x.ports.count&&o.rev&&(v+=2):v+=2)}}}if(v=1===(x=v)||3===x,(x=2===x||3===x)&&((M=t.createVertex()).node=null,M.yf=1,M.layer=S,M.near=a,t.Cg(M),(a=t.Ek(a,M,o.link)).valid=!1,a.rev=o.rev,a.portFromColOffset=h,a.portToColOffset=0,a.portFromPos=p,a.portToPos=0,a=M),T=1,v&&T--,S-y>T&&0<S){for(o.valid=!1,(M=t.createVertex()).node=null,M.yf=2,M.layer=S-1,t.Cg(M),(a=t.Ek(a,M,o.link)).valid=!0,a.rev=o.rev,a.portFromColOffset=x?0:h,a.portToColOffset=0,a.portFromPos=x?0:p,a.portToPos=0,a=M,S--;S-y>T&&0<S;)(M=t.createVertex()).node=null,M.yf=3,M.layer=S-1,t.Cg(M),(a=t.Ek(a,M,o.link)).valid=!0,a.rev=o.rev,a.portFromColOffset=0,a.portToColOffset=0,a.portFromPos=0,a.portToPos=0,a=M,S--;(a=t.Ek(M,u,o.link)).valid=!v,v&&(M.near=u),a.rev=o.rev,a.portFromColOffset=0,a.portToColOffset=f,a.portFromPos=0,a.portToPos=g}else o.valid=!0}}for(t=this.Ab=[],e=0;e<=this.ra;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Ii=-1,n=this.pc=this.mh=0;n<=this.ra;n++)t[n]>t[this.pc]&&(this.Ii=t[n]-1,this.pc=n),t[n]<t[this.mh]&&(this.mh=n);for(this.ap=[],n=0;n<t.length;n++)this.ap[n]=[];for(e.reset();e.next();)this.ap[(t=e.value).layer][t.index]=t;for(this.Ba=-1,t=0;t<=this.ra;t++){for(e=Ql(this,t),n=0,o=this.Ab[t],u=0;u<o;u++)n+=this.nodeMinColumnSpace(a=e[u],!0),a.column=n,n+=1,n+=this.nodeMinColumnSpace(a,!1);this.Ba=Math.max(this.Ba,n-1),ql(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},ee.prototype.linkMinLength=function(){return 1},ee.prototype.nodeMinLayerSpace=function(t,e){return null===t.node&&null===t.data?0:90===this.K||270===this.K?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},ee.prototype.nodeMinColumnSpace=function(t,e){if(null===t.node&&null===t.data)return 0;var n=e?t.Mk:t.Lk;return null!==n?n:90===(n=this.K)||270===n?e?t.Mk=t.focus.x/this.Zb+1|0:t.Lk=(t.bounds.width-t.focus.x)/this.Zb+1|0:e?t.Mk=t.focus.y/this.Zb+1|0:t.Lk=(t.bounds.height-t.focus.y)/this.Zb+1|0},ee.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.ra;e++)for(var n=A0(this,e,1),o=this.Ab[e],a=0;a<o;a++)for(var u=a;u<o;u++)t+=n[a*o+u];return t},ee.prototype.normalize=function(){var t=1/0;this.Ba=-1;for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0)),this.Ba=Math.max(this.Ba,n.column+this.nodeMinColumnSpace(n,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ba-=t},ee.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.jl){default:case Qm:var e=0,n=(t=this.network).vertexes.count-1,o=[];o.length=n+1;for(var a=t.vertexes.iterator;a.next();)a.value.valid=!0;for(;null!==JM(t);){for(a=Ym(t);null!==a;)o[n]=a,n--,a.valid=!1,a=Ym(t);for(a=Wm(t);null!==a;)o[e]=a,e++,a.valid=!1,a=Wm(t);a=null;for(var u=0,h=this.network.vertexes.iterator;h.next();){var f=h.value;if(f.valid){for(var p=0,g=f.destinationEdges;g.next();)g.value.toVertex.valid&&p++;g=0;for(var y=f.sourceEdges;y.next();)y.value.fromVertex.valid&&g++;(null===a||u<p-g)&&(a=f,u=p-g)}}null!==a&&(o[e]=a,e++,a.valid=!1)}for(e=0;e<t.vertexes.count;e++)o[e].index=e;for(o=t.edges.iterator;o.next();)(e=o.value).fromVertex.index>e.toVertex.index&&(t.Qm(e),e.rev=!0);break;case Jm:for(o=this.network.vertexes.iterator;o.next();)(t=o.value).Dg=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.oh=0,o.reset();o.next();)0===(e=o.value).sourceEdges.count&&k0(this,e);for(o.reset();o.next();)-1===(e=o.value).Dg&&k0(this,e);for(t.reset();t.next();)(o=t.value).forest||(n=(e=o.fromVertex).finish,u=(a=o.toVertex).finish,a.Dg<e.Dg&&n<u&&(this.network.Qm(o),o.rev=!0));break;case Mp:for(e=(t=this.network).vertexes.iterator,o=1/0;e.next();)o=Math.min(o,e.value.layer);if(1/0>o){if(0>o)for(e.reset();e.next();)e.value.layer-=o;for(o=[],e.reset();e.next();)void 0===(a=o[(n=e.value).layer])?o[n.layer]=[n]:a.push(n);for(n=e=0;n<o.length;n++)if((a=o[n])&&0!==a.length){if(0<n)for(u=0;u<a.length;u++)a[u].layer-=e}else e++;for(o=t.edges.iterator;o.next();)(e=o.value).fromVertex.layer<e.toVertex.layer&&(t.Qm(e),e.rev=!0)}}},ee.prototype.assignLayers=function(){switch(this.Nl){case qm:QM(this);break;case Dp:for(var t,e=this.network.vertexes.iterator;e.next();)t=tS(this,e.value),this.ra=Math.max(t,this.ra);for(e.reset();e.next();)(t=e.value).layer=this.ra-t.layer;break;default:for(QM(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)0===(t=e.value).sourceEdges.count&&x1(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.ra=-1,e.reset();e.next();){var n=e.value;n.layer-=t,this.ra=Math.max(this.ra,n.layer)}}},ee.prototype.initializeIndices=function(){switch(this.Cl){default:case L0:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;e.index=this.Ab[n],this.Ab[n]++}break;case b0:for(t=this.network.vertexes.iterator,e=this.ra;0<=e;e--)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&eS(this,n);break;case Ep:for(t=this.network.vertexes.iterator,e=0;e<=this.ra;e++)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&C1(this,n)}},ee.prototype.reduceCrossings=function(){var n,o,u,h,f,t=this.countCrossings(),e=Vi(this);for(n=0;n<this.Rj;n++){for(o=0;o<=this.ra;o++)Jl(this,o,1),uo(this,o,1);var a=this.countCrossings();for(a<t&&(t=a,e=Vi(this)),o=this.ra;0<=o;o--)Jl(this,o,-1),uo(this,o,-1);(a=this.countCrossings())<t&&(t=a,e=Vi(this))}for(Kr(this,e),n=0;n<this.Rj;n++){for(o=0;o<=this.ra;o++)Jl(this,o,0),uo(this,o,0);for((a=this.countCrossings())<t&&(t=a,e=Vi(this)),o=this.ra;0<=o;o--)Jl(this,o,0),uo(this,o,0);(a=this.countCrossings())<t&&(t=a,e=Vi(this))}switch(Kr(this,e),this.Zk){case S1:break;case Tp:for(f=t+1;(o=this.countCrossings())<f;)for(f=o,n=this.ra;0<=n;n--)for(h=0;h<=n;h++){for(u=!0;u;)for(u=!1,o=n;o>=h;o--)u=uo(this,o,-1)||u;for((a=this.countCrossings())>=t?Kr(this,e):(t=a,e=Vi(this)),u=!0;u;)for(u=!1,o=n;o>=h;o--)u=uo(this,o,1)||u;for((a=this.countCrossings())>=t?Kr(this,e):(t=a,e=Vi(this)),u=!0;u;)for(u=!1,o=h;o<=n;o++)u=uo(this,o,1)||u;for(a>=t?Kr(this,e):(t=a,e=Vi(this)),u=!0;u;)for(u=!1,o=h;o<=n;o++)u=uo(this,o,-1)||u;for(a>=t?Kr(this,e):(t=a,e=Vi(this)),u=!0;u;)for(u=!1,o=n;o>=h;o--)u=uo(this,o,0)||u;for(a>=t?Kr(this,e):(t=a,e=Vi(this)),u=!0;u;)for(u=!1,o=h;o<=n;o++)u=uo(this,o,0)||u;a>=t?Kr(this,e):(t=a,e=Vi(this))}break;default:for(n=this.ra,h=0,f=t+1;(o=this.countCrossings())<f;){for(f=o,u=!0;u;)for(u=!1,o=n;o>=h;o--)u=uo(this,o,-1)||u;for((a=this.countCrossings())>=t?Kr(this,e):(t=a,e=Vi(this)),u=!0;u;)for(u=!1,o=n;o>=h;o--)u=uo(this,o,1)||u;for((a=this.countCrossings())>=t?Kr(this,e):(t=a,e=Vi(this)),u=!0;u;)for(u=!1,o=h;o<=n;o++)u=uo(this,o,1)||u;for(a>=t?Kr(this,e):(t=a,e=Vi(this)),u=!0;u;)for(u=!1,o=h;o<=n;o++)u=uo(this,o,-1)||u;for(a>=t?Kr(this,e):(t=a,e=Vi(this)),u=!0;u;)for(u=!1,o=n;o>=h;o--)u=uo(this,o,0)||u;for(a>=t?Kr(this,e):(t=a,e=Vi(this)),u=!0;u;)for(u=!1,o=h;o<=n;o++)u=uo(this,o,0)||u;a>=t?Kr(this,e):(t=a,e=Vi(this))}}Kr(this,e)},ee.prototype.straightenAndPack=function(){var t=0!=(1&this.pg),e=0!=(this.pg&Sr);if(1e3<this.network.edges.count&&e&&(t=!1),t){var n=[];for(e=0;e<=this.ra;e++)n[e]=0;for(var o,a=this.network.vertexes.iterator;a.next();){var u=a.value;e=u.layer,o=u.column,u=this.nodeMinColumnSpace(u,!1),n[e]=Math.max(n[e],o+u)}for(a.reset();a.next();)(u=a.value).column=(8*(this.Ba-n[e=u.layer])>>1)+8*(o=u.column);this.Ba*=8}if(0!=(2&this.pg))for(n=!0;n;){for(n=!1,e=this.pc+1;e<=this.ra;e++)n=Jh(this,e,1)||n;for(e=this.pc-1;0<=e;e--)n=Jh(this,e,-1)||n;n=Jh(this,this.pc,0)||n}if(0!=(4&this.pg)){for(e=this.pc+1;e<=this.ra;e++)Xm(this,e,1);for(e=this.pc-1;0<=e;e--)Xm(this,e,-1);Xm(this,this.pc,0)}if(t&&(O0(this,-1),O0(this,1)),0!=(2&this.pg))for(n=!0;n;){for(n=!1,n=Jh(this,this.pc,0)||n,e=this.pc+1;e<=this.ra;e++)n=Jh(this,e,0)||n;for(e=this.pc-1;0<=e;e--)n=Jh(this,e,0)||n}},ee.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=Zm(this,!0),e=Zm(this,!1),n=this.network.edges.iterator;n.next();){var o=n.value.link;null!==o&&(o.fromSpot=t,o.toSpot=e)}this.commitNodes(),this.Hv(),this.isRouting&&this.commitLinks()},ee.prototype.commitNodes=function(){this.Zd=[],this.zd=[],this.yd=[],this.Ia=[];for(var t=0;t<=this.ra;t++)this.Zd[t]=0,this.zd[t]=0,this.yd[t]=0,this.Ia[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;this.Zd[n]=Math.max(this.Zd[n],this.nodeMinLayerSpace(e,!0)),this.zd[n]=Math.max(this.zd[n],this.nodeMinLayerSpace(e,!1))}e=0,n=this.ue;for(var o=0;o<=this.ra;o++){var a=n;0>=this.Zd[o]+this.zd[o]&&(a=0),0<o&&(e+=a/2),90===this.K||0===this.K?(this.yd[o]=e+=this.zd[o],e+=this.Zd[o]):(this.yd[o]=e+=this.Zd[o],e+=this.zd[o]),o<this.ra&&(e+=a/2),this.Ia[o]=e}for(n=e,e=this.arrangementOrigin,o=0;o<=this.ra;o++)270===this.K?this.yd[o]=e.y+this.yd[o]:90===this.K?(this.yd[o]=e.y+n-this.yd[o],this.Ia[o]=n-this.Ia[o]):180===this.K?this.yd[o]=e.x+this.yd[o]:(this.yd[o]=e.x+n-this.yd[o],this.Ia[o]=n-this.Ia[o]);for(t.reset(),n=o=1/0;t.next();){var u=(a=t.value).layer,h=0|a.column;if(270===this.K||90===this.K){var f=e.x+this.Zb*h;u=this.yd[u]}else f=this.yd[u],u=e.y+this.Zb*h;a.centerX=f,a.centerY=u,o=Math.min(a.x,o),n=Math.min(a.y,n)}for(this.Xc=new A(o=e.x-o,e=e.y-n),t.reset();t.next();)(n=t.value).x+=o,n.y+=e,n.commit()},ee.prototype.Hv=function(){for(var t=0,e=this.ue,n=0;n<=this.ra;n++)t+=this.Zd[n],t+=this.zd[n];t+=this.ra*e,e=[],n=this.Zb*this.Ba;for(var o=this.maxLayer;0<=o;o--)e.push(270===this.K?0===o?new z(0,0,n,Math.abs(this.Ia[0])):new z(0,this.Ia[o-1],n,Math.abs(this.Ia[o-1]-this.Ia[o])):90===this.K?0===o?new z(0,this.Ia[0],n,Math.abs(this.Ia[0]-t)):new z(0,this.Ia[o],n,Math.abs(this.Ia[o-1]-this.Ia[o])):180===this.K?0===o?new z(0,0,Math.abs(this.Ia[0]),n):new z(this.Ia[o-1],0,Math.abs(this.Ia[o-1]-this.Ia[o]),n):0===o?new z(this.Ia[0],0,Math.abs(this.Ia[0]-t),n):new z(this.Ia[o],0,Math.abs(this.Ia[o-1]-this.Ia[o]),n));this.commitLayers(e,this.Xc)},ee.prototype.commitLayers=function(){},ee.prototype.commitLinks=function(){for(var e,t=this.network.edges.iterator;t.next();)null!==(e=t.value.link)&&(e.Sh(),e.pk(),e.zf());for(t.reset();t.next();)null!==(e=t.value.link)&&e.xj();for(t.reset();t.next();){var n=t.value;if(null!==(e=n.link)){e.Sh();var o=e,a=o.fromNode,u=o.toNode,h=o.fromPort,f=o.toPort;if(null!==a){var p=a.findVisibleNode();null!==p&&p!==a&&(a=p,h=p.port)}null!==u&&null!==(p=u.findVisibleNode())&&p!==u&&(u=p,f=p.port);var g=e.computeSpot(!0,h);p=e.computeSpot(!1,f);var y=n.fromVertex,v=n.toVertex;if(n.valid){if(e.curve===vr&&4===e.pointsCount)if(y.column===v.column)n=e.getLinkPoint(a,h,g,!0,!1,u,f),h=e.getLinkPoint(u,f,p,!1,!1,a,h),n.u()||n.set(a.actualBounds.center),h.u()||h.set(u.actualBounds.center),e.pk(),e.xf(n.x,n.y),e.xf((2*n.x+h.x)/3,(2*n.y+h.y)/3),e.xf((n.x+2*h.x)/3,(n.y+2*h.y)/3),e.xf(h.x,h.y);else{var x=!1,S=!1;if(null!==h&&g===gi&&(x=!0),null!==f&&p===gi&&(S=!0),x||S){var M=e.i(0).x;n=e.i(0).y,y=e.i(3).x,o=e.i(3).y,x&&(90===this.K||270===this.K?(x=M,v=(n+o)/2):(x=(M+y)/2,v=n),e.L(1,x,v),(g=e.getLinkPoint(a,h,g,!0,!1,u,f)).u()||g.set(a.actualBounds.center),e.L(0,g.x,g.y)),S&&(90===this.K||270===this.K?(g=y,n=(n+o)/2):(g=(M+y)/2,n=o),e.L(2,g,n),(a=e.getLinkPoint(u,f,p,!1,!1,a,h)).u()||a.set(u.actualBounds.center),e.L(3,a.x,a.y))}}e.zf()}else if(y.layer===v.layer)e.zf();else{if(x=S=!1,M=e.firstPickIndex+1,e.isOrthogonal){x=!0;var T=e.pointsCount;4<T&&e.points.removeRange(2,T-3)}else if(e.curve===vr)S=!0,4<(T=e.pointsCount)&&e.points.removeRange(2,T-3),4===T&&(M=2);else{var N=g===gi,P=p===gi;2<(T=e.pointsCount)&&N&&P?e.points.removeRange(1,T-2):3<T&&N&&!P?e.points.removeRange(1,T-3):3<T&&!N&&P?e.points.removeRange(2,T-2):4<T&&!N&&!P&&e.points.removeRange(2,T-3)}if(n.rev){for(;null!==v&&y!==v;){var I=T=null;for(N=v.sourceEdges.iterator;N.next()&&((P=N.value).link!==n.link||(I=P.toVertex,null!==(T=P.fromVertex).node)););if(T!==y){N=e.i(M-1).x,P=e.i(M-1).y;var O=T.centerX,b=T.centerY;if(x)180===this.K||0===this.K?M===e.firstPickIndex+1?(e.m(M++,N,P),e.m(M++,N,b)):(null!==I?I.centerY:P)!==b&&(e.m(M++,I=this.Ia[T.layer-1]+this.Xc.x,P),e.m(M++,I,b)):M===e.firstPickIndex+1?(e.m(M++,N,P),e.m(M++,O,P)):(null!==I?I.centerX:N)!==O&&(e.m(M++,N,I=this.Ia[T.layer-1]+this.Xc.y),e.m(M++,O,I));else if(M===e.firstPickIndex+1){I=Math.max(10,this.Zd[v.layer]);var B=Math.max(10,this.zd[v.layer]);if(S)180===this.K?O<=v.bounds.x?(e.m(M++,(v=v.bounds.x)-I,b),e.m(M++,v,b),e.m(M++,v+B,b)):(e.m(M++,O-I,b),e.m(M++,O,b),e.m(M++,O+B,b)):90===this.K?b>=v.bounds.bottom?(e.m(M++,O,(v=v.bounds.y+v.bounds.height)+B),e.m(M++,O,v),e.m(M++,O,v-I)):(e.m(M++,O,b+B),e.m(M++,O,b),e.m(M++,O,b-I)):270===this.K?b<=v.bounds.y?(e.m(M++,O,(v=v.bounds.y)-I),e.m(M++,O,v),e.m(M++,O,v+B)):(e.m(M++,O,b-I),e.m(M++,O,b),e.m(M++,O,b+B)):0===this.K&&(O>=v.bounds.right?(e.m(M++,(v=v.bounds.x+v.bounds.width)+B,b),e.m(M++,v,b),e.m(M++,v-I,b)):(e.m(M++,O+B,b),e.m(M++,O,b),e.m(M++,O-I,b)));else{e.m(M++,N,P);var K=0;180===this.K||0===this.K?((180===this.K?O>=v.bounds.right:O<=v.bounds.x)&&(K=(0===this.K?-I:B)/2),e.m(M++,N+K,b)):((270===this.K?b>=v.bounds.bottom:b<=v.bounds.y)&&(K=(90===this.K?-I:B)/2),e.m(M++,O,P+K)),e.m(M++,O,b)}}else I=Math.max(10,this.Zd[T.layer]),B=Math.max(10,this.zd[T.layer]),180===this.K?(S&&e.m(M++,O-I,b),e.m(M++,O,b),S&&e.m(M++,O+B,b)):90===this.K?(S&&e.m(M++,O,b+B),e.m(M++,O,b),S&&e.m(M++,O,b-I)):270===this.K?(S&&e.m(M++,O,b-I),e.m(M++,O,b),S&&e.m(M++,O,b+B)):(S&&e.m(M++,O+B,b),e.m(M++,O,b),S&&e.m(M++,O-I,b))}v=T}(null===f||g!==gi||x)&&(N=e.i(M-1).x,P=e.i(M-1).y,O=e.i(M).x,b=e.i(M).y,x?(v=this.zd[y.layer],180===this.K||0===this.K?((x=P)>=y.bounds.y&&x<=y.bounds.bottom&&(180===this.K?O>=y.bounds.x:O<=y.bounds.right)&&(x=x<y.bounds.y+y.bounds.height/2?y.bounds.y-this.Zb/2:y.bounds.bottom+this.Zb/2,e.m(M++,v=y.centerX+(180===this.K?-v:v),P),e.m(M++,v,x)),e.m(M++,O,x)):((x=N)>=y.bounds.x&&x<=y.bounds.right&&(270===this.K?b>=y.bounds.y:b<=y.bounds.bottom)&&(x=x<y.bounds.x+y.bounds.width/2?y.bounds.x-this.Zb/2:y.bounds.right+this.Zb/2,e.m(M++,N,v=y.centerY+(270===this.K?-v:v)),e.m(M++,x,v)),e.m(M++,x,b)),e.m(M++,O,b)):S?(I=Math.max(10,this.Zd[y.layer]),B=Math.max(10,this.zd[y.layer]),180===this.K&&O>=y.bounds.x?(e.L(M-2,v=y.bounds.x+y.bounds.width,P),e.L(M-1,v+B,P)):90===this.K&&b<=y.bounds.bottom?(e.L(M-2,N,v=y.bounds.y),e.L(M-1,N,v-I)):270===this.K&&b>=y.bounds.y?(e.L(M-2,N,v=y.bounds.y+y.bounds.height),e.L(M-1,N,v+B)):0===this.K&&O<=y.bounds.right&&(e.L(M-2,v=y.bounds.x,P),e.L(M-1,v-I,P))):(I=Math.max(10,this.Zd[y.layer]),B=Math.max(10,this.zd[y.layer]),x=0,180===this.K||0===this.K?((180===this.K?O<=y.bounds.x:O>=y.bounds.right)&&(x=(0===this.K?B:-I)/2),e.m(M++,O+x,P)):((270===this.K?b<=y.bounds.y:b>=y.bounds.bottom)&&(x=(90===this.K?B:-I)/2),e.m(M++,N,b+x)),e.m(M++,O,b)))}else{for(;null!==y&&y!==v;){for(I=T=null,y=y.destinationEdges.iterator;y.next()&&((N=y.value).link!==n.link||(null!==(I=N.fromVertex).node&&(I=null),null!==(T=N.toVertex).node)););T!==v&&(N=e.i(M-1).x,P=e.i(M-1).y,O=T.centerX,b=T.centerY,x?180===this.K||0===this.K?(null!==I?I.centerY:P)!==b&&(I=this.Ia[T.layer]+this.Xc.x,M===e.firstPickIndex+1&&(I=0===this.K?Math.max(I,N):Math.min(I,N)),e.m(M++,I,P),e.m(M++,I,b)):(null!==I?I.centerX:N)!==O&&(I=this.Ia[T.layer]+this.Xc.y,M===e.firstPickIndex+1&&(I=90===this.K?Math.max(I,P):Math.min(I,P)),e.m(M++,N,I),e.m(M++,O,I)):(I=Math.max(10,this.Zd[T.layer]),B=Math.max(10,this.zd[T.layer]),180===this.K?(e.m(M++,O+B,b),S&&e.m(M++,O,b),e.m(M++,O-I,b)):90===this.K?(e.m(M++,O,b-I),S&&e.m(M++,O,b),e.m(M++,O,b+B)):270===this.K?(e.m(M++,O,b+B),S&&e.m(M++,O,b),e.m(M++,O,b-I)):(e.m(M++,O-I,b),S&&e.m(M++,O,b),e.m(M++,O+B,b)))),y=T}x&&(N=e.i(M-1).x,P=e.i(M-1).y,O=e.i(M).x,b=e.i(M).y,180===this.K||0===this.K?P!==b&&(I=0===this.K?Math.min(Math.max((O+N)/2,this.Ia[v.layer]+this.Xc.x),O):Math.max(Math.min((O+N)/2,this.Ia[v.layer]+this.Xc.x),O),e.m(M++,I,P),e.m(M++,I,b)):N!==O&&(I=90===this.K?Math.min(Math.max((b+P)/2,this.Ia[v.layer]+this.Xc.y),b):Math.max(Math.min((b+P)/2,this.Ia[v.layer]+this.Xc.y),b),e.m(M++,N,I),e.m(M++,O,I)))}null!==o&&S&&(null!==h&&(g===gi&&(g=e.i(0),o=e.i(2),g.w(o)||e.L(1,(g.x+o.x)/2,(g.y+o.y)/2)),(g=e.getLinkPoint(a,h,gi,!0,!1,u,f)).u()||g.set(a.actualBounds.center),e.L(0,g.x,g.y)),null!==f&&(p===gi&&(p=e.i(e.pointsCount-1),g=e.i(e.pointsCount-3),p.w(g)||e.L(e.pointsCount-2,(p.x+g.x)/2,(p.y+g.y)/2)),(a=e.getLinkPoint(u,f,gi,!1,!1,a,h)).u()||a.set(u.actualBounds.center),e.L(e.pointsCount-1,a.x,a.y))),e.zf(),n.commit()}}}this.avoidOrthogonalOverlaps()},ee.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new lt,e=this.network.edges.iterator;e.next();){var n=e.value.link;null!==n&&n.isOrthogonal&&!t.contains(n)&&t.add(n)}if(0<t.count)if(90===this.K||270===this.K){for(e=0,n=[],t=t.iterator;t.next();){var o=t.value;if(null!==o&&o.isOrthogonal)for(var a=2;a<o.pointsCount-3;a++){var u=o.i(a),h=o.i(a+1);if(this.A(u.y,h.y)&&!this.A(u.x,h.x)){var f=new wa;f.layer=Math.floor(u.y/2);var p=o.i(0),g=o.i(o.pointsCount-1);if(f.first=p.x*p.x+p.y,f.Xb=g.x*g.x+g.y,f.hd=Math.min(u.x,h.x),f.vc=Math.max(u.x,h.x),f.index=a,f.link=o,a+2<o.pointsCount){p=o.i(a-1),g=o.i(a+2);var y=0;p.y<u.y?y=g.y<u.y?3:u.x<h.x?2:1:p.y>u.y&&(y=g.y>u.y?0:h.x<u.x?2:1),f.l=y}n.push(f)}}}if(1<n.length)for(n.sort(this.Sy),t=0;t<n.length;){for(u=n[t].layer,o=t+1;o<n.length&&n[o].layer===u;)o++;if(1<o-t)for(u=t;u<o;){for(h=n[u].vc,a=t+1;a<o&&n[a].hd<h;)h=Math.max(h,n[a].vc),a++;if(1<(h=a-u)){for(this.uj(n,this.hu,u,u+h),y=1,f=n[u].Xb,p=u;p<a;p++)(g=n[p]).Xb!==f&&(y++,f=g.Xb);this.uj(n,this.Ry,u,u+h);var v=1;for(f=n[u].first,p=u;p<a;p++)(g=n[p]).first!==f&&(v++,f=g.first);for(p=!0,g=v,y<v?(p=!1,g=y,f=n[u].Xb,this.uj(n,this.hu,u,u+h)):f=n[u].first,y=0,v=u;v<a;v++){var x=n[v];(p?x.first:x.Xb)!==f&&(y++,f=p?x.first:x.Xb);var S=x.link;u=S.i(x.index),h=S.i(x.index+1);var M=this.linkSpacing*(y-(g-1)/2);e++,S.Sh(),S.L(x.index,u.x,u.y+M),S.L(x.index+1,h.x,h.y+M),S.zf()}}u=a}t=o}}else{for(e=0,n=[],t=t.iterator;t.next();)if(null!==(o=t.value)&&o.isOrthogonal)for(a=2;a<o.pointsCount-3;a++)u=o.i(a),h=o.i(a+1),this.A(u.x,h.x)&&!this.A(u.y,h.y)&&((f=new wa).layer=Math.floor(u.x/2),p=o.i(0),g=o.i(o.pointsCount-1),f.first=p.x+p.y*p.y,f.Xb=g.x+g.y*g.y,f.hd=Math.min(u.y,h.y),f.vc=Math.max(u.y,h.y),f.index=a,f.link=o,a+2<o.pointsCount&&(p=o.i(a-1),g=o.i(a+2),y=0,p.x<u.x?y=g.x<u.x?3:u.y<h.y?2:1:p.x>u.x&&(y=g.x>u.x?0:h.y<u.y?2:1),f.l=y),n.push(f));if(1<n.length)for(n.sort(this.Sy),t=0;t<n.length;){for(u=n[t].layer,o=t+1;o<n.length&&n[o].layer===u;)o++;if(1<o-t)for(u=t;u<o;){for(h=n[u].vc,a=t+1;a<o&&n[a].hd<h;)h=Math.max(h,n[a].vc),a++;if(1<(h=a-u)){for(this.uj(n,this.hu,u,u+h),y=1,f=n[u].Xb,p=u;p<a;p++)(g=n[p]).Xb!==f&&(y++,f=g.Xb);for(this.uj(n,this.Ry,u,u+h),v=1,f=n[u].first,p=u;p<a;p++)(g=n[p]).first!==f&&(v++,f=g.first);for(p=!0,g=v,y<v?(p=!1,g=y,f=n[u].Xb,this.uj(n,this.hu,u,u+h)):f=n[u].first,y=0,v=u;v<a;v++)x=n[v],(p?x.first:x.Xb)!==f&&(y++,f=p?x.first:x.Xb),u=(S=x.link).i(x.index),h=S.i(x.index+1),M=this.linkSpacing*(y-(g-1)/2),e++,S.Sh(),S.L(x.index,u.x+M,u.y),S.L(x.index+1,h.x+M,h.y),S.zf()}u=a}t=o}}}},(D=ee.prototype).Sy=function(t,e){return t instanceof wa&&e instanceof wa&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.hd<e.hd?-1:t.hd>e.hd?1:t.vc<e.vc?-1:t.vc>e.vc?1:0:0},D.Ry=function(t,e){return t instanceof wa&&e instanceof wa&&t!==e?t.first<e.first?-1:t.first>e.first||t.l<e.l?1:t.l>e.l||t.hd<e.hd?-1:t.hd>e.hd?1:t.vc<e.vc?-1:t.vc>e.vc?1:0:0},D.hu=function(t,e){return t instanceof wa&&e instanceof wa&&t!==e?t.Xb<e.Xb?-1:t.Xb>e.Xb||t.l<e.l?1:t.l>e.l||t.hd<e.hd?-1:t.hd>e.hd?1:t.vc<e.vc?-1:t.vc>e.vc?1:0:0},D.A=function(t,e){return-1<(t-=e)&&1>t},D.uj=function(t,e,n,o){var a=t.length,u=o-n;if(!(1>=u))if((0>n||n>=a-1)&&W("not in range 0 <= from < length: "+n),2===u)0<e(o=t[n],a=t[n+1])&&(t[n]=a,t[n+1]=o);else if(0===n)if(o>=a)t.sort(e);else for((n=t.slice(0,o)).sort(e),e=0;e<o;e++)t[e]=n[e];else if(o>=a)for((o=t.slice(n)).sort(e),e=n;e<a;e++)t[e]=o[e-n];else for((a=t.slice(n,o)).sort(e),e=n;e<o;e++)t[e]=a[e-n]},L.Object.defineProperties(ee.prototype,{layerSpacing:{get:function(){return this.ue},set:function(t){this.ue!==t&&0<=t&&(this.ue=t,this.C())}},columnSpacing:{get:function(){return this.Zb},set:function(t){this.Zb!==t&&0<t&&(this.Zb=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K!==t&&(0===t||90===t||180===t||270===t?(this.K=t,this.C()):W("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.jl},set:function(t){this.jl===t||t!==Qm&&t!==Jm&&t!==Mp||(this.jl=t,this.C())}},layeringOption:{get:function(){return this.Nl},set:function(t){this.Nl===t||t!==Sp&&t!==qm&&t!==Dp||(this.Nl=t,this.C())}},initializeOption:{get:function(){return this.Cl},set:function(t){this.Cl===t||t!==b0&&t!==Ep&&t!==L0||(this.Cl=t,this.C())}},iterations:{get:function(){return this.Rj},set:function(t){this.Rj!==t&&0<=t&&(this.Rj=t,this.C())}},aggressiveOption:{get:function(){return this.Zk},set:function(t){this.Zk===t||t!==S1&&t!==Dt&&t!==Tp||(this.Zk=t,this.C())}},packOption:{get:function(){return this.pg},set:function(t){this.pg!==t&&0<=t&&8>t&&(this.pg=t,this.C())}},setsPortSpots:{get:function(){return this.kf},set:function(t){this.kf!==t&&(this.kf=t,this.C())}},linkSpacing:{get:function(){return this.Ho},set:function(t){this.Ho!==t&&0<=t&&(this.Ho=t,this.C())}},maxLayer:{get:function(){return this.ra}},maxIndex:{get:function(){return this.Ii}},maxColumn:{get:function(){return this.Ba}},minIndexLayer:{get:function(){return this.mh}},maxIndexLayer:{get:function(){return this.pc}}});var Jm=new it(ee,"CycleDepthFirst",0),Qm=new it(ee,"CycleGreedy",1),Mp=new it(ee,"CycleFromLayers",2),Sp=new it(ee,"LayerOptimalLinkLength",0),qm=new it(ee,"LayerLongestPathSink",1),Dp=new it(ee,"LayerLongestPathSource",2),b0=new it(ee,"InitDepthFirstOut",0),Ep=new it(ee,"InitDepthFirstIn",1),L0=new it(ee,"InitNaive",2),S1=new it(ee,"AggressiveNone",0),Dt=new it(ee,"AggressiveLess",1),Tp=new it(ee,"AggressiveMore",2),Sr=8;function wa(){this.index=this.vc=this.hd=this.Xb=this.first=this.layer=0,this.link=null,this.l=0}function Cf(t){re.call(this,t)}function Ui(t){on.call(this,t),this.Pa=this.Sg=this.Ei=-1,this.I=NaN,this.T=null,this.valid=!1,this.finish=this.Dg=NaN,this.yf=0,this.Lk=this.Mk=null}function Hi(t){Xn.call(this,t),this.l=this.Ka=this.eb=!1,this.Ja=this.I=NaN,this.T=this.v=0}function bt(){Wt.call(this),this.Kb=new nt,this.pp=ny,this.md=fs,this.lq=$0,this.us=ms,this.ox=[],this.ld=!0,this.Fb=ry,this.Pd=new Nt(10,10).freeze();var t=new Xu(this);this.U=new fo(t),this.V=new fo(t),this.tv=[]}function oT(t){var e=new nt;for(t=t.iterator;t.next();){var n=t.value;n.initialized||e.add(n)}return e}function D1(t,e){var n=999999,o=null;for(e=e.iterator;e.next();){var a=e.value;switch(t.md){case fs:a.sourceEdges.count<n&&(n=a.sourceEdges.count,o=a);break;case Qh:a.destinationEdges.count<n&&(n=a.destinationEdges.count,o=a);break;default:W("Unhandled path value "+t.md.toString())}}return o}function Mf(t,e){if(null!==e){switch(t.md){case fs:if(0<e.destinationEdges.count){for(var n=new lt,o=e.destinationVertexes;o.next();){var a=o.value;_p(t,e,a)&&n.add(a)}0<n.count&&(e.children=n.ma())}break;case Qh:if(0<e.sourceEdges.count){for(n=new lt,o=e.sourceVertexes;o.next();)_p(t,e,a=o.value)&&n.add(a);0<n.count&&(e.children=n.ma())}break;default:W("Unhandled path value"+t.md.toString())}for(o=(n=e.children).length,a=0;a<o;a++){var u=n[a];u.initialized=!0,u.level=e.level+1,u.parent=e,t.Kb.remove(u)}for(e=0;e<o;e++)Mf(t,n[e])}}function _p(t,e,n){if(n.initialized){if(null===e)var o=!1;else{for(o=e.parent;null!==o&&o!==n;)o=o.parent;o=o===n}if(o||n.level>e.level)return!1;t.removeChild(n.parent,n)}return!0}function E1(t,e){if(null!==e){t.initializeTreeVertexValues(e),e.alignment===js&&t.sortTreeVertexChildren(e);for(var n=0,o=e.childrenCount,a=0,u=e.children,h=u.length,f=0;f<h;f++){var p=u[f];E1(t,p),n+=p.descendantCount+1,o=Math.max(o,p.maxChildrenCount),a=Math.max(a,p.maxGenerationCount)}e.descendantCount=n,e.maxChildrenCount=o,e.maxGenerationCount=0<o?a+1:0}}function Sf(t,e){if(null!==e){t.assignTreeVertexValues(e);for(var n=(e=e.children).length,o=0;o<n;o++)Sf(t,e[o])}}function R0(t,e){if(null!==e){e.alignment!==js&&t.sortTreeVertexChildren(e);for(var n=(e=e.children).length,o=0;o<n;o++)R0(t,e[o])}}function xa(t){return t===Do||t===js||t===yl||t===Bs}function ki(t){return t===Do||t===js}function ty(t){var e=t.parent;if(null!==e){var n=e.alignment;if(xa(n)){if(ki(n)){for(e=e.children,n=0;n<e.length&&t!==e[n];)n++;return n%2==0}if(n===yl)return!0}}return!1}function T1(t,e){if(0===e.childrenCount){var n=!1,o=0;null!==e.parent&&(o=e.parent.angle,n=xa(n=e.parent.alignment));var a=ty(e);e.S.h(0,0),e.wa.h(e.width,e.height),null===e.parent||null===e.comments||(180!==o&&270!==o||n)&&!a?e.fa.h(0,0):180===o&&!n||(90===o||270===o)&&a?e.fa.h(e.width-2*e.focus.x,0):e.fa.h(0,e.height-2*e.focus.y)}else{n=90===(o=co(e))||270===o;for(var u=0,h=(a=e.children).length,f=0;f<h;f++){var p=a[f];u=Math.max(u,n?p.wa.width:p.wa.height)}var g=e.alignment,y=g===ds,v=g===ps;f=xa(g);var x=Math.max(0,e.breadthLimit);p=Ap(e);var S=e.nodeSpacing,M=ml(e),T=y||v?0:M/2,N=e.rowSpacing,P=0;(y||v||e.Rm||e.Sm&&1===e.maxGenerationCount)&&(P=Math.max(0,e.rowIndent)),y=e.width;var I=e.height,O=0,b=0,B=0,K=0,rt=0,tt=0,mt=0,ht=0,$=0;if(f&&!ki(g)&&135<o&&a.reverse(),ki(g))if(1<h)for(var zt=0;zt<h;zt++){var Lt=a[zt],Kt=Lt.wa;zt%2==0&&zt!==h-1&&($=Math.max($,(n?Kt.width:Kt.height)+Ca(Lt)-S))}else 1===h&&($=n?a[0].wa.width:a[0].wa.height);if(f)switch(g){case Do:case js:$=(b=135>o?j0(e,a,$,O,b):B0(e,a,$,O,b)).x,O=b.width,b=b.height;break;case yl:for(t=0;t<h;t++)T=(x=a[t]).wa,B=0===mt?0:N,n?(x.S.h(u-T.width,rt+B),O=Math.max(O,T.width),b=Math.max(b,rt+B+T.height),rt+=B+T.height):(x.S.h(K+B,u-T.height),O=Math.max(O,K+B+T.width),b=Math.max(b,T.height),K+=B+T.width),mt++;break;case Bs:for(u=0;u<h;u++)x=(t=a[u]).wa,T=0===mt?0:N,n?(t.S.h(S/2+e.focus.x,rt+T),O=Math.max(O,x.width),b=Math.max(b,rt+T+x.height),rt+=T+x.height):(t.S.h(K+T,S/2+e.focus.y),O=Math.max(O,K+T+x.width),b=Math.max(b,x.height),K+=T+x.width),mt++}else for(zt=0;zt<h;zt++){if(Kt=(Lt=a[zt]).wa,n){0<x&&0<mt&&K+S+Kt.width>x&&(K<u&&tu(e,g,u-K,0,ht,zt-1),tt++,mt=0,ht=zt,B=b,K=0,rt=135<o?-b-N:b+N);var _e=0===mt?T:S;Np(t,Lt,0,rt),Lt.S.h(K+_e,rt),O=Math.max(O,K+_e+Kt.width),b=Math.max(b,B+(0===tt?0:N)+Kt.height),K+=_e+Kt.width}else 0<x&&0<mt&&rt+S+Kt.height>x&&(rt<u&&tu(e,g,0,u-rt,ht,zt-1),tt++,mt=0,ht=zt,B=O,rt=0,K=135<o?-O-N:O+N),_e=0===mt?T:S,Np(t,Lt,K,0),Lt.S.h(K,rt+_e),b=Math.max(b,rt+_e+Kt.height),O=Math.max(O,B+(0===tt?0:N)+Kt.width),rt+=_e+Kt.height;mt++}switch(0<tt&&(n?(b+=Math.max(0,p),K<O&&tu(e,g,O-K,0,ht,h-1),0<P&&(v||eu(e,P,0,0,h-1),O+=P)):(O+=Math.max(0,p),rt<b&&tu(e,g,0,b-rt,ht,h-1),0<P&&(v||eu(e,0,P,0,h-1),b+=P))),P=v=0,g){case qh:n?v+=O/2-e.focus.x-M/2:P+=b/2-e.focus.y-M/2;break;case tc:0<tt?n?v+=O/2-e.focus.x-M/2:P+=b/2-e.focus.y-M/2:n?v+=(g=a[0].S.x+a[0].fa.x)+(a[h-1].S.x+a[h-1].fa.x+2*a[h-1].focus.x-g)/2-e.focus.x-M/2:P+=(g=a[0].S.y+a[0].fa.y)+(a[h-1].S.y+a[h-1].fa.y+2*a[h-1].focus.y-g)/2-e.focus.y-M/2;break;case ds:n?(v-=M,O+=M):(P-=M,b+=M);break;case ps:n?(v+=O-e.width+M,O+=M):(P+=b-e.height+M,b+=M);break;case Do:case js:n?v+=1<h?$+S/2-e.focus.x:a[0].focus.x-e.focus.x+a[0].fa.x:P+=1<h?$+S/2-e.focus.y:a[0].focus.y-e.focus.y+a[0].fa.y;break;case yl:n?v+=O+S/2-e.focus.x:P+=b+S/2-e.focus.y;break;case Bs:break;default:W("Unhandled alignment value "+g.toString())}for(M=0;M<h;M++)g=a[M],n?g.S.h(g.S.x+g.fa.x-v,g.S.y+(135<o?(f?-b:-g.wa.height)+g.fa.y-p:I+p+g.fa.y)):g.S.h(g.S.x+(135<o?(f?-O:-g.wa.width)+g.fa.x-p:y+p+g.fa.x),g.S.y+g.fa.y-P);n?(O=V0(e,O,v),0>v&&(v=0),135<o&&(P+=b+p),b=Math.max(Math.max(b,I),b+I+p)):(135<o&&(v+=O+p),O=Math.max(Math.max(O,y),O+y+p),b=U0(e,b,P),0>P&&(P=0)),e.fa.h(v,P),e.wa.h(O,b)}}function j0(t,e,n,o,a){var u=e.length;if(0===u)return new z(n,0,o,a);if(1===u)return new z(n,0,o=(t=e[0]).wa.width,a=t.wa.height);for(var h=t.nodeSpacing,f=t.rowSpacing,p=90===co(t),g=0,y=0,v=0,x=0;x<u;x++)if(!(x%2!=0||1<u&&x===u-1)){var S=e[x],M=S.wa,T=0===g?0:f;if(p){var N=Ca(S)-h;S.S.h(n-(M.width+N),v+T),o=Math.max(o,M.width+N),a=Math.max(a,v+T+M.height),v+=T+M.height}else N=Ca(S)-h,S.S.h(y+T,n-(M.height+N)),a=Math.max(a,M.height+N),o=Math.max(o,y+T+M.width),y+=T+M.width;g++}for(g=0,S=y,x=v,p?(y=n+h,v=0):(y=0,v=n+h),M=0;M<u;M++)if(M%2!=0){N=(T=e[M]).wa;var P=0===g?0:f;if(p){var I=Ca(T)-h;T.S.h(y+I,v+P),o=Math.max(o,y+N.width+I),a=Math.max(a,v+P+N.height),v+=P+N.height}else I=Ca(T)-h,T.S.h(y+P,v+I),o=Math.max(o,y+P+N.width),a=Math.max(a,v+N.height+I),y+=P+N.width;g++}return 1<u&&u%2==1&&(u=(e=e[u-1]).wa,f=null===e.parent?0:e.parent.rowSpacing,p?(e.S.h(n+h/2-e.focus.x-e.fa.x,a+f),p=n+h/2-e.focus.x-e.fa.x,o=Math.max(o,p+u.width),0>p&&(o-=p),a=Math.max(a,Math.max(x,v)+f+u.height),0>e.S.x&&(n=ho(t,e.S.x,!1,n,h))):(e.S.h(o+f,n+h/2-e.focus.y-e.fa.y),o=Math.max(o,Math.max(S,y)+f+u.width),v=n+h/2-e.focus.y-e.fa.y,a=Math.max(a,v+u.height),0>v&&(a-=v),0>e.S.y&&(n=ho(t,e.S.y,!0,n,h)))),new z(n,0,o,a)}function B0(t,e,n,o,a){var u=e.length;if(0===u)return new z(n,0,o,a);if(1===u)return new z(n,0,o=(e=e[0]).wa.width,a=e.wa.height);for(var h=t.nodeSpacing,f=t.rowSpacing,p=270===co(t),g=0,y=0,v=0,x=0;x<u;x++)if(!(x%2!=0||1<u&&x===u-1)){var S=e[x],M=S.wa,T=0===g?0:f;if(p){var N=Ca(S)-h;S.S.h(n-(M.width+N),v-=T+M.height),o=Math.max(o,M.width+N),a=Math.max(a,Math.abs(v))}else N=Ca(S)-h,S.S.h(y-=T+M.width,n-(M.height+N)),a=Math.max(a,M.height+N),o=Math.max(o,Math.abs(y));g++}for(g=0,S=y,x=v,p?(y=n+h,v=0):(y=0,v=n+h),M=0;M<u;M++)if(M%2!=0){N=(T=e[M]).wa;var P=0===g?0:f;if(p){var I=Ca(T)-h;T.S.h(y+I,v-=P+N.height),o=Math.max(o,y+N.width+I),a=Math.max(a,Math.abs(v))}else I=Ca(T)-h,T.S.h(y-=P+N.width,v+I),a=Math.max(a,v+N.height+I),o=Math.max(o,Math.abs(y));g++}for(1<u&&u%2==1&&(g=(f=e[u-1]).wa,M=null===f.parent?0:f.parent.rowSpacing,p?(f.S.h(n+h/2-f.focus.x-f.fa.x,-a-g.height-M),y=n+h/2-f.focus.x-f.fa.x,o=Math.max(o,y+g.width),0>y&&(o-=y),a=Math.max(a,Math.abs(Math.min(x,v))+M+g.height),0>f.S.x&&(n=ho(t,f.S.x,!1,n,h))):(f.S.h(-o-g.width-M,n+h/2-f.focus.y-f.fa.y),o=Math.max(o,Math.abs(Math.min(S,y))+M+g.width),v=n+h/2-f.focus.y-f.fa.y,a=Math.max(a,v+g.height),0>v&&(a-=v),0>f.S.y&&(n=ho(t,f.S.y,!0,n,h)))),t=0;t<u;t++)h=e[t],p?h.S.h(h.S.x,h.S.y+a):h.S.h(h.S.x+o,h.S.y);return new z(n,0,o,a)}function Ca(t){return null===t.parent?0:t.parent.nodeSpacing}function ho(t,e,n,o,a){for(var u=(t=t.children).length,h=0;h<u;h++)n?t[h].S.h(t[h].S.x,t[h].S.y-e):t[h].S.h(t[h].S.x-e,t[h].S.y);return e=t[u-1],Math.max(o,n?e.fa.y+e.focus.y-a/2:e.fa.x+e.focus.x-a/2)}function V0(t,e,n){switch(t.alignment){case tc:case qh:return n+t.width>e&&(e=n+t.width),0>n&&(e-=n),e;case ds:return t.width>e?t.width:e;case ps:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case Do:case js:return Math.max(t.width,Math.max(e,n+t.width)-Math.min(0,n));case yl:return t.width-t.focus.x+t.nodeSpacing/2+e;case Bs:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function U0(t,e,n){switch(t.alignment){case tc:case qh:return n+t.height>e&&(e=n+t.height),0>n&&(e-=n),e;case ds:return t.height>e?t.height:e;case ps:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case Do:case js:return Math.max(t.height,Math.max(e,n+t.height)-Math.min(0,n));case yl:return t.height-t.focus.y+t.nodeSpacing/2+e;case Bs:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function H0(t,e,n){switch(t){case qh:case tc:e/=2,n/=2;break;case ds:n=e=0;break;case ps:break;default:W("Unhandled alignment value "+t.toString())}return new A(e,n)}function tu(t,e,n,o,a,u){eu(t,(e=H0(e,n,o)).x,e.y,a,u)}function eu(t,e,n,o,a){if(0!==e||0!==n)for(t=t.children;o<=a;o++){var u=t[o].S;u.x+=e,u.y+=n}}function Np(t,e,n,o){var a=e.parent;switch(t.md){case fs:for(t=e.sourceEdges;t.next();)(e=t.value).fromVertex===a&&e.relativePoint.h(n,o);break;case Qh:for(t=e.destinationEdges;t.next();)(e=t.value).toVertex===a&&e.relativePoint.h(n,o);break;default:W("Unhandled path value "+t.md.toString())}}function Pp(t,e,n){for(var o=0;o<t.length;o++){var a=t[o];a.x+=e,a.y+=n}}function G0(t,e,n,o,a,u,h,f){var p=co(e),g=90===p||270===p,y=e.nodeSpacing;e=o;var v=a;o=u;var x=h,S=n.Oq,M=n.br;h=n.wa;var T=g?Math.max(x,h.height):Math.max(o,h.width);if((null===S||p!==co(n))&&(S=Gi(t,2),M=Gi(t,2),g?(S[0].h(0,0),S[1].h(0,h.height),M[0].h(h.width,0),M[1].h(M[0].x,S[1].y)):(S[0].h(0,0),S[1].h(h.width,0),M[0].h(0,h.height),M[1].h(S[1].x,M[0].y))),g){if(x=9999999,!(null===v||2>v.length||null===S||2>S.length))for(a=n=0;n<v.length&&a<S.length;){var N=S[a];p=N.x,g=N.y,p+=o;var P=u=v[n];n+1<v.length&&(P=v[n+1]);var I=N;N=I.x,I=I.y,a+1<S.length&&(N=(I=S[a+1]).x,I=I.y,N+=o);var O=x;u.y===g?O=p-u.x:u.y>g&&u.y<I?O=p+(u.y-g)/(I-g)*(N-p)-u.x:g>u.y&&g<P.y&&(O=p-(u.x+(g-u.y)/(P.y-u.y)*(P.x-u.x))),O<x&&(x=O),P.y<=u.y?n++:I<=g?a++:(P.y<=I&&n++,I<=P.y&&a++)}if(x=o-x,n=S,a=x+=y,null===e||2>e.length||null===n||2>n.length)o=null;else{for(y=Gi(t,e.length+n.length),o=u=p=0;u<n.length&&n[u].y<e[0].y;)g=n[u++],y[o++].h(g.x+a,g.y);for(;p<e.length;)g=e[p++],y[o++].h(g.x,g.y);for(p=e[e.length-1].y;u<n.length&&n[u].y<=p;)u++;for(;u<n.length&&n[u].y>p;)g=n[u++],y[o++].h(g.x+a,g.y);for(n=Gi(t,o),p=0;p<o;p++)n[p].assign(y[p]);So(t,y),o=n}if(u=M,p=x,null===v||2>v.length||null===u||2>u.length)a=null;else{for(y=Gi(t,v.length+u.length),a=g=n=0;n<v.length&&v[n].y<u[0].y;)P=v[n++],y[a++].h(P.x,P.y);for(;g<u.length;)P=u[g++],y[a++].h(P.x+p,P.y);for(u=u[u.length-1].y;n<v.length&&v[n].y<=u;)n++;for(;n<v.length&&v[n].y>u;)p=v[n++],y[a++].h(p.x,p.y);for(u=Gi(t,a),n=0;n<a;n++)u[n].assign(y[n]);So(t,y),a=u}return u=Math.max(0,x)+h.width,h=T,So(t,e),So(t,S),So(t,v),So(t,M),f[0]=o,f[1]=a,new z(x,0,u,h)}if(o=9999999,!(null===v||2>v.length||null===S||2>S.length))for(a=n=0;n<v.length&&a<S.length;)p=(N=S[a]).x,g=N.y,g+=x,P=u=v[n],n+1<v.length&&(P=v[n+1]),N=(I=N).x,I=I.y,a+1<S.length&&(N=(I=S[a+1]).x,I=I.y,I+=x),O=o,u.x===p?O=g-u.y:u.x>p&&u.x<N?O=g+(u.x-p)/(N-p)*(I-g)-u.y:p>u.x&&p<P.x&&(O=g-(u.y+(p-u.x)/(P.x-u.x)*(P.y-u.y))),O<o&&(o=O),P.x<=u.x?n++:N<=p?a++:(P.x<=N&&n++,N<=P.x&&a++);if(x-=o,n=S,a=x+=y,null===e||2>e.length||null===n||2>n.length)o=null;else{for(y=Gi(t,e.length+n.length),o=u=p=0;u<n.length&&n[u].x<e[0].x;)g=n[u++],y[o++].h(g.x,g.y+a);for(;p<e.length;)g=e[p++],y[o++].h(g.x,g.y);for(p=e[e.length-1].x;u<n.length&&n[u].x<=p;)u++;for(;u<n.length&&n[u].x>p;)g=n[u++],y[o++].h(g.x,g.y+a);for(n=Gi(t,o),p=0;p<o;p++)n[p].assign(y[p]);So(t,y),o=n}if(u=M,p=x,null===v||2>v.length||null===u||2>u.length)a=null;else{for(y=Gi(t,v.length+u.length),a=g=n=0;n<v.length&&v[n].x<u[0].x;)P=v[n++],y[a++].h(P.x,P.y);for(;g<u.length;)P=u[g++],y[a++].h(P.x,P.y+p);for(u=u[u.length-1].x;n<v.length&&v[n].x<=u;)n++;for(;n<v.length&&v[n].x>u;)p=v[n++],y[a++].h(p.x,p.y);for(u=Gi(t,a),n=0;n<a;n++)u[n].assign(y[n]);So(t,y),a=u}return u=T,h=Math.max(0,x)+h.height,So(t,e),So(t,S),So(t,v),So(t,M),f[0]=o,f[1]=a,new z(x,0,u,h)}function Gi(t,e){if(void 0!==(t=t.tv[e])&&void 0!==(t=t.pop()))return t;t=[];for(var n=0;n<e;n++)t[n]=new A;return t}function So(t,e){var n=e.length,o=t.tv[n];void 0===o&&(t.tv[n]=o=[]),o.push(e)}function ey(t,e,n,o){if(null!==e){e.x=n,e.y=o;for(var a=(e=e.children).length,u=0;u<a;u++){var h=e[u];ey(t,h,n+h.S.x,o+h.S.y)}}}function z0(t,e){if(null!==e){t.setPortSpots(e);for(var n=(e=e.children).length,o=0;o<n;o++)z0(t,e[o])}}function co(t){return 45>=(t=t.angle)?0:135>=t?90:225>=t?180:315>=t?270:0}function Ap(t){var e=co(t);e=90===e||270===e;var n=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var o=Math.min(1,t.layerSpacingParentOverlap);n-=e?t.height*o:t.width*o}return n<(e?-t.height:-t.width)&&(n=e?-t.height:-t.width),n}function ml(t){var e=co(t),n=t.nodeIndent;if(0<t.nodeIndentPastParent){var o=Math.min(1,t.nodeIndentPastParent);n+=90===e||270===e?t.width*o:t.height*o}return Math.max(0,n)}ee.className="LayeredDigraphLayout",ee.CycleDepthFirst=Jm,ee.CycleGreedy=Qm,ee.CycleFromLayers=Mp,ee.LayerOptimalLinkLength=Sp,ee.LayerLongestPathSink=qm,ee.LayerLongestPathSource=Dp,ee.InitDepthFirstOut=b0,ee.InitDepthFirstIn=Ep,ee.InitNaive=L0,ee.AggressiveNone=S1,ee.AggressiveLess=Dt,ee.AggressiveMore=Tp,ee.PackNone=0,ee.PackExpand=1,ee.PackStraighten=2,ee.PackMedian=4,ee.PackAll=15,wa.className="SegInfo",Y(Cf,re),Cf.prototype.createVertex=function(){return new Ui(this)},Cf.prototype.createEdge=function(){return new Hi(this)},Cf.className="LayeredDigraphNetwork",Y(Ui,on),Ui.prototype.serializeVertexProperties=function(t,e){on.prototype.serializeVertexProperties.call(this,t,e),t.layer=this.layer,t.column=this.column,t.index=this.index,t.component=this.component,t.near=this.near?En(this.near):null,t.valid=this.valid,t.Dg=this.Dg,t.finish=this.finish,t.yf=this.yf,t.Mk=this.Mk,t.Lk=this.Lk},Ui.prototype.zq=function(t,e,n,o){on.prototype.zq.call(this,t,e,n,o),this.layer=t.layer,this.column=t.column,this.index=t.index,this.component=t.component,(e=e.get(t.near))&&(this.near=e),this.valid=t.valid,this.Dg=t.Dg,this.finish=t.finish,this.yf=t.yf,this.Mk=t.Mk,this.Lk=t.Lk},L.Object.defineProperties(Ui.prototype,{layer:{get:function(){return this.Ei},set:function(t){this.Ei!==t&&(this.Ei=t)}},column:{get:function(){return this.Sg},set:function(t){this.Sg!==t&&(this.Sg=t)}},index:{get:function(){return this.Pa},set:function(t){this.Pa!==t&&(this.Pa=t)}},component:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},near:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}}}),Ui.className="LayeredDigraphVertex",Y(Hi,Xn),Hi.prototype.serializeEdgeProperties=function(t,e){Xn.prototype.serializeEdgeProperties.call(this,t,e),t.valid=this.valid,t.rev=this.rev,t.forest=this.forest,t.portFromPos=this.portFromPos,t.portToPos=this.portToPos,t.portFromColOffset=this.portFromColOffset,t.portToColOffset=this.portToColOffset},Hi.prototype.deserializeEdgeProperties=function(t,e,n,o){Xn.prototype.deserializeEdgeProperties.call(this,t,e,n,o),this.valid=t.valid,this.rev=t.rev,this.forest=t.forest,this.portFromPos=t.portFromPos,this.portToPos=t.portToPos,this.portFromColOffset=t.portFromColOffset,this.portToColOffset=t.portToColOffset},L.Object.defineProperties(Hi.prototype,{fromVertex:{get:function(){return this.$c},set:function(t){this.$c!==t&&(this.$c=t)}},toVertex:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this.gd=t)}},valid:{get:function(){return this.eb},set:function(t){this.eb!==t&&(this.eb=t)}},rev:{get:function(){return this.Ka},set:function(t){this.Ka!==t&&(this.Ka=t)}},forest:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}},portFromPos:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},portToPos:{get:function(){return this.Ja},set:function(t){this.Ja!==t&&(this.Ja=t)}},portFromColOffset:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t)}},portToColOffset:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}}}),Hi.className="LayeredDigraphEdge",Y(bt,Wt),bt.prototype.cloneProtected=function(t){Wt.prototype.cloneProtected.call(this,t),t.pp=this.pp,t.lq=this.lq,t.us=this.us,t.ld=this.ld,t.Fb=this.Fb,t.Pd.assign(this.Pd),t.U.copyInheritedPropertiesFrom(this.U),t.V.copyInheritedPropertiesFrom(this.V)},bt.prototype.jb=function(t){t.classType===bt?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.arrangement=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.treeStyle=t:W("Unknown enum value: "+t):Wt.prototype.jb.call(this,t)},bt.prototype.createNetwork=function(){return new Xu(this)},bt.prototype.makeNetwork=function(t){function e(o){if(o instanceof ot)return!o.isLinkLabel&&"Comment"!==o.category;if(o instanceof Q){var a=o.fromNode;return null!==a&&!a.isLinkLabel&&"Comment"!==a.category&&!(null===(o=o.toNode)||o.isLinkLabel||"Comment"===o.category)}return!1}var n=this.createNetwork();return t instanceof V?(n.Bg(t.nodes,!0,e),n.Bg(t.links,!0,e)):n.Bg(t instanceof Pt?t.memberParts:t.iterator,!1,e),n},bt.prototype.doLayout=function(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangement!==gs&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(null===e&&t instanceof V&&(e=t),this.md=this.path===ny&&null!==e?e.isTreePathToChildren?fs:Qh:this.path===ny?fs:this.path,0<this.network.vertexes.count){for(this.network.yq(),t=this.network.vertexes.iterator;t.next();)(e=t.value).initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Kb.count){for(t=new nt,e=this.Kb.iterator;e.next();){var n=e.value;n instanceof ot?null!==(n=this.network.kj(n))&&t.add(n):n instanceof fo&&t.add(n)}this.Kb=t}for(0===this.Kb.count&&this.findRoots(),t=this.Kb.copy().iterator;t.next();)(e=t.value).initialized||(e.initialized=!0,Mf(this,e));for(e=this.network.vertexes,t=null;0<(t=oT(e)).count;)null!==(e=D1(this,t))&&this.Kb.add(e),e.initialized=!0,Mf(this,e),e=t;for(t=this.Kb.iterator;t.next();)(e=t.value)instanceof fo&&E1(this,e);for(t=this.Kb.iterator;t.next();)(e=t.value)instanceof fo&&Sf(this,e);for(t=this.Kb.iterator;t.next();)(e=t.value)instanceof fo&&R0(this,e);if(this.Ev(),this.layerStyle===Op){for(t=[],e=this.network.vertexes.iterator;e.next();){var o=(n=e.value).parent;null===o&&(o=n),o=0===o.angle||180===o.angle;var a=t[n.level];void 0===a&&(a=0),t[n.level]=Math.max(a,o?n.width:n.height)}for(e=0;e<t.length;e++)void 0===t[e]&&(t[e]=0);for(this.ox=t,e=this.network.vertexes.iterator;e.next();)null===(o=(n=e.value).parent)&&(o=n),0===o.angle||180===o.angle?(180===o.angle&&(n.focusX+=t[n.level]-n.width),n.width=t[n.level]):(270===o.angle&&(n.focusY+=t[n.level]-n.height),n.height=t[n.level])}else if(this.layerStyle===ys)for(t=this.network.vertexes.iterator;t.next();){for(n=0===(e=t.value).angle||180===e.angle,o=-1,a=0;a<e.children.length;a++){var u=e.children[a];o=Math.max(o,n?u.width:u.height)}if(0<=o)for(a=0;a<e.children.length;a++)u=e.children[a],n?(180===e.angle&&(u.focusX+=o-u.width),u.width=o):(270===e.angle&&(u.focusY+=o-u.height),u.height=o)}for(t=this.Kb.iterator;t.next();)(e=t.value)instanceof fo&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Kb=new nt,this.isValidLayout=!0},bt.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var n=e.value;switch(this.md){case fs:0===n.sourceEdges.count&&this.Kb.add(n);break;case Qh:0===n.destinationEdges.count&&this.Kb.add(n);break;default:W("Unhandled path value "+this.md.toString())}}0===this.Kb.count&&null!==(t=D1(this,t))&&this.Kb.add(t)},bt.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var n=t.children,o=0,a=0;a<n.length;a++)n[a]===e&&o++;if(0<o){o=Array(n.length-o);for(var u=a=0;u<n.length;u++)n[u]!==e&&(o[a++]=n[u]);t.children=o}}},bt.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(function F0(t,e){switch(t.lq){default:case $0:return null!==e.parent?e.parent:t.U;case Vs:return null===e.parent?t.U:null===e.parent.parent?t.V:e.parent;case Tf:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.V:t.U;case Wu:var n=!0;if(0===e.childrenCount)n=!1;else for(var o=e.children,a=o.length,u=0;u<a;u++)if(0<o[u].childrenCount){n=!1;break}return n&&null!==e.parent?t.V:null!==e.parent?e.parent:t.U}}(this,t)),null!==t.parent&&t.parent.alignment===js){for(var e=t.angle,n=t.parent.children,o=0;o<n.length&&t!==n[o];)o++;o%2==0?o!==n.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0},bt.prototype.assignTreeVertexValues=function(){},bt.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case ui:break;case Df:t.children.reverse();break;case kp:t.children.sort(t.comparer);break;case Ip:t.children.sort(t.comparer),t.children.reverse();break;default:W("Unhandled sorting value "+t.sorting.toString())}},bt.prototype.Ev=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},bt.prototype.addComments=function(t){var e=t.angle,n=t.parent,o=0,a=!1;null!==n&&(o=n.angle,a=xa(a=n.alignment)),e=90===e||270===e,o=90===o||270===o,n=0===t.childrenCount;var u=0,h=0,f=0,p=t.commentSpacing;if(null!==t.node)for(var g=t.node.Rv();g.next();){var y=g.value;"Comment"===y.category&&y.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(y),y.Ta(),y=y.measuredBounds,e&&!n||!a&&!o&&n||a&&o&&n?(u=Math.max(u,y.width),h+=y.height+Math.abs(f)):(u+=y.width+Math.abs(f),h=Math.max(h,y.height)),f=p)}null!==t.comments&&(e&&!n||!a&&!o&&n||a&&o&&n?(u+=Math.abs(t.commentMargin),h=Math.max(0,h-t.height)):(h+=Math.abs(t.commentMargin),u=Math.max(0,u-t.width)),a=z.allocAt(0,0,t.bounds.width+u,t.bounds.height+h),t.bounds=a,z.free(a))},bt.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.node.measuredBounds,n=t.parent,o=t.angle,a=0,u=!1;null!==n&&(a=n.angle,u=xa(u=n.alignment)),o=90===o||270===o,n=90===a||270===a;for(var h=0===t.childrenCount,f=ty(t),p=0,g=t.comments,y=g.length,v=A.alloc(),x=0;x<y;x++){var S=g[x],M=S.measuredBounds;if(o&&!h||!u&&!n&&h||u&&n&&h){if(135<a&&!u||n&&f)if(0<=t.commentMargin)for(v.h(t.bounds.x-t.commentMargin-M.width,t.bounds.y+p),S.move(v),S=S.Hd();S.next();){var T=S.value;T.fromSpot=lr,T.toSpot=Li}else for(v.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+p),S.move(v),S=S.Hd();S.next();)(T=S.value).fromSpot=Li,T.toSpot=lr;else if(0<=t.commentMargin)for(v.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+p),S.move(v),S=S.Hd();S.next();)(T=S.value).fromSpot=Li,T.toSpot=lr;else for(v.h(t.bounds.x+t.commentMargin-M.width,t.bounds.y+p),S.move(v),S=S.Hd();S.next();)(T=S.value).fromSpot=lr,T.toSpot=Li;p=0<=t.commentSpacing?p+(M.height+t.commentSpacing):p+(t.commentSpacing-M.height)}else{if(135<a&&!u||!n&&f)if(0<=t.commentMargin)for(v.h(t.bounds.x+p,t.bounds.y-t.commentMargin-M.height),S.move(v),S=S.Hd();S.next();)(T=S.value).fromSpot=Be,T.toSpot=Ar;else for(v.h(t.bounds.x+p,t.bounds.y+2*t.focus.y-t.commentMargin),S.move(v),S=S.Hd();S.next();)(T=S.value).fromSpot=Ar,T.toSpot=Be;else if(0<=t.commentMargin)for(v.h(t.bounds.x+p,t.bounds.y+2*t.focus.y+t.commentMargin),S.move(v),S=S.Hd();S.next();)(T=S.value).fromSpot=Ar,T.toSpot=Be;else for(v.h(t.bounds.x+p,t.bounds.y+t.commentMargin-M.height),S.move(v),S=S.Hd();S.next();)(T=S.value).fromSpot=Be,T.toSpot=Ar;p=0<=t.commentSpacing?p+(M.width+t.commentSpacing):p+(t.commentSpacing-M.width)}}if(A.free(v),e=p-t.commentSpacing-(o?e.height:e.width),this.md===fs)for(t=t.destinationEdges;t.next();)null===(a=t.value.link)||a.isAvoiding||(a.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)null===(a=t.value.link)||a.isAvoiding||(a.toEndSegmentLength=0<e?e:NaN)}},bt.prototype.layoutTree=function(t){if(null!==t){for(var e=t.children,n=e.length,o=0;o<n;o++)this.layoutTree(e[o]);switch(t.compaction){case iy:T1(this,t);break;case Ef:if(t.alignment===js)T1(this,t);else if(0===t.childrenCount)n=!1,e=0,null!==(o=t.parent)&&(e=o.angle,n=xa(n=o.alignment)),o=ty(t),t.S.h(0,0),t.wa.h(t.width,t.height),null===t.parent||null===t.comments||(180!==e&&270!==e||n)&&!o?t.fa.h(0,0):180===e&&!n||(90===e||270===e)&&o?t.fa.h(t.width-2*t.focus.x,0):t.fa.h(0,t.height-2*t.focus.y),t.Oq=null,t.br=null;else{var a=co(t);e=90===a||270===a;var u=0,h=t.children,f=h.length;for(n=0;n<f;n++)o=h[n],u=Math.max(u,e?o.wa.width:o.wa.height);var p=t.alignment,g=p===ps,y=xa(p),v=Math.max(0,t.breadthLimit);n=Ap(t);var x=t.nodeSpacing,S=ml(t),M=t.rowSpacing,T=0;(p===ds||g||t.Rm||t.Sm&&1===t.maxGenerationCount)&&(T=Math.max(0,t.rowIndent)),o=t.width;var N=t.height,P=0,I=0,O=0,b=null,B=null,K=0,rt=0,tt=0,mt=0,ht=0,$=0,zt=0,Lt=0;if(y&&!ki(p)&&135<a&&h.reverse(),ki(p))if(1<f)for(var Kt=0;Kt<f;Kt++)Kt%2==0&&Kt!==f-1&&(Lt=Math.max(Lt,e?h[Kt].wa.width:h[Kt].wa.height));else 1===f&&(Lt=e?h[0].wa.width:h[0].wa.height);if(y){switch(p){case Do:Lt=(I=135>a?j0(t,h,Lt,P,I):B0(t,h,Lt,P,I)).x,P=I.width,I=I.height;break;case yl:for(b=0;b<f;b++)v=(B=h[b]).wa,O=0===$?0:M,e?(B.S.h(u-v.width,mt+O),P=Math.max(P,v.width),I=Math.max(I,mt+O+v.height),mt+=O+v.height):(B.S.h(tt+O,u-v.height),P=Math.max(P,tt+O+v.width),I=Math.max(I,v.height),tt+=O+v.width),$++;break;case Bs:for(b=0;b<f;b++)u=(B=h[b]).wa,v=0===$?0:M,e?(B.S.h(x/2+t.focus.x,mt+v),P=Math.max(P,u.width),I=Math.max(I,mt+v+u.height),mt+=v+u.height):(B.S.h(tt+v,x/2+t.focus.y),P=Math.max(P,tt+v+u.width),I=Math.max(I,u.height),tt+=v+u.width),$++}b=Gi(this,2),B=Gi(this,2),e?(b[0].h(0,0),b[1].h(0,I),B[0].h(P,0)):(b[0].h(0,0),b[1].h(P,0),B[0].h(0,I)),B[1].h(P,I)}else for(Kt=0;Kt<f;Kt++){var _e=h[Kt],On=_e.wa;if(e){0<v&&0<$&&tt+x+On.width>v&&(tt<u&&tu(t,p,u-tt,0,zt,Kt-1),ht++,$=0,zt=Kt,O=I,tt=0,mt=135<a?-I-M:I+M),Np(this,_e,0,mt);var Ne=0;if(0===$)B=_e.br,K=On.width,rt=On.height,(null===(b=_e.Oq)||null===B||a!==co(_e))&&(b=Gi(this,2),B=Gi(this,2),b[0].h(0,0),b[1].h(0,rt),B[0].h(K,0),B[1].h(K,rt));else{var Pe=ye();Ne=(rt=G0(this,t,_e,b,B,K,rt,Pe)).x,b=Pe[0],B=Pe[1],K=rt.width,rt=rt.height,Jt(Pe),tt<On.width&&0>Ne&&(eu(t,-Ne,0,zt,Kt-1),Pp(b,-Ne,0),Pp(B,-Ne,0),Ne=0)}_e.S.h(Ne,mt),P=Math.max(P,K),I=Math.max(I,O+(0===ht?0:M)+On.height),tt=K}else 0<v&&0<$&&mt+x+On.height>v&&(mt<u&&tu(t,p,0,u-mt,zt,Kt-1),ht++,$=0,zt=Kt,O=P,mt=0,tt=135<a?-P-M:P+M),Np(this,_e,tt,0),Ne=0,0===$?(B=_e.br,K=On.width,rt=On.height,(null===(b=_e.Oq)||null===B||a!==co(_e))&&(b=Gi(this,2),B=Gi(this,2),b[0].h(0,0),b[1].h(K,0),B[0].h(0,rt),B[1].h(K,rt))):(Ne=(rt=G0(this,t,_e,b,B,K,rt,Pe=ye())).x,b=Pe[0],B=Pe[1],K=rt.width,rt=rt.height,Jt(Pe),mt<On.height&&0>Ne&&(eu(t,0,-Ne,zt,Kt-1),Pp(b,0,-Ne),Pp(B,0,-Ne),Ne=0)),_e.S.h(tt,Ne),I=Math.max(I,rt),P=Math.max(P,O+(0===ht?0:M)+On.width),mt=rt;$++}switch(0<ht&&(e?(I+=Math.max(0,n),tt<P&&tu(t,p,P-tt,0,zt,f-1),0<T&&(g||eu(t,T,0,0,f-1),P+=T)):(P+=Math.max(0,n),mt<I&&tu(t,p,0,I-mt,zt,f-1),0<T&&(g||eu(t,0,T,0,f-1),I+=T))),T=g=0,p){case qh:e?g+=P/2-t.focus.x-S/2:T+=I/2-t.focus.y-S/2;break;case tc:0<ht?e?g+=P/2-t.focus.x-S/2:T+=I/2-t.focus.y-S/2:e?g+=(Lt=h[0].S.x+h[0].fa.x)+(h[f-1].S.x+h[f-1].fa.x+2*h[f-1].focus.x-Lt)/2-t.focus.x-S/2:T+=(Lt=h[0].S.y+h[0].fa.y)+(h[f-1].S.y+h[f-1].fa.y+2*h[f-1].focus.y-Lt)/2-t.focus.y-S/2;break;case ds:e?(g-=S,P+=S):(T-=S,I+=S);break;case ps:e?(g+=P-t.width+S,P+=S):(T+=I-t.height+S,I+=S);break;case Do:e?g+=1<f?Lt+x/2-t.focus.x:h[0].focus.x-t.focus.x+h[0].fa.x:T+=1<f?Lt+x/2-t.focus.y:h[0].focus.y-t.focus.y+h[0].fa.y;break;case yl:e?g+=P+x/2-t.focus.x:T+=I+x/2-t.focus.y;break;case Bs:break;default:W("Unhandled alignment value "+p.toString())}for(S=0;S<f;S++)Lt=h[S],e?Lt.S.h(Lt.S.x+Lt.fa.x-g,Lt.S.y+(135<a?(y?-I:-Lt.wa.height)+Lt.fa.y-n:N+n+Lt.fa.y)):Lt.S.h(Lt.S.x+(135<a?(y?-P:-Lt.wa.width)+Lt.fa.x-n:o+n+Lt.fa.x),Lt.S.y+Lt.fa.y-T);if(f=h=0,y?e?(P=V0(t,P,g),0>g&&(g=0),135<a&&(T+=I+n),I+=N+n,p===Bs&&(h+=x/2+t.focus.x),f+=N+n):(135<a&&(g+=P+n),P+=o+n,I=U0(t,I,T),0>T&&(T=0),p===Bs&&(f+=x/2+t.focus.y),h+=o+n):e?(null===t.comments?o>P&&(h=(P=H0(p,o-P,0)).x,f=P.y,P=o,g=0):P=V0(t,P,g),0>g&&(h-=g,g=0),135<a&&(T+=I+n),I=Math.max(Math.max(I,N),I+N+n),f+=N+n):(135<a&&(g+=P+n),P=Math.max(Math.max(P,o),P+o+n),null===t.comments?N>I&&(h=(I=H0(p,0,N-I)).x,f=I.y,I=N,T=0):I=U0(t,I,T),0>T&&(f-=T,T=0),h+=o+n),0<ht)a=Gi(this,4),ht=Gi(this,4),e?(a[2].h(0,N+n),a[3].h(a[2].x,I),ht[2].h(P,a[2].y),ht[3].h(ht[2].x,a[3].y)):(a[2].h(o+n,0),a[3].h(P,a[2].y),ht[2].h(a[2].x,I),ht[3].h(a[3].x,ht[2].y));else{for(a=Gi(this,b.length+2),ht=Gi(this,B.length+2),p=0;p<b.length;p++)a[p+2].h((y=b[p]).x+h,y.y+f);for(p=0;p<B.length;p++)ht[p+2].h((y=B[p]).x+h,y.y+f)}e?(a[0].h(g,0),a[1].h(a[0].x,N),a[2].y<a[1].y&&(a[2].x>a[0].x?a[2].assign(a[1]):a[1].assign(a[2])),a[3].y<a[2].y&&(a[3].x>a[0].x?a[3].assign(a[2]):a[2].assign(a[3])),ht[0].h(g+o,0),ht[1].h(ht[0].x,N),ht[2].y<ht[1].y&&(ht[2].x<ht[0].x?ht[2].assign(ht[1]):ht[1].assign(ht[2])),ht[3].y<ht[2].y&&(ht[3].x<ht[0].x?ht[3].assign(ht[2]):ht[2].assign(ht[3])),a[2].y-=n/2,ht[2].y-=n/2):(a[0].h(0,T),a[1].h(o,a[0].y),a[2].x<a[1].x&&(a[2].y>a[0].y?a[2].assign(a[1]):a[1].assign(a[2])),a[3].x<a[2].x&&(a[3].y>a[0].y?a[3].assign(a[2]):a[2].assign(a[3])),ht[0].h(0,T+N),ht[1].h(o,ht[0].y),ht[2].x<ht[1].x&&(ht[2].y<ht[0].y?ht[2].assign(ht[1]):ht[1].assign(ht[2])),ht[3].x<ht[2].x&&(ht[3].y<ht[0].y?ht[3].assign(ht[2]):ht[2].assign(ht[3])),a[2].x-=n/2,ht[2].x-=n/2),So(this,b),So(this,B),t.Oq=a,t.br=ht,t.fa.h(g,T),t.wa.h(P,I)}break;default:W("Unhandled compaction value "+t.compaction.toString())}}},bt.prototype.arrangeTrees=function(){if(this.Fb===gs)for(var t=this.Kb.iterator;t.next();){var e=t.value;if(e instanceof fo){var n=e.node;if(null!==n){var o=n.position;n=o.x,o=o.y,isFinite(n)||(n=0),isFinite(o)||(o=0),ey(this,e,n,o)}}}else{for(t=[],e=this.Kb.iterator;e.next();)(n=e.value)instanceof fo&&t.push(n);switch(this.sorting){case ui:break;case Df:t.reverse();break;case kp:t.sort(this.comparer);break;case Ip:t.sort(this.comparer),t.reverse();break;default:W("Unhandled sorting value "+this.sorting.toString())}for(e=(n=this.arrangementOrigin).x,n=n.y,o=0;o<t.length;o++){var a=t[o];switch(ey(this,a,e+a.fa.x,n+a.fa.y),this.Fb){case ry:n+=a.wa.height+this.Pd.height;break;case Ma:e+=a.wa.width+this.Pd.width;break;default:W("Unhandled arrangement value "+this.Fb.toString())}}}},bt.prototype.commitLayout=function(){this.Ew(),this.commitNodes(),this.Hv(),this.isRouting&&this.commitLinks()},bt.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},bt.prototype.Hv=function(){if(this.layerStyle===Op){for(var t=this.ox,e=[],n=null,o=this.network.vertexes.iterator;o.next();){var a=o.value;null===n?n=a.bounds.copy():n.Tc(a.bounds);var u=e[a.level];u=void 0===u?Ap(a):Math.max(u,Ap(a)),e[a.level]=u}for(o=0;o<e.length;o++)void 0===e[o]&&(e[o]=0);if(90===this.angle||270===this.angle?(n.Lc(this.nodeSpacing/2,this.layerSpacing),o=new A(-this.nodeSpacing/2,-this.layerSpacing/2)):(n.Lc(this.layerSpacing,this.nodeSpacing/2),o=new A(-this.layerSpacing/2,-this.nodeSpacing/2)),a=[],n=90===this.angle||270===this.angle?n.width:n.height,u=0,180===this.angle||270===this.angle)for(var h=0;h<t.length;h++)u+=t[h]+e[h];for(h=0;h<t.length;h++){var f=t[h]+e[h];270===this.angle?a.push(new z(0,u-=f,n,f)):90===this.angle?(a.push(new z(0,u,n,f)),u+=f):180===this.angle?a.push(new z(u-=f,0,f,n)):(a.push(new z(u,0,f,n)),u+=f)}this.commitLayers(a,o)}},bt.prototype.commitLayers=function(){},bt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},bt.prototype.Ew=function(){for(var t=this.Kb.iterator;t.next();){var e=t.value;e instanceof fo&&z0(this,e)}},bt.prototype.setPortSpots=function(t){var e=t.alignment;if(xa(e)){var n=this.md===fs,o=co(t);switch(o){case 0:var a=Li;break;case 90:a=Ar;break;case 180:a=lr;break;default:a=Be}var u=t.children,h=u.length;switch(e){case Do:case js:for(e=0;e<h;e++){var f=u[e];if(null!==(f=(n?f.sourceEdges:f.destinationEdges).first())&&null!==(f=f.link)){var p=90===o||270===o?lr:Be;if(1===h||e===h-1&&h%2==1)switch(o){case 0:p=lr;break;case 90:p=Be;break;case 180:p=Li;break;default:p=Ar}else e%2==0&&(p=90===o||270===o?Li:Ar);n?(t.setsPortSpot&&(f.fromSpot=a),t.setsChildPortSpot&&(f.toSpot=p)):(t.setsPortSpot&&(f.fromSpot=p),t.setsChildPortSpot&&(f.toSpot=a))}}break;case yl:for(o=90===o||270===o?Li:Ar,u=n?t.destinationEdges:t.sourceEdges;u.next();)null!==(h=u.value.link)&&(n?(t.setsPortSpot&&(h.fromSpot=a),t.setsChildPortSpot&&(h.toSpot=o)):(t.setsPortSpot&&(h.fromSpot=o),t.setsChildPortSpot&&(h.toSpot=a)));break;case Bs:for(o=90===o||270===o?lr:Be,u=n?t.destinationEdges:t.sourceEdges;u.next();)null!==(h=u.value.link)&&(n?(t.setsPortSpot&&(h.fromSpot=a),t.setsChildPortSpot&&(h.toSpot=o)):(t.setsPortSpot&&(h.fromSpot=o),t.setsChildPortSpot&&(h.toSpot=a)))}}else if(n=co(t),this.md===fs){for(a=t.destinationEdges;a.next();)if(null!==(o=a.value.link)){if(t.setsPortSpot)if(t.portSpot.Nb())switch(n){case 0:o.fromSpot=Li;break;case 90:o.fromSpot=Ar;break;case 180:o.fromSpot=lr;break;default:o.fromSpot=Be}else o.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Nb())switch(n){case 0:o.toSpot=lr;break;case 90:o.toSpot=Be;break;case 180:o.toSpot=Li;break;default:o.toSpot=Ar}else o.toSpot=t.childPortSpot}}else for(a=t.sourceEdges;a.next();)if(null!==(o=a.value.link)){if(t.setsPortSpot)if(t.portSpot.Nb())switch(n){case 0:o.toSpot=Li;break;case 90:o.toSpot=Ar;break;case 180:o.toSpot=lr;break;default:o.toSpot=Be}else o.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Nb())switch(n){case 0:o.fromSpot=lr;break;case 90:o.fromSpot=Be;break;case 180:o.fromSpot=Li;break;default:o.fromSpot=Ar}else o.fromSpot=t.childPortSpot}},L.Object.defineProperties(bt.prototype,{roots:{get:function(){return this.Kb},set:function(t){this.Kb!==t&&(this.Kb=t,this.C())}},path:{get:function(){return this.pp},set:function(t){this.pp!==t&&(this.pp=t,this.C())}},treeStyle:{get:function(){return this.lq},set:function(t){this.Fb===t||t!==$0&&t!==Tf&&t!==Wu&&t!==Vs||(this.lq=t,this.C())}},layerStyle:{get:function(){return this.us},set:function(t){this.Fb===t||t!==ms&&t!==ys&&t!==Op||(this.us=t,this.C())}},comments:{get:function(){return this.ld},set:function(t){this.ld!==t&&(this.ld=t,this.C())}},arrangement:{get:function(){return this.Fb},set:function(t){this.Fb===t||t!==ry&&t!==Ma&&t!==gs||(this.Fb=t,this.C())}},arrangementSpacing:{get:function(){return this.Pd},set:function(t){this.Pd.w(t)||(this.Pd.assign(t),this.C())}},rootDefaults:{get:function(){return this.U},set:function(t){this.U!==t&&(this.U=t,this.C())}},alternateDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.C())}},sorting:{get:function(){return this.U.sorting},set:function(t){this.U.sorting===t||t!==ui&&t!==Df&&t!==kp&&!Ip||(this.U.sorting=t,this.C())}},comparer:{get:function(){return this.U.comparer},set:function(t){this.U.comparer!==t&&(this.U.comparer=t,this.C())}},angle:{get:function(){return this.U.angle},set:function(t){this.U.angle!==t&&(0===t||90===t||180===t||270===t?(this.U.angle=t,this.C()):W("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.U.alignment},set:function(t){this.U.alignment!==t&&(this.U.alignment=t,this.C())}},nodeIndent:{get:function(){return this.U.nodeIndent},set:function(t){this.U.nodeIndent!==t&&0<=t&&(this.U.nodeIndent=t,this.C())}},nodeIndentPastParent:{get:function(){return this.U.nodeIndentPastParent},set:function(t){this.U.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.U.nodeIndentPastParent=t,this.C())}},nodeSpacing:{get:function(){return this.U.nodeSpacing},set:function(t){this.U.nodeSpacing!==t&&(this.U.nodeSpacing=t,this.C())}},layerSpacing:{get:function(){return this.U.layerSpacing},set:function(t){this.U.layerSpacing!==t&&(this.U.layerSpacing=t,this.C())}},layerSpacingParentOverlap:{get:function(){return this.U.layerSpacingParentOverlap},set:function(t){this.U.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.U.layerSpacingParentOverlap=t,this.C())}},compaction:{get:function(){return this.U.compaction},set:function(t){this.U.compaction===t||t!==iy&&t!==Ef||(this.U.compaction=t,this.C())}},breadthLimit:{get:function(){return this.U.breadthLimit},set:function(t){this.U.breadthLimit!==t&&0<=t&&(this.U.breadthLimit=t,this.C())}},rowSpacing:{get:function(){return this.U.rowSpacing},set:function(t){this.U.rowSpacing!==t&&(this.U.rowSpacing=t,this.C())}},rowIndent:{get:function(){return this.U.rowIndent},set:function(t){this.U.rowIndent!==t&&0<=t&&(this.U.rowIndent=t,this.C())}},commentSpacing:{get:function(){return this.U.commentSpacing},set:function(t){this.U.commentSpacing!==t&&(this.U.commentSpacing=t,this.C())}},commentMargin:{get:function(){return this.U.commentMargin},set:function(t){this.U.commentMargin!==t&&(this.U.commentMargin=t,this.C())}},setsPortSpot:{get:function(){return this.U.setsPortSpot},set:function(t){this.U.setsPortSpot!==t&&(this.U.setsPortSpot=t,this.C())}},portSpot:{get:function(){return this.U.portSpot},set:function(t){this.U.portSpot.w(t)||(this.U.portSpot=t,this.C())}},setsChildPortSpot:{get:function(){return this.U.setsChildPortSpot},set:function(t){this.U.setsChildPortSpot!==t&&(this.U.setsChildPortSpot=t,this.C())}},childPortSpot:{get:function(){return this.U.childPortSpot},set:function(t){this.U.childPortSpot.w(t)||(this.U.childPortSpot=t,this.C())}},alternateSorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==ui&&t!==Df&&t!==kp&&!Ip||(this.V.sorting=t,this.C())}},alternateComparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.C())}},alternateAngle:{get:function(){return this.V.angle},set:function(t){this.V.angle===t||0!==t&&90!==t&&180!==t&&270!==t||(this.V.angle=t,this.C())}},alternateAlignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.C())}},alternateNodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.C())}},alternateNodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.V.nodeIndentPastParent=t,this.C())}},alternateNodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.C())}},alternateLayerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.C())}},alternateLayerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.V.layerSpacingParentOverlap=t,this.C())}},alternateCompaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==iy&&t!==Ef||(this.V.compaction=t,this.C())}},alternateBreadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.C())}},alternateRowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.C())}},alternateRowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.C())}},alternateCommentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.C())}},alternateCommentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.C())}},alternateSetsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.C())}},alternatePortSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.w(t)||(this.V.portSpot=t,this.C())}},alternateSetsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.C())}},alternateChildPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.w(t)||(this.V.childPortSpot=t,this.C())}}});var ny=new it(bt,"PathDefault",-1),fs=new it(bt,"PathDestination",0),Qh=new it(bt,"PathSource",1),ui=new it(bt,"SortingForwards",10),Df=new it(bt,"SortingReverse",11),kp=new it(bt,"SortingAscending",12),Ip=new it(bt,"SortingDescending",13),qh=new it(bt,"AlignmentCenterSubtrees",20),tc=new it(bt,"AlignmentCenterChildren",21),ds=new it(bt,"AlignmentStart",22),ps=new it(bt,"AlignmentEnd",23),Do=new it(bt,"AlignmentBus",24),js=new it(bt,"AlignmentBusBranching",25),yl=new it(bt,"AlignmentTopLeftBus",26),Bs=new it(bt,"AlignmentBottomRightBus",27),iy=new it(bt,"CompactionNone",30),Ef=new it(bt,"CompactionBlock",31),$0=new it(bt,"StyleLayered",40),Wu=new it(bt,"StyleLastParents",41),Tf=new it(bt,"StyleAlternating",42),Vs=new it(bt,"StyleRootOnly",43),ry=new it(bt,"ArrangementVertical",50),Ma=new it(bt,"ArrangementHorizontal",51),gs=new it(bt,"ArrangementFixedRoots",52),ms=new it(bt,"LayerIndividual",60),ys=new it(bt,"LayerSiblings",61),Op=new it(bt,"LayerUniform",62);function Xu(t){re.call(this,t)}function fo(t){on.call(this,t),this.Ja=!1,this.Dc=null,this.I=[],this.Uc=this.eb=this.T=this.Ka=0,this.ld=null,this.S=new A(0,0),this.wa=new Nt(0,0),this.fa=new A(0,0),this.Sm=this.Rm=this.XA=!1,this.br=this.Oq=null,this.dd=ui,this.Yc=C0,this.Yb=0,this.zb=tc,this.Es=this.Ds=0,this.Fs=20,this.ue=50,this.ts=0,this.Fr=Ef,this.xr=0,this.Ts=25,this.Er=this.Ss=10,this.Dr=20,this.ft=!0,this.Os=Ei,this.et=!0,this.Ar=Ei}function _f(t){Xn.call(this,t),this.kv=new A(0,0)}bt.className="TreeLayout",bt.PathDefault=ny,bt.PathDestination=fs,bt.PathSource=Qh,bt.SortingForwards=ui,bt.SortingReverse=Df,bt.SortingAscending=kp,bt.SortingDescending=Ip,bt.AlignmentCenterSubtrees=qh,bt.AlignmentCenterChildren=tc,bt.AlignmentStart=ds,bt.AlignmentEnd=ps,bt.AlignmentBus=Do,bt.AlignmentBusBranching=js,bt.AlignmentTopLeftBus=yl,bt.AlignmentBottomRightBus=Bs,bt.CompactionNone=iy,bt.CompactionBlock=Ef,bt.StyleLayered=$0,bt.StyleLastParents=Wu,bt.StyleAlternating=Tf,bt.StyleRootOnly=Vs,bt.ArrangementVertical=ry,bt.ArrangementHorizontal=Ma,bt.ArrangementFixedRoots=gs,bt.LayerIndividual=ms,bt.LayerSiblings=ys,bt.LayerUniform=Op,Y(Xu,re),Xu.prototype.createVertex=function(){return new fo(this)},Xu.prototype.createEdge=function(){return new _f(this)},Xu.className="TreeNetwork",Y(fo,on),fo.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.dd=t.sorting,this.Yc=t.comparer,this.Yb=t.angle,this.zb=t.alignment,this.Ds=t.nodeIndent,this.Es=t.nodeIndentPastParent,this.Fs=t.nodeSpacing,this.ue=t.layerSpacing,this.ts=t.layerSpacingParentOverlap,this.Fr=t.compaction,this.xr=t.breadthLimit,this.Ts=t.rowSpacing,this.Ss=t.rowIndent,this.Er=t.commentSpacing,this.Dr=t.commentMargin,this.ft=t.setsPortSpot,this.Os=t.portSpot,this.et=t.setsChildPortSpot,this.Ar=t.childPortSpot)},L.Object.defineProperties(fo.prototype,{initialized:{get:function(){return this.Ja},set:function(t){this.Ja!==t&&(this.Ja=t)}},parent:{get:function(){return this.Dc},set:function(t){this.Dc!==t&&(this.Dc=t)}},children:{get:function(){return this.I},set:function(t){if(this.I!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.I=t}}},level:{get:function(){return this.Ka},set:function(t){this.Ka!==t&&(this.Ka=t)}},descendantCount:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}},maxChildrenCount:{get:function(){return this.eb},set:function(t){this.eb!==t&&(this.eb=t)}},maxGenerationCount:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t)}},comments:{get:function(){return this.ld},set:function(t){if(this.ld!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.ld=t}}},sorting:{get:function(){return this.dd},set:function(t){this.dd!==t&&(this.dd=t)}},comparer:{get:function(){return this.Yc},set:function(t){this.Yc!==t&&(this.Yc=t)}},angle:{get:function(){return this.Yb},set:function(t){this.Yb!==t&&(this.Yb=t)}},alignment:{get:function(){return this.zb},set:function(t){this.zb!==t&&(this.zb=t)}},nodeIndent:{get:function(){return this.Ds},set:function(t){this.Ds!==t&&(this.Ds=t)}},nodeIndentPastParent:{get:function(){return this.Es},set:function(t){this.Es!==t&&(this.Es=t)}},nodeSpacing:{get:function(){return this.Fs},set:function(t){this.Fs!==t&&(this.Fs=t)}},layerSpacing:{get:function(){return this.ue},set:function(t){this.ue!==t&&(this.ue=t)}},layerSpacingParentOverlap:{get:function(){return this.ts},set:function(t){this.ts!==t&&(this.ts=t)}},compaction:{get:function(){return this.Fr},set:function(t){this.Fr!==t&&(this.Fr=t)}},breadthLimit:{get:function(){return this.xr},set:function(t){this.xr!==t&&(this.xr=t)}},rowSpacing:{get:function(){return this.Ts},set:function(t){this.Ts!==t&&(this.Ts=t)}},rowIndent:{get:function(){return this.Ss},set:function(t){this.Ss!==t&&(this.Ss=t)}},commentSpacing:{get:function(){return this.Er},set:function(t){this.Er!==t&&(this.Er=t)}},commentMargin:{get:function(){return this.Dr},set:function(t){this.Dr!==t&&(this.Dr=t)}},setsPortSpot:{get:function(){return this.ft},set:function(t){this.ft!==t&&(this.ft=t)}},portSpot:{get:function(){return this.Os},set:function(t){this.Os.w(t)||(this.Os=t)}},setsChildPortSpot:{get:function(){return this.et},set:function(t){this.et!==t&&(this.et=t)}},childPortSpot:{get:function(){return this.Ar},set:function(t){this.Ar.w(t)||(this.Ar=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.S},set:function(t){this.S.set(t)}},subtreeSize:{get:function(){return this.wa},set:function(t){this.wa.set(t)}},subtreeOffset:{get:function(){return this.fa},set:function(t){this.fa.set(t)}}}),fo.className="TreeVertex",Y(_f,Xn),_f.prototype.commit=function(){var t=this.link;if(null!==t&&!t.isAvoiding){var e=this.network.layout,n=null,o=null;switch(e.md){case fs:n=this.fromVertex,o=this.toVertex;break;case Qh:n=this.toVertex,o=this.fromVertex;break;default:W("Unhandled path value "+e.md.toString())}if(null!==n&&null!==o)if(0!==(e=this.kv).x||0!==e.y||n.XA){o=n.bounds;var a=co(n),u=Ap(n),h=n.rowSpacing;t.xj();var g,f=t.curve===vr,p=t.isOrthogonal;if(t.Sh(),p||f){for(g=2;4<t.pointsCount;)t.uw(2);var y=t.i(1),v=t.i(2)}else{for(g=1;3<t.pointsCount;)t.uw(1);y=t.i(0),v=t.i(t.pointsCount-1)}var x=t.i(t.pointsCount-1);0===a?(n.alignment===ps?(a=o.bottom+e.y,0===e.y&&y.y>x.y+n.rowIndent&&(a=Math.min(a,Math.max(y.y,a-ml(n))))):n.alignment===ds?(a=o.top+e.y,0===e.y&&y.y<x.y-n.rowIndent&&(a=Math.max(a,Math.min(y.y,a+ml(n))))):a=n.Rm||n.Sm&&1===n.maxGenerationCount?o.top-n.fa.y+e.y:o.y+o.height/2+e.y,f?(t.m(g,y.x,a),g++,t.m(g,o.right+u,a),g++,t.m(g,o.right+u+(e.x-h)/3,a),g++,t.m(g,o.right+u+2*(e.x-h)/3,a),g++,t.m(g,o.right+u+(e.x-h),a),g++,t.m(g,v.x,a)):(p&&(t.m(g,o.right+u/2,y.y),g++),t.m(g,o.right+u/2,a),g++,t.m(g,o.right+u+e.x-(p?h/2:h),a),g++,p&&t.m(g,t.i(g-1).x,v.y))):90===a?(n.alignment===ps?(a=o.right+e.x,0===e.x&&y.x>x.x+n.rowIndent&&(a=Math.min(a,Math.max(y.x,a-ml(n))))):n.alignment===ds?(a=o.left+e.x,0===e.x&&y.x<x.x-n.rowIndent&&(a=Math.max(a,Math.min(y.x,a+ml(n))))):a=n.Rm||n.Sm&&1===n.maxGenerationCount?o.left-n.fa.x+e.x:o.x+o.width/2+e.x,f?(t.m(g,a,y.y),g++,t.m(g,a,o.bottom+u),g++,t.m(g,a,o.bottom+u+(e.y-h)/3),g++,t.m(g,a,o.bottom+u+2*(e.y-h)/3),g++,t.m(g,a,o.bottom+u+(e.y-h)),g++,t.m(g,a,v.y)):(p&&(t.m(g,y.x,o.bottom+u/2),g++),t.m(g,a,o.bottom+u/2),g++,t.m(g,a,o.bottom+u+e.y-(p?h/2:h)),g++,p&&t.m(g,v.x,t.i(g-1).y))):180===a?(n.alignment===ps?(a=o.bottom+e.y,0===e.y&&y.y>x.y+n.rowIndent&&(a=Math.min(a,Math.max(y.y,a-ml(n))))):n.alignment===ds?(a=o.top+e.y,0===e.y&&y.y<x.y-n.rowIndent&&(a=Math.max(a,Math.min(y.y,a+ml(n))))):a=n.Rm||n.Sm&&1===n.maxGenerationCount?o.top-n.fa.y+e.y:o.y+o.height/2+e.y,f?(t.m(g,y.x,a),g++,t.m(g,o.left-u,a),g++,t.m(g,o.left-u+(e.x+h)/3,a),g++,t.m(g,o.left-u+2*(e.x+h)/3,a),g++,t.m(g,o.left-u+(e.x+h),a),g++,t.m(g,v.x,a)):(p&&(t.m(g,o.left-u/2,y.y),g++),t.m(g,o.left-u/2,a),g++,t.m(g,o.left-u+e.x+(p?h/2:h),a),g++,p&&t.m(g,t.i(g-1).x,v.y))):270===a?(n.alignment===ps?(a=o.right+e.x,0===e.x&&y.x>x.x+n.rowIndent&&(a=Math.min(a,Math.max(y.x,a-ml(n))))):n.alignment===ds?(a=o.left+e.x,0===e.x&&y.x<x.x-n.rowIndent&&(a=Math.max(a,Math.min(y.x,a+ml(n))))):a=n.Rm||n.Sm&&1===n.maxGenerationCount?o.left-n.fa.x+e.x:o.x+o.width/2+e.x,f?(t.m(g,a,y.y),g++,t.m(g,a,o.top-u),g++,t.m(g,a,o.top-u+(e.y+h)/3),g++,t.m(g,a,o.top-u+2*(e.y+h)/3),g++,t.m(g,a,o.top-u+(e.y+h)),g++,t.m(g,a,v.y)):(p&&(t.m(g,y.x,o.top-u/2),g++),t.m(g,a,o.top-u/2),g++,t.m(g,a,o.top-u+e.y+(p?h/2:h)),g++,p&&t.m(g,v.x,t.i(g-1).y))):W("Invalid angle "+a),t.zf()}else t=this.link,(u=co(n))!==co(o)&&(h=Ap(n),f=n.bounds,n=o.bounds,0===u&&n.left-f.right<h+1||90===u&&n.top-f.bottom<h+1||180===u&&f.left-n.right<h+1||270===u&&f.top-n.bottom<h+1||(t.xj(),n=t.curve===vr,e=t.isOrthogonal,o=xa(this.fromVertex.alignment),t.Sh(),0===u?(u=f.right+h/2,n?4===t.pointsCount&&(n=t.i(3).y,t.L(1,u-20,t.i(1).y),t.m(2,u-20,n),t.m(3,u,n),t.m(4,u+20,n),t.L(5,t.i(5).x,n)):e?o?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,u,t.i(2).y),t.L(3,u,t.i(3).y)):4===t.pointsCount?t.m(2,u,t.i(2).y):3===t.pointsCount?t.L(1,u,t.i(2).y):2===t.pointsCount&&t.m(1,u,t.i(1).y)):90===u?(u=f.bottom+h/2,n?4===t.pointsCount&&(n=t.i(3).x,t.L(1,t.i(1).x,u-20),t.m(2,n,u-20),t.m(3,n,u),t.m(4,n,u+20),t.L(5,n,t.i(5).y)):e?o?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,t.i(2).x,u),t.L(3,t.i(3).x,u)):4===t.pointsCount?t.m(2,t.i(2).x,u):3===t.pointsCount?t.L(1,t.i(2).x,u):2===t.pointsCount&&t.m(1,t.i(1).x,u)):180===u?(u=f.left-h/2,n?4===t.pointsCount&&(n=t.i(3).y,t.L(1,u+20,t.i(1).y),t.m(2,u+20,n),t.m(3,u,n),t.m(4,u-20,n),t.L(5,t.i(5).x,n)):e?o?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,u,t.i(2).y),t.L(3,u,t.i(3).y)):4===t.pointsCount?t.m(2,u,t.i(2).y):3===t.pointsCount?t.L(1,u,t.i(2).y):2===t.pointsCount&&t.m(1,u,t.i(1).y)):270===u&&(u=f.top-h/2,n?4===t.pointsCount&&(n=t.i(3).x,t.L(1,t.i(1).x,u+20),t.m(2,n,u+20),t.m(3,n,u),t.m(4,n,u-20),t.L(5,n,t.i(5).y)):e?o?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,t.i(2).x,u),t.L(3,t.i(3).x,u)):4===t.pointsCount?t.m(2,t.i(2).x,u):3===t.pointsCount?t.L(1,t.i(2).x,u):2===t.pointsCount&&t.m(1,t.i(1).x,u)),t.zf()))}},L.Object.defineProperties(_f.prototype,{fromVertex:{get:function(){return this.$c},set:function(t){this.$c!==t&&(this.$c=t)}},toVertex:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this.gd=t)}},relativePoint:{get:function(){return this.kv},set:function(t){this.kv.set(t)}}}),_f.className="TreeEdge",Fe.prototype.initializeStandardTools=function(){this.Xa("Action",new Ol,this.mouseDownTools),this.Xa("Relinking",new Or,this.mouseDownTools),this.Xa("LinkReshaping",new Re,this.mouseDownTools),this.Xa("Rotating",new zr,this.mouseDownTools),this.Xa("Resizing",new mi,this.mouseDownTools),this.Xa("Linking",new Zi,this.mouseMoveTools),this.Xa("Dragging",new ze,this.mouseMoveTools),this.Xa("DragSelecting",new ss,this.mouseMoveTools),this.Xa("Panning",new Ts,this.mouseMoveTools),this.Xa("ContextMenu",new $r,this.mouseUpTools),this.Xa("TextEditing",new ae,this.mouseUpTools),this.Xa("ClickCreating",new Rn,this.mouseUpTools),this.Xa("ClickSelecting",new xu,this.mouseUpTools)},hs("Horizontal",new Xg),hs("Spot",new ef),hs("Table",new nf),hs("Viewbox",new Jg),hs("TableRow",new Id),hs("TableColumn",new Zg),hs("Graduated",new qg),hs("Grid",new Od),_v.add("GraphLinksModel",kn),_v.add("TreeModel",wr),up(hn,null),up(ee,null);var oy=U.go,sy={get licenseKey(){return V.licenseKey},set licenseKey(t){V.licenseKey=t},get version(){return V.version},Group:Pt,EnumValue:it,List:lt,Set:nt,Map:Et,Point:A,Size:Nt,Rect:z,Margin:te,Spot:at,Geometry:It,PathFigure:nn,PathSegment:Ct,InputEvent:Qn,DiagramEvent:ve,ChangedEvent:De,Model:dt,GraphLinksModel:Vt,TreeModel:xi,Binding:sn,Transaction:Mn,UndoManager:Le,CommandHandler:ne,Tool:Rt,DraggingTool:ze,DraggingInfo:Ps,DraggingOptions:Rl,LinkingBaseTool:_n,LinkingTool:Zi,RelinkingTool:Or,LinkReshapingTool:Re,ResizingTool:mi,RotatingTool:zr,ClickSelectingTool:xu,ActionTool:Ol,ClickCreatingTool:Rn,HTMLInfo:jn,ContextMenuTool:$r,DragSelectingTool:ss,PanningTool:Ts,TextEditingTool:ae,ToolManager:Fe,Animation:ti,AnimationManager:Yn,AnimationTrigger:as,Layer:Nn,Diagram:V,Palette:wh,Overview:Qa,Brush:Xt,GraphObject:Z,Panel:X,RowColumnDefinition:gn,Shape:At,TextBlock:le,TextBlockMetrics:pm,Picture:Ho,Part:wt,Adornment:Gt,Node:ot,Link:Q,Placeholder:Ni,Layout:Wt,LayoutNetwork:re,LayoutVertex:on,LayoutEdge:Xn,GridLayout:Hn,PanelLayout:Bn,CircularLayout:Te,CircularNetwork:va,CircularVertex:gl,CircularEdge:Zl,ForceDirectedLayout:hn,ForceDirectedNetwork:Yu,ForceDirectedVertex:Zh,ForceDirectedEdge:Mr,LayeredDigraphLayout:ee,LayeredDigraphNetwork:Cf,LayeredDigraphVertex:Ui,LayeredDigraphEdge:Hi,TreeLayout:bt,TreeNetwork:Xu,TreeVertex:fo,TreeEdge:_f};"object"==typeof oy&&oy.version&&W("WARNING: a `go` object on the root object is already defined.  "+("Debug"in oy?"debug ":"")+"version: "+oy.version+", replaced with version: "+sy.version),V.prototype.go=sy,U.go=sy,(void 0===U||void 0===U.module||"object"!=typeof U.module.exports)&&U.define&&"function"==typeof U.define&&U.define.amd&&U.define(sy),"object"==typeof Yt.exports&&(Yt.exports="undefined"!=typeof global?global.go:self.go)}()},764:Yt=>{try{Yt.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(D){Yt.exports=!1}},366:Yt=>{var D=1e3,ft=60*D,yt=60*ft,St=24*yt;function J(Y,L,G,st){var U=L>=1.5*G;return Math.round(Y/G)+" "+st+(U?"s":"")}Yt.exports=function(Y,L){L=L||{};var G=typeof Y;if("string"===G&&Y.length>0)return function xt(Y){if(!((Y=String(Y)).length>100)){var L=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Y);if(L){var G=parseFloat(L[1]);switch((L[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*G;case"weeks":case"week":case"w":return 6048e5*G;case"days":case"day":case"d":return G*St;case"hours":case"hour":case"hrs":case"hr":case"h":return G*yt;case"minutes":case"minute":case"mins":case"min":case"m":return G*ft;case"seconds":case"second":case"secs":case"sec":case"s":return G*D;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return G;default:return}}}}(Y);if("number"===G&&isFinite(Y))return L.long?function ut(Y){var L=Math.abs(Y);return L>=St?J(Y,L,St,"day"):L>=yt?J(Y,L,yt,"hour"):L>=ft?J(Y,L,ft,"minute"):L>=D?J(Y,L,D,"second"):Y+" ms"}(Y):function gt(Y){var L=Math.abs(Y);return L>=St?Math.round(Y/St)+"d":L>=yt?Math.round(Y/yt)+"h":L>=ft?Math.round(Y/ft)+"m":L>=D?Math.round(Y/D)+"s":Y+"ms"}(Y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(Y))}},257:(Yt,D)=>{D.encode=function(ft){var yt="";for(var St in ft)ft.hasOwnProperty(St)&&(yt.length&&(yt+="&"),yt+=encodeURIComponent(St)+"="+encodeURIComponent(ft[St]));return yt},D.decode=function(ft){for(var yt={},St=ft.split("&"),Mt=0,q=St.length;Mt<q;Mt++){var xt=St[Mt].split("=");yt[decodeURIComponent(xt[0])]=decodeURIComponent(xt[1])}return yt}},884:Yt=>{var D=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ft=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];Yt.exports=function(q){var xt=q,gt=q.indexOf("["),ut=q.indexOf("]");-1!=gt&&-1!=ut&&(q=q.substring(0,gt)+q.substring(gt,ut).replace(/:/g,";")+q.substring(ut,q.length));for(var J=D.exec(q||""),Y={},L=14;L--;)Y[ft[L]]=J[L]||"";return-1!=gt&&-1!=ut&&(Y.source=xt,Y.host=Y.host.substring(1,Y.host.length-1).replace(/;/g,":"),Y.authority=Y.authority.replace("[","").replace("]","").replace(/;/g,":"),Y.ipv6uri=!0),Y.pathNames=function yt(Mt,q){var gt=q.replace(/\/{2,9}/g,"/").split("/");return("/"==q.substr(0,1)||0===q.length)&&gt.splice(0,1),"/"==q.substr(q.length-1,1)&&gt.splice(gt.length-1,1),gt}(0,Y.path),Y.queryKey=function St(Mt,q){var xt={};return q.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(gt,ut,J){ut&&(xt[ut]=J)}),xt}(0,Y.query),Y}},336:(Yt,D,ft)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.reconstructPacket=D.deconstructPacket=void 0;const yt=ft(761);function Mt(gt,ut){if(!gt)return gt;if(yt.isBinary(gt)){const J={_placeholder:!0,num:ut.length};return ut.push(gt),J}if(Array.isArray(gt)){const J=new Array(gt.length);for(let Y=0;Y<gt.length;Y++)J[Y]=Mt(gt[Y],ut);return J}if("object"==typeof gt&&!(gt instanceof Date)){const J={};for(const Y in gt)gt.hasOwnProperty(Y)&&(J[Y]=Mt(gt[Y],ut));return J}return gt}function xt(gt,ut){if(!gt)return gt;if(gt&&gt._placeholder)return ut[gt.num];if(Array.isArray(gt))for(let J=0;J<gt.length;J++)gt[J]=xt(gt[J],ut);else if("object"==typeof gt)for(const J in gt)gt.hasOwnProperty(J)&&(gt[J]=xt(gt[J],ut));return gt}D.deconstructPacket=function St(gt){const ut=[],Y=gt;return Y.data=Mt(gt.data,ut),Y.attachments=ut.length,{packet:Y,buffers:ut}},D.reconstructPacket=function q(gt,ut){return gt.data=xt(gt.data,ut),gt.attachments=void 0,gt}},94:(Yt,D,ft)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.Decoder=D.Encoder=D.PacketType=D.protocol=void 0;const yt=ft(264),St=ft(336),Mt=ft(761),q=ft(455)("socket.io-parser");var xt,L;D.protocol=5,(L=xt=D.PacketType||(D.PacketType={}))[L.CONNECT=0]="CONNECT",L[L.DISCONNECT=1]="DISCONNECT",L[L.EVENT=2]="EVENT",L[L.ACK=3]="ACK",L[L.CONNECT_ERROR=4]="CONNECT_ERROR",L[L.BINARY_EVENT=5]="BINARY_EVENT",L[L.BINARY_ACK=6]="BINARY_ACK",D.Encoder=class gt{encode(G){return q("encoding packet %j",G),G.type!==xt.EVENT&&G.type!==xt.ACK||!Mt.hasBinary(G)?[this.encodeAsString(G)]:(G.type=G.type===xt.EVENT?xt.BINARY_EVENT:xt.BINARY_ACK,this.encodeAsBinary(G))}encodeAsString(G){let st=""+G.type;return(G.type===xt.BINARY_EVENT||G.type===xt.BINARY_ACK)&&(st+=G.attachments+"-"),G.nsp&&"/"!==G.nsp&&(st+=G.nsp+","),null!=G.id&&(st+=G.id),null!=G.data&&(st+=JSON.stringify(G.data)),q("encoded %j as %s",G,st),st}encodeAsBinary(G){const st=St.deconstructPacket(G),U=this.encodeAsString(st.packet),Bt=st.buffers;return Bt.unshift(U),Bt}};class ut extends yt{constructor(){super()}add(G){let st;if("string"==typeof G)st=this.decodeString(G),st.type===xt.BINARY_EVENT||st.type===xt.BINARY_ACK?(this.reconstructor=new Y(st),0===st.attachments&&super.emit("decoded",st)):super.emit("decoded",st);else{if(!Mt.isBinary(G)&&!G.base64)throw new Error("Unknown type: "+G);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");st=this.reconstructor.takeBinaryData(G),st&&(this.reconstructor=null,super.emit("decoded",st))}}decodeString(G){let st=0;const U={type:Number(G.charAt(0))};if(void 0===xt[U.type])throw new Error("unknown packet type "+U.type);if(U.type===xt.BINARY_EVENT||U.type===xt.BINARY_ACK){const kt=st+1;for(;"-"!==G.charAt(++st)&&st!=G.length;);const he=G.substring(kt,st);if(he!=Number(he)||"-"!==G.charAt(st))throw new Error("Illegal attachments");U.attachments=Number(he)}if("/"===G.charAt(st+1)){const kt=st+1;for(;++st&&","!==G.charAt(st)&&st!==G.length;);U.nsp=G.substring(kt,st)}else U.nsp="/";const Bt=G.charAt(st+1);if(""!==Bt&&Number(Bt)==Bt){const kt=st+1;for(;++st;){const he=G.charAt(st);if(null==he||Number(he)!=he){--st;break}if(st===G.length)break}U.id=Number(G.substring(kt,st+1))}if(G.charAt(++st)){const kt=function J(L){try{return JSON.parse(L)}catch(G){return!1}}(G.substr(st));if(!ut.isPayloadValid(U.type,kt))throw new Error("invalid payload");U.data=kt}return q("decoded %s as %j",G,U),U}static isPayloadValid(G,st){switch(G){case xt.CONNECT:return"object"==typeof st;case xt.DISCONNECT:return void 0===st;case xt.CONNECT_ERROR:return"string"==typeof st||"object"==typeof st;case xt.EVENT:case xt.BINARY_EVENT:return Array.isArray(st)&&st.length>0;case xt.ACK:case xt.BINARY_ACK:return Array.isArray(st)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}D.Decoder=ut;class Y{constructor(G){this.packet=G,this.buffers=[],this.reconPack=G}takeBinaryData(G){if(this.buffers.push(G),this.buffers.length===this.reconPack.attachments){const st=St.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),st}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},761:(Yt,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.hasBinary=D.isBinary=void 0;const ft="function"==typeof ArrayBuffer,St=Object.prototype.toString,Mt="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===St.call(Blob),q="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===St.call(File);function xt(ut){return ft&&(ut instanceof ArrayBuffer||(ut=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(ut):ut.buffer instanceof ArrayBuffer)(ut))||Mt&&ut instanceof Blob||q&&ut instanceof File}D.isBinary=xt,D.hasBinary=function gt(ut,J){if(!ut||"object"!=typeof ut)return!1;if(Array.isArray(ut)){for(let Y=0,L=ut.length;Y<L;Y++)if(gt(ut[Y]))return!0;return!1}if(xt(ut))return!0;if(ut.toJSON&&"function"==typeof ut.toJSON&&1===arguments.length)return gt(ut.toJSON(),!0);for(const Y in ut)if(Object.prototype.hasOwnProperty.call(ut,Y)&&gt(ut[Y]))return!0;return!1}},379:Yt=>{"use strict";var q,D="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),yt={},St=0,Mt=0;function xt(J){var Y="";do{Y=D[J%64]+Y,J=Math.floor(J/64)}while(J>0);return Y}function ut(){var J=xt(+new Date);return J!==q?(St=0,q=J):J+"."+xt(St++)}for(;Mt<64;Mt++)yt[D[Mt]]=Mt;ut.encode=xt,ut.decode=function gt(J){var Y=0;for(Mt=0;Mt<J.length;Mt++)Y=64*Y+yt[J.charAt(Mt)];return Y},Yt.exports=ut},450:(Yt,D,ft)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.io=D.Socket=D.Manager=D.protocol=void 0;const yt=ft(320),St=ft(707),Mt=ft(455)("socket.io-client");Yt.exports=D=xt;const q=D.managers={};function xt(Y,L){"object"==typeof Y&&(L=Y,Y=void 0);const G=yt.url(Y,(L=L||{}).path||"/socket.io"),st=G.source,U=G.id;let Ke;return L.forceNew||L["force new connection"]||!1===L.multiplex||q[U]&&G.path in q[U].nsps?(Mt("ignoring socket cache for %s",st),Ke=new St.Manager(st,L)):(q[U]||(Mt("new io instance for %s",st),q[U]=new St.Manager(st,L)),Ke=q[U]),G.query&&!L.query&&(L.query=G.queryKey),Ke.socket(G.path,L)}D.io=xt;var gt=ft(94);Object.defineProperty(D,"protocol",{enumerable:!0,get:function(){return gt.protocol}}),D.connect=xt;var ut=ft(707);Object.defineProperty(D,"Manager",{enumerable:!0,get:function(){return ut.Manager}});var J=ft(745);Object.defineProperty(D,"Socket",{enumerable:!0,get:function(){return J.Socket}}),D.default=xt},707:(Yt,D,ft)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.Manager=void 0;const yt=ft(410),St=ft(745),Mt=ft(94),q=ft(825),xt=ft(150),gt=ft(684),ut=ft(455)("socket.io-client:manager");D.Manager=class J extends gt.StrictEventEmitter{constructor(L,G){super(),this.nsps={},this.subs=[],L&&"object"==typeof L&&(G=L,L=void 0),(G=G||{}).path=G.path||"/socket.io",this.opts=G,this.reconnection(!1!==G.reconnection),this.reconnectionAttempts(G.reconnectionAttempts||1/0),this.reconnectionDelay(G.reconnectionDelay||1e3),this.reconnectionDelayMax(G.reconnectionDelayMax||5e3),this.randomizationFactor(G.randomizationFactor||.5),this.backoff=new xt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==G.timeout?2e4:G.timeout),this._readyState="closed",this.uri=L;const st=G.parser||Mt;this.encoder=new st.Encoder,this.decoder=new st.Decoder,this._autoConnect=!1!==G.autoConnect,this._autoConnect&&this.open()}reconnection(L){return arguments.length?(this._reconnection=!!L,this):this._reconnection}reconnectionAttempts(L){return void 0===L?this._reconnectionAttempts:(this._reconnectionAttempts=L,this)}reconnectionDelay(L){var G;return void 0===L?this._reconnectionDelay:(this._reconnectionDelay=L,null===(G=this.backoff)||void 0===G||G.setMin(L),this)}randomizationFactor(L){var G;return void 0===L?this._randomizationFactor:(this._randomizationFactor=L,null===(G=this.backoff)||void 0===G||G.setJitter(L),this)}reconnectionDelayMax(L){var G;return void 0===L?this._reconnectionDelayMax:(this._reconnectionDelayMax=L,null===(G=this.backoff)||void 0===G||G.setMax(L),this)}timeout(L){return arguments.length?(this._timeout=L,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(L){if(ut("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;ut("opening %s",this.uri),this.engine=yt(this.uri,this.opts);const G=this.engine,st=this;this._readyState="opening",this.skipReconnect=!1;const U=q.on(G,"open",function(){st.onopen(),L&&L()}),Bt=q.on(G,"error",kt=>{ut("error"),st.cleanup(),st._readyState="closed",this.emitReserved("error",kt),L?L(kt):st.maybeReconnectOnOpen()});if(!1!==this._timeout){const kt=this._timeout;ut("connect attempt will timeout after %d",kt),0===kt&&U();const he=setTimeout(()=>{ut("connect attempt timed out after %d",kt),U(),G.close(),G.emit("error",new Error("timeout"))},kt);this.opts.autoUnref&&he.unref(),this.subs.push(function(){clearTimeout(he)})}return this.subs.push(U),this.subs.push(Bt),this}connect(L){return this.open(L)}onopen(){ut("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const L=this.engine;this.subs.push(q.on(L,"ping",this.onping.bind(this)),q.on(L,"data",this.ondata.bind(this)),q.on(L,"error",this.onerror.bind(this)),q.on(L,"close",this.onclose.bind(this)),q.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(L){this.decoder.add(L)}ondecoded(L){this.emitReserved("packet",L)}onerror(L){ut("error",L),this.emitReserved("error",L)}socket(L,G){let st=this.nsps[L];return st||(st=new St.Socket(this,L,G),this.nsps[L]=st),st}_destroy(L){const G=Object.keys(this.nsps);for(const st of G)if(this.nsps[st].active)return void ut("socket %s is still active, skipping close",st);this._close()}_packet(L){ut("writing packet %j",L);const G=this.encoder.encode(L);for(let st=0;st<G.length;st++)this.engine.write(G[st],L.options)}cleanup(){ut("cleanup"),this.subs.forEach(L=>L()),this.subs.length=0,this.decoder.destroy()}_close(){ut("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(L){ut("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",L),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const L=this;if(this.backoff.attempts>=this._reconnectionAttempts)ut("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const G=this.backoff.duration();ut("will wait %dms before reconnect attempt",G),this._reconnecting=!0;const st=setTimeout(()=>{L.skipReconnect||(ut("attempting reconnect"),this.emitReserved("reconnect_attempt",L.backoff.attempts),!L.skipReconnect&&L.open(U=>{U?(ut("reconnect attempt error"),L._reconnecting=!1,L.reconnect(),this.emitReserved("reconnect_error",U)):(ut("reconnect success"),L.onreconnect())}))},G);this.opts.autoUnref&&st.unref(),this.subs.push(function(){clearTimeout(st)})}}onreconnect(){const L=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",L)}}},825:(Yt,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.on=void 0,D.on=function ft(yt,St,Mt){return yt.on(St,Mt),function(){yt.off(St,Mt)}}},745:(Yt,D,ft)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.Socket=void 0;const yt=ft(94),St=ft(825),Mt=ft(684),q=ft(455)("socket.io-client:socket"),xt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});D.Socket=class gt extends Mt.StrictEventEmitter{constructor(J,Y,L){super(),this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=J,this.nsp=Y,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},L&&L.auth&&(this.auth=L.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const J=this.io;this.subs=[St.on(J,"open",this.onopen.bind(this)),St.on(J,"packet",this.onpacket.bind(this)),St.on(J,"error",this.onerror.bind(this)),St.on(J,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...J){return J.unshift("message"),this.emit.apply(this,J),this}emit(J,...Y){if(xt.hasOwnProperty(J))throw new Error('"'+J+'" is a reserved event name');Y.unshift(J);const L={type:yt.PacketType.EVENT,data:Y,options:{}};return L.options.compress=!1!==this.flags.compress,"function"==typeof Y[Y.length-1]&&(q("emitting packet with ack id %d",this.ids),this.acks[this.ids]=Y.pop(),L.id=this.ids++),!this.flags.volatile||this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable&&this.connected?this.connected?this.packet(L):this.sendBuffer.push(L):q("discard packet as the transport is not currently writable"),this.flags={},this}packet(J){J.nsp=this.nsp,this.io._packet(J)}onopen(){q("transport is open - connecting"),"function"==typeof this.auth?this.auth(J=>{this.packet({type:yt.PacketType.CONNECT,data:J})}):this.packet({type:yt.PacketType.CONNECT,data:this.auth})}onerror(J){this.connected||this.emitReserved("connect_error",J)}onclose(J){q("close (%s)",J),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",J)}onpacket(J){if(J.nsp===this.nsp)switch(J.type){case yt.PacketType.CONNECT:J.data&&J.data.sid?this.onconnect(J.data.sid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case yt.PacketType.EVENT:case yt.PacketType.BINARY_EVENT:this.onevent(J);break;case yt.PacketType.ACK:case yt.PacketType.BINARY_ACK:this.onack(J);break;case yt.PacketType.DISCONNECT:this.ondisconnect();break;case yt.PacketType.CONNECT_ERROR:const L=new Error(J.data.message);L.data=J.data.data,this.emitReserved("connect_error",L)}}onevent(J){const Y=J.data||[];q("emitting event %j",Y),null!=J.id&&(q("attaching ack callback to event"),Y.push(this.ack(J.id))),this.connected?this.emitEvent(Y):this.receiveBuffer.push(Object.freeze(Y))}emitEvent(J){if(this._anyListeners&&this._anyListeners.length){const Y=this._anyListeners.slice();for(const L of Y)L.apply(this,J)}super.emit.apply(this,J)}ack(J){const Y=this;let L=!1;return function(...G){L||(L=!0,q("sending ack %j",G),Y.packet({type:yt.PacketType.ACK,id:J,data:G}))}}onack(J){const Y=this.acks[J.id];"function"==typeof Y?(q("calling ack %s with %j",J.id,J.data),Y.apply(this,J.data),delete this.acks[J.id]):q("bad ack %s",J.id)}onconnect(J){q("socket connected with id %s",J),this.id=J,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(J=>this.emitEvent(J)),this.receiveBuffer=[],this.sendBuffer.forEach(J=>this.packet(J)),this.sendBuffer=[]}ondisconnect(){q("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(J=>J()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(q("performing disconnect (%s)",this.nsp),this.packet({type:yt.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(J){return this.flags.compress=J,this}get volatile(){return this.flags.volatile=!0,this}onAny(J){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(J),this}prependAny(J){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(J),this}offAny(J){if(!this._anyListeners)return this;if(J){const Y=this._anyListeners;for(let L=0;L<Y.length;L++)if(J===Y[L])return Y.splice(L,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}},684:(Yt,D,ft)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.StrictEventEmitter=void 0;const yt=ft(264);D.StrictEventEmitter=class St extends yt{on(q,xt){return super.on(q,xt),this}once(q,xt){return super.once(q,xt),this}emit(q,...xt){return super.emit(q,...xt),this}emitReserved(q,...xt){return super.emit(q,...xt),this}listeners(q){return super.listeners(q)}}},320:(Yt,D,ft)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.url=void 0;const yt=ft(884),St=ft(455)("socket.io-client:url");D.url=function Mt(q,xt="",gt){let ut=q;gt=gt||"undefined"!=typeof location&&location,null==q&&(q=gt.protocol+"//"+gt.host),"string"==typeof q&&("/"===q.charAt(0)&&(q="/"===q.charAt(1)?gt.protocol+q:gt.host+q),/^(https?|wss?):\/\//.test(q)||(St("protocol-less url %s",q),q=void 0!==gt?gt.protocol+"//"+q:"https://"+q),St("parse %s",q),ut=yt(q)),ut.port||(/^(http|ws)$/.test(ut.protocol)?ut.port="80":/^(http|ws)s$/.test(ut.protocol)&&(ut.port="443")),ut.path=ut.path||"/";const Y=-1!==ut.host.indexOf(":")?"["+ut.host+"]":ut.host;return ut.id=ut.protocol+"://"+Y+":"+ut.port+xt,ut.href=ut.protocol+"://"+Y+(gt&&gt.port===ut.port?"":":"+ut.port),ut}}},Yt=>{Yt(Yt.s=398)}]);